(function(so){typeof define=="function"&&define.amd?define(so):so()})(function(){"use strict";var so=document.createElement("style");so.textContent=`body{margin:0;padding:0}@font-face{font-family:swiper-icons;src:url(data:application/font-woff;charset=utf-8;base64,\\ d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA);font-weight:400;font-style:normal}:root{--swiper-theme-color: #007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function, initial);box-sizing:content-box}.swiper-android .swiper-slide,.swiper-ios .swiper-slide,.swiper-wrapper{transform:translateZ(0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}.swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-slide,.swiper-3d .swiper-cube-shadow{transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper:before{content:"";flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper:before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper:before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top,.swiper-3d .swiper-slide-shadow-bottom{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-3d .swiper-slide-shadow{background:#00000026}.swiper-3d .swiper-slide-shadow-left{background-image:linear-gradient(to left,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-right{background-image:linear-gradient(to right,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-top{background-image:linear-gradient(to top,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(to bottom,#00000080,#0000)}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color, var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper:not(.swiper-watch-progress) .swiper-lazy-preloader,.swiper-watch-progress .swiper-slide-visible .swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear}.swiper-lazy-preloader-white{--swiper-preloader-color: #fff}.swiper-lazy-preloader-black{--swiper-preloader-color: #000}@keyframes swiper-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.swiper-virtual .swiper-slide{-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper:after{content:"";position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper:after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper:after{width:1px;height:var(--swiper-virtual-size)}:root{--swiper-navigation-size: 44px}.swiper-button-prev,.swiper-button-next{position:absolute;top:var(--swiper-navigation-top-offset, 50%);width:calc(var(--swiper-navigation-size) / 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size) / 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color, var(--swiper-theme-color))}.swiper-button-prev.swiper-button-disabled,.swiper-button-next.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-prev.swiper-button-hidden,.swiper-button-next.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-prev,.swiper-navigation-disabled .swiper-button-next{display:none!important}.swiper-button-prev svg,.swiper-button-next svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-prev svg,.swiper-rtl .swiper-button-next svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset, 10px);right:auto}.swiper-button-lock{display:none}.swiper-button-prev:after,.swiper-button-next:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);text-transform:none!important;letter-spacing:0;font-variant:initial;line-height:1}.swiper-button-prev:after,.swiper-rtl .swiper-button-next:after{content:"prev"}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset, 10px);left:auto}.swiper-button-next:after,.swiper-rtl .swiper-button-prev:after{content:"next"}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translateZ(0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-pagination-fraction,.swiper-pagination-custom,.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal{bottom:var(--swiper-pagination-bottom, 8px);top:var(--swiper-pagination-top, auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active,.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width, var(--swiper-pagination-bullet-size, 8px));height:var(--swiper-pagination-bullet-height, var(--swiper-pagination-bullet-size, 8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius, 50%);background:var(--swiper-pagination-bullet-inactive-color, #000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color, var(--swiper-theme-color))}.swiper-vertical>.swiper-pagination-bullets,.swiper-pagination-vertical.swiper-pagination-bullets{right:var(--swiper-pagination-right, 8px);left:var(--swiper-pagination-left, auto);top:50%;transform:translate3d(0,-50%,0)}.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap, 6px) 0;display:block}.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap, 4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translate(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color, inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color, rgba(0, 0, 0, .25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color, var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size, 4px);left:0;top:0}.swiper-vertical>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite{width:var(--swiper-pagination-progressbar-size, 4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius, 10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color, rgba(0, 0, 0, .1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset, 1%);bottom:var(--swiper-scrollbar-bottom, 4px);top:var(--swiper-scrollbar-top, auto);z-index:50;height:var(--swiper-scrollbar-size, 4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset, 1%))}.swiper-vertical>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-vertical{position:absolute;left:var(--swiper-scrollbar-left, auto);right:var(--swiper-scrollbar-right, 4px);top:var(--swiper-scrollbar-sides-offset, 1%);z-index:50;width:var(--swiper-scrollbar-size, 4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset, 1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color, rgba(0, 0, 0, .5));border-radius:var(--swiper-scrollbar-border-radius, 10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}.swiper-zoom-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}.swiper-zoom-container>img,.swiper-zoom-container>svg,.swiper-zoom-container>canvas{max-width:100%;max-height:100%;object-fit:contain}.swiper-slide-zoomed{cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode .swiper-slide{transition-timing-function:ease-out}.swiper-fade .swiper-slide{pointer-events:none;transition-property:opacity}.swiper-fade .swiper-slide .swiper-slide{pointer-events:none}.swiper-fade .swiper-slide-active,.swiper-fade .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper.swiper-cube{overflow:visible}.swiper-cube .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube .swiper-slide .swiper-slide{pointer-events:none}.swiper-cube.swiper-rtl .swiper-slide{transform-origin:100% 0}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-next,.swiper-cube .swiper-slide-prev{pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:"";background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube .swiper-slide-next+.swiper-slide{pointer-events:auto;visibility:visible}.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-top,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-bottom,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-left,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-right{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper.swiper-flip{overflow:visible}.swiper-flip .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip .swiper-slide .swiper-slide{pointer-events:none}.swiper-flip .swiper-slide-active,.swiper-flip .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-top,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-bottom,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-left,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-right{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-creative .swiper-slide{-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper.swiper-cards{overflow:visible}.swiper-cards .swiper-slide{transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}
/*$vite$:1*/`,document.head.appendChild(so);function er(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ap(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Xi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Qs={duration:.5,overwrite:!1,delay:0},Du,fi,Dt,on=1e8,Tt=1/on,Iu=Math.PI*2,Fy=Iu/4,By=0,op=Math.sqrt,zy=Math.cos,Vy=Math.sin,ei=function(e){return typeof e=="string"},Bt=function(e){return typeof e=="function"},tr=function(e){return typeof e=="number"},Ou=function(e){return typeof e>"u"},In=function(e){return typeof e=="object"},Ui=function(e){return e!==!1},Nu=function(){return typeof window<"u"},Dl=function(e){return Bt(e)||ei(e)},lp=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},hi=Array.isArray,Uu=/(?:-?\.?\d|\.)+/gi,cp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Js=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ku=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,up=/[+-]=-?[.\d]+/,dp=/[^,'"\[\]\s]+/gi,Hy=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Nt,On,Fu,Bu,$i={},Il={},fp,hp=function(e){return(Il=ss(e,$i))&&Bi},zu=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ao=function(e,t){return!t&&console.warn(e)},pp=function(e,t){return e&&($i[e]=t)&&Il&&(Il[e]=t)||$i},oo=function(){return 0},Gy={suppressEvents:!0,isStart:!0,kill:!1},Ol={suppressEvents:!0,kill:!1},Wy={suppressEvents:!0},Vu={},wr=[],Hu={},mp,qi={},Gu={},gp=30,Nl=[],Wu="",Xu=function(e){var t=e[0],i,r;if(In(t)||Bt(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=Nl.length;r--&&!Nl[r].targetTest(t););i=Nl[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Xp(e[r],i)))||e.splice(r,1);return e},rs=function(e){return e._gsap||Xu(un(e))[0]._gsap},vp=function(e,t,i){return(i=e[t])&&Bt(i)?e[t]():Ou(i)&&e.getAttribute&&e.getAttribute(t)||i},ki=function(e,t){return(e=e.split(",")).forEach(t)||e},zt=function(e){return Math.round(e*1e5)/1e5||0},ti=function(e){return Math.round(e*1e7)/1e7||0},ea=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},Xy=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},Ul=function(){var e=wr.length,t=wr.slice(0),i,r;for(Hu={},wr.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},_p=function(e,t,i,r){wr.length&&!fi&&Ul(),e.render(t,i,fi&&t<0&&(e._initted||e._startAt)),wr.length&&!fi&&Ul()},yp=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(dp).length<2?t:ei(e)?e.trim():e},xp=function(e){return e},ln=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},$y=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},ss=function(e,t){for(var i in t)e[i]=t[i];return e},bp=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=In(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},kl=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},lo=function(e){var t=e.parent||Nt,i=e.keyframes?$y(hi(e.keyframes)):ln;if(Ui(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},qy=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},wp=function(e,t,i,r,s){var a=e[r],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},Fl=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,a=t._next;s?s._next=a:e[i]===t&&(e[i]=a),a?a._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Sr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},as=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Yy=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},$u=function(e,t,i,r){return e._startAt&&(fi?e._startAt.revert(Ol):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},jy=function n(e){return!e||e._ts&&n(e.parent)},Sp=function(e){return e._repeat?ta(e._tTime,e=e.duration()+e._rDelay)*e:0},ta=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Bl=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},zl=function(e){return e._end=ti(e._start+(e._tDur/Math.abs(e._ts||e._rts||Tt)||0))},Vl=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=ti(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),zl(e),i._dirty||as(i,e)),e},Mp=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Bl(e.rawTime(),t),(!t._dur||uo(0,t.totalDuration(),i)-t._tTime>Tt)&&t.render(i,!0)),as(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Tt}},Nn=function(e,t,i,r){return t.parent&&Sr(t),t._start=ti((tr(i)?i:i||e!==Nt?cn(e,i,t):e._time)+t._delay),t._end=ti(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),wp(e,t,"_first","_last",e._sort?"_start":0),qu(t)||(e._recent=t),r||Mp(e,t),e._ts<0&&Vl(e,e._tTime),e},Tp=function(e,t){return($i.ScrollTrigger||zu("scrollTrigger",t))&&$i.ScrollTrigger.create(t,e)},Ep=function(e,t,i,r,s){if(id(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!fi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&mp!==ji.frame)return wr.push(e),e._lazy=[s,r],1},Ky=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},qu=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Zy=function(e,t,i,r){var s=e.ratio,a=t<0||!t&&(!e._start&&Ky(e)&&!(!e._initted&&qu(e))||(e._ts<0||e._dp._ts<0)&&!qu(e))?0:1,o=e._rDelay,l=0,c,d,h;if(o&&e._repeat&&(l=uo(0,e._tDur,t),d=ta(l,o),e._yoyo&&d&1&&(a=1-a),d!==ta(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||fi||r||e._zTime===Tt||!t&&e._zTime){if(!e._initted&&Ep(e,t,r,i,l))return;for(h=e._zTime,e._zTime=t||(i?Tt:0),i||(i=t&&!h),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&$u(e,t,i,!0),e._onUpdate&&!i&&Yi(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Yi(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Sr(e,1),!i&&!fi&&(Yi(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Qy=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},ia=function(e,t,i,r){var s=e._repeat,a=ti(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:ti(a*(s+1)+e._rDelay*s):a,o>0&&!r&&Vl(e,e._tTime=e._tDur*o),e.parent&&zl(e),i||as(e.parent,e),e},Ap=function(e){return e instanceof Mi?as(e):ia(e,e._dur)},Jy={_start:0,endTime:oo,totalDuration:oo},cn=function n(e,t,i){var r=e.labels,s=e._recent||Jy,a=e.duration()>=on?s.endTime(!1):e._dur,o,l,c;return ei(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?s:i).totalDuration()/100:1)):o<0?(t in r||(r[t]=a),r[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&i&&(l=l/100*(hi(i)?i[0]:i).totalDuration()),o>1?n(e,t.substr(0,o-1),i)+l:a+l)):t==null?a:+t},co=function(e,t,i){var r=tr(t[1]),s=(r?2:1)+(e<2?0:1),a=t[s],o,l;if(r&&(a.duration=t[1]),a.parent=i,e){for(o=a,l=i;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=Ui(l.vars.inherit)&&l.parent;a.immediateRender=Ui(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Wt(t[0],a,t[s+1])},Mr=function(e,t){return e||e===0?t(e):t},uo=function(e,t,i){return i<e?e:i>t?t:i},pi=function(e,t){return!ei(e)||!(t=Hy.exec(e))?"":t[1]},ex=function(e,t,i){return Mr(i,function(r){return uo(e,t,r)})},Yu=[].slice,Cp=function(e,t){return e&&In(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&In(e[0]))&&!e.nodeType&&e!==On},tx=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return ei(r)&&!t||Cp(r,1)?(s=i).push.apply(s,un(r)):i.push(r)})||i},un=function(e,t,i){return Dt&&!t&&Dt.selector?Dt.selector(e):ei(e)&&!i&&(Fu||!ra())?Yu.call((t||Bu).querySelectorAll(e),0):hi(e)?tx(e,i):Cp(e)?Yu.call(e,0):e?[e]:[]},ju=function(e){return e=un(e)[0]||ao("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return un(t,i.querySelectorAll?i:i===e?ao("Invalid scope")||Bu.createElement("div"):e)}},Pp=function(e){return e.sort(function(){return .5-Math.random()})},Rp=function(e){if(Bt(e))return e;var t=In(e)?e:{each:e},i=os(t.ease),r=t.from||0,s=parseFloat(t.base)||0,a={},o=r>0&&r<1,l=isNaN(r)||o,c=t.axis,d=r,h=r;return ei(r)?d=h={center:.5,edges:.5,end:1}[r]||0:!o&&l&&(d=r[0],h=r[1]),function(f,u,m){var p=(m||t).length,g=a[p],v,y,_,w,x,S,T,E,M;if(!g){if(M=t.grid==="auto"?0:(t.grid||[1,on])[1],!M){for(T=-on;T<(T=m[M++].getBoundingClientRect().left)&&M<p;);M<p&&M--}for(g=a[p]=[],v=l?Math.min(M,p)*d-.5:r%M,y=M===on?0:l?p*h/M-.5:r/M|0,T=0,E=on,S=0;S<p;S++)_=S%M-v,w=y-(S/M|0),g[S]=x=c?Math.abs(c==="y"?w:_):op(_*_+w*w),x>T&&(T=x),x<E&&(E=x);r==="random"&&Pp(g),g.max=T-E,g.min=E,g.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(M>p?p-1:c?c==="y"?p/M:M:Math.max(M,p/M))||0)*(r==="edges"?-1:1),g.b=p<0?s-p:s,g.u=pi(t.amount||t.each)||0,i=i&&p<0?Hp(i):i}return p=(g[f]-g.min)/g.max||0,ti(g.b+(i?i(p):p)*g.v)+g.u}},Ku=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=ti(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(tr(i)?0:pi(i))}},Lp=function(e,t){var i=hi(e),r,s;return!i&&In(e)&&(r=i=e.radius||on,e.values?(e=un(e.values),(s=!tr(e[0]))&&(r*=r)):e=Ku(e.increment)),Mr(t,i?Bt(e)?function(a){return s=e(a),Math.abs(s-a)<=r?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=on,d=0,h=e.length,f,u;h--;)s?(f=e[h].x-o,u=e[h].y-l,f=f*f+u*u):f=Math.abs(e[h]-o),f<c&&(c=f,d=h);return d=!r||c<=r?e[d]:a,s||d===a||tr(a)?d:d+pi(a)}:Ku(e))},Dp=function(e,t,i,r){return Mr(hi(e)?!t:i===!0?!!(i=0):!r,function(){return hi(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},ix=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,a){return a(s)},r)}},nx=function(e,t){return function(i){return e(parseFloat(i))+(t||pi(i))}},rx=function(e,t,i){return Op(e,t,0,1,i)},Ip=function(e,t,i){return Mr(i,function(r){return e[~~t(r)]})},sx=function n(e,t,i){var r=t-e;return hi(e)?Ip(e,n(0,e.length),t):Mr(i,function(s){return(r+(s-e)%r)%r+e})},ax=function n(e,t,i){var r=t-e,s=r*2;return hi(e)?Ip(e,n(0,e.length-1),t):Mr(i,function(a){return a=(s+(a-e)%s)%s||0,e+(a>r?s-a:a)})},fo=function(e){for(var t=0,i="",r,s,a,o;~(r=e.indexOf("random(",t));)a=e.indexOf(")",r),o=e.charAt(r+7)==="[",s=e.substr(r+7,a-r-7).match(o?dp:Uu),i+=e.substr(t,r-t)+Dp(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},Op=function(e,t,i,r,s){var a=t-e,o=r-i;return Mr(s,function(l){return i+((l-e)/a*o||0)})},ox=function n(e,t,i,r){var s=isNaN(e+t)?0:function(u){return(1-u)*e+u*t};if(!s){var a=ei(e),o={},l,c,d,h,f;if(i===!0&&(r=1)&&(i=null),a)e={p:e},t={p:t};else if(hi(e)&&!hi(t)){for(d=[],h=e.length,f=h-2,c=1;c<h;c++)d.push(n(e[c-1],e[c]));h--,s=function(m){m*=h;var p=Math.min(f,~~m);return d[p](m-p)},i=t}else r||(e=ss(hi(e)?[]:{},e));if(!d){for(l in t)ed.call(o,e,l,"get",t[l]);s=function(m){return sd(m,o)||(a?e.p:e)}}}return Mr(i,s)},Np=function(e,t,i){var r=e.labels,s=on,a,o,l;for(a in r)o=r[a]-t,o<0==!!i&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},Yi=function(e,t,i){var r=e.vars,s=r[t],a=Dt,o=e._ctx,l,c,d;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&wr.length&&Ul(),o&&(Dt=o),d=l?s.apply(c,l):s.call(c),Dt=a,d},ho=function(e){return Sr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!fi),e.progress()<1&&Yi(e,"onInterrupt"),e},na,Up=[],kp=function(e){if(e)if(e=!e.name&&e.default||e,Nu()||e.headless){var t=e.name,i=Bt(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:oo,render:sd,add:ed,kill:Sx,modifier:wx,rawVars:0},a={targetTest:0,get:0,getSetter:rd,aliases:{},register:0};if(ra(),e!==r){if(qi[t])return;ln(r,ln(kl(e,s),a)),ss(r.prototype,ss(s,kl(e,a))),qi[r.prop=t]=r,e.targetTest&&(Nl.push(r),Vu[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}pp(t,r),e.register&&e.register(Bi,r,Fi)}else Up.push(e)},Mt=255,po={aqua:[0,Mt,Mt],lime:[0,Mt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Mt],navy:[0,0,128],white:[Mt,Mt,Mt],olive:[128,128,0],yellow:[Mt,Mt,0],orange:[Mt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Mt,0,0],pink:[Mt,192,203],cyan:[0,Mt,Mt],transparent:[Mt,Mt,Mt,0]},Zu=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Mt+.5|0},Fp=function(e,t,i){var r=e?tr(e)?[e>>16,e>>8&Mt,e&Mt]:0:po.black,s,a,o,l,c,d,h,f,u,m;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),po[e])r=po[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Mt,r&Mt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Mt,e&Mt]}else if(e.substr(0,3)==="hsl"){if(r=m=e.match(Uu),!t)l=+r[0]%360/360,c=+r[1]/100,d=+r[2]/100,a=d<=.5?d*(c+1):d+c-d*c,s=d*2-a,r.length>3&&(r[3]*=1),r[0]=Zu(l+1/3,s,a),r[1]=Zu(l,s,a),r[2]=Zu(l-1/3,s,a);else if(~e.indexOf("="))return r=e.match(cp),i&&r.length<4&&(r[3]=1),r}else r=e.match(Uu)||po.transparent;r=r.map(Number)}return t&&!m&&(s=r[0]/Mt,a=r[1]/Mt,o=r[2]/Mt,h=Math.max(s,a,o),f=Math.min(s,a,o),d=(h+f)/2,h===f?l=c=0:(u=h-f,c=d>.5?u/(2-h-f):u/(h+f),l=h===s?(a-o)/u+(a<o?6:0):h===a?(o-s)/u+2:(s-a)/u+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(d*100+.5)),i&&r.length<4&&(r[3]=1),r},Bp=function(e){var t=[],i=[],r=-1;return e.split(Tr).forEach(function(s){var a=s.match(Js)||[];t.push.apply(t,a),i.push(r+=a.length+1)}),t.c=i,t},zp=function(e,t,i){var r="",s=(e+r).match(Tr),a=t?"hsla(":"rgba(",o=0,l,c,d,h;if(!s)return e;if(s=s.map(function(f){return(f=Fp(f,t,1))&&a+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(d=Bp(e),l=i.c,l.join(r)!==d.c.join(r)))for(c=e.replace(Tr,"1").split(Js),h=c.length-1;o<h;o++)r+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!c)for(c=e.split(Tr),h=c.length-1;o<h;o++)r+=c[o]+s[o];return r+c[h]},Tr=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in po)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),lx=/hsl[a]?\(/,Vp=function(e){var t=e.join(" "),i;if(Tr.lastIndex=0,Tr.test(t))return i=lx.test(t),e[1]=zp(e[1],i),e[0]=zp(e[0],i,Bp(e[1])),!0},mo,ji=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,a=s,o=[],l,c,d,h,f,u,m=function p(g){var v=n()-r,y=g===!0,_,w,x,S;if((v>e||v<0)&&(i+=v-t),r+=v,x=r-i,_=x-a,(_>0||y)&&(S=++h.frame,f=x-h.time*1e3,h.time=x=x/1e3,a+=_+(_>=s?4:s-_),w=1),y||(l=c(p)),w)for(u=0;u<o.length;u++)o[u](x,f,S,g)};return h={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return f/(1e3/(g||60))},wake:function(){fp&&(!Fu&&Nu()&&(On=Fu=window,Bu=On.document||{},$i.gsap=Bi,(On.gsapVersions||(On.gsapVersions=[])).push(Bi.version),hp(Il||On.GreenSockGlobals||!On.gsap&&On||{}),Up.forEach(kp)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=d||function(g){return setTimeout(g,a-h.time*1e3+1|0)},mo=1,m(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),mo=0,c=oo},lagSmoothing:function(g,v){e=g||1/0,t=Math.min(v||33,e)},fps:function(g){s=1e3/(g||240),a=h.time*1e3+s},add:function(g,v,y){var _=v?function(w,x,S,T){g(w,x,S,T),h.remove(_)}:g;return h.remove(g),o[y?"unshift":"push"](_),ra(),_},remove:function(g,v){~(v=o.indexOf(g))&&o.splice(v,1)&&u>=v&&u--},_listeners:o},h}(),ra=function(){return!mo&&ji.wake()},lt={},cx=/^[\d.\-M][\d.\-,\s]/,ux=/["']/g,dx=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,a=i.length,o,l,c;s<a;s++)l=i[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[r]=isNaN(c)?c.replace(ux,"").trim():+c,r=l.substr(o+1).trim();return t},fx=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},hx=function(e){var t=(e+"").split("("),i=lt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[dx(t[1])]:fx(e).split(",").map(yp)):lt._CE&&cx.test(e)?lt._CE("",e):i},Hp=function(e){return function(t){return 1-e(1-t)}},Gp=function n(e,t){for(var i=e._first,r;i;)i instanceof Mi?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},os=function(e,t){return e&&(Bt(e)?e:lt[e]||hx(e))||t},ls=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},a;return ki(e,function(o){lt[o]=$i[o]=s,lt[a=o.toLowerCase()]=i;for(var l in s)lt[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=lt[o+"."+l]=s[l]}),s},Wp=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Qu=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),a=s/Iu*(Math.asin(1/r)||0),o=function(d){return d===1?1:r*Math.pow(2,-10*d)*Vy((d-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:Wp(o);return s=Iu/s,l.config=function(c,d){return n(e,c,d)},l},Ju=function n(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:Wp(i);return r.config=function(s){return n(e,s)},r};ki("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;ls(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})}),lt.Linear.easeNone=lt.none=lt.Linear.easeIn,ls("Elastic",Qu("in"),Qu("out"),Qu()),function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(o){return o<t?n*o*o:o<i?n*Math.pow(o-1.5/e,2)+.75:o<r?n*(o-=2.25/e)*o+.9375:n*Math.pow(o-2.625/e,2)+.984375};ls("Bounce",function(a){return 1-s(1-a)},s)}(7.5625,2.75),ls("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),ls("Circ",function(n){return-(op(1-n*n)-1)}),ls("Sine",function(n){return n===1?1:-zy(n*Fy)+1}),ls("Back",Ju("in"),Ju("out"),Ju()),lt.SteppedEase=lt.steps=$i.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,a=1-Tt;return function(o){return((r*uo(0,a,o)|0)+s)*i}}},Qs.ease=lt["quad.out"],ki("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Wu+=n+","+n+"Params,"});var Xp=function(e,t){this.id=By++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:vp,this.set=t?t.getSetter:rd},go=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ia(this,+t.duration,1,1),this.data=t.data,Dt&&(this._ctx=Dt,Dt.data.push(this)),mo||ji.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,ia(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(ra(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Vl(this,i),!s._dp||s.parent||Mp(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Nn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Tt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),_p(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Sp(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Sp(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?ta(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Tt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Bl(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Tt?0:this._rts,this.totalTime(uo(-Math.abs(this._delay),this._tDur,s),r!==!1),zl(this),Yy(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ra(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Tt&&(this._tTime-=Tt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Nn(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Ui(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Bl(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=Wy);var r=fi;return fi=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),fi=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Ap(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,Ap(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(cn(this,i),Ui(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Ui(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Tt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Tt,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Tt)},e.eventCallback=function(i,r,s){var a=this.vars;return arguments.length>1?(r?(a[i]=r,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete a[i],this):a[i]},e.then=function(i){var r=this;return new Promise(function(s){var a=Bt(i)?i:xp,o=function(){var c=r.then;r.then=null,Bt(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=c),s(a),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){ho(this)},n}();ln(go.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Tt,_prom:0,_ps:!1,_rts:1});var Mi=function(n){ap(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Ui(i.sortChildren),Nt&&Nn(i.parent||Nt,er(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Tp(er(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,a){return co(0,arguments,this),this},t.from=function(r,s,a){return co(1,arguments,this),this},t.fromTo=function(r,s,a,o){return co(2,arguments,this),this},t.set=function(r,s,a){return s.duration=0,s.parent=this,lo(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Wt(r,s,cn(this,a),1),this},t.call=function(r,s,a){return Nn(this,Wt.delayedCall(0,r,s),a)},t.staggerTo=function(r,s,a,o,l,c,d){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=d,a.parent=this,new Wt(r,a,cn(this,l)),this},t.staggerFrom=function(r,s,a,o,l,c,d){return a.runBackwards=1,lo(a).immediateRender=Ui(a.immediateRender),this.staggerTo(r,s,a,o,l,c,d)},t.staggerFromTo=function(r,s,a,o,l,c,d,h){return o.startAt=a,lo(o).immediateRender=Ui(o.immediateRender),this.staggerTo(r,s,o,l,c,d,h)},t.render=function(r,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=r<=0?0:ti(r),h=this._zTime<0!=r<0&&(this._initted||!c),f,u,m,p,g,v,y,_,w,x,S,T;if(this!==Nt&&d>l&&r>=0&&(d=l),d!==this._tTime||a||h){if(o!==this._time&&c&&(d+=this._time-o,r+=this._time-o),f=d,w=this._start,_=this._ts,v=!_,h&&(c||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(S=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(g*100+r,s,a);if(f=ti(d%g),d===l?(p=this._repeat,f=c):(p=~~(d/g),p&&p===d/g&&(f=c,p--),f>c&&(f=c)),x=ta(this._tTime,g),!o&&this._tTime&&x!==p&&this._tTime-x*g-this._dur<=0&&(x=p),S&&p&1&&(f=c-f,T=1),p!==x&&!this._lock){var E=S&&x&1,M=E===(S&&p&1);if(p<x&&(E=!E),o=E?0:d%c?c:d,this._lock=1,this.render(o||(T?0:ti(p*g)),s,!c)._lock=0,this._tTime=d,!s&&this.parent&&Yi(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,M&&(this._lock=2,o=E?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;Gp(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=Qy(this,ti(o),ti(f)),y&&(d-=f-(f=y._start))),this._tTime=d,this._time=f,this._act=!_,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&f&&!s&&!p&&(Yi(this,"onStart"),this._tTime!==d))return this;if(f>=o&&r>=0)for(u=this._first;u;){if(m=u._next,(u._act||f>=u._start)&&u._ts&&y!==u){if(u.parent!==this)return this.render(r,s,a);if(u.render(u._ts>0?(f-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(f-u._start)*u._ts,s,a),f!==this._time||!this._ts&&!v){y=0,m&&(d+=this._zTime=-Tt);break}}u=m}else{u=this._last;for(var b=r<0?r:f;u;){if(m=u._prev,(u._act||b<=u._end)&&u._ts&&y!==u){if(u.parent!==this)return this.render(r,s,a);if(u.render(u._ts>0?(b-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(b-u._start)*u._ts,s,a||fi&&(u._initted||u._startAt)),f!==this._time||!this._ts&&!v){y=0,m&&(d+=this._zTime=b?-Tt:Tt);break}}u=m}}if(y&&!s&&(this.pause(),y.render(f>=o?0:-Tt)._zTime=f>=o?1:-1,this._ts))return this._start=w,zl(this),this.render(r,s,a);this._onUpdate&&!s&&Yi(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&o)&&(w===this._start||Math.abs(_)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(d===l&&this._ts>0||!d&&this._ts<0)&&Sr(this,1),!s&&!(r<0&&!o)&&(d||o||!l)&&(Yi(this,d===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var a=this;if(tr(s)||(s=cn(this,s,r)),!(r instanceof go)){if(hi(r))return r.forEach(function(o){return a.add(o,s)}),this;if(ei(r))return this.addLabel(r,s);if(Bt(r))r=Wt.delayedCall(0,r);else return this}return this!==r?Nn(this,r,s):this},t.getChildren=function(r,s,a,o){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-on);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof Wt?s&&l.push(c):(a&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},t.remove=function(r){return ei(r)?this.removeLabel(r):Bt(r)?this.killTweensOf(r):(Fl(this,r),r===this._recent&&(this._recent=this._last),as(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ti(ji.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=cn(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,a){var o=Wt.delayedCall(0,s||oo,a);return o.data="isPause",this._hasPause=1,Nn(this,o,cn(this,r))},t.removePause=function(r){var s=this._first;for(r=cn(this,r);s;)s._start===r&&s.data==="isPause"&&Sr(s),s=s._next},t.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),l=o.length;l--;)Er!==o[l]&&o[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var a=[],o=un(r),l=this._first,c=tr(s),d;l;)l instanceof Wt?Xy(l._targets,o)&&(c?(!Er||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(d=l.getTweensOf(o,s)).length&&a.push.apply(a,d),l=l._next;return a},t.tweenTo=function(r,s){s=s||{};var a=this,o=cn(a,r),l=s,c=l.startAt,d=l.onStart,h=l.onStartParams,f=l.immediateRender,u,m=Wt.to(a,ln({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||Tt,onStart:function(){if(a.pause(),!u){var g=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());m._dur!==g&&ia(m,g,0,1).render(m._time,!0,!0),u=1}d&&d.apply(m,h||[])}},s));return f?m.render(0):m},t.tweenFromTo=function(r,s,a){return this.tweenTo(s,ln({startAt:{time:cn(this,r)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Np(this,cn(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Np(this,cn(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Tt)},t.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=r);return as(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),as(this)},t.totalDuration=function(r){var s=0,a=this,o=a._last,l=on,c,d,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(h=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,Nn(a,o,d-o._delay,1)._lock=0):l=d,d<0&&o._ts&&(s-=d,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;ia(a,a===Nt&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(r){if(Nt._ts&&(_p(Nt,Bl(r,Nt)),mp=ji.frame),ji.frame>=gp){gp+=Xi.autoSleep||120;var s=Nt._first;if((!s||!s._ts)&&Xi.autoSleep&&ji._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ji.sleep()}}},e}(go);ln(Mi.prototype,{_lock:0,_hasPause:0,_forcing:0});var px=function(e,t,i,r,s,a,o){var l=new Fi(this._pt,e,t,0,1,Zp,null,s),c=0,d=0,h,f,u,m,p,g,v,y;for(l.b=i,l.e=r,i+="",r+="",(v=~r.indexOf("random("))&&(r=fo(r)),a&&(y=[i,r],a(y,e,t),i=y[0],r=y[1]),f=i.match(ku)||[];h=ku.exec(r);)m=h[0],p=r.substring(c,h.index),u?u=(u+1)%5:p.substr(-5)==="rgba("&&(u=1),m!==f[d++]&&(g=parseFloat(f[d-1])||0,l._pt={_next:l._pt,p:p||d===1?p:",",s:g,c:m.charAt(1)==="="?ea(g,m)-g:parseFloat(m)-g,m:u&&u<4?Math.round:0},c=ku.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=o,(up.test(r)||v)&&(l.e=0),this._pt=l,l},ed=function(e,t,i,r,s,a,o,l,c,d){Bt(r)&&(r=r(s||0,e,a));var h=e[t],f=i!=="get"?i:Bt(h)?c?e[t.indexOf("set")||!Bt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,u=Bt(h)?c?yx:jp:nd,m;if(ei(r)&&(~r.indexOf("random(")&&(r=fo(r)),r.charAt(1)==="="&&(m=ea(f,r)+(pi(f)||0),(m||m===0)&&(r=m))),!d||f!==r||td)return!isNaN(f*r)&&r!==""?(m=new Fi(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?bx:Kp,0,u),c&&(m.fp=c),o&&m.modifier(o,this,e),this._pt=m):(!h&&!(t in e)&&zu(t,r),px.call(this,e,t,f,r,u,l||Xi.stringFilter,c))},mx=function(e,t,i,r,s){if(Bt(e)&&(e=vo(e,s,t,i,r)),!In(e)||e.style&&e.nodeType||hi(e)||lp(e))return ei(e)?vo(e,s,t,i,r):e;var a={},o;for(o in e)a[o]=vo(e[o],s,t,i,r);return a},$p=function(e,t,i,r,s,a){var o,l,c,d;if(qi[e]&&(o=new qi[e]).init(s,o.rawVars?t[e]:mx(t[e],r,s,a,i),i,r,a)!==!1&&(i._pt=l=new Fi(i._pt,s,e,0,1,o.render,o,0,o.priority),i!==na))for(c=i._ptLookup[i._targets.indexOf(s)],d=o._props.length;d--;)c[o._props[d]]=l;return o},Er,td,id=function n(e,t,i){var r=e.vars,s=r.ease,a=r.startAt,o=r.immediateRender,l=r.lazy,c=r.onUpdate,d=r.runBackwards,h=r.yoyoEase,f=r.keyframes,u=r.autoRevert,m=e._dur,p=e._startAt,g=e._targets,v=e.parent,y=v&&v.data==="nested"?v.vars.targets:g,_=e._overwrite==="auto"&&!Du,w=e.timeline,x,S,T,E,M,b,A,C,P,I,D,F,B;if(w&&(!f||!s)&&(s="none"),e._ease=os(s,Qs.ease),e._yEase=h?Hp(os(h===!0?s:h,Qs.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!w&&!!r.runBackwards,!w||f&&!r.stagger){if(C=g[0]?rs(g[0]).harness:0,F=C&&r[C.prop],x=kl(r,Vu),p&&(p._zTime<0&&p.progress(1),t<0&&d&&o&&!u?p.render(-1,!0):p.revert(d&&m?Ol:Gy),p._lazy=0),a){if(Sr(e._startAt=Wt.set(g,ln({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!p&&Ui(l),startAt:null,delay:0,onUpdate:c&&function(){return Yi(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(fi||!o&&!u)&&e._startAt.revert(Ol),o&&m&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&m&&!p){if(t&&(o=!1),T=ln({overwrite:!1,data:"isFromStart",lazy:o&&!p&&Ui(l),immediateRender:o,stagger:0,parent:v},x),F&&(T[C.prop]=F),Sr(e._startAt=Wt.set(g,T)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(fi?e._startAt.revert(Ol):e._startAt.render(-1,!0)),e._zTime=t,!o)n(e._startAt,Tt,Tt);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&Ui(l)||l&&!m,S=0;S<g.length;S++){if(M=g[S],A=M._gsap||Xu(g)[S]._gsap,e._ptLookup[S]=I={},Hu[A.id]&&wr.length&&Ul(),D=y===g?S:y.indexOf(M),C&&(P=new C).init(M,F||x,e,D,y)!==!1&&(e._pt=E=new Fi(e._pt,M,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(k){I[k]=E}),P.priority&&(b=1)),!C||F)for(T in x)qi[T]&&(P=$p(T,x,e,D,M,y))?P.priority&&(b=1):I[T]=E=ed.call(e,M,T,"get",x[T],D,y,0,r.stringFilter);e._op&&e._op[S]&&e.kill(M,e._op[S]),_&&e._pt&&(Er=e,Nt.killTweensOf(M,I,e.globalTime(t)),B=!e.parent,Er=0),e._pt&&l&&(Hu[A.id]=1)}b&&Qp(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!B,f&&t<=0&&w.render(on,!0,!0)},gx=function(e,t,i,r,s,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,h,f,u;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,u=e._targets.length;u--;){if(d=f[u][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return td=1,e.vars[t]="+=0",id(e,o),td=0,l?ao(t+" not eligible for reset"):1;c.push(d)}for(u=c.length;u--;)h=c[u],d=h._pt||h,d.s=(r||r===0)&&!s?r:d.s+(r||0)+a*d.c,d.c=i-d.s,h.e&&(h.e=zt(i)+pi(h.e)),h.b&&(h.b=d.s+pi(h.b))},vx=function(e,t){var i=e[0]?rs(e[0]).harness:0,r=i&&i.aliases,s,a,o,l;if(!r)return t;s=ss({},t);for(a in r)if(a in s)for(l=r[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},_x=function(e,t,i,r){var s=t.ease||r||"power1.inOut",a,o;if(hi(t))o=i[e]||(i[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:s})});else for(a in t)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},vo=function(e,t,i,r,s){return Bt(e)?e.call(t,i,r,s):ei(e)&&~e.indexOf("random(")?fo(e):e},qp=Wu+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Yp={};ki(qp+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Yp[n]=1});var Wt=function(n){ap(e,n);function e(i,r,s,a){var o;typeof r=="number"&&(s.duration=r,r=s,s=null),o=n.call(this,a?r:lo(r))||this;var l=o.vars,c=l.duration,d=l.delay,h=l.immediateRender,f=l.stagger,u=l.overwrite,m=l.keyframes,p=l.defaults,g=l.scrollTrigger,v=l.yoyoEase,y=r.parent||Nt,_=(hi(i)||lp(i)?tr(i[0]):"length"in r)?[i]:un(i),w,x,S,T,E,M,b,A;if(o._targets=_.length?Xu(_):ao("GSAP target "+i+" not found. https://gsap.com",!Xi.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=u,m||f||Dl(c)||Dl(d)){if(r=o.vars,w=o.timeline=new Mi({data:"nested",defaults:p||{},targets:y&&y.data==="nested"?y.vars.targets:_}),w.kill(),w.parent=w._dp=er(o),w._start=0,f||Dl(c)||Dl(d)){if(T=_.length,b=f&&Rp(f),In(f))for(E in f)~qp.indexOf(E)&&(A||(A={}),A[E]=f[E]);for(x=0;x<T;x++)S=kl(r,Yp),S.stagger=0,v&&(S.yoyoEase=v),A&&ss(S,A),M=_[x],S.duration=+vo(c,er(o),x,M,_),S.delay=(+vo(d,er(o),x,M,_)||0)-o._delay,!f&&T===1&&S.delay&&(o._delay=d=S.delay,o._start+=d,S.delay=0),w.to(M,S,b?b(x,M,_):0),w._ease=lt.none;w.duration()?c=d=0:o.timeline=0}else if(m){lo(ln(w.vars.defaults,{ease:"none"})),w._ease=os(m.ease||r.ease||"none");var C=0,P,I,D;if(hi(m))m.forEach(function(F){return w.to(_,F,">")}),w.duration();else{S={};for(E in m)E==="ease"||E==="easeEach"||_x(E,m[E],S,m.easeEach);for(E in S)for(P=S[E].sort(function(F,B){return F.t-B.t}),C=0,x=0;x<P.length;x++)I=P[x],D={ease:I.e,duration:(I.t-(x?P[x-1].t:0))/100*c},D[E]=I.v,w.to(_,D,C),C+=D.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||o.duration(c=w.duration())}else o.timeline=0;return u===!0&&!Du&&(Er=er(o),Nt.killTweensOf(_),Er=0),Nn(y,er(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(h||!c&&!m&&o._start===ti(y._time)&&Ui(h)&&jy(er(o))&&y.data!=="nested")&&(o._tTime=-Tt,o.render(Math.max(0,-d)||0)),g&&Tp(er(o),g),o}var t=e.prototype;return t.render=function(r,s,a){var o=this._time,l=this._tDur,c=this._dur,d=r<0,h=r>l-Tt&&!d?l:r<Tt?0:r,f,u,m,p,g,v,y,_,w;if(!c)Zy(this,r,s,a);else if(h!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d){if(f=h,_=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(p*100+r,s,a);if(f=ti(h%p),h===l?(m=this._repeat,f=c):(m=~~(h/p),m&&m===ti(h/p)&&(f=c,m--),f>c&&(f=c)),v=this._yoyo&&m&1,v&&(w=this._yEase,f=c-f),g=ta(this._tTime,p),f===o&&!a&&this._initted&&m===g)return this._tTime=h,this;m!==g&&(_&&this._yEase&&Gp(_,v),this.vars.repeatRefresh&&!v&&!this._lock&&this._time!==p&&this._initted&&(this._lock=a=1,this.render(ti(p*m),!0).invalidate()._lock=0))}if(!this._initted){if(Ep(this,d?r:f,a,s,h))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&m!==g))return this;if(c!==this._dur)return this.render(r,s,a)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(w||this._ease)(f/c),this._from&&(this.ratio=y=1-y),f&&!o&&!s&&!m&&(Yi(this,"onStart"),this._tTime!==h))return this;for(u=this._pt;u;)u.r(y,u.d),u=u._next;_&&_.render(r<0?r:_._dur*_._ease(f/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(d&&$u(this,r,s,a),Yi(this,"onUpdate")),this._repeat&&m!==g&&this.vars.onRepeat&&!s&&this.parent&&Yi(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(d&&!this._onUpdate&&$u(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Sr(this,1),!s&&!(d&&!o)&&(h||o||v)&&(Yi(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,a,o,l){mo||ji.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||id(this,c),d=this._ease(c/this._dur),gx(this,r,s,a,o,d,c,l)?this.resetTo(r,s,a,o,1):(Vl(this,0),this.parent||wp(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ho(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Er&&Er.vars.overwrite!==!0)._first||ho(this),this.parent&&a!==this.timeline.totalDuration()&&ia(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=r?un(r):o,c=this._ptLookup,d=this._pt,h,f,u,m,p,g,v;if((!s||s==="all")&&qy(o,l))return s==="all"&&(this._pt=0),ho(this);for(h=this._op=this._op||[],s!=="all"&&(ei(s)&&(p={},ki(s,function(y){return p[y]=1}),s=p),s=vx(o,s)),v=o.length;v--;)if(~l.indexOf(o[v])){f=c[v],s==="all"?(h[v]=s,m=f,u={}):(u=h[v]=h[v]||{},m=s);for(p in m)g=f&&f[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&Fl(this,g,"_pt"),delete f[p]),u!=="all"&&(u[p]=1)}return this._initted&&!this._pt&&d&&ho(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return co(1,arguments)},e.delayedCall=function(r,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(r,s,a){return co(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,a){return Nt.killTweensOf(r,s,a)},e}(go);ln(Wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ki("staggerTo,staggerFrom,staggerFromTo",function(n){Wt[n]=function(){var e=new Mi,t=Yu.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var nd=function(e,t,i){return e[t]=i},jp=function(e,t,i){return e[t](i)},yx=function(e,t,i,r){return e[t](r.fp,i)},xx=function(e,t,i){return e.setAttribute(t,i)},rd=function(e,t){return Bt(e[t])?jp:Ou(e[t])&&e.setAttribute?xx:nd},Kp=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},bx=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Zp=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},sd=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},wx=function(e,t,i,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(e,t,i),s=a},Sx=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Fl(this,t,"_pt"):t.dep||(i=1),t=r;return!i},Mx=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},Qp=function(e){for(var t=e._pt,i,r,s,a;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:a)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:a=t,t=i}e._pt=s},Fi=function(){function n(t,i,r,s,a,o,l,c,d){this.t=i,this.s=s,this.c=a,this.p=r,this.r=o||Kp,this.d=l||this,this.set=c||nd,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=Mx,this.m=i,this.mt=s,this.tween=r},n}();ki(Wu+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Vu[n]=1}),$i.TweenMax=$i.TweenLite=Wt,$i.TimelineLite=$i.TimelineMax=Mi,Nt=new Mi({sortChildren:!1,defaults:Qs,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Xi.stringFilter=Vp;var cs=[],Hl={},Tx=[],Jp=0,Ex=0,ad=function(e){return(Hl[e]||Tx).map(function(t){return t()})},od=function(){var e=Date.now(),t=[];e-Jp>2&&(ad("matchMediaInit"),cs.forEach(function(i){var r=i.queries,s=i.conditions,a,o,l,c;for(o in r)a=On.matchMedia(r[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(i.revert(),l&&t.push(i))}),ad("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),Jp=e,ad("matchMedia"))},em=function(){function n(t,i){this.selector=i&&ju(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Ex++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){Bt(i)&&(s=r,r=i,i=Bt);var a=this,o=function(){var c=Dt,d=a.selector,h;return c&&c!==a&&c.data.push(a),s&&(a.selector=ju(s)),Dt=a,h=r.apply(a,arguments),Bt(h)&&a._r.push(h),Dt=c,a.selector=d,a.isReverted=!1,h};return a.last=o,i===Bt?o(a,function(l){return a.add(null,l)}):i?a[i]=o:o},e.ignore=function(i){var r=Dt;Dt=null,i(this),Dt=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Wt&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var o=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return o.splice(o.indexOf(d),1)}));for(o.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,h){return h.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof Mi?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Wt)&&c.revert&&c.revert(i);s._r.forEach(function(d){return d(i,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),r)for(var a=cs.length;a--;)cs[a].id===this.id&&cs.splice(a,1)},e.revert=function(i){this.kill(i||{})},n}(),Ax=function(){function n(t){this.contexts=[],this.scope=t,Dt&&Dt.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){In(i)||(i={matches:i});var a=new em(0,s||this.scope),o=a.conditions={},l,c,d;Dt&&!a.selector&&(a.selector=Dt.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=i;for(c in i)c==="all"?d=1:(l=On.matchMedia(i[c]),l&&(cs.indexOf(a)<0&&cs.push(a),(o[c]=l.matches)&&(d=1),l.addListener?l.addListener(od):l.addEventListener("change",od)));return d&&r(a,function(h){return a.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),Gl={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return kp(r)})},timeline:function(e){return new Mi(e)},getTweensOf:function(e,t){return Nt.getTweensOf(e,t)},getProperty:function(e,t,i,r){ei(e)&&(e=un(e)[0]);var s=rs(e||{}).get,a=i?xp:yp;return i==="native"&&(i=""),e&&(t?a((qi[t]&&qi[t].get||s)(e,t,i,r)):function(o,l,c){return a((qi[o]&&qi[o].get||s)(e,o,l,c))})},quickSetter:function(e,t,i){if(e=un(e),e.length>1){var r=e.map(function(d){return Bi.quickSetter(d,t,i)}),s=r.length;return function(d){for(var h=s;h--;)r[h](d)}}e=e[0]||{};var a=qi[t],o=rs(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(d){var h=new a;na._pt=0,h.init(e,i?d+i:d,na,0,[e]),h.render(1,h),na._pt&&sd(1,na)}:o.set(e,l);return a?c:function(d){return c(e,l,i?d+i:d,o,1)}},quickTo:function(e,t,i){var r,s=Bi.to(e,ss((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),a=function(l,c,d){return s.resetTo(t,l,c,d)};return a.tween=s,a},isTweening:function(e){return Nt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=os(e.ease,Qs.ease)),bp(Qs,e||{})},config:function(e){return bp(Xi,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!qi[o]&&!$i[o]&&ao(t+" effect requires "+o+" plugin.")}),Gu[t]=function(o,l,c){return i(un(o),ln(l||{},s),c)},a&&(Mi.prototype[t]=function(o,l,c){return this.add(Gu[t](o,In(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){lt[e]=os(t)},parseEase:function(e,t){return arguments.length?os(e,t):lt},getById:function(e){return Nt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Mi(e),r,s;for(i.smoothChildTiming=Ui(e.smoothChildTiming),Nt.remove(i),i._dp=0,i._time=i._tTime=Nt._time,r=Nt._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Wt&&r.vars.onComplete===r._targets[0]))&&Nn(i,r,r._start-r._delay),r=s;return Nn(Nt,i,0),i},context:function(e,t){return e?new em(e,t):Dt},matchMedia:function(e){return new Ax(e)},matchMediaRefresh:function(){return cs.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||od()},addEventListener:function(e,t){var i=Hl[e]||(Hl[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Hl[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:sx,wrapYoyo:ax,distribute:Rp,random:Dp,snap:Lp,normalize:rx,getUnit:pi,clamp:ex,splitColor:Fp,toArray:un,selector:ju,mapRange:Op,pipe:ix,unitize:nx,interpolate:ox,shuffle:Pp},install:hp,effects:Gu,ticker:ji,updateRoot:Mi.updateRoot,plugins:qi,globalTimeline:Nt,core:{PropTween:Fi,globals:pp,Tween:Wt,Timeline:Mi,Animation:go,getCache:rs,_removeLinkedListItem:Fl,reverting:function(){return fi},context:function(e){return e&&Dt&&(Dt.data.push(e),e._ctx=Dt),Dt},suppressOverwrites:function(e){return Du=e}}};ki("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Gl[n]=Wt[n]}),ji.add(Mi.updateRoot),na=Gl.to({},{duration:0});var Cx=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Px=function(e,t){var i=e._targets,r,s,a;for(r in t)for(s=i.length;s--;)a=e._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=Cx(a,r)),a&&a.modifier&&a.modifier(t[r],e,i[s],r))},ld=function(e,t){return{name:e,rawVars:1,init:function(r,s,a){a._onInit=function(o){var l,c;if(ei(s)&&(l={},ki(s,function(d){return l[d]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}Px(o,s)}}}},Bi=Gl.registerPlugin({name:"attr",init:function(e,t,i,r,s){var a,o,l;this.tween=i;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],r,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)fi?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},ld("roundProps",Ku),ld("modifiers"),ld("snap",Lp))||Gl;Wt.version=Mi.version=Bi.version="3.12.5",fp=1,Nu()&&ra(),lt.Power0,lt.Power1,lt.Power2,lt.Power3,lt.Power4,lt.Linear,lt.Quad,lt.Cubic,lt.Quart,lt.Quint,lt.Strong,lt.Elastic,lt.Back,lt.SteppedEase,lt.Bounce,lt.Sine,lt.Expo,lt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var tm,Ar,sa,cd,us,im,ud,Rx=function(){return typeof window<"u"},ir={},ds=180/Math.PI,aa=Math.PI/180,oa=Math.atan2,nm=1e8,dd=/([A-Z])/g,Lx=/(left|right|width|margin|padding|x)/i,Dx=/[\s,\(]\S/,Un={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},fd=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ix=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ox=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Nx=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},rm=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},sm=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Ux=function(e,t,i){return e.style[t]=i},kx=function(e,t,i){return e.style.setProperty(t,i)},Fx=function(e,t,i){return e._gsap[t]=i},Bx=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},zx=function(e,t,i,r,s){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},Vx=function(e,t,i,r,s){var a=e._gsap;a[t]=i,a.renderTransform(s,a)},Ut="transform",zi=Ut+"Origin",Hx=function n(e,t){var i=this,r=this.target,s=r.style,a=r._gsap;if(e in ir&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Un[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=nr(r,o)}):this.tfm[e]=a.x?a[e]:nr(r,e),e===zi&&(this.tfm.zOrigin=a.zOrigin);else return Un.transform.split(",").forEach(function(o){return n.call(i,o,t)});if(this.props.indexOf(Ut)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(zi,t,"")),e=Ut}(s||t)&&this.props.push(e,t,s[e])},am=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Gx=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(dd,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=ud(),(!s||!s.isStart)&&!i[Ut]&&(am(i),r.zOrigin&&i[zi]&&(i[zi]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},om=function(e,t){var i={target:e,props:[],revert:Gx,save:Hx};return e._gsap||Bi.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},lm,hd=function(e,t){var i=Ar.createElementNS?Ar.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ar.createElement(e);return i&&i.style?i:Ar.createElement(e)},kn=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(dd,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,la(t)||t,1)||""},cm="O,Moz,ms,Ms,Webkit".split(","),la=function(e,t,i){var r=t||us,s=r.style,a=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(cm[a]+e in s););return a<0?null:(a===3?"ms":a>=0?cm[a]:"")+e},pd=function(){Rx()&&window.document&&(tm=window,Ar=tm.document,sa=Ar.documentElement,us=hd("div")||{style:{}},hd("div"),Ut=la(Ut),zi=Ut+"Origin",us.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",lm=!!la("perspective"),ud=Bi.core.reverting,cd=1)},md=function n(e){var t=hd("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,a;if(sa.appendChild(t),t.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(a=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),sa.removeChild(t),this.style.cssText=s,a},um=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},dm=function(e){var t;try{t=e.getBBox()}catch{t=md.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===md||(t=md.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+um(e,["x","cx","x1"])||0,y:+um(e,["y","cy","y1"])||0,width:0,height:0}:t},fm=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&dm(e))},fs=function(e,t){if(t){var i=e.style,r;t in ir&&t!==zi&&(t=Ut),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(dd,"-$1").toLowerCase())):i.removeAttribute(t)}},Cr=function(e,t,i,r,s,a){var o=new Fi(e._pt,t,i,0,1,a?sm:rm);return e._pt=o,o.b=r,o.e=s,e._props.push(i),o},hm={deg:1,rad:1,turn:1},Wx={grid:1,flex:1},Pr=function n(e,t,i,r){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=us.style,l=Lx.test(t),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(l?"Width":"Height"),h=100,f=r==="px",u=r==="%",m,p,g,v;if(r===a||!s||hm[r]||hm[a])return s;if(a!=="px"&&!f&&(s=n(e,t,i,"px")),v=e.getCTM&&fm(e),(u||a==="%")&&(ir[t]||~t.indexOf("adius")))return m=v?e.getBBox()[l?"width":"height"]:e[d],zt(u?s/m*h:s/100*m);if(o[l?"width":"height"]=h+(f?a:r),p=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,v&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Ar||!p.appendChild)&&(p=Ar.body),g=p._gsap,g&&u&&g.width&&l&&g.time===ji.time&&!g.uncache)return zt(s/g.width*h);if(u&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=h+r,m=e[d],y?e.style[t]=y:fs(e,t)}else(u||a==="%")&&!Wx[kn(p,"display")]&&(o.position=kn(e,"position")),p===e&&(o.position="static"),p.appendChild(us),m=us[d],p.removeChild(us),o.position="absolute";return l&&u&&(g=rs(p),g.time=ji.time,g.width=p[d]),zt(f?m*s/h:m&&s?h/m*s:0)},nr=function(e,t,i,r){var s;return cd||pd(),t in Un&&t!=="transform"&&(t=Un[t],~t.indexOf(",")&&(t=t.split(",")[0])),ir[t]&&t!=="transform"?(s=yo(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Xl(kn(e,zi))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Wl[t]&&Wl[t](e,t,i)||kn(e,t)||vp(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Pr(e,t,s,i)+i:s},Xx=function(e,t,i,r){if(!i||i==="none"){var s=la(t,e,1),a=s&&kn(e,s,1);a&&a!==i?(t=s,i=a):t==="borderColor"&&(i=kn(e,"borderTopColor"))}var o=new Fi(this._pt,e.style,t,0,1,Zp),l=0,c=0,d,h,f,u,m,p,g,v,y,_,w,x;if(o.b=i,o.e=r,i+="",r+="",r==="auto"&&(p=e.style[t],e.style[t]=r,r=kn(e,t)||r,p?e.style[t]=p:fs(e,t)),d=[i,r],Vp(d),i=d[0],r=d[1],f=i.match(Js)||[],x=r.match(Js)||[],x.length){for(;h=Js.exec(r);)g=h[0],y=r.substring(l,h.index),m?m=(m+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(m=1),g!==(p=f[c++]||"")&&(u=parseFloat(p)||0,w=p.substr((u+"").length),g.charAt(1)==="="&&(g=ea(u,g)+w),v=parseFloat(g),_=g.substr((v+"").length),l=Js.lastIndex-_.length,_||(_=_||Xi.units[t]||w,l===r.length&&(r+=_,o.e+=_)),w!==_&&(u=Pr(e,t,p,_)||0),o._pt={_next:o._pt,p:y||c===1?y:",",s:u,c:v-u,m:m&&m<4||t==="zIndex"?Math.round:0});o.c=l<r.length?r.substring(l,r.length):""}else o.r=t==="display"&&r==="none"?sm:rm;return up.test(r)&&(o.e=0),this._pt=o,o},pm={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$x=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=pm[i]||i,t[1]=pm[r]||r,t.join(" ")},qx=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,a=i._gsap,o,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],ir[o]&&(l=1,o=o==="transformOrigin"?zi:Ut),fs(i,o);l&&(fs(i,Ut),a&&(a.svg&&i.removeAttribute("transform"),yo(i,1),a.uncache=1,am(r)))}},Wl={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var a=e._pt=new Fi(e._pt,t,i,0,0,qx);return a.u=r,a.pr=-10,a.tween=s,e._props.push(i),1}}},_o=[1,0,0,1,0,0],mm={},gm=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},vm=function(e){var t=kn(e,Ut);return gm(t)?_o:t.substr(7).match(cp).map(zt)},gd=function(e,t){var i=e._gsap||rs(e),r=e.style,s=vm(e),a,o,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?_o:s):(s===_o&&!e.offsetParent&&e!==sa&&!i.svg&&(l=r.display,r.display="block",a=e.parentNode,(!a||!e.offsetParent)&&(c=1,o=e.nextElementSibling,sa.appendChild(e)),s=vm(e),l?r.display=l:fs(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):sa.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},vd=function(e,t,i,r,s,a){var o=e._gsap,l=s||gd(e,!0),c=o.xOrigin||0,d=o.yOrigin||0,h=o.xOffset||0,f=o.yOffset||0,u=l[0],m=l[1],p=l[2],g=l[3],v=l[4],y=l[5],_=t.split(" "),w=parseFloat(_[0])||0,x=parseFloat(_[1])||0,S,T,E,M;i?l!==_o&&(T=u*g-m*p)&&(E=w*(g/T)+x*(-p/T)+(p*y-g*v)/T,M=w*(-m/T)+x*(u/T)-(u*y-m*v)/T,w=E,x=M):(S=dm(e),w=S.x+(~_[0].indexOf("%")?w/100*S.width:w),x=S.y+(~(_[1]||_[0]).indexOf("%")?x/100*S.height:x)),r||r!==!1&&o.smooth?(v=w-c,y=x-d,o.xOffset=h+(v*u+y*p)-v,o.yOffset=f+(v*m+y*g)-y):o.xOffset=o.yOffset=0,o.xOrigin=w,o.yOrigin=x,o.smooth=!!r,o.origin=t,o.originIsAbsolute=!!i,e.style[zi]="0px 0px",a&&(Cr(a,o,"xOrigin",c,w),Cr(a,o,"yOrigin",d,x),Cr(a,o,"xOffset",h,o.xOffset),Cr(a,o,"yOffset",f,o.yOffset)),e.setAttribute("data-svg-origin",w+" "+x)},yo=function(e,t){var i=e._gsap||new Xp(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=kn(e,zi)||"0",d,h,f,u,m,p,g,v,y,_,w,x,S,T,E,M,b,A,C,P,I,D,F,B,k,K,O,re,ae,Te,G,Y;return d=h=f=p=g=v=y=_=w=0,u=m=1,i.svg=!!(e.getCTM&&fm(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[Ut]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Ut]!=="none"?l[Ut]:"")),r.scale=r.rotate=r.translate="none"),T=gd(e,i.svg),i.svg&&(i.uncache?(k=e.getBBox(),c=i.xOrigin-k.x+"px "+(i.yOrigin-k.y)+"px",B=""):B=!t&&e.getAttribute("data-svg-origin"),vd(e,B||c,!!B||i.originIsAbsolute,i.smooth!==!1,T)),x=i.xOrigin||0,S=i.yOrigin||0,T!==_o&&(A=T[0],C=T[1],P=T[2],I=T[3],d=D=T[4],h=F=T[5],T.length===6?(u=Math.sqrt(A*A+C*C),m=Math.sqrt(I*I+P*P),p=A||C?oa(C,A)*ds:0,y=P||I?oa(P,I)*ds+p:0,y&&(m*=Math.abs(Math.cos(y*aa))),i.svg&&(d-=x-(x*A+S*P),h-=S-(x*C+S*I))):(Y=T[6],Te=T[7],O=T[8],re=T[9],ae=T[10],G=T[11],d=T[12],h=T[13],f=T[14],E=oa(Y,ae),g=E*ds,E&&(M=Math.cos(-E),b=Math.sin(-E),B=D*M+O*b,k=F*M+re*b,K=Y*M+ae*b,O=D*-b+O*M,re=F*-b+re*M,ae=Y*-b+ae*M,G=Te*-b+G*M,D=B,F=k,Y=K),E=oa(-P,ae),v=E*ds,E&&(M=Math.cos(-E),b=Math.sin(-E),B=A*M-O*b,k=C*M-re*b,K=P*M-ae*b,G=I*b+G*M,A=B,C=k,P=K),E=oa(C,A),p=E*ds,E&&(M=Math.cos(E),b=Math.sin(E),B=A*M+C*b,k=D*M+F*b,C=C*M-A*b,F=F*M-D*b,A=B,D=k),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,v=180-v),u=zt(Math.sqrt(A*A+C*C+P*P)),m=zt(Math.sqrt(F*F+Y*Y)),E=oa(D,F),y=Math.abs(E)>2e-4?E*ds:0,w=G?1/(G<0?-G:G):0),i.svg&&(B=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!gm(kn(e,Ut)),B&&e.setAttribute("transform",B))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(u*=-1,y+=p<=0?180:-180,p+=p<=0?180:-180):(m*=-1,y+=y<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=f+a,i.scaleX=zt(u),i.scaleY=zt(m),i.rotation=zt(p)+o,i.rotationX=zt(g)+o,i.rotationY=zt(v)+o,i.skewX=y+o,i.skewY=_+o,i.transformPerspective=w+a,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[zi]=Xl(c)),i.xOffset=i.yOffset=0,i.force3D=Xi.force3D,i.renderTransform=i.svg?jx:lm?_m:Yx,i.uncache=0,i},Xl=function(e){return(e=e.split(" "))[0]+" "+e[1]},_d=function(e,t,i){var r=pi(t);return zt(parseFloat(t)+parseFloat(Pr(e,"x",i+"px",r)))+r},Yx=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,_m(e,t)},hs="0deg",xo="0px",ps=") ",_m=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.z,c=i.rotation,d=i.rotationY,h=i.rotationX,f=i.skewX,u=i.skewY,m=i.scaleX,p=i.scaleY,g=i.transformPerspective,v=i.force3D,y=i.target,_=i.zOrigin,w="",x=v==="auto"&&e&&e!==1||v===!0;if(_&&(h!==hs||d!==hs)){var S=parseFloat(d)*aa,T=Math.sin(S),E=Math.cos(S),M;S=parseFloat(h)*aa,M=Math.cos(S),a=_d(y,a,T*M*-_),o=_d(y,o,-Math.sin(S)*-_),l=_d(y,l,E*M*-_+_)}g!==xo&&(w+="perspective("+g+ps),(r||s)&&(w+="translate("+r+"%, "+s+"%) "),(x||a!==xo||o!==xo||l!==xo)&&(w+=l!==xo||x?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+ps),c!==hs&&(w+="rotate("+c+ps),d!==hs&&(w+="rotateY("+d+ps),h!==hs&&(w+="rotateX("+h+ps),(f!==hs||u!==hs)&&(w+="skew("+f+", "+u+ps),(m!==1||p!==1)&&(w+="scale("+m+", "+p+ps),y.style[Ut]=w||"translate(0, 0)"},jx=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.rotation,c=i.skewX,d=i.skewY,h=i.scaleX,f=i.scaleY,u=i.target,m=i.xOrigin,p=i.yOrigin,g=i.xOffset,v=i.yOffset,y=i.forceCSS,_=parseFloat(a),w=parseFloat(o),x,S,T,E,M;l=parseFloat(l),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,l+=d),l||c?(l*=aa,c*=aa,x=Math.cos(l)*h,S=Math.sin(l)*h,T=Math.sin(l-c)*-f,E=Math.cos(l-c)*f,c&&(d*=aa,M=Math.tan(c-d),M=Math.sqrt(1+M*M),T*=M,E*=M,d&&(M=Math.tan(d),M=Math.sqrt(1+M*M),x*=M,S*=M)),x=zt(x),S=zt(S),T=zt(T),E=zt(E)):(x=h,E=f,S=T=0),(_&&!~(a+"").indexOf("px")||w&&!~(o+"").indexOf("px"))&&(_=Pr(u,"x",a,"px"),w=Pr(u,"y",o,"px")),(m||p||g||v)&&(_=zt(_+m-(m*x+p*T)+g),w=zt(w+p-(m*S+p*E)+v)),(r||s)&&(M=u.getBBox(),_=zt(_+r/100*M.width),w=zt(w+s/100*M.height)),M="matrix("+x+","+S+","+T+","+E+","+_+","+w+")",u.setAttribute("transform",M),y&&(u.style[Ut]=M)},Kx=function(e,t,i,r,s){var a=360,o=ei(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?ds:1),c=l-r,d=r+c+"deg",h,f;return o&&(h=s.split("_")[1],h==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),h==="cw"&&c<0?c=(c+a*nm)%a-~~(c/a)*a:h==="ccw"&&c>0&&(c=(c-a*nm)%a-~~(c/a)*a)),e._pt=f=new Fi(e._pt,t,i,r,c,Ix),f.e=d,f.u="deg",e._props.push(i),f},ym=function(e,t){for(var i in t)e[i]=t[i];return e},Zx=function(e,t,i){var r=ym({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,l,c,d,h,f,u,m;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),a[Ut]=t,o=yo(i,1),fs(i,Ut),i.setAttribute("transform",c)):(c=getComputedStyle(i)[Ut],a[Ut]=t,o=yo(i,1),a[Ut]=c);for(l in ir)c=r[l],d=o[l],c!==d&&s.indexOf(l)<0&&(u=pi(c),m=pi(d),h=u!==m?Pr(i,l,c,m):parseFloat(c),f=parseFloat(d),e._pt=new Fi(e._pt,o,l,h,f-h,fd),e._pt.u=m||0,e._props.push(l));ym(o,r)};ki("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",a=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(o){return e<2?n+o:"border"+o+n});Wl[e>1?"border"+n:n]=function(o,l,c,d,h){var f,u;if(arguments.length<4)return f=a.map(function(m){return nr(o,m,c)}),u=f.join(" "),u.split(f[0]).length===5?f[0]:u;f=(d+"").split(" "),u={},a.forEach(function(m,p){return u[m]=f[p]=f[p]||f[(p-1)/2|0]}),o.init(l,u,h)}});var xm={name:"css",register:pd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var a=this._props,o=e.style,l=i.vars.startAt,c,d,h,f,u,m,p,g,v,y,_,w,x,S,T,E;cd||pd(),this.styles=this.styles||om(e),E=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(d=t[p],!(qi[p]&&$p(p,t,i,r,e,s)))){if(u=typeof d,m=Wl[p],u==="function"&&(d=d.call(i,r,e,s),u=typeof d),u==="string"&&~d.indexOf("random(")&&(d=fo(d)),m)m(this,e,p,d,i)&&(T=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),d+="",Tr.lastIndex=0,Tr.test(c)||(g=pi(c),v=pi(d)),v?g!==v&&(c=Pr(e,p,c,v)+v):g&&(d+=g),this.add(o,"setProperty",c,d,r,s,0,0,p),a.push(p),E.push(p,0,o[p]);else if(u!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(i,r,e,s):l[p],ei(c)&&~c.indexOf("random(")&&(c=fo(c)),pi(c+"")||c==="auto"||(c+=Xi.units[p]||pi(nr(e,p))||""),(c+"").charAt(1)==="="&&(c=nr(e,p))):c=nr(e,p),f=parseFloat(c),y=u==="string"&&d.charAt(1)==="="&&d.substr(0,2),y&&(d=d.substr(2)),h=parseFloat(d),p in Un&&(p==="autoAlpha"&&(f===1&&nr(e,"visibility")==="hidden"&&h&&(f=0),E.push("visibility",0,o.visibility),Cr(this,o,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Un[p],~p.indexOf(",")&&(p=p.split(",")[0]))),_=p in ir,_){if(this.styles.save(p),w||(x=e._gsap,x.renderTransform&&!t.parseTransform||yo(e,t.parseTransform),S=t.smoothOrigin!==!1&&x.smooth,w=this._pt=new Fi(this._pt,o,Ut,0,1,x.renderTransform,x,0,-1),w.dep=1),p==="scale")this._pt=new Fi(this._pt,x,"scaleY",x.scaleY,(y?ea(x.scaleY,y+h):h)-x.scaleY||0,fd),this._pt.u=0,a.push("scaleY",p),p+="X";else if(p==="transformOrigin"){E.push(zi,0,o[zi]),d=$x(d),x.svg?vd(e,d,0,S,0,this):(v=parseFloat(d.split(" ")[2])||0,v!==x.zOrigin&&Cr(this,x,"zOrigin",x.zOrigin,v),Cr(this,o,p,Xl(c),Xl(d)));continue}else if(p==="svgOrigin"){vd(e,d,1,S,0,this);continue}else if(p in mm){Kx(this,x,p,f,y?ea(f,y+d):d);continue}else if(p==="smoothOrigin"){Cr(this,x,"smooth",x.smooth,d);continue}else if(p==="force3D"){x[p]=d;continue}else if(p==="transform"){Zx(this,d,e);continue}}else p in o||(p=la(p)||p);if(_||(h||h===0)&&(f||f===0)&&!Dx.test(d)&&p in o)g=(c+"").substr((f+"").length),h||(h=0),v=pi(d)||(p in Xi.units?Xi.units[p]:g),g!==v&&(f=Pr(e,p,c,v)),this._pt=new Fi(this._pt,_?x:o,p,f,(y?ea(f,y+h):h)-f,!_&&(v==="px"||p==="zIndex")&&t.autoRound!==!1?Nx:fd),this._pt.u=v||0,g!==v&&v!=="%"&&(this._pt.b=c,this._pt.r=Ox);else if(p in o)Xx.call(this,e,p,c,y?y+d:d);else if(p in e)this.add(e,p,c||e[p],y?y+d:d,r,s);else if(p!=="parseTransform"){zu(p,d);continue}_||(p in o?E.push(p,0,o[p]):E.push(p,1,c||e[p])),a.push(p)}}T&&Qp(this)},render:function(e,t){if(t.tween._time||!ud())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:nr,aliases:Un,getSetter:function(e,t,i){var r=Un[t];return r&&r.indexOf(",")<0&&(t=r),t in ir&&t!==zi&&(e._gsap.x||nr(e,"x"))?i&&im===i?t==="scale"?Bx:Fx:(im=i||{})&&(t==="scale"?zx:Vx):e.style&&!Ou(e.style[t])?Ux:~t.indexOf("-")?kx:rd(e,t)},core:{_removeProperty:fs,_getMatrix:gd}};Bi.utils.checkPrefix=la,Bi.core.getStyleSaver=om,function(n,e,t,i){var r=ki(n+","+e+","+t,function(s){ir[s]=1});ki(e,function(s){Xi.units[s]="deg",mm[s]=1}),Un[r[13]]=n+","+e,ki(i,function(s){var a=s.split(":");Un[a[1]]=r[a[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),ki("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Xi.units[n]="px"}),Bi.registerPlugin(xm);var Ee=Bi.registerPlugin(xm)||Bi;Ee.core.Tween,function(){function n(){for(var i=arguments.length,r=0;r<i;r++){var s=r<0||arguments.length<=r?void 0:arguments[r];s.nodeType===1||s.nodeType===11?this.appendChild(s):this.appendChild(document.createTextNode(String(s)))}}function e(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function t(){for(var i=this.parentNode,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=s.length;if(i)for(o||i.removeChild(this);o--;){var l=s[o];typeof l!="object"?l=this.ownerDocument.createTextNode(l):l.parentNode&&l.parentNode.removeChild(l),o?i.insertBefore(this.previousSibling,l):i.replaceChild(l,this)}}typeof Element<"u"&&(Element.prototype.append||(Element.prototype.append=n,DocumentFragment.prototype.append=n),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=e,DocumentFragment.prototype.replaceChildren=e),Element.prototype.replaceWith||(Element.prototype.replaceWith=t,DocumentFragment.prototype.replaceWith=t))}();function Qx(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bm(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function wm(n,e,t){return e&&bm(n.prototype,e),t&&bm(n,t),n}function Jx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Mm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sm(Object(t),!0).forEach(function(i){Jx(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sm(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Tm(n,e){return tb(n)||nb(n,e)||Em(n,e)||sb()}function Ti(n){return eb(n)||ib(n)||Em(n)||rb()}function eb(n){if(Array.isArray(n))return yd(n)}function tb(n){if(Array.isArray(n))return n}function ib(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function nb(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],i=!0,r=!1,s=void 0;try{for(var a=n[Symbol.iterator](),o;!(i=(o=a.next()).done)&&(t.push(o.value),!(e&&t.length===e));i=!0);}catch(l){r=!0,s=l}finally{try{!i&&a.return!=null&&a.return()}finally{if(r)throw s}}return t}}function Em(n,e){if(n){if(typeof n=="string")return yd(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yd(n,e)}}function yd(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function rb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(n,e){return Object.getOwnPropertyNames(Object(n)).reduce(function(t,i){var r=Object.getOwnPropertyDescriptor(Object(n),i),s=Object.getOwnPropertyDescriptor(Object(e),i);return Object.defineProperty(t,i,s||r)},{})}function bo(n){return typeof n=="string"}function xd(n){return Array.isArray(n)}function $l(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ms(n),t;return e.types!==void 0?t=e.types:e.split!==void 0&&(t=e.split),t!==void 0&&(e.types=(bo(t)||xd(t)?String(t):"").split(",").map(function(i){return String(i).trim()}).filter(function(i){return/((line)|(word)|(char))/i.test(i)})),(e.absolute||e.position)&&(e.absolute=e.absolute||/absolute/.test(n.position)),e}function bd(n){var e=bo(n)||xd(n)?String(n):"";return{none:!e,lines:/line/i.test(e),words:/word/i.test(e),chars:/char/i.test(e)}}function ql(n){return n!==null&&typeof n=="object"}function ab(n){return ql(n)&&/^(1|3|11)$/.test(n.nodeType)}function ob(n){return typeof n=="number"&&n>-1&&n%1===0}function lb(n){return ql(n)&&ob(n.length)}function gs(n){return xd(n)?n:n==null?[]:lb(n)?Array.prototype.slice.call(n):[n]}function Am(n){var e=n;return bo(n)&&(/^(#[a-z]\w+)$/.test(n.trim())?e=document.getElementById(n.trim().slice(1)):e=document.querySelectorAll(n)),gs(e).reduce(function(t,i){return[].concat(Ti(t),Ti(gs(i).filter(ab)))},[])}var cb=Object.entries,Yl="_splittype",xn={},ub=0;function Fn(n,e,t){if(!ql(n))return console.warn("[data.set] owner is not an object"),null;var i=n[Yl]||(n[Yl]=++ub),r=xn[i]||(xn[i]={});return t===void 0?e&&Object.getPrototypeOf(e)===Object.prototype&&(xn[i]=Mm(Mm({},r),e)):e!==void 0&&(r[e]=t),t}function vs(n,e){var t=ql(n)?n[Yl]:null,i=t&&xn[t]||{};return i}function Cm(n){var e=n&&n[Yl];e&&(delete n[e],delete xn[e])}function db(){Object.keys(xn).forEach(function(n){delete xn[n]})}function fb(){cb(xn).forEach(function(n){var e=Tm(n,2),t=e[0],i=e[1],r=i.isRoot,s=i.isSplit;(!r||!s)&&(xn[t]=null,delete xn[t])})}function hb(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",t=n?String(n):"";return t.trim().replace(/\s+/g," ").split(e)}var wd="\\ud800-\\udfff",Pm="\\u0300-\\u036f\\ufe20-\\ufe23",Rm="\\u20d0-\\u20f0",Lm="\\ufe0e\\ufe0f",pb="[".concat(wd,"]"),Sd="[".concat(Pm).concat(Rm,"]"),Md="\\ud83c[\\udffb-\\udfff]",mb="(?:".concat(Sd,"|").concat(Md,")"),Dm="[^".concat(wd,"]"),Im="(?:\\ud83c[\\udde6-\\uddff]){2}",Om="[\\ud800-\\udbff][\\udc00-\\udfff]",Nm="\\u200d",Um="".concat(mb,"?"),km="[".concat(Lm,"]?"),gb="(?:"+Nm+"(?:"+[Dm,Im,Om].join("|")+")"+km+Um+")*",vb=km+Um+gb,_b="(?:".concat(["".concat(Dm).concat(Sd,"?"),Sd,Im,Om,pb].join("|"),`
)`),yb=RegExp("".concat(Md,"(?=").concat(Md,")|").concat(_b).concat(vb),"g"),xb=[Nm,wd,Pm,Rm,Lm],bb=RegExp("[".concat(xb.join(""),"]"));function wb(n){return n.split("")}function Fm(n){return bb.test(n)}function Sb(n){return n.match(yb)||[]}function Mb(n){return Fm(n)?Sb(n):wb(n)}function Tb(n){return n==null?"":String(n)}function Eb(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return n=Tb(n),n&&bo(n)&&!e&&Fm(n)?Mb(n):n.split(e)}function Td(n,e){var t=document.createElement(n);return e&&Object.keys(e).forEach(function(i){var r=e[i],s=bo(r)?r.trim():r;s===null||s===""||(i==="children"?t.append.apply(t,Ti(gs(s))):t.setAttribute(i,s))}),t}var Ed={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function Ab(n,e){e=ms(Ed,e);var t=bd(e.types),i=e.tagName,r=n.nodeValue,s=document.createDocumentFragment(),a=[],o=[];return/^\s/.test(r)&&s.append(" "),a=hb(r).reduce(function(l,c,d,h){var f,u;return t.chars&&(u=Eb(c).map(function(m){var p=Td(i,{class:"".concat(e.splitClass," ").concat(e.charClass),style:"display: inline-block;",children:m});return Fn(p,"isChar",!0),o=[].concat(Ti(o),[p]),p})),t.words||t.lines?(f=Td(i,{class:"".concat(e.wordClass," ").concat(e.splitClass),style:"display: inline-block; ".concat(t.words&&e.absolute?"position: relative;":""),children:t.chars?u:c}),Fn(f,{isWord:!0,isWordStart:!0,isWordEnd:!0}),s.appendChild(f)):u.forEach(function(m){s.appendChild(m)}),d<h.length-1&&s.append(" "),t.words?l.concat(f):l},[]),/\s$/.test(r)&&s.append(" "),n.replaceWith(s),{words:a,chars:o}}function Bm(n,e){var t=n.nodeType,i={words:[],chars:[]};if(!/(1|3|11)/.test(t))return i;if(t===3&&/\S/.test(n.nodeValue))return Ab(n,e);var r=gs(n.childNodes);if(r.length&&(Fn(n,"isSplit",!0),!vs(n).isRoot)){n.style.display="inline-block",n.style.position="relative";var s=n.nextSibling,a=n.previousSibling,o=n.textContent||"",l=s?s.textContent:" ",c=a?a.textContent:" ";Fn(n,{isWordEnd:/\s$/.test(o)||/^\s/.test(l),isWordStart:/^\s/.test(o)||/\s$/.test(c)})}return r.reduce(function(d,h){var f=Bm(h,e),u=f.words,m=f.chars;return{words:[].concat(Ti(d.words),Ti(u)),chars:[].concat(Ti(d.chars),Ti(m))}},i)}function Cb(n,e,t,i){if(!t.absolute)return{top:e?n.offsetTop:null};var r=n.offsetParent,s=Tm(i,2),a=s[0],o=s[1],l=0,c=0;if(r&&r!==document.body){var d=r.getBoundingClientRect();l=d.x+a,c=d.y+o}var h=n.getBoundingClientRect(),f=h.width,u=h.height,m=h.x,p=h.y,g=p+o-c,v=m+a-l;return{width:f,height:u,top:g,left:v}}function zm(n){vs(n).isWord?(Cm(n),n.replaceWith.apply(n,Ti(n.childNodes))):gs(n.children).forEach(function(e){return zm(e)})}var Pb=function(){return document.createDocumentFragment()};function Rb(n,e,t){var i=bd(e.types),r=e.tagName,s=n.getElementsByTagName("*"),a=[],o=[],l=null,c,d,h,f=[],u=n.parentElement,m=n.nextElementSibling,p=Pb(),g=window.getComputedStyle(n),v=g.textAlign,y=parseFloat(g.fontSize),_=y*.2;return e.absolute&&(h={left:n.offsetLeft,top:n.offsetTop,width:n.offsetWidth},d=n.offsetWidth,c=n.offsetHeight,Fn(n,{cssWidth:n.style.width,cssHeight:n.style.height})),gs(s).forEach(function(w){var x=w.parentElement===n,S=Cb(w,x,e,t),T=S.width,E=S.height,M=S.top,b=S.left;/^br$/i.test(w.nodeName)||(i.lines&&x&&((l===null||M-l>=_)&&(l=M,a.push(o=[])),o.push(w)),e.absolute&&Fn(w,{top:M,left:b,width:T,height:E}))}),u&&u.removeChild(n),i.lines&&(f=a.map(function(w){var x=Td(r,{class:"".concat(e.splitClass," ").concat(e.lineClass),style:"display: block; text-align: ".concat(v,"; width: 100%;")});Fn(x,"isLine",!0);var S={height:0,top:1e4};return p.appendChild(x),w.forEach(function(T,E,M){var b=vs(T),A=b.isWordEnd,C=b.top,P=b.height,I=M[E+1];S.height=Math.max(S.height,P),S.top=Math.min(S.top,C),x.appendChild(T),A&&vs(I).isWordStart&&x.append(" ")}),e.absolute&&Fn(x,{height:S.height,top:S.top}),x}),i.words||zm(p),n.replaceChildren(p)),e.absolute&&(n.style.width="".concat(n.style.width||d,"px"),n.style.height="".concat(c,"px"),gs(s).forEach(function(w){var x=vs(w),S=x.isLine,T=x.top,E=x.left,M=x.width,b=x.height,A=vs(w.parentElement),C=!S&&A.isLine;w.style.top="".concat(C?T-A.top:T,"px"),w.style.left=S?"".concat(h.left,"px"):"".concat(E-(C?h.left:0),"px"),w.style.height="".concat(b,"px"),w.style.width=S?"".concat(h.width,"px"):"".concat(M,"px"),w.style.position="absolute"})),u&&(m?u.insertBefore(n,m):u.appendChild(n)),f}var ca=ms(Ed,{}),wo=function(){wm(n,null,[{key:"clearData",value:function(){db()}},{key:"setDefaults",value:function(t){return ca=ms(ca,$l(t)),Ed}},{key:"revert",value:function(t){Am(t).forEach(function(i){var r=vs(i),s=r.isSplit,a=r.html,o=r.cssWidth,l=r.cssHeight;s&&(i.innerHTML=a,i.style.width=o||"",i.style.height=l||"",Cm(i))})}},{key:"create",value:function(t,i){return new n(t,i)}},{key:"data",get:function(){return xn}},{key:"defaults",get:function(){return ca},set:function(t){ca=ms(ca,$l(t))}}]);function n(e,t){Qx(this,n),this.isSplit=!1,this.settings=ms(ca,$l(t)),this.elements=Am(e),this.split()}return wm(n,[{key:"split",value:function(t){var i=this;this.revert(),this.elements.forEach(function(a){Fn(a,"html",a.innerHTML)}),this.lines=[],this.words=[],this.chars=[];var r=[window.pageXOffset,window.pageYOffset];t!==void 0&&(this.settings=ms(this.settings,$l(t)));var s=bd(this.settings.types);s.none||(this.elements.forEach(function(a){Fn(a,"isRoot",!0);var o=Bm(a,i.settings),l=o.words,c=o.chars;i.words=[].concat(Ti(i.words),Ti(l)),i.chars=[].concat(Ti(i.chars),Ti(c))}),this.elements.forEach(function(a){if(s.lines||i.settings.absolute){var o=Rb(a,i.settings,r);i.lines=[].concat(Ti(i.lines),Ti(o))}}),this.isSplit=!0,window.scrollTo(r[0],r[1]),fb())}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),n.revert(this.elements)}}]),n}();function Ad(n,e="words"){const t=new wo(n,{types:e});switch(e){case"chars":return So(t.words,"word"),So(t.chars,"char"),jl(n,e),t.chars;case"words":return So(t.words,"word"),jl(n,e),t.words;case"lines":return So(t.lines,"line"),jl(n,e),t.lines;default:return So(t.words,"word"),jl(n,e),t.words}}function So(n,e){n.forEach(t=>{const i=document.createElement("div");i.classList.add(e),i.style.display=e==="line"?"block":"inline-block",t.parentNode.insertBefore(i,t),i.appendChild(t)})}function jl(n,e){const t=document.createElement("style");let i="";e==="lines"?i=`
      [data-split-type="lines"] .line {
        overflow: hidden;
      }
    `:e==="words"?i=`
      [data-split-type="words"] .word {
        overflow: hidden;
      }
    `:e==="chars"&&(i=`
      [data-split-type="chars"] .char {
        overflow: hidden;
      }
    `),t.textContent=i,document.head.append(t)}function Lb(){document.querySelectorAll("[data-page-load-split]").forEach(e=>{const t=e.dataset.splitType||"words",i=Ad(e,t);Ee.from(i,{opacity:0,y:100,stagger:.05,duration:1,ease:"power3.out"})})}window.addEventListener("load",()=>{Lb()});class Db{constructor({element:e,config:t}){this.element=e,this.config={root:null,margin:(t==null?void 0:t.margin)||"10px",threshold:(t==null?void 0:t.threshold)||0,once:t.once},this.init(),this.start()}init(){this.in=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&this.isIn()})},{rootMargin:this.config.margin,threshold:this.config.threshold}),this.out=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting||this.isOut()})},{rootMargin:"0px",threshold:0})}start(){this.in.observe(this.element),this.out.observe(this.element)}stop(){this.in.unobserve(this.element),this.out.unobserve(this.element)}isIn(){this.animateIn(),this.config.once&&this.stop()}isOut(){this.animateOut()}}class Ib extends Db{constructor(e){var i;const t={margin:e.dataset.obsM||"10px",threshold:+e.dataset.obsT||0,once:e.dataset.obsOnce==="true",aSplit:e.dataset.aSplit||"word",aDuration:e.dataset.aDuration??1.9,aEach:e.dataset.aEach??.05,aDelay:e.dataset.aDelay??0,aEase:e.dataset.aEase??"expo.out",aFrom:e.dataset.aFrom??"start"};super({element:e,config:t}),this.config=t,this.item=e,this.animated=Ob(e),this.a={y:"120%",x:"0%"},(i=this.animated)!=null&&i.length&&Ee.set(this.animated,{y:this.a.y})}animateIn(){var e,t;(e=this.animated)!=null&&e.length&&((t=this.animation)==null||t.kill(),this.animation=Ee.to(this.animated,{y:"0%",delay:this.config.aDelay,duration:this.config.aDuration,stagger:{each:this.config.aEach,from:this.config.aFrom},ease:this.config.aEase}))}animateOut(){var e,t;(e=this.animated)!=null&&e.length&&((t=this.animation)==null||t.kill(),this.animation=Ee.set(this.animated,{y:this.a.y}))}}class Vm{constructor(e){this.selector=e,this.reference=[...document.querySelectorAll(`[${e}]`)],this.reference.length&&(this.injectCss(),this.init())}init(){this.animations=this.reference.map(e=>new Ib(e))}injectCss(){const e=document.createElement("style"),t=`[${this.selector}] > div { overflow: hidden; }`;e.textContent=t,document.head.append(e)}}function Ob(n){switch(n.dataset.aSplit){case"char":return Nb(Mo(n));case"word":return Mo(Mo(n));case"line":return Hm(Hm(n));default:return Mo(Mo(n))}}function Nb(n){return new wo(n,{types:"chars"}).chars}function Mo(n){return new wo(n,{types:"words"}).words}function Hm(n){return new wo(n,{types:"lines"}).lines}document.addEventListener("DOMContentLoaded",()=>{const n="data-animate";document.querySelectorAll(`[${n}]`).length>0&&new Vm(n)});const Ub=".nav_link_item",Gm=".nav_link_text_rel",Wm=".nav_link_text_ab",kb=n=>{const e=n.currentTarget.querySelector(Gm),t=n.currentTarget.querySelector(Wm);Ee.to(e,{yPercent:-120,rotation:3,duration:.7,ease:"expo.out"}),Ee.fromTo(t,{yPercent:100,rotation:-3},{yPercent:0,rotation:0,duration:.7,ease:"expo.out"})},Fb=n=>{const e=n.currentTarget.querySelector(Gm),t=n.currentTarget.querySelector(Wm);Ee.fromTo(e,{yPercent:-120,rotation:3},{yPercent:0,rotation:0,duration:.7,ease:"expo.out"}),Ee.to(t,{yPercent:120,rotation:-3,duration:.7,ease:"expo.out"})},Bb=()=>{document.querySelectorAll(Ub).forEach(n=>{n.addEventListener("mouseenter",kb),n.addEventListener("mouseleave",Fb)})};/*!
 * matrix 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var rr,_s,Cd,Kl,To,Zl,Ql,Eo,bn="transform",Pd=bn+"Origin",Xm,Rd=function(e){var t=e.ownerDocument||e;for(!(bn in e.style)&&("msTransform"in e.style)&&(bn="msTransform",Pd=bn+"Origin");t.parentNode&&(t=t.parentNode););if(_s=window,Ql=new ys,t){rr=t,Cd=t.documentElement,Kl=t.body,Eo=rr.createElementNS("http://www.w3.org/2000/svg","g"),Eo.style.transform="none";var i=t.createElement("div"),r=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(r),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Xm=r.offsetParent!==i,s.removeChild(i))}return t},zb=function(e){for(var t,i;e&&e!==Kl;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},$m=[],qm=[],Ld=function(){return _s.pageYOffset||rr.scrollTop||Cd.scrollTop||Kl.scrollTop||0},Dd=function(){return _s.pageXOffset||rr.scrollLeft||Cd.scrollLeft||Kl.scrollLeft||0},Id=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},Vb=function n(e){if(_s.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return n(e)},Od=function n(e,t){if(e.parentNode&&(rr||Rd(e))){var i=Id(e),r=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?t?"rect":"g":"div",a=t!==2?0:100,o=t===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=rr.createElementNS?rr.createElementNS(r.replace(/^https/,"http"),s):rr.createElement(s);return t&&(i?(Zl||(Zl=n(e)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+a+","+o+")"),Zl.appendChild(c)):(To||(To=n(e),To.style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+o+"px;left:"+a+"px",To.appendChild(c))),c}throw"Need document and parent."},Hb=function(e){for(var t=new ys,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},Ym=function(e){var t=e.getCTM(),i;return t||(i=e.style[bn],e.style[bn]="none",e.appendChild(Eo),t=Eo.getCTM(),e.removeChild(Eo),i?e.style[bn]=i:e.style.removeProperty(bn.replace(/([A-Z])/g,"-$1").toLowerCase())),t||Ql.clone()},Gb=function(e,t){var i=Id(e),r=e===i,s=i?$m:qm,a=e.parentNode,o,l,c,d,h,f;if(e===_s)return e;if(s.length||s.push(Od(e,1),Od(e,2),Od(e,3)),o=i?Zl:To,i)r?(c=Ym(e),d=-c.e/c.a,h=-c.f/c.d,l=Ql):e.getBBox?(c=e.getBBox(),l=e.transform?e.transform.baseVal:{},l=l.numberOfItems?l.numberOfItems>1?Hb(l):l.getItem(0).matrix:Ql,d=l.a*c.x+l.c*c.y,h=l.b*c.x+l.d*c.y):(l=new ys,d=h=0),t&&e.tagName.toLowerCase()==="g"&&(d=h=0),(r?i:a).appendChild(o),o.setAttribute("transform","matrix("+l.a+","+l.b+","+l.c+","+l.d+","+(l.e+d)+","+(l.f+h)+")");else{if(d=h=0,Xm)for(l=e.offsetParent,c=e;c&&(c=c.parentNode)&&c!==l&&c.parentNode;)(_s.getComputedStyle(c)[bn]+"").length>4&&(d=c.offsetLeft,h=c.offsetTop,c=0);if(f=_s.getComputedStyle(e),f.position!=="absolute"&&f.position!=="fixed")for(l=e.offsetParent;a&&a!==l;)d+=a.scrollLeft||0,h+=a.scrollTop||0,a=a.parentNode;c=o.style,c.top=e.offsetTop-h+"px",c.left=e.offsetLeft-d+"px",c[bn]=f[bn],c[Pd]=f[Pd],c.position=f.position==="fixed"?"fixed":"absolute",e.parentNode.appendChild(o)}return o},Nd=function(e,t,i,r,s,a,o){return e.a=t,e.b=i,e.c=r,e.d=s,e.e=a,e.f=o,e},ys=function(){function n(t,i,r,s,a,o){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),Nd(this,t,i,r,s,a,o)}var e=n.prototype;return e.inverse=function(){var i=this.a,r=this.b,s=this.c,a=this.d,o=this.e,l=this.f,c=i*a-r*s||1e-10;return Nd(this,a/c,-r/c,-s/c,i/c,(s*l-a*o)/c,-(i*l-r*o)/c)},e.multiply=function(i){var r=this.a,s=this.b,a=this.c,o=this.d,l=this.e,c=this.f,d=i.a,h=i.c,f=i.b,u=i.d,m=i.e,p=i.f;return Nd(this,d*r+f*a,d*s+f*o,h*r+u*a,h*s+u*o,l+m*r+p*a,c+m*s+p*o)},e.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var r=this.a,s=this.b,a=this.c,o=this.d,l=this.e,c=this.f;return r===i.a&&s===i.b&&a===i.c&&o===i.d&&l===i.e&&c===i.f},e.apply=function(i,r){r===void 0&&(r={});var s=i.x,a=i.y,o=this.a,l=this.b,c=this.c,d=this.d,h=this.e,f=this.f;return r.x=s*o+a*c+h||0,r.y=s*l+a*d+f||0,r},n}();function Bn(n,e,t,i){if(!n||!n.parentNode||(rr||Rd(n)).documentElement===n)return new ys;var r=zb(n),s=Id(n),a=s?$m:qm,o=Gb(n,t),l=a[0].getBoundingClientRect(),c=a[1].getBoundingClientRect(),d=a[2].getBoundingClientRect(),h=o.parentNode,f=!i&&Vb(n),u=new ys((c.left-l.left)/100,(c.top-l.top)/100,(d.left-l.left)/100,(d.top-l.top)/100,l.left+(f?0:Dd()),l.top+(f?0:Ld()));if(h.removeChild(o),r)for(l=r.length;l--;)c=r[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c);return e?u.inverse():u}/*!
 * Flip 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Wb=1,ua,mi,Pt,Ao,Rr,sr,Ud,jm=function(e,t){return e.actions.forEach(function(i){return i.vars[t]&&i.vars[t](i)})},kd={},Km=180/Math.PI,Xb=Math.PI/180,Jl={},Zm={},ec={},Fd=function(e){return typeof e=="string"?e.split(" ").join("").split(","):e},$b=Fd("onStart,onUpdate,onComplete,onReverseComplete,onInterrupt"),tc=Fd("transform,transformOrigin,width,height,position,top,left,opacity,zIndex,maxWidth,maxHeight,minWidth,minHeight"),Co=function(e){return ua(e)[0]||console.warn("Element not found:",e)},da=function(e){return Math.round(e*1e4)/1e4||0},Bd=function(e,t,i){return e.forEach(function(r){return r.classList[i](t)})},Qm={zIndex:1,kill:1,simple:1,spin:1,clearProps:1,targets:1,toggleClass:1,onComplete:1,onUpdate:1,onInterrupt:1,onStart:1,delay:1,repeat:1,repeatDelay:1,yoyo:1,scale:1,fade:1,absolute:1,props:1,onEnter:1,onLeave:1,custom:1,paused:1,nested:1,prune:1,absoluteOnLeave:1},Jm={zIndex:1,simple:1,clearProps:1,scale:1,absolute:1,fitChild:1,getVars:1,props:1},eg=function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},fa=function(e,t){var i={},r;for(r in e)t[r]||(i[r]=e[r]);return i},zd={},tg=function(e){var t=zd[e]=Fd(e);return ec[e]=t.concat(tc),t},qb=function(e){var t=e._gsap||mi.core.getCache(e);return t.gmCache===mi.ticker.frame?t.gMatrix:(t.gmCache=mi.ticker.frame,t.gMatrix=Bn(e,!0,!1,!0))},Yb=function n(e,t,i){i===void 0&&(i=0);for(var r=e.parentNode,s=1e3*Math.pow(10,i)*(t?-1:1),a=t?-s*900:0;e;)a+=s,e=e.previousSibling;return r?a+n(r,t,i+1):a},ic=function(e,t,i){return e.forEach(function(r){return r.d=Yb(i?r.element:r.t,t)}),e.sort(function(r,s){return r.d-s.d}),e},Po=function(e,t){for(var i=e.element.style,r=e.css=e.css||[],s=t.length,a,o;s--;)a=t[s],o=i[a]||i.getPropertyValue(a),r.push(o?a:Zm[a]||(Zm[a]=eg(a)),o);return i},nc=function(e){var t=e.css,i=e.element.style,r=0;for(e.cache.uncache=1;r<t.length;r+=2)t[r+1]?i[t[r]]=t[r+1]:i.removeProperty(t[r]);!t[t.indexOf("transform")+1]&&i.translate&&(i.removeProperty("translate"),i.removeProperty("scale"),i.removeProperty("rotate"))},ig=function(e,t){e.forEach(function(i){return i.a.cache.uncache=1}),t||e.finalStates.forEach(nc)},Vd="paddingTop,paddingRight,paddingBottom,paddingLeft,gridArea,transition".split(","),Hd=function(e,t,i){var r=e.element,s=e.width,a=e.height,o=e.uncache,l=e.getProp,c=r.style,d=4,h,f,u;if(typeof t!="object"&&(t=e),Pt&&i!==1)return Pt._abs.push({t:r,b:e,a:e,sd:0}),Pt._final.push(function(){return(e.cache.uncache=1)&&nc(e)}),r;for(f=l("display")==="none",(!e.isVisible||f)&&(f&&(Po(e,["display"]).display=t.display),e.matrix=t.matrix,e.width=s=e.width||t.width,e.height=a=e.height||t.height),Po(e,Vd),u=window.getComputedStyle(r);d--;)c[Vd[d]]=u[Vd[d]];if(c.gridArea="1 / 1 / 1 / 1",c.transition="none",c.position="absolute",c.width=s+"px",c.height=a+"px",c.top||(c.top="0px"),c.left||(c.left="0px"),o)h=new xs(r);else if(h=fa(e,Jl),h.position="absolute",e.simple){var m=r.getBoundingClientRect();h.matrix=new ys(1,0,0,1,m.left+Dd(),m.top+Ld())}else h.matrix=Bn(r,!1,!1,!0);return h=ha(h,e,!0),e.x=sr(h.x,.01),e.y=sr(h.y,.01),r},ng=function(e,t){return t!==!0&&(t=ua(t),e=e.filter(function(i){if(t.indexOf((i.sd<0?i.b:i.a).element)!==-1)return!0;i.t._gsap.renderTransform(1),i.b.isVisible&&(i.t.style.width=i.b.width+"px",i.t.style.height=i.b.height+"px")})),e},rg=function(e){return ic(e,!0).forEach(function(t){return(t.a.isVisible||t.b.isVisible)&&Hd(t.sd<0?t.b:t.a,t.b,1)})},jb=function(e,t){return t&&e.idLookup[Gd(t).id]||e.elementStates[0]},Gd=function(e,t,i,r){return e instanceof xs?e:e instanceof wn?jb(e,r):new xs(typeof e=="string"?Co(e)||console.warn(e+" not found"):e,t,i)},Kb=function(e,t){for(var i=mi.getProperty(e.element,null,"native"),r=e.props={},s=t.length;s--;)r[t[s]]=(i(t[s])+"").trim();return r.zIndex&&(r.zIndex=parseFloat(r.zIndex)||0),e},sg=function(e,t){var i=e.style||e,r;for(r in t)i[r]=t[r]},Zb=function(e){var t=e.getAttribute("data-flip-id");return t||e.setAttribute("data-flip-id",t="auto-"+Wb++),t},ag=function(e){return e.map(function(t){return t.element})},og=function(e,t,i){return e&&t.length&&i.add(e(ag(t),i,new wn(t,0,!0)),0)},ha=function(e,t,i,r,s,a){var o=e.element,l=e.cache,c=e.parent,d=e.x,h=e.y,f=t.width,u=t.height,m=t.scaleX,p=t.scaleY,g=t.rotation,v=t.bounds,y=a&&Ud&&Ud(o,"transform"),_=e,w=t.matrix,x=w.e,S=w.f,T=e.bounds.width!==v.width||e.bounds.height!==v.height||e.scaleX!==m||e.scaleY!==p||e.rotation!==g,E=!T&&e.simple&&t.simple&&!s,M,b,A,C,P,I,D;return E||!c?(m=p=1,g=M=0):(P=qb(c),I=P.clone().multiply(t.ctm?t.matrix.clone().multiply(t.ctm):t.matrix),g=da(Math.atan2(I.b,I.a)*Km),M=da(Math.atan2(I.c,I.d)*Km+g)%360,m=Math.sqrt(Math.pow(I.a,2)+Math.pow(I.b,2)),p=Math.sqrt(Math.pow(I.c,2)+Math.pow(I.d,2))*Math.cos(M*Xb),s&&(s=ua(s)[0],C=mi.getProperty(s),D=s.getBBox&&typeof s.getBBox=="function"&&s.getBBox(),_={scaleX:C("scaleX"),scaleY:C("scaleY"),width:D?D.width:Math.ceil(parseFloat(C("width","px"))),height:D?D.height:parseFloat(C("height","px"))}),l.rotation=g+"deg",l.skewX=M+"deg"),i?(m*=f===_.width||!_.width?1:f/_.width,p*=u===_.height||!_.height?1:u/_.height,l.scaleX=m,l.scaleY=p):(f=sr(f*m/_.scaleX,0),u=sr(u*p/_.scaleY,0),o.style.width=f+"px",o.style.height=u+"px"),r&&sg(o,t.props),E||!c?(d+=x-e.matrix.e,h+=S-e.matrix.f):T||c!==t.parent?(l.renderTransform(1,l),I=Bn(s||o,!1,!1,!0),b=P.apply({x:I.e,y:I.f}),A=P.apply({x,y:S}),d+=A.x-b.x,h+=A.y-b.y):(P.e=P.f=0,A=P.apply({x:x-e.matrix.e,y:S-e.matrix.f}),d+=A.x,h+=A.y),d=sr(d,.02),h=sr(h,.02),a&&!(a instanceof xs)?y&&y.revert():(l.x=d+"px",l.y=h+"px",l.renderTransform(1,l)),a&&(a.x=d,a.y=h,a.rotation=g,a.skewX=M,i?(a.scaleX=m,a.scaleY=p):(a.width=f,a.height=u)),a||l},Wd=function(e,t){return e instanceof wn?e:new wn(e,t)},lg=function(e,t,i){var r=e.idLookup[i],s=e.alt[i];return s.isVisible&&(!(t.getElementState(s.element)||s).isVisible||!r.isVisible)?s:r},Xd=[],$d="width,height,overflowX,overflowY".split(","),rc,cg=function(e){if(e!==rc){var t=Rr.style,i=Rr.clientWidth===window.outerWidth,r=Rr.clientHeight===window.outerHeight,s=4;if(e&&(i||r)){for(;s--;)Xd[s]=t[$d[s]];i&&(t.width=Rr.clientWidth+"px",t.overflowY="hidden"),r&&(t.height=Rr.clientHeight+"px",t.overflowX="hidden"),rc=e}else if(rc){for(;s--;)Xd[s]?t[$d[s]]=Xd[s]:t.removeProperty(eg($d[s]));rc=e}}},qd=function(e,t,i,r){e instanceof wn&&t instanceof wn||console.warn("Not a valid state object."),i=i||{};var s=i,a=s.clearProps,o=s.onEnter,l=s.onLeave,c=s.absolute,d=s.absoluteOnLeave,h=s.custom,f=s.delay,u=s.paused,m=s.repeat,p=s.repeatDelay,g=s.yoyo,v=s.toggleClass,y=s.nested,_=s.zIndex,w=s.scale,x=s.fade,S=s.stagger,T=s.spin,E=s.prune,M=("props"in i?i:e).props,b=fa(i,Qm),A=mi.timeline({delay:f,paused:u,repeat:m,repeatDelay:p,yoyo:g,data:"isFlip"}),C=b,P=[],I=[],D=[],F=[],B=T===!0?1:T||0,k=typeof T=="function"?T:function(){return B},K=e.interrupted||t.interrupted,O=A[r!==1?"to":"from"],re,ae,Te,G,Y,Q,te,he,Ae,V,ze,Re,ge,fe;for(ae in t.idLookup)ze=t.alt[ae]?lg(t,e,ae):t.idLookup[ae],Y=ze.element,V=e.idLookup[ae],e.alt[ae]&&Y===V.element&&(e.alt[ae].isVisible||!ze.isVisible)&&(V=e.alt[ae]),V?(Q={t:Y,b:V,a:ze,sd:V.element===Y?0:ze.isVisible?1:-1},D.push(Q),Q.sd&&(Q.sd<0&&(Q.b=ze,Q.a=V),K&&Po(Q.b,M?ec[M]:tc),x&&D.push(Q.swap={t:V.element,b:Q.b,a:Q.a,sd:-Q.sd,swap:Q})),Y._flip=V.element._flip=Pt?Pt.timeline:A):ze.isVisible&&(D.push({t:Y,b:fa(ze,{isVisible:1}),a:ze,sd:0,entering:1}),Y._flip=Pt?Pt.timeline:A);if(M&&(zd[M]||tg(M)).forEach(function(X){return b[X]=function(Ye){return D[Ye].a.props[X]}}),D.finalStates=Ae=[],Re=function(){for(ic(D),cg(!0),G=0;G<D.length;G++)Q=D[G],ge=Q.a,fe=Q.b,E&&!ge.isDifferent(fe)&&!Q.entering?D.splice(G--,1):(Y=Q.t,y&&!(Q.sd<0)&&G&&(ge.matrix=Bn(Y,!1,!1,!0)),fe.isVisible&&ge.isVisible?(Q.sd<0?(te=new xs(Y,M,e.simple),ha(te,ge,w,0,0,te),te.matrix=Bn(Y,!1,!1,!0),te.css=Q.b.css,Q.a=ge=te,x&&(Y.style.opacity=K?fe.opacity:ge.opacity),S&&F.push(Y)):Q.sd>0&&x&&(Y.style.opacity=K?ge.opacity-fe.opacity:"0"),ha(ge,fe,w,M)):fe.isVisible!==ge.isVisible&&(fe.isVisible?ge.isVisible||(fe.css=ge.css,I.push(fe),D.splice(G--,1),c&&y&&ha(ge,fe,w,M)):(ge.isVisible&&P.push(ge),D.splice(G--,1))),w||(Y.style.maxWidth=Math.max(ge.width,fe.width)+"px",Y.style.maxHeight=Math.max(ge.height,fe.height)+"px",Y.style.minWidth=Math.min(ge.width,fe.width)+"px",Y.style.minHeight=Math.min(ge.height,fe.height)+"px"),y&&v&&Y.classList.add(v)),Ae.push(ge);var Ye;if(v&&(Ye=Ae.map(function(z){return z.element}),y&&Ye.forEach(function(z){return z.classList.remove(v)})),cg(!1),w?(b.scaleX=function(z){return D[z].a.scaleX},b.scaleY=function(z){return D[z].a.scaleY}):(b.width=function(z){return D[z].a.width+"px"},b.height=function(z){return D[z].a.height+"px"},b.autoRound=i.autoRound||!1),b.x=function(z){return D[z].a.x+"px"},b.y=function(z){return D[z].a.y+"px"},b.rotation=function(z){return D[z].a.rotation+(T?k(z,he[z],he)*360:0)},b.skewX=function(z){return D[z].a.skewX},he=D.map(function(z){return z.t}),(_||_===0)&&(b.modifiers={zIndex:function(){return _}},b.zIndex=_,b.immediateRender=i.immediateRender!==!1),x&&(b.opacity=function(z){return D[z].sd<0?0:D[z].sd>0?D[z].a.opacity:"+=0"}),F.length){S=mi.utils.distribute(S);var U=he.slice(F.length);b.stagger=function(z,ie){return S(~F.indexOf(ie)?he.indexOf(D[z].swap.t):z,ie,U)}}if($b.forEach(function(z){return i[z]&&A.eventCallback(z,i[z],i[z+"Params"])}),h&&he.length){C=fa(b,Qm),"scale"in h&&(h.scaleX=h.scaleY=h.scale,delete h.scale);for(ae in h)re=fa(h[ae],Jm),re[ae]=b[ae],!("duration"in re)&&"duration"in b&&(re.duration=b.duration),re.stagger=b.stagger,O.call(A,he,re,0),delete C[ae]}(he.length||I.length||P.length)&&(v&&A.add(function(){return Bd(Ye,v,A._zTime<0?"remove":"add")},0)&&!u&&Bd(Ye,v,"add"),he.length&&O.call(A,he,C,0)),og(o,P,A),og(l,I,A);var R=Pt&&Pt.timeline;R&&(R.add(A,0),Pt._final.push(function(){return ig(D,!a)})),Te=A.duration(),A.call(function(){var z=A.time()>=Te;z&&!R&&ig(D,!a),v&&Bd(Ye,v,z?"remove":"add")})},d&&(c=D.filter(function(X){return!X.sd&&!X.a.isVisible&&X.b.isVisible}).map(function(X){return X.a.element})),Pt){var Ie;c&&(Ie=Pt._abs).push.apply(Ie,ng(D,c)),Pt._run.push(Re)}else c&&rg(ng(D,c)),Re();var Ne=Pt?Pt.timeline:A;return Ne.revert=function(){return Yd(Ne,1,1)},Ne},Qb=function n(e){e.vars.onInterrupt&&e.vars.onInterrupt.apply(e,e.vars.onInterruptParams||[]),e.getChildren(!0,!1,!0).forEach(n)},Yd=function(e,t,i){if(e&&e.progress()<1&&(!e.paused()||i))return t&&(Qb(e),t<2&&e.progress(1),e.kill()),!0},sc=function(e){for(var t=e.idLookup={},i=e.alt={},r=e.elementStates,s=r.length,a;s--;)a=r[s],t[a.id]?i[a.id]=a:t[a.id]=a},wn=function(){function n(t,i,r){if(this.props=i&&i.props,this.simple=!!(i&&i.simple),r)this.targets=ag(t),this.elementStates=t,sc(this);else{this.targets=ua(t);var s=i&&(i.kill===!1||i.batch&&!i.kill);Pt&&!s&&Pt._kill.push(this),this.update(s||!!Pt)}}var e=n.prototype;return e.update=function(i){var r=this;return this.elementStates=this.targets.map(function(s){return new xs(s,r.props,r.simple)}),sc(this),this.interrupt(i),this.recordInlineStyles(),this},e.clear=function(){return this.targets.length=this.elementStates.length=0,sc(this),this},e.fit=function(i,r,s){for(var a=ic(this.elementStates.slice(0),!1,!0),o=(i||this).idLookup,l=0,c,d;l<a.length;l++)c=a[l],s&&(c.matrix=Bn(c.element,!1,!1,!0)),d=o[c.id],d&&ha(c,d,r,!0,0,c),c.matrix=Bn(c.element,!1,!1,!0);return this},e.getProperty=function(i,r){var s=this.getElementState(i)||Jl;return(r in s?s:s.props||Jl)[r]},e.add=function(i){for(var r=i.targets.length,s=this.idLookup,a=this.alt,o,l,c;r--;)l=i.elementStates[r],c=s[l.id],c&&(l.element===c.element||a[l.id]&&a[l.id].element===l.element)?(o=this.elementStates.indexOf(l.element===c.element?c:a[l.id]),this.targets.splice(o,1,i.targets[r]),this.elementStates.splice(o,1,l)):(this.targets.push(i.targets[r]),this.elementStates.push(l));return i.interrupted&&(this.interrupted=!0),i.simple||(this.simple=!1),sc(this),this},e.compare=function(i){var r=i.idLookup,s=this.idLookup,a=[],o=[],l=[],c=[],d=[],h=i.alt,f=this.alt,u=function(E,M,b){return(E.isVisible!==M.isVisible?E.isVisible?l:c:E.isVisible?o:a).push(b)&&d.push(b)},m=function(E,M,b){return d.indexOf(b)<0&&u(E,M,b)},p,g,v,y,_,w,x,S;for(v in r)_=h[v],w=f[v],p=_?lg(i,this,v):r[v],y=p.element,g=s[v],w?(S=g.isVisible||!w.isVisible&&y===g.element?g:w,x=_&&!p.isVisible&&!_.isVisible&&S.element===_.element?_:p,x.isVisible&&S.isVisible&&x.element!==S.element?((x.isDifferent(S)?o:a).push(x.element,S.element),d.push(x.element,S.element)):u(x,S,x.element),_&&x.element===_.element&&(_=r[v]),m(x.element!==g.element&&_?_:x,g,g.element),m(_&&_.element===w.element?_:x,w,w.element),_&&m(_,w.element===_.element?w:g,_.element)):(g?g.isDifferent(p)?u(p,g,y):a.push(y):l.push(y),_&&m(_,g,_.element));for(v in s)r[v]||(c.push(s[v].element),f[v]&&c.push(f[v].element));return{changed:o,unchanged:a,enter:l,leave:c}},e.recordInlineStyles=function(){for(var i=ec[this.props]||tc,r=this.elementStates.length;r--;)Po(this.elementStates[r],i)},e.interrupt=function(i){var r=this,s=[];this.targets.forEach(function(a){var o=a._flip,l=Yd(o,i?0:1);i&&l&&s.indexOf(o)<0&&o.add(function(){return r.updateVisibility()}),l&&s.push(o)}),!i&&s.length&&this.updateVisibility(),this.interrupted||(this.interrupted=!!s.length)},e.updateVisibility=function(){this.elementStates.forEach(function(i){var r=i.element.getBoundingClientRect();i.isVisible=!!(r.width||r.height||r.top||r.left),i.uncache=1})},e.getElementState=function(i){return this.elementStates[this.targets.indexOf(Co(i))]},e.makeAbsolute=function(){return ic(this.elementStates.slice(0),!0,!0).map(Hd)},n}(),xs=function(){function n(t,i,r){this.element=t,this.update(i,r)}var e=n.prototype;return e.isDifferent=function(i){var r=this.bounds,s=i.bounds;return r.top!==s.top||r.left!==s.left||r.width!==s.width||r.height!==s.height||!this.matrix.equals(i.matrix)||this.opacity!==i.opacity||this.props&&i.props&&JSON.stringify(this.props)!==JSON.stringify(i.props)},e.update=function(i,r){var s=this,a=s.element,o=mi.getProperty(a),l=mi.core.getCache(a),c=a.getBoundingClientRect(),d=a.getBBox&&typeof a.getBBox=="function"&&a.nodeName.toLowerCase()!=="svg"&&a.getBBox(),h=r?new ys(1,0,0,1,c.left+Dd(),c.top+Ld()):Bn(a,!1,!1,!0);s.getProp=o,s.element=a,s.id=Zb(a),s.matrix=h,s.cache=l,s.bounds=c,s.isVisible=!!(c.width||c.height||c.left||c.top),s.display=o("display"),s.position=o("position"),s.parent=a.parentNode,s.x=o("x"),s.y=o("y"),s.scaleX=l.scaleX,s.scaleY=l.scaleY,s.rotation=o("rotation"),s.skewX=o("skewX"),s.opacity=o("opacity"),s.width=d?d.width:sr(o("width","px"),.04),s.height=d?d.height:sr(o("height","px"),.04),i&&Kb(s,zd[i]||tg(i)),s.ctm=a.getCTM&&a.nodeName.toLowerCase()==="svg"&&Ym(a).inverse(),s.simple=r||da(h.a)===1&&!da(h.b)&&!da(h.c)&&da(h.d)===1,s.uncache=0},n}(),Jb=function(){function n(t,i){this.vars=t,this.batch=i,this.states=[],this.timeline=i.timeline}var e=n.prototype;return e.getStateById=function(i){for(var r=this.states.length;r--;)if(this.states[r].idLookup[i])return this.states[r]},e.kill=function(){this.batch.remove(this)},n}(),ew=function(){function n(t){this.id=t,this.actions=[],this._kill=[],this._final=[],this._abs=[],this._run=[],this.data={},this.state=new wn,this.timeline=mi.timeline()}var e=n.prototype;return e.add=function(i){var r=this.actions.filter(function(s){return s.vars===i});return r.length?r[0]:(r=new Jb(typeof i=="function"?{animate:i}:i,this),this.actions.push(r),r)},e.remove=function(i){var r=this.actions.indexOf(i);return r>=0&&this.actions.splice(r,1),this},e.getState=function(i){var r=this,s=Pt,a=Ao;return Pt=this,this.state.clear(),this._kill.length=0,this.actions.forEach(function(o){o.vars.getState&&(o.states.length=0,Ao=o,o.state=o.vars.getState(o)),i&&o.states.forEach(function(l){return r.state.add(l)})}),Ao=a,Pt=s,this.killConflicts(),this},e.animate=function(){var i=this,r=Pt,s=this.timeline,a=this.actions.length,o,l;for(Pt=this,s.clear(),this._abs.length=this._final.length=this._run.length=0,this.actions.forEach(function(c){c.vars.animate&&c.vars.animate(c);var d=c.vars.onEnter,h=c.vars.onLeave,f=c.targets,u,m;f&&f.length&&(d||h)&&(u=new wn,c.states.forEach(function(p){return u.add(p)}),m=u.compare(zn.getState(f)),m.enter.length&&d&&d(m.enter),m.leave.length&&h&&h(m.leave))}),rg(this._abs),this._run.forEach(function(c){return c()}),l=s.duration(),o=this._final.slice(0),s.add(function(){l<=s.time()&&(o.forEach(function(c){return c()}),jm(i,"onComplete"))}),Pt=r;a--;)this.actions[a].vars.once&&this.actions[a].kill();return jm(this,"onStart"),s.restart(),this},e.loadState=function(i){i||(i=function(){return 0});var r=[];return this.actions.forEach(function(s){if(s.vars.loadState){var a,o=function l(c){c&&(s.targets=c),a=r.indexOf(l),~a&&(r.splice(a,1),r.length||i())};r.push(o),s.vars.loadState(o)}}),r.length||i(),this},e.setState=function(){return this.actions.forEach(function(i){return i.targets=i.vars.setState&&i.vars.setState(i)}),this},e.killConflicts=function(i){return this.state.interrupt(i),this._kill.forEach(function(r){return r.interrupt(i)}),this},e.run=function(i,r){var s=this;return this!==Pt&&(i||this.getState(r),this.loadState(function(){s._killed||(s.setState(),s.animate())})),this},e.clear=function(i){this.state.clear(),i||(this.actions.length=0)},e.getStateById=function(i){for(var r=this.actions.length,s;r--;)if(s=this.actions[r].getStateById(i),s)return s;return this.state.idLookup[i]&&this.state},e.kill=function(){this._killed=1,this.clear(),delete kd[this.id]},n}(),zn=function(){function n(){}return n.getState=function(t,i){var r=Wd(t,i);return Ao&&Ao.states.push(r),i&&i.batch&&n.batch(i.batch).state.add(r),r},n.from=function(t,i){return i=i||{},"clearProps"in i||(i.clearProps=!0),qd(t,Wd(i.targets||t.targets,{props:i.props||t.props,simple:i.simple,kill:!!i.kill}),i,-1)},n.to=function(t,i){return qd(t,Wd(i.targets||t.targets,{props:i.props||t.props,simple:i.simple,kill:!!i.kill}),i,1)},n.fromTo=function(t,i,r){return qd(t,i,r)},n.fit=function(t,i,r){var s=r?fa(r,Jm):{},a=r||s,o=a.absolute,l=a.scale,c=a.getVars,d=a.props,h=a.runBackwards,f=a.onComplete,u=a.simple,m=r&&r.fitChild&&Co(r.fitChild),p=Gd(i,d,u,t),g=Gd(t,0,u,p),v=d?ec[d]:tc,y=mi.context();return d&&sg(s,p.props),Po(g,v),h&&("immediateRender"in s||(s.immediateRender=!0),s.onComplete=function(){nc(g),f&&f.apply(this,arguments)}),o&&Hd(g,p),s=ha(g,p,l||m,d,m,s.duration||c?s:0),y&&!c&&y.add(function(){return function(){return nc(g)}}),c?s:s.duration?mi.to(g.element,s):null},n.makeAbsolute=function(t,i){return(t instanceof wn?t:new wn(t,i)).makeAbsolute()},n.batch=function(t){return t||(t="default"),kd[t]||(kd[t]=new ew(t))},n.killFlipsOf=function(t,i){(t instanceof wn?t.targets:ua(t)).forEach(function(r){return r&&Yd(r._flip,i!==!1?1:2)})},n.isFlipping=function(t){var i=n.getByTarget(t);return!!i&&i.isActive()},n.getByTarget=function(t){return(Co(t)||Jl)._flip},n.getElementState=function(t,i){return new xs(Co(t),i)},n.convertCoordinates=function(t,i,r){var s=Bn(i,!0,!0).multiply(Bn(t));return r?s.apply(r):s},n.register=function(t){if(Rr=typeof document<"u"&&document.body,Rr){mi=t,Rd(Rr),ua=mi.utils.toArray,Ud=mi.core.getStyleSaver;var i=mi.utils.snap(.1);sr=function(s,a){return i(parseFloat(s)+a)}}},n}();zn.version="3.12.5",typeof window<"u"&&window.gsap&&window.gsap.registerPlugin(zn),Ee.registerPlugin(zn);const ii={zIndex:10,returnDelay:500,imgScaleUp:1.2,imgScaleDown:1,imgScaleDuration:.4,mainAnimationDuration:.8,ease:"power2.inOut",blackAndWhiteDuration:.5};let dn=null,Ro=null,bs=!1;function tw(){const n=document.querySelectorAll('[data-scale-img="main"]'),e=document.querySelector('[data-scale-img="wrapper"]');if(!e){console.error("Wrapper element not found");return}n.forEach(t=>{t.addEventListener("click",i=>{if(bs)return;i.stopPropagation();const r=document.querySelector('[data-scale-img="target"]');if(!r){console.error("Target element not found");return}if(dn===t){ac(dn,e),dn=null;return}dn&&(Ro=dn,ac(Ro,e,!0)),dn=t;const s=t.querySelector('[data-scale-img="img"]');if(!s){console.error("Image element not found inside main element");return}Ee.set(t,{zIndex:ii.zIndex+1}),Ro&&Ro!==t&&Ee.set(Ro,{zIndex:ii.zIndex}),e.classList.add("is--active");const a=zn.getState(t);bs=!0,Ee.timeline().to(s,{scale:ii.imgScaleUp,duration:ii.imgScaleDuration,ease:ii.ease}).to(s,{scale:ii.imgScaleDown,duration:ii.imgScaleDuration,ease:ii.ease}),zn.fit(t,r,{scale:!0}),zn.from(a,{duration:ii.mainAnimationDuration,ease:ii.ease,scale:!0,onComplete:()=>{bs=!1,Ee.set(s,{scale:ii.imgScaleDown})}}),Ee.to(n,{filter:"grayscale(0%)",duration:ii.blackAndWhiteDuration,ease:ii.ease,onComplete:()=>{Ee.to(t,{filter:"none"})}})})}),document.addEventListener("click",()=>{dn&&!bs&&(ac(dn,e),dn=null)}),e.addEventListener("click",()=>{dn&&!bs&&(ac(dn,e),dn=null)})}function ac(n,e,t=!1){const i=zn.getState(n),r=n.querySelector('[data-scale-img="img"]');bs=!0,Ee.to(e,{delay:.05,onComplete:()=>{e.classList.remove("is--active")}}),Ee.set(n,{clearProps:"all"}),r&&Ee.set(r,{scale:ii.imgScaleDown}),zn.from(i,{duration:ii.mainAnimationDuration/1.2,ease:ii.ease,scale:!0,onComplete:()=>{bs=!1,t?setTimeout(()=>{Ee.set(n,{zIndex:""})},ii.mainAnimationDuration*1e3):Ee.set(n,{zIndex:""})}}),Ee.set(n,{zIndex:ii.zIndex+1})}/*!
 * paths 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var iw=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,nw=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,rw=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,sw=/(^[#\.][a-z]|[a-y][a-z])/i,aw=Math.PI/180,oc=Math.sin,lc=Math.cos,Lo=Math.abs,Do=Math.sqrt,ug=function(e){return typeof e=="string"},dg=function(e){return typeof e=="number"},fg=1e5,Lr=function(e){return Math.round(e*fg)/fg||0};function ow(n){n=ug(n)&&sw.test(n)&&document.querySelector(n)||n;var e=n.getAttribute?n:0,t;return e&&(n=n.getAttribute("d"))?(e._gsPath||(e._gsPath={}),t=e._gsPath[n],t&&!t._dirty?t:e._gsPath[n]=Dr(n)):n?ug(n)?Dr(n):dg(n[0])?[n]:n:console.warn("Expecting a <path> element or an SVG path data string")}function Io(n){var e=0,t;for(n.reverse();e<n.length;e+=2)t=n[e],n[e]=n[e+1],n[e+1]=t;n.reversed=!n.reversed}var lw=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),r=[].slice.call(e.attributes),s=r.length,a;for(t=","+t+",";--s>-1;)a=r[s].nodeName.toLowerCase(),t.indexOf(","+a+",")<0&&i.setAttributeNS(null,a,r[s].nodeValue);return i},cw={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},uw=function(e,t){for(var i=t?t.split(","):[],r={},s=i.length;--s>-1;)r[i[s]]=+e.getAttribute(i[s])||0;return r};function hg(n,e){var t=n.tagName.toLowerCase(),i=.552284749831,r,s,a,o,l,c,d,h,f,u,m,p,g,v,y,_,w,x,S,T,E,M;return t==="path"||!n.getBBox?n:(c=lw(n,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),M=uw(n,cw[t]),t==="rect"?(o=M.rx,l=M.ry||o,s=M.x,a=M.y,u=M.width-o*2,m=M.height-l*2,o||l?(p=s+o*(1-i),g=s+o,v=g+u,y=v+o*i,_=v+o,w=a+l*(1-i),x=a+l,S=x+m,T=S+l*i,E=S+l,r="M"+_+","+x+" V"+S+" C"+[_,T,y,E,v,E,v-(v-g)/3,E,g+(v-g)/3,E,g,E,p,E,s,T,s,S,s,S-(S-x)/3,s,x+(S-x)/3,s,x,s,w,p,a,g,a,g+(v-g)/3,a,v-(v-g)/3,a,v,a,y,a,_,w,_,x].join(",")+"z"):r="M"+(s+u)+","+a+" v"+m+" h"+-u+" v"+-m+" h"+u+"z"):t==="circle"||t==="ellipse"?(t==="circle"?(o=l=M.r,h=o*i):(o=M.rx,l=M.ry,h=l*i),s=M.cx,a=M.cy,d=o*i,r="M"+(s+o)+","+a+" C"+[s+o,a+h,s+d,a+l,s,a+l,s-d,a+l,s-o,a+h,s-o,a,s-o,a-h,s-d,a-l,s,a-l,s+d,a-l,s+o,a-h,s+o,a].join(",")+"z"):t==="line"?r="M"+M.x1+","+M.y1+" L"+M.x2+","+M.y2:(t==="polyline"||t==="polygon")&&(f=(n.getAttribute("points")+"").match(nw)||[],s=f.shift(),a=f.shift(),r="M"+s+","+a+" L"+f.join(","),t==="polygon"&&(r+=","+s+","+a+"z")),c.setAttribute("d",pa(c._gsRawPath=Dr(r))),e&&n.parentNode&&(n.parentNode.insertBefore(c,n),n.parentNode.removeChild(n)),c)}function dw(n,e,t,i,r,s,a,o,l){if(!(n===o&&e===l)){t=Lo(t),i=Lo(i);var c=r%360*aw,d=lc(c),h=oc(c),f=Math.PI,u=f*2,m=(n-o)/2,p=(e-l)/2,g=d*m+h*p,v=-h*m+d*p,y=g*g,_=v*v,w=y/(t*t)+_/(i*i);w>1&&(t=Do(w)*t,i=Do(w)*i);var x=t*t,S=i*i,T=(x*S-x*_-S*y)/(x*_+S*y);T<0&&(T=0);var E=(s===a?-1:1)*Do(T),M=E*(t*v/i),b=E*-(i*g/t),A=(n+o)/2,C=(e+l)/2,P=A+(d*M-h*b),I=C+(h*M+d*b),D=(g-M)/t,F=(v-b)/i,B=(-g-M)/t,k=(-v-b)/i,K=D*D+F*F,O=(F<0?-1:1)*Math.acos(D/Do(K)),re=(D*k-F*B<0?-1:1)*Math.acos((D*B+F*k)/Do(K*(B*B+k*k)));isNaN(re)&&(re=f),!a&&re>0?re-=u:a&&re<0&&(re+=u),O%=u,re%=u;var ae=Math.ceil(Lo(re)/(u/4)),Te=[],G=re/ae,Y=4/3*oc(G/2)/(1+lc(G/2)),Q=d*t,te=h*t,he=h*-i,Ae=d*i,V;for(V=0;V<ae;V++)r=O+V*G,g=lc(r),v=oc(r),D=lc(r+=G),F=oc(r),Te.push(g-Y*v,v+Y*g,D+Y*F,F-Y*D,D,F);for(V=0;V<Te.length;V+=2)g=Te[V],v=Te[V+1],Te[V]=g*Q+v*he+P,Te[V+1]=g*te+v*Ae+I;return Te[V-2]=o,Te[V-1]=l,Te}}function Dr(n){var e=(n+"").replace(rw,function(M){var b=+M;return b<1e-4&&b>-1e-4?0:b}).match(iw)||[],t=[],i=0,r=0,s=2/3,a=e.length,o=0,l="ERROR: malformed path: "+n,c,d,h,f,u,m,p,g,v,y,_,w,x,S,T,E=function(b,A,C,P){y=(C-b)/3,_=(P-A)/3,p.push(b+y,A+_,C-y,P-_,C,P)};if(!n||!isNaN(e[0])||isNaN(e[1]))return console.log(l),t;for(c=0;c<a;c++)if(x=u,isNaN(e[c])?(u=e[c].toUpperCase(),m=u!==e[c]):c--,h=+e[c+1],f=+e[c+2],m&&(h+=i,f+=r),c||(g=h,v=f),u==="M")p&&(p.length<8?t.length-=1:o+=p.length),i=g=h,r=v=f,p=[h,f],t.push(p),c+=2,u="L";else if(u==="C")p||(p=[0,0]),m||(i=r=0),p.push(h,f,i+e[c+3]*1,r+e[c+4]*1,i+=e[c+5]*1,r+=e[c+6]*1),c+=6;else if(u==="S")y=i,_=r,(x==="C"||x==="S")&&(y+=i-p[p.length-4],_+=r-p[p.length-3]),m||(i=r=0),p.push(y,_,h,f,i+=e[c+3]*1,r+=e[c+4]*1),c+=4;else if(u==="Q")y=i+(h-i)*s,_=r+(f-r)*s,m||(i=r=0),i+=e[c+3]*1,r+=e[c+4]*1,p.push(y,_,i+(h-i)*s,r+(f-r)*s,i,r),c+=4;else if(u==="T")y=i-p[p.length-4],_=r-p[p.length-3],p.push(i+y,r+_,h+(i+y*1.5-h)*s,f+(r+_*1.5-f)*s,i=h,r=f),c+=2;else if(u==="H")E(i,r,i=h,r),c+=1;else if(u==="V")E(i,r,i,r=h+(m?r-i:0)),c+=1;else if(u==="L"||u==="Z")u==="Z"&&(h=g,f=v,p.closed=!0),(u==="L"||Lo(i-h)>.5||Lo(r-f)>.5)&&(E(i,r,h,f),u==="L"&&(c+=2)),i=h,r=f;else if(u==="A"){if(S=e[c+4],T=e[c+5],y=e[c+6],_=e[c+7],d=7,S.length>1&&(S.length<3?(_=y,y=T,d--):(_=T,y=S.substr(2),d-=2),T=S.charAt(1),S=S.charAt(0)),w=dw(i,r,+e[c+1],+e[c+2],+e[c+3],+S,+T,(m?i:0)+y*1,(m?r:0)+_*1),c+=d,w)for(d=0;d<w.length;d++)p.push(w[d]);i=p[p.length-2],r=p[p.length-1]}else console.log(l);return c=p.length,c<6?(t.pop(),c=0):p[0]===p[c-2]&&p[1]===p[c-1]&&(p.closed=!0),t.totalPoints=o+c,t}function pa(n){dg(n[0])&&(n=[n]);var e="",t=n.length,i,r,s,a;for(r=0;r<t;r++){for(a=n[r],e+="M"+Lr(a[0])+","+Lr(a[1])+" C",i=a.length,s=2;s<i;s++)e+=Lr(a[s++])+","+Lr(a[s++])+" "+Lr(a[s++])+","+Lr(a[s++])+" "+Lr(a[s++])+","+Lr(a[s])+" ";a.closed&&(e+="z")}return e}/*!
 * MorphSVGPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Sn,jd,Oo,pg,No,mg=function(){return Sn||typeof window<"u"&&(Sn=window.gsap)&&Sn.registerPlugin&&Sn},Kd=function(e){return typeof e=="function"},ws=Math.atan2,gg=Math.cos,vg=Math.sin,ar=Math.sqrt,cc=Math.PI,_g=cc*2,fw=cc*.3,hw=cc*.7,yg=1e20,Uo=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,pw=/(^[#\.][a-z]|[a-y][a-z])/i,mw=/[achlmqstvz]/i,Ir=function(e){return console&&console.warn(e)},gw=1,xg=function(e){var t=e.length,i=0,r=0,s;for(s=0;s<t;s++)i+=e[s++],r+=e[s];return[i/(t/2),r/(t/2)]},ma=function(e){var t=e.length,i=e[0],r=i,s=e[1],a=s,o,l,c;for(c=6;c<t;c+=6)o=e[c],l=e[c+1],o>i?i=o:o<r&&(r=o),l>s?s=l:l<a&&(a=l);return e.centerX=(i+r)/2,e.centerY=(s+a)/2,e.size=(i-r)*(s-a)},ko=function(e,t){t===void 0&&(t=3);for(var i=e.length,r=e[0][0],s=r,a=e[0][1],o=a,l=1/t,c,d,h,f,u,m,p,g,v,y,_,w,x,S,T,E;--i>-1;)for(u=e[i],c=u.length,f=6;f<c;f+=6)for(v=u[f],y=u[f+1],_=u[f+2]-v,S=u[f+3]-y,w=u[f+4]-v,T=u[f+5]-y,x=u[f+6]-v,E=u[f+7]-y,m=t;--m>-1;)p=l*m,g=1-p,d=(p*p*x+3*g*(p*w+g*_))*p+v,h=(p*p*E+3*g*(p*T+g*S))*p+y,d>r?r=d:d<s&&(s=d),h>a?a=h:h<o&&(o=h);return e.centerX=(r+s)/2,e.centerY=(a+o)/2,e.left=s,e.width=r-s,e.top=o,e.height=a-o,e.size=(r-s)*(a-o)},vw=function(e,t){return t.length-e.length},bg=function(e,t){var i=e.size||ma(e),r=t.size||ma(t);return Math.abs(r-i)<(i+r)/20?t.centerX-e.centerX||t.centerY-e.centerY:r-i},wg=function(e,t){var i=e.slice(0),r=e.length,s=r-2,a,o;for(t=t|0,a=0;a<r;a++)o=(a+t)%s,e[a++]=i[o],e[a]=i[o+1]},Zd=function(e,t,i,r,s){var a=e.length,o=0,l=a-2,c,d,h,f;for(i*=6,d=0;d<a;d+=6)c=(d+i)%l,f=e[c]-(t[d]-r),h=e[c+1]-(t[d+1]-s),o+=ar(h*h+f*f);return o},_w=function(e,t,i){var r=e.length,s=xg(e),a=xg(t),o=a[0]-s[0],l=a[1]-s[1],c=Zd(e,t,0,o,l),d=0,h,f,u;for(u=6;u<r;u+=6)f=Zd(e,t,u/6,o,l),f<c&&(c=f,d=u);if(i)for(h=e.slice(0),Io(h),u=6;u<r;u+=6)f=Zd(h,t,u/6,o,l),f<c&&(c=f,d=-u);return d/6},yw=function(e,t,i){for(var r=e.length,s=yg,a=0,o=0,l,c,d,h,f,u;--r>-1;)for(l=e[r],u=l.length,f=0;f<u;f+=6)c=l[f]-t,d=l[f+1]-i,h=ar(c*c+d*d),h<s&&(s=h,a=l[f],o=l[f+1]);return[a,o]},xw=function(e,t,i,r,s,a){var o=t.length,l=0,c=Math.min(e.size||ma(e),t[i].size||ma(t[i]))*r,d=yg,h=e.centerX+s,f=e.centerY+a,u,m,p,g,v;for(m=i;m<o&&(u=t[m].size||ma(t[m]),!(u<c));m++)p=t[m].centerX-h,g=t[m].centerY-f,v=ar(p*p+g*g),v<d&&(l=m,d=v);return v=t[l],t.splice(l,1),v},Qd=function(e,t){var i=0,r=.999999,s=e.length,a=t/((s-2)/6),o,l,c,d,h,f,u,m,p,g,v,y,_,w;for(_=2;_<s;_+=6)for(i+=a;i>r;)o=e[_-2],l=e[_-1],c=e[_],d=e[_+1],h=e[_+2],f=e[_+3],u=e[_+4],m=e[_+5],w=1/((Math.floor(i)||1)+1),p=o+(c-o)*w,v=c+(h-c)*w,p+=(v-p)*w,v+=(h+(u-h)*w-v)*w,g=l+(d-l)*w,y=d+(f-d)*w,g+=(y-g)*w,y+=(f+(m-f)*w-y)*w,e.splice(_,4,o+(c-o)*w,l+(d-l)*w,p,g,p+(v-p)*w,g+(y-g)*w,v,y,h+(u-h)*w,f+(m-f)*w),_+=6,s+=6,i--;return e},Jd=function(e,t,i,r,s){var a=t.length-e.length,o=a>0?t:e,l=a>0?e:t,c=0,d=r==="complexity"?vw:bg,h=r==="position"?0:typeof r=="number"?r:.8,f=l.length,u=typeof i=="object"&&i.push?i.slice(0):[i],m=u[0]==="reverse"||u[0]<0,p=i==="log",g,v,y,_,w,x,S;if(l[0]){if(o.length>1&&(e.sort(d),t.sort(d),x=o.size||ko(o),x=l.size||ko(l),x=o.centerX-l.centerX,S=o.centerY-l.centerY,d===bg))for(f=0;f<l.length;f++)o.splice(f,0,xw(l[f],o,f,h,x,S));if(a)for(a<0&&(a=-a),o[0].length>l[0].length&&Qd(l[0],(o[0].length-l[0].length)/6|0),f=l.length;c<a;)_=o[f].size||ma(o[f]),y=yw(l,o[f].centerX,o[f].centerY),_=y[0],w=y[1],l[f++]=[_,w,_,w,_,w,_,w],l.totalPoints+=8,c++;for(f=0;f<e.length;f++)g=t[f],v=e[f],a=g.length-v.length,a<0?Qd(g,-a/6|0):a>0&&Qd(v,a/6|0),m&&s!==!1&&!v.reversed&&Io(v),i=u[f]||u[f]===0?u[f]:"auto",i&&(v.closed||Math.abs(v[0]-v[v.length-2])<.5&&Math.abs(v[1]-v[v.length-1])<.5?i==="auto"||i==="log"?(u[f]=i=_w(v,g,!f||s===!1),i<0&&(m=!0,Io(v),i=-i),wg(v,i*6)):i!=="reverse"&&(f&&i<0&&Io(v),wg(v,(i<0?-i:i)*6)):!m&&(i==="auto"&&Math.abs(g[0]-v[0])+Math.abs(g[1]-v[1])+Math.abs(g[g.length-2]-v[v.length-2])+Math.abs(g[g.length-1]-v[v.length-1])>Math.abs(g[0]-v[v.length-2])+Math.abs(g[1]-v[v.length-1])+Math.abs(g[g.length-2]-v[0])+Math.abs(g[g.length-1]-v[1])||i%2)?(Io(v),u[f]=-1,m=!0):i==="auto"?u[f]=0:i==="reverse"&&(u[f]=-1),v.closed!==g.closed&&(v.closed=g.closed=!1));return p&&Ir("shapeIndex:["+u.join(",")+"]"),e.shapeIndex=u,u}},Sg=function(e,t,i,r,s){var a=Dr(e[0]),o=Dr(e[1]);Jd(a,o,t||t===0?t:"auto",i,s)&&(e[0]=pa(a),e[1]=pa(o),(r==="log"||r===!0)&&Ir('precompile:["'+e[0]+'","'+e[1]+'"]'))},bw=function(e,t){if(!t)return e;var i=e.match(Uo)||[],r=i.length,s="",a,o,l;for(t==="reverse"?(o=r-1,a=-2):(o=((parseInt(t,10)||0)*2+1+r*100)%r,a=2),l=0;l<r;l+=2)s+=i[o-1]+","+i[o]+" ",o=(o+a)%r;return s},Mg=function(e,t){var i=0,r=parseFloat(e[0]),s=parseFloat(e[1]),a=r+","+s+" ",o=.999999,l,c,d,h,f,u,m;for(d=e.length,l=t*.5/(d*.5-1),c=0;c<d-2;c+=2){if(i+=l,u=parseFloat(e[c+2]),m=parseFloat(e[c+3]),i>o)for(f=1/(Math.floor(i)+1),h=1;i>o;)a+=(r+(u-r)*f*h).toFixed(2)+","+(s+(m-s)*f*h).toFixed(2)+" ",i--,h++;a+=u+","+m+" ",r=u,s=m}return a},ef=function(e){var t=e[0].match(Uo)||[],i=e[1].match(Uo)||[],r=i.length-t.length;r>0?e[0]=Mg(t,r):e[1]=Mg(i,-r)},ww=function(e){return isNaN(e)?ef:function(t){ef(t),t[1]=bw(t[1],parseInt(e,10))}},Sw=function(e,t,i){var r=typeof e=="string",s,a;return(!r||pw.test(e)||(e.match(Uo)||[]).length<3)&&(s=jd(e)[0],s?(a=(s.nodeName+"").toUpperCase(),t&&a!=="PATH"&&(s=hg(s,!1),a="PATH"),e=s.getAttribute(a==="PATH"?"d":"points")||"",s===i&&(e=s.getAttributeNS(null,"data-original")||e)):(Ir("WARNING: invalid morph to: "+e),e=!1)),e},Tg=function(e,t){for(var i=e.length,r=.2*(t||1),s,a,o,l,c,d,h,f,u,m,p,g;--i>-1;){for(a=e[i],p=a.isSmooth=a.isSmooth||[0,0,0,0],g=a.smoothData=a.smoothData||[0,0,0,0],p.length=4,f=a.length-2,h=6;h<f;h+=6)o=a[h]-a[h-2],l=a[h+1]-a[h-1],c=a[h+2]-a[h],d=a[h+3]-a[h+1],u=ws(l,o),m=ws(d,c),s=Math.abs(u-m)<r,s&&(g[h-2]=u,g[h+2]=m,g[h-1]=ar(o*o+l*l),g[h+3]=ar(c*c+d*d)),p.push(s,s,0,0,s,s);a[f]===a[0]&&a[f+1]===a[1]&&(o=a[0]-a[f-2],l=a[1]-a[f-1],c=a[2]-a[0],d=a[3]-a[1],u=ws(l,o),m=ws(d,c),Math.abs(u-m)<r&&(g[f-2]=u,g[2]=m,g[f-1]=ar(o*o+l*l),g[3]=ar(c*c+d*d),p[f-2]=p[f-1]=!0))}return e},Eg=function(e){var t=e.trim().split(" "),i=~e.indexOf("left")?0:~e.indexOf("right")?100:isNaN(parseFloat(t[0]))?50:parseFloat(t[0]),r=~e.indexOf("top")?0:~e.indexOf("bottom")?100:isNaN(parseFloat(t[1]))?50:parseFloat(t[1]);return{x:i/100,y:r/100}},Mw=function(e){return e!==e%cc?e+(e<0?_g:-_g):e},Ag="Use MorphSVGPlugin.convertToPath() to convert to a path before morphing.",Tw=function(e,t,i,r){var s=this._origin,a=this._eOrigin,o=e[i]-s.x,l=e[i+1]-s.y,c=ar(o*o+l*l),d=ws(l,o),h,f;return o=t[i]-a.x,l=t[i+1]-a.y,h=ws(l,o)-d,f=Mw(h),!r&&Oo&&Math.abs(f+Oo.ca)<fw&&(r=Oo),this._anchorPT=Oo={_next:this._anchorPT,t:e,sa:d,ca:r&&f*r.ca<0&&Math.abs(f)>hw?h:f,sl:c,cl:ar(o*o+l*l)-c,i}},Cg=function(e){Sn=mg(),No=No||Sn&&Sn.plugins.morphSVG,Sn&&No?(jd=Sn.utils.toArray,No.prototype._tweenRotation=Tw,pg=1):e&&Ir("Please gsap.registerPlugin(MorphSVGPlugin)")},ga={version:"3.12.5",name:"morphSVG",rawVars:1,register:function(e,t){Sn=e,No=t,Cg()},init:function(e,t,i,r,s){if(pg||Cg(1),!t)return Ir("invalid shape"),!1;Kd(t)&&(t=t.call(i,r,e,s));var a,o,l,c,d,h,f,u,m,p,g,v,y,_,w,x,S,T,E,M,b,A;if(typeof t=="string"||t.getBBox||t[0])t={shape:t};else if(typeof t=="object"){a={};for(o in t)a[o]=Kd(t[o])&&o!=="render"?t[o].call(i,r,e,s):t[o];t=a}var C=e.nodeType?window.getComputedStyle(e):{},P=C.fill+"",I=!(P==="none"||(P.match(Uo)||[])[3]==="0"||C.fillRule==="evenodd"),D=(t.origin||"50 50").split(",");if(a=(e.nodeName+"").toUpperCase(),d=a==="POLYLINE"||a==="POLYGON",a!=="PATH"&&!d&&!t.prop)return Ir("Cannot morph a <"+a+"> element. "+Ag),!1;if(o=a==="PATH"?"d":"points",!t.prop&&!Kd(e.setAttribute))return!1;if(c=Sw(t.shape||t.d||t.points||"",o==="d",e),d&&mw.test(c))return Ir("A <"+a+"> cannot accept path data. "+Ag),!1;if(h=t.shapeIndex||t.shapeIndex===0?t.shapeIndex:"auto",f=t.map||ga.defaultMap,this._prop=t.prop,this._render=t.render||ga.defaultRender,this._apply="updateTarget"in t?t.updateTarget:ga.defaultUpdateTarget,this._rnd=Math.pow(10,isNaN(t.precision)?2:+t.precision),this._tween=i,c){if(this._target=e,S=typeof t.precompile=="object",p=this._prop?e[this._prop]:e.getAttribute(o),!this._prop&&!e.getAttributeNS(null,"data-original")&&e.setAttributeNS(null,"data-original",p),o==="d"||this._prop){if(p=Dr(S?t.precompile[0]:p),g=Dr(S?t.precompile[1]:c),!S&&!Jd(p,g,h,f,I))return!1;for((t.precompile==="log"||t.precompile===!0)&&Ir('precompile:["'+pa(p)+'","'+pa(g)+'"]'),b=(t.type||ga.defaultType)!=="linear",b&&(p=Tg(p,t.smoothTolerance),g=Tg(g,t.smoothTolerance),p.size||ko(p),g.size||ko(g),M=Eg(D[0]),this._origin=p.origin={x:p.left+M.x*p.width,y:p.top+M.y*p.height},D[1]&&(M=Eg(D[1])),this._eOrigin={x:g.left+M.x*g.width,y:g.top+M.y*g.height}),this._rawPath=e._gsRawPath=p,y=p.length;--y>-1;)for(w=p[y],x=g[y],u=w.isSmooth||[],m=x.isSmooth||[],_=w.length,Oo=0,v=0;v<_;v+=2)(x[v]!==w[v]||x[v+1]!==w[v+1])&&(b?u[v]&&m[v]?(T=w.smoothData,E=x.smoothData,A=v+(v===_-4?7-_:5),this._controlPT={_next:this._controlPT,i:v,j:y,l1s:T[v+1],l1c:E[v+1]-T[v+1],l2s:T[A],l2c:E[A]-T[A]},l=this._tweenRotation(w,x,v+2),this._tweenRotation(w,x,v,l),this._tweenRotation(w,x,A-1,l),v+=4):this._tweenRotation(w,x,v):(l=this.add(w,v,w[v],x[v],0,0,0,0,0,1),l=this.add(w,v+1,w[v+1],x[v+1],0,0,0,0,0,1)||l))}else l=this.add(e,"setAttribute",e.getAttribute(o)+"",c+"",r,s,0,ww(h),o);b&&(this.add(this._origin,"x",this._origin.x,this._eOrigin.x,0,0,0,0,0,1),l=this.add(this._origin,"y",this._origin.y,this._eOrigin.y,0,0,0,0,0,1)),l&&(this._props.push("morphSVG"),l.end=c,l.endProp=o)}return gw},render:function(e,t){for(var i=t._rawPath,r=t._controlPT,s=t._anchorPT,a=t._rnd,o=t._target,l=t._pt,c,d,h,f,u,m,p,g,v,y,_,w,x;l;)l.r(e,l.d),l=l._next;if(e===1&&t._apply)for(l=t._pt;l;)l.end&&(t._prop?o[t._prop]=l.end:o.setAttribute(l.endProp,l.end)),l=l._next;else if(i){for(;s;)m=s.sa+e*s.ca,u=s.sl+e*s.cl,s.t[s.i]=t._origin.x+gg(m)*u,s.t[s.i+1]=t._origin.y+vg(m)*u,s=s._next;for(h=e<.5?2*e*e:(4-2*e)*e-1;r;)p=r.i,f=i[r.j],x=p+(p===f.length-4?7-f.length:5),m=ws(f[x]-f[p+1],f[x-1]-f[p]),_=vg(m),w=gg(m),v=f[p+2],y=f[p+3],u=r.l1s+h*r.l1c,f[p]=v-w*u,f[p+1]=y-_*u,u=r.l2s+h*r.l2c,f[x-1]=v+w*u,f[x]=y+_*u,r=r._next;if(o._gsRawPath=i,t._apply){for(c="",d=" ",g=0;g<i.length;g++)for(f=i[g],u=f.length,c+="M"+(f[0]*a|0)/a+d+(f[1]*a|0)/a+" C",p=2;p<u;p++)c+=(f[p]*a|0)/a+d;t._prop?o[t._prop]=c:o.setAttribute("d",c)}}t._render&&i&&t._render.call(t._tween,i,o)},kill:function(e){this._pt=this._rawPath=0},getRawPath:ow,stringToRawPath:Dr,rawPathToString:pa,normalizeStrings:function(e,t,i){var r=i.shapeIndex,s=i.map,a=[e,t];return Sg(a,r,s),a},pathFilter:Sg,pointsFilter:ef,getTotalSize:ko,equalizeSegmentQuantity:Jd,convertToPath:function(e,t){return jd(e).map(function(i){return hg(i,t!==!1)})},defaultType:"linear",defaultUpdateTarget:!0,defaultMap:"size"};mg()&&Sn.registerPlugin(ga),Ee.registerPlugin(ga);function Ew(){const n=document.querySelector("#client-logo-default");document.querySelectorAll("[data-client-name]").forEach(a=>{a.addEventListener("mouseenter",()=>e(a)),a.addEventListener("mouseleave",()=>t())});function e(a){i(a),s(a.getAttribute("data-client-name"))}function t(){r(),s("default")}function i(a){const o=a.getBoundingClientRect(),l=document.querySelector(".client_component_wrap").getBoundingClientRect();Ee.to("[data-logo-box]",{duration:.5,y:o.top-l.top})}function r(){Ee.to("[data-logo-box]",{duration:.5,y:0})}function s(a){const o=document.querySelector(`[data-client-logo="${a}"]`),l=o?o.querySelector("path").getAttribute("d"):n.querySelector("path").getAttribute("d");n.querySelector("path").getAttribute("d"),Ee.to(n.querySelector("path"),{duration:.5,morphSVG:l})}}function Aw(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Cw(n,e,t){return Aw(n.prototype,e),n}/*!
 * Observer 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var di,uc,Ki,Or,Nr,va,Pg,Ss,Fo,Rg,or,Mn,Lg,Dg=function(){return di||typeof window<"u"&&(di=window.gsap)&&di.registerPlugin&&di},Ig=1,_a=[],ot=[],Vn=[],Bo=Date.now,tf=function(e,t){return t},Pw=function(){var e=Fo.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,ot),r.push.apply(r,Vn),ot=i,Vn=r,tf=function(a,o){return t[a](o)}},Ur=function(e,t){return~Vn.indexOf(e)&&Vn[Vn.indexOf(e)+1][t]},zo=function(e){return!!~Rg.indexOf(e)},Ei=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},Ai=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},dc="scrollLeft",fc="scrollTop",nf=function(){return or&&or.isPressed||ot.cache++},hc=function(e,t){var i=function r(s){if(s||s===0){Ig&&(Ki.history.scrollRestoration="manual");var a=or&&or.isPressed;s=r.v=Math.round(s)||(or&&or.iOS?1:0),e(s),r.cacheID=ot.cache,a&&tf("ss",s)}else(t||ot.cache!==r.cacheID||tf("ref"))&&(r.cacheID=ot.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},Ci={s:dc,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:hc(function(n){return arguments.length?Ki.scrollTo(n,Yt.sc()):Ki.pageXOffset||Or[dc]||Nr[dc]||va[dc]||0})},Yt={s:fc,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ci,sc:hc(function(n){return arguments.length?Ki.scrollTo(Ci.sc(),n):Ki.pageYOffset||Or[fc]||Nr[fc]||va[fc]||0})},Vi=function(e,t){return(t&&t._ctx&&t._ctx.selector||di.utils.toArray)(e)[0]||(typeof e=="string"&&di.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},kr=function(e,t){var i=t.s,r=t.sc;zo(e)&&(e=Or.scrollingElement||Nr);var s=ot.indexOf(e),a=r===Yt.sc?1:2;!~s&&(s=ot.push(e)-1),ot[s+a]||Ei(e,"scroll",nf);var o=ot[s+a],l=o||(ot[s+a]=hc(Ur(e,i),!0)||(zo(e)?r:hc(function(c){return arguments.length?e[i]=c:e[i]})));return l.target=e,o||(l.smooth=di.getProperty(e,"scrollBehavior")==="smooth"),l},rf=function(e,t,i){var r=e,s=e,a=Bo(),o=a,l=t||50,c=Math.max(500,l*3),d=function(m,p){var g=Bo();p||g-a>l?(s=r,r=m,o=a,a=g):i?r+=m:r=s+(m-s)/(g-o)*(a-o)},h=function(){s=r=i?0:r,o=a=0},f=function(m){var p=o,g=s,v=Bo();return(m||m===0)&&m!==r&&d(m),a===o||v-o>c?0:(r+(i?g:-g))/((i?v:a)-p)*1e3};return{update:d,reset:h,getVelocity:f}},Vo=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Og=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},Ng=function(){Fo=di.core.globals().ScrollTrigger,Fo&&Fo.core&&Pw()},Ug=function(e){return di=e||Dg(),!uc&&di&&typeof document<"u"&&document.body&&(Ki=window,Or=document,Nr=Or.documentElement,va=Or.body,Rg=[Ki,Or,Nr,va],di.utils.clamp,Lg=di.core.context||function(){},Ss="onpointerenter"in va?"pointer":"mouse",Pg=Vt.isTouch=Ki.matchMedia&&Ki.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ki||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Mn=Vt.eventTypes=("ontouchstart"in Nr?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Nr?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Ig=0},500),Ng(),uc=1),uc};Ci.op=Yt,ot.cache=0;var Vt=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){uc||Ug(di)||console.warn("Please gsap.registerPlugin(Observer)"),Fo||Ng();var r=i.tolerance,s=i.dragMinimum,a=i.type,o=i.target,l=i.lineHeight,c=i.debounce,d=i.preventDefault,h=i.onStop,f=i.onStopDelay,u=i.ignore,m=i.wheelSpeed,p=i.event,g=i.onDragStart,v=i.onDragEnd,y=i.onDrag,_=i.onPress,w=i.onRelease,x=i.onRight,S=i.onLeft,T=i.onUp,E=i.onDown,M=i.onChangeX,b=i.onChangeY,A=i.onChange,C=i.onToggleX,P=i.onToggleY,I=i.onHover,D=i.onHoverEnd,F=i.onMove,B=i.ignoreCheck,k=i.isNormalizer,K=i.onGestureStart,O=i.onGestureEnd,re=i.onWheel,ae=i.onEnable,Te=i.onDisable,G=i.onClick,Y=i.scrollSpeed,Q=i.capture,te=i.allowClicks,he=i.lockAxis,Ae=i.onLockAxis;this.target=o=Vi(o)||Nr,this.vars=i,u&&(u=di.utils.toArray(u)),r=r||1e-9,s=s||0,m=m||1,Y=Y||1,a=a||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(Ki.getComputedStyle(va).lineHeight)||22);var V,ze,Re,ge,fe,Ie,Ne,X=this,Ye=0,U=0,R=i.passive||!d,z=kr(o,Ci),ie=kr(o,Yt),oe=z(),le=ie(),we=~a.indexOf("touch")&&!~a.indexOf("pointer")&&Mn[0]==="pointerdown",pe=zo(o),ce=o.ownerDocument||Or,He=[0,0,0],ue=[0,0,0],Oe=0,rt=function(){return Oe=Bo()},Ce=function(De,dt){return(X.event=De)&&u&&~u.indexOf(De.target)||dt&&we&&De.pointerType!=="touch"||B&&B(De,dt)},Pe=function(){X._vx.reset(),X._vy.reset(),ze.pause(),h&&h(X)},Xe=function(){var De=X.deltaX=Og(He),dt=X.deltaY=Og(ue),ye=Math.abs(De)>=r,Ze=Math.abs(dt)>=r;A&&(ye||Ze)&&A(X,De,dt,He,ue),ye&&(x&&X.deltaX>0&&x(X),S&&X.deltaX<0&&S(X),M&&M(X),C&&X.deltaX<0!=Ye<0&&C(X),Ye=X.deltaX,He[0]=He[1]=He[2]=0),Ze&&(E&&X.deltaY>0&&E(X),T&&X.deltaY<0&&T(X),b&&b(X),P&&X.deltaY<0!=U<0&&P(X),U=X.deltaY,ue[0]=ue[1]=ue[2]=0),(ge||Re)&&(F&&F(X),Re&&(y(X),Re=!1),ge=!1),Ie&&!(Ie=!1)&&Ae&&Ae(X),fe&&(re(X),fe=!1),V=0},Je=function(De,dt,ye){He[ye]+=De,ue[ye]+=dt,X._vx.update(De),X._vy.update(dt),c?V||(V=requestAnimationFrame(Xe)):Xe()},St=function(De,dt){he&&!Ne&&(X.axis=Ne=Math.abs(De)>Math.abs(dt)?"x":"y",Ie=!0),Ne!=="y"&&(He[2]+=De,X._vx.update(De,!0)),Ne!=="x"&&(ue[2]+=dt,X._vy.update(dt,!0)),c?V||(V=requestAnimationFrame(Xe)):Xe()},$e=function(De){if(!Ce(De,1)){De=Vo(De,d);var dt=De.clientX,ye=De.clientY,Ze=dt-X.x,Fe=ye-X.y,Ke=X.isDragging;X.x=dt,X.y=ye,(Ke||Math.abs(X.startX-dt)>=s||Math.abs(X.startY-ye)>=s)&&(y&&(Re=!0),Ke||(X.isDragging=!0),St(Ze,Fe),Ke||g&&g(X))}},H=X.onPress=function(Ve){Ce(Ve,1)||Ve&&Ve.button||(X.axis=Ne=null,ze.pause(),X.isPressed=!0,Ve=Vo(Ve),Ye=U=0,X.startX=X.x=Ve.clientX,X.startY=X.y=Ve.clientY,X._vx.reset(),X._vy.reset(),Ei(k?o:ce,Mn[1],$e,R,!0),X.deltaX=X.deltaY=0,_&&_(X))},ee=X.onRelease=function(Ve){if(!Ce(Ve,1)){Ai(k?o:ce,Mn[1],$e,!0);var De=!isNaN(X.y-X.startY),dt=X.isDragging,ye=dt&&(Math.abs(X.x-X.startX)>3||Math.abs(X.y-X.startY)>3),Ze=Vo(Ve);!ye&&De&&(X._vx.reset(),X._vy.reset(),d&&te&&di.delayedCall(.08,function(){if(Bo()-Oe>300&&!Ve.defaultPrevented){if(Ve.target.click)Ve.target.click();else if(ce.createEvent){var Fe=ce.createEvent("MouseEvents");Fe.initMouseEvent("click",!0,!0,Ki,1,Ze.screenX,Ze.screenY,Ze.clientX,Ze.clientY,!1,!1,!1,!1,0,null),Ve.target.dispatchEvent(Fe)}}})),X.isDragging=X.isGesturing=X.isPressed=!1,h&&dt&&!k&&ze.restart(!0),v&&dt&&v(X),w&&w(X,ye)}},ne=function(De){return De.touches&&De.touches.length>1&&(X.isGesturing=!0)&&K(De,X.isDragging)},me=function(){return(X.isGesturing=!1)||O(X)},ve=function(De){if(!Ce(De)){var dt=z(),ye=ie();Je((dt-oe)*Y,(ye-le)*Y,1),oe=dt,le=ye,h&&ze.restart(!0)}},Qe=function(De){if(!Ce(De)){De=Vo(De,d),re&&(fe=!0);var dt=(De.deltaMode===1?l:De.deltaMode===2?Ki.innerHeight:1)*m;Je(De.deltaX*dt,De.deltaY*dt,0),h&&!k&&ze.restart(!0)}},pt=function(De){if(!Ce(De)){var dt=De.clientX,ye=De.clientY,Ze=dt-X.x,Fe=ye-X.y;X.x=dt,X.y=ye,ge=!0,h&&ze.restart(!0),(Ze||Fe)&&St(Ze,Fe)}},xt=function(De){X.event=De,I(X)},At=function(De){X.event=De,D(X)},ut=function(De){return Ce(De)||Vo(De,d)&&G(X)};ze=X._dc=di.delayedCall(f||.25,Pe).pause(),X.deltaX=X.deltaY=0,X._vx=rf(0,50,!0),X._vy=rf(0,50,!0),X.scrollX=z,X.scrollY=ie,X.isDragging=X.isGesturing=X.isPressed=!1,Lg(this),X.enable=function(Ve){return X.isEnabled||(Ei(pe?ce:o,"scroll",nf),a.indexOf("scroll")>=0&&Ei(pe?ce:o,"scroll",ve,R,Q),a.indexOf("wheel")>=0&&Ei(o,"wheel",Qe,R,Q),(a.indexOf("touch")>=0&&Pg||a.indexOf("pointer")>=0)&&(Ei(o,Mn[0],H,R,Q),Ei(ce,Mn[2],ee),Ei(ce,Mn[3],ee),te&&Ei(o,"click",rt,!0,!0),G&&Ei(o,"click",ut),K&&Ei(ce,"gesturestart",ne),O&&Ei(ce,"gestureend",me),I&&Ei(o,Ss+"enter",xt),D&&Ei(o,Ss+"leave",At),F&&Ei(o,Ss+"move",pt)),X.isEnabled=!0,Ve&&Ve.type&&H(Ve),ae&&ae(X)),X},X.disable=function(){X.isEnabled&&(_a.filter(function(Ve){return Ve!==X&&zo(Ve.target)}).length||Ai(pe?ce:o,"scroll",nf),X.isPressed&&(X._vx.reset(),X._vy.reset(),Ai(k?o:ce,Mn[1],$e,!0)),Ai(pe?ce:o,"scroll",ve,Q),Ai(o,"wheel",Qe,Q),Ai(o,Mn[0],H,Q),Ai(ce,Mn[2],ee),Ai(ce,Mn[3],ee),Ai(o,"click",rt,!0),Ai(o,"click",ut),Ai(ce,"gesturestart",ne),Ai(ce,"gestureend",me),Ai(o,Ss+"enter",xt),Ai(o,Ss+"leave",At),Ai(o,Ss+"move",pt),X.isEnabled=X.isPressed=X.isDragging=!1,Te&&Te(X))},X.kill=X.revert=function(){X.disable();var Ve=_a.indexOf(X);Ve>=0&&_a.splice(Ve,1),or===X&&(or=0)},_a.push(X),k&&zo(o)&&(or=X),X.enable(p)},Cw(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Vt.version="3.12.5",Vt.create=function(n){return new Vt(n)},Vt.register=Ug,Vt.getAll=function(){return _a.slice()},Vt.getById=function(n){return _a.filter(function(e){return e.vars.id===n})[0]},Dg()&&di.registerPlugin(Vt);/*!
 * ScrollTrigger 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Le,ya,ct,kt,Tn,Rt,kg,pc,Ho,Go,Wo,mc,gi,gc,sf,Pi,Fg,Bg,xa,zg,af,Vg,Ri,of,Hg,Gg,Fr,lf,cf,ba,uf,vc,df,ff,_c=1,vi=Date.now,hf=vi(),fn=0,Xo=0,Wg=function(e,t,i){var r=Zi(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},Xg=function(e,t){return t&&(!Zi(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Rw=function n(){return Xo&&requestAnimationFrame(n)},$g=function(){return gc=1},qg=function(){return gc=0},Hn=function(e){return e},$o=function(e){return Math.round(e*1e5)/1e5||0},Yg=function(){return typeof window<"u"},jg=function(){return Le||Yg()&&(Le=window.gsap)&&Le.registerPlugin&&Le},Ms=function(e){return!!~kg.indexOf(e)},Kg=function(e){return(e==="Height"?uf:ct["inner"+e])||Tn["client"+e]||Rt["client"+e]},Zg=function(e){return Ur(e,"getBoundingClientRect")||(Ms(e)?function(){return Lc.width=ct.innerWidth,Lc.height=uf,Lc}:function(){return lr(e)})},Lw=function(e,t,i){var r=i.d,s=i.d2,a=i.a;return(a=Ur(e,"getBoundingClientRect"))?function(){return a()[r]}:function(){return(t?Kg(s):e["client"+s])||0}},Dw=function(e,t){return!t||~Vn.indexOf(e)?Zg(e):function(){return Lc}},Gn=function(e,t){var i=t.s,r=t.d2,s=t.d,a=t.a;return Math.max(0,(i="scroll"+r)&&(a=Ur(e,i))?a()-Zg(e)()[s]:Ms(e)?(Tn[i]||Rt[i])-Kg(r):e[i]-e["offset"+r])},yc=function(e,t){for(var i=0;i<xa.length;i+=3)(!t||~t.indexOf(xa[i+1]))&&e(xa[i],xa[i+1],xa[i+2])},Zi=function(e){return typeof e=="string"},Li=function(e){return typeof e=="function"},qo=function(e){return typeof e=="number"},Ts=function(e){return typeof e=="object"},Yo=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},pf=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},wa=Math.abs,Qg="left",Jg="top",mf="right",gf="bottom",Es="width",As="height",jo="Right",Ko="Left",Zo="Top",Qo="Bottom",Xt="padding",hn="margin",Sa="Width",vf="Height",jt="px",pn=function(e){return ct.getComputedStyle(e)},Iw=function(e){var t=pn(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},ev=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},lr=function(e,t){var i=t&&pn(e)[sf]!=="matrix(1, 0, 0, 1, 0, 0)"&&Le.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},xc=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},tv=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},Ow=function(e){return function(t){return Le.utils.snap(tv(e),t)}},_f=function(e){var t=Le.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,a){a===void 0&&(a=.001);var o;if(!s)return t(r);if(s>0){for(r-=a,o=0;o<i.length;o++)if(i[o]>=r)return i[o];return i[o-1]}else for(o=i.length,r+=a;o--;)if(i[o]<=r)return i[o];return i[0]}:function(r,s,a){a===void 0&&(a=.001);var o=t(r);return!s||Math.abs(o-r)<a||o-r<0==s<0?o:t(s<0?r-e:r+e)}},Nw=function(e){return function(t,i){return _f(tv(e))(t,i.direction)}},bc=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},ni=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},ri=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},wc=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},iv={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Sc={toggleActions:"play",anticipatePin:0},Mc={top:0,left:0,center:.5,bottom:1,right:1},Tc=function(e,t){if(Zi(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in Mc?Mc[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Ec=function(e,t,i,r,s,a,o,l){var c=s.startColor,d=s.endColor,h=s.fontSize,f=s.indent,u=s.fontWeight,m=kt.createElement("div"),p=Ms(i)||Ur(i,"pinType")==="fixed",g=e.indexOf("scroller")!==-1,v=p?Rt:i,y=e.indexOf("start")!==-1,_=y?c:d,w="border-color:"+_+";font-size:"+h+";color:"+_+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((g||l)&&p?"fixed;":"absolute;"),(g||l||!p)&&(w+=(r===Yt?mf:gf)+":"+(a+parseFloat(f))+"px;"),o&&(w+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),m._isStart=y,m.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),m.style.cssText=w,m.innerText=t||t===0?e+"-"+t:e,v.children[0]?v.insertBefore(m,v.children[0]):v.appendChild(m),m._offset=m["offset"+r.op.d2],Ac(m,0,r,y),m},Ac=function(e,t,i,r){var s={display:"block"},a=i[r?"os2":"p2"],o=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+a+Sa]=1,s["border"+o+Sa]=0,s[i.p]=t+"px",Le.set(e,s)},st=[],yf={},Jo,nv=function(){return vi()-fn>34&&(Jo||(Jo=requestAnimationFrame(cr)))},Ma=function(){(!Ri||!Ri.isPressed||Ri.startX>Rt.clientWidth)&&(ot.cache++,Ri?Jo||(Jo=requestAnimationFrame(cr)):cr(),fn||Ps("scrollStart"),fn=vi())},xf=function(){Gg=ct.innerWidth,Hg=ct.innerHeight},el=function(){ot.cache++,!gi&&!Vg&&!kt.fullscreenElement&&!kt.webkitFullscreenElement&&(!of||Gg!==ct.innerWidth||Math.abs(ct.innerHeight-Hg)>ct.innerHeight*.25)&&pc.restart(!0)},Cs={},Uw=[],rv=function n(){return ri(et,"scrollEnd",n)||Ls(!0)},Ps=function(e){return Cs[e]&&Cs[e].map(function(t){return t()})||Uw},Qi=[],sv=function(e){for(var t=0;t<Qi.length;t+=5)(!e||Qi[t+4]&&Qi[t+4].query===e)&&(Qi[t].style.cssText=Qi[t+1],Qi[t].getBBox&&Qi[t].setAttribute("transform",Qi[t+2]||""),Qi[t+3].uncache=1)},bf=function(e,t){var i;for(Pi=0;Pi<st.length;Pi++)i=st[Pi],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));vc=!0,t&&sv(t),t||Ps("revert")},av=function(e,t){ot.cache++,(t||!Di)&&ot.forEach(function(i){return Li(i)&&i.cacheID++&&(i.rec=0)}),Zi(e)&&(ct.history.scrollRestoration=cf=e)},Di,Rs=0,ov,kw=function(){if(ov!==Rs){var e=ov=Rs;requestAnimationFrame(function(){return e===Rs&&Ls(!0)})}},lv=function(){Rt.appendChild(ba),uf=!Ri&&ba.offsetHeight||ct.innerHeight,Rt.removeChild(ba)},cv=function(e){return Ho(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Ls=function(e,t){if(fn&&!e&&!vc){ni(et,"scrollEnd",rv);return}lv(),Di=et.isRefreshing=!0,ot.forEach(function(r){return Li(r)&&++r.cacheID&&(r.rec=r())});var i=Ps("refreshInit");zg&&et.sort(),t||bf(),ot.forEach(function(r){Li(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),st.slice(0).forEach(function(r){return r.refresh()}),vc=!1,st.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",a=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-a),r.refresh()}}),df=1,cv(!0),st.forEach(function(r){var s=Gn(r.scroller,r._dir),a=r.vars.end==="max"||r._endClamp&&r.end>s,o=r._startClamp&&r.start>=s;(a||o)&&r.setPositions(o?s-1:r.start,a?Math.max(o?s:r.start+1,s):r.end,!0)}),cv(!1),df=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),ot.forEach(function(r){Li(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),av(cf,1),pc.pause(),Rs++,Di=2,cr(2),st.forEach(function(r){return Li(r.vars.onRefresh)&&r.vars.onRefresh(r)}),Di=et.isRefreshing=!1,Ps("refresh")},wf=0,Cc=1,tl,cr=function(e){if(e===2||!Di&&!vc){et.isUpdating=!0,tl&&tl.update(0);var t=st.length,i=vi(),r=i-hf>=50,s=t&&st[0].scroll();if(Cc=wf>s?-1:1,Di||(wf=s),r&&(fn&&!gc&&i-fn>200&&(fn=0,Ps("scrollEnd")),Wo=hf,hf=i),Cc<0){for(Pi=t;Pi-- >0;)st[Pi]&&st[Pi].update(0,r);Cc=1}else for(Pi=0;Pi<t;Pi++)st[Pi]&&st[Pi].update(0,r);et.isUpdating=!1}Jo=0},Sf=[Qg,Jg,gf,mf,hn+Qo,hn+jo,hn+Zo,hn+Ko,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Pc=Sf.concat([Es,As,"boxSizing","max"+Sa,"max"+vf,"position",hn,Xt,Xt+Zo,Xt+jo,Xt+Qo,Xt+Ko]),Fw=function(e,t,i){Ta(i);var r=e._gsap;if(r.spacerIsNative)Ta(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},Mf=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=Sf.length,a=t.style,o=e.style,l;s--;)l=Sf[s],a[l]=i[l];a.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(a.display="inline-block"),o[gf]=o[mf]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[Es]=xc(e,Ci)+jt,a[As]=xc(e,Yt)+jt,a[Xt]=o[hn]=o[Jg]=o[Qg]="0",Ta(r),o[Es]=o["max"+Sa]=i[Es],o[As]=o["max"+vf]=i[As],o[Xt]=i[Xt],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Bw=/([A-Z])/g,Ta=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,a;for((e.t._gsap||Le.core.getCache(e.t)).uncache=1;r<i;r+=2)a=e[r+1],s=e[r],a?t[s]=a:t[s]&&t.removeProperty(s.replace(Bw,"-$1").toLowerCase())}},Rc=function(e){for(var t=Pc.length,i=e.style,r=[],s=0;s<t;s++)r.push(Pc[s],i[Pc[s]]);return r.t=e,r},zw=function(e,t,i){for(var r=[],s=e.length,a=i?8:0,o;a<s;a+=2)o=e[a],r.push(o,o in t?t[o]:e[a+1]);return r.t=e.t,r},Lc={left:0,top:0},uv=function(e,t,i,r,s,a,o,l,c,d,h,f,u,m){Li(e)&&(e=e(l)),Zi(e)&&e.substr(0,3)==="max"&&(e=f+(e.charAt(4)==="="?Tc("0"+e.substr(3),i):0));var p=u?u.time():0,g,v,y;if(u&&u.seek(0),isNaN(e)||(e=+e),qo(e))u&&(e=Le.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,f,e)),o&&Ac(o,i,r,!0);else{Li(t)&&(t=t(l));var _=(e||"0").split(" "),w,x,S,T;y=Vi(t,l)||Rt,w=lr(y)||{},(!w||!w.left&&!w.top)&&pn(y).display==="none"&&(T=y.style.display,y.style.display="block",w=lr(y),T?y.style.display=T:y.style.removeProperty("display")),x=Tc(_[0],w[r.d]),S=Tc(_[1]||"0",i),e=w[r.p]-c[r.p]-d+x+s-S,o&&Ac(o,S,r,i-S<20||o._isStart&&S>20),i-=i-S}if(m&&(l[m]=e||-.001,e<0&&(e=0)),a){var E=e+i,M=a._isStart;g="scroll"+r.d2,Ac(a,E,r,M&&E>20||!M&&(h?Math.max(Rt[g],Tn[g]):a.parentNode[g])<=E+1),h&&(c=lr(o),h&&(a.style[r.op.p]=c[r.op.p]-r.op.m-a._offset+jt))}return u&&y&&(g=lr(y),u.seek(f),v=lr(y),u._caScrollDist=g[r.p]-v[r.p],e=e/u._caScrollDist*f),u&&u.seek(p),u?e:Math.round(e)},Vw=/(webkit|moz|length|cssText|inset)/i,dv=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,a,o;if(t===Rt){e._stOrig=s.cssText,o=pn(e);for(a in o)!+a&&!Vw.test(a)&&o[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=o[a]);s.top=i,s.left=r}else s.cssText=e._stOrig;Le.core.getCache(e).uncache=1,t.appendChild(e)}},fv=function(e,t,i){var r=t,s=r;return function(a){var o=Math.round(e());return o!==r&&o!==s&&Math.abs(o-r)>3&&Math.abs(o-s)>3&&(a=o,i&&i()),s=r,r=a,a}},Dc=function(e,t,i){var r={};r[t.p]="+="+i,Le.set(e,r)},hv=function(e,t){var i=kr(e,t),r="_scroll"+t.p2,s=function a(o,l,c,d,h){var f=a.tween,u=l.onComplete,m={};c=c||i();var p=fv(i,c,function(){f.kill(),a.tween=0});return h=d&&h||0,d=d||o-c,f&&f.kill(),l[r]=o,l.inherit=!1,l.modifiers=m,m[r]=function(){return p(c+d*f.ratio+h*f.ratio*f.ratio)},l.onUpdate=function(){ot.cache++,a.tween&&cr()},l.onComplete=function(){a.tween=0,u&&u.call(f)},f=a.tween=Le.to(e,l),f};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},ni(e,"wheel",i.wheelHandler),et.isTouch&&ni(e,"touchmove",i.wheelHandler),s},et=function(){function n(t,i){ya||n.register(Le)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),lf(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Xo){this.update=this.refresh=this.kill=Hn;return}i=ev(Zi(i)||qo(i)||i.nodeType?{trigger:i}:i,Sc);var s=i,a=s.onUpdate,o=s.toggleClass,l=s.id,c=s.onToggle,d=s.onRefresh,h=s.scrub,f=s.trigger,u=s.pin,m=s.pinSpacing,p=s.invalidateOnRefresh,g=s.anticipatePin,v=s.onScrubComplete,y=s.onSnapComplete,_=s.once,w=s.snap,x=s.pinReparent,S=s.pinSpacer,T=s.containerAnimation,E=s.fastScrollEnd,M=s.preventOverlaps,b=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Ci:Yt,A=!h&&h!==0,C=Vi(i.scroller||ct),P=Le.core.getCache(C),I=Ms(C),D=("pinType"in i?i.pinType:Ur(C,"pinType")||I&&"fixed")==="fixed",F=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],B=A&&i.toggleActions.split(" "),k="markers"in i?i.markers:Sc.markers,K=I?0:parseFloat(pn(C)["border"+b.p2+Sa])||0,O=this,re=i.onRefreshInit&&function(){return i.onRefreshInit(O)},ae=Lw(C,I,b),Te=Dw(C,I),G=0,Y=0,Q=0,te=kr(C,b),he,Ae,V,ze,Re,ge,fe,Ie,Ne,X,Ye,U,R,z,ie,oe,le,we,pe,ce,He,ue,Oe,rt,Ce,Pe,Xe,Je,St,$e,H,ee,ne,me,ve,Qe,pt,xt,At;if(O._startClamp=O._endClamp=!1,O._dir=b,g*=45,O.scroller=C,O.scroll=T?T.time.bind(T):te,ze=te(),O.vars=i,r=r||i.animation,"refreshPriority"in i&&(zg=1,i.refreshPriority===-9999&&(tl=O)),P.tweenScroll=P.tweenScroll||{top:hv(C,Yt),left:hv(C,Ci)},O.tweenTo=he=P.tweenScroll[b.p],O.scrubDuration=function(ye){ne=qo(ye)&&ye,ne?ee?ee.duration(ye):ee=Le.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ne,paused:!0,onComplete:function(){return v&&v(O)}}):(ee&&ee.progress(1).kill(),ee=0)},r&&(r.vars.lazy=!1,r._initted&&!O.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),O.animation=r.pause(),r.scrollTrigger=O,O.scrubDuration(h),$e=0,l||(l=r.vars.id)),w&&((!Ts(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in Rt.style&&Le.set(I?[Rt,Tn]:C,{scrollBehavior:"auto"}),ot.forEach(function(ye){return Li(ye)&&ye.target===(I?kt.scrollingElement||Tn:C)&&(ye.smooth=!1)}),V=Li(w.snapTo)?w.snapTo:w.snapTo==="labels"?Ow(r):w.snapTo==="labelsDirectional"?Nw(r):w.directional!==!1?function(ye,Ze){return _f(w.snapTo)(ye,vi()-Y<500?0:Ze.direction)}:Le.utils.snap(w.snapTo),me=w.duration||{min:.1,max:2},me=Ts(me)?Go(me.min,me.max):Go(me,me),ve=Le.delayedCall(w.delay||ne/2||.1,function(){var ye=te(),Ze=vi()-Y<500,Fe=he.tween;if((Ze||Math.abs(O.getVelocity())<10)&&!Fe&&!gc&&G!==ye){var Ke=(ye-ge)/z,Ft=r&&!A?r.totalProgress():Ke,at=Ze?0:(Ft-H)/(vi()-Wo)*1e3||0,It=Le.utils.clamp(-Ke,1-Ke,wa(at/2)*at/.185),ui=Ke+(w.inertia===!1?0:It),Ot,Ct,L=w,W=L.onStart,$=L.onInterrupt,q=L.onComplete;if(Ot=V(ui,O),qo(Ot)||(Ot=ui),Ct=Math.round(ge+Ot*z),ye<=fe&&ye>=ge&&Ct!==ye){if(Fe&&!Fe._initted&&Fe.data<=wa(Ct-ye))return;w.inertia===!1&&(It=Ot-Ke),he(Ct,{duration:me(wa(Math.max(wa(ui-Ft),wa(Ot-Ft))*.185/at/.05||0)),ease:w.ease||"power3",data:wa(Ct-ye),onInterrupt:function(){return ve.restart(!0)&&$&&$(O)},onComplete:function(){O.update(),G=te(),r&&(ee?ee.resetTo("totalProgress",Ot,r._tTime/r._tDur):r.progress(Ot)),$e=H=r&&!A?r.totalProgress():O.progress,y&&y(O),q&&q(O)}},ye,It*z,Ct-ye-It*z),W&&W(O,he.tween)}}else O.isActive&&G!==ye&&ve.restart(!0)}).pause()),l&&(yf[l]=O),f=O.trigger=Vi(f||u!==!0&&u),At=f&&f._gsap&&f._gsap.stRevert,At&&(At=At(O)),u=u===!0?f:Vi(u),Zi(o)&&(o={targets:f,className:o}),u&&(m===!1||m===hn||(m=!m&&u.parentNode&&u.parentNode.style&&pn(u.parentNode).display==="flex"?!1:Xt),O.pin=u,Ae=Le.core.getCache(u),Ae.spacer?ie=Ae.pinState:(S&&(S=Vi(S),S&&!S.nodeType&&(S=S.current||S.nativeElement),Ae.spacerIsNative=!!S,S&&(Ae.spacerState=Rc(S))),Ae.spacer=we=S||kt.createElement("div"),we.classList.add("pin-spacer"),l&&we.classList.add("pin-spacer-"+l),Ae.pinState=ie=Rc(u)),i.force3D!==!1&&Le.set(u,{force3D:!0}),O.spacer=we=Ae.spacer,St=pn(u),rt=St[m+b.os2],ce=Le.getProperty(u),He=Le.quickSetter(u,b.a,jt),Mf(u,we,St),le=Rc(u)),k){U=Ts(k)?ev(k,iv):iv,X=Ec("scroller-start",l,C,b,U,0),Ye=Ec("scroller-end",l,C,b,U,0,X),pe=X["offset"+b.op.d2];var ut=Vi(Ur(C,"content")||C);Ie=this.markerStart=Ec("start",l,ut,b,U,pe,0,T),Ne=this.markerEnd=Ec("end",l,ut,b,U,pe,0,T),T&&(xt=Le.quickSetter([Ie,Ne],b.a,jt)),!D&&!(Vn.length&&Ur(C,"fixedMarkers")===!0)&&(Iw(I?Rt:C),Le.set([X,Ye],{force3D:!0}),Pe=Le.quickSetter(X,b.a,jt),Je=Le.quickSetter(Ye,b.a,jt))}if(T){var Ve=T.vars.onUpdate,De=T.vars.onUpdateParams;T.eventCallback("onUpdate",function(){O.update(0,0,1),Ve&&Ve.apply(T,De||[])})}if(O.previous=function(){return st[st.indexOf(O)-1]},O.next=function(){return st[st.indexOf(O)+1]},O.revert=function(ye,Ze){if(!Ze)return O.kill(!0);var Fe=ye!==!1||!O.enabled,Ke=gi;Fe!==O.isReverted&&(Fe&&(Qe=Math.max(te(),O.scroll.rec||0),Q=O.progress,pt=r&&r.progress()),Ie&&[Ie,Ne,X,Ye].forEach(function(Ft){return Ft.style.display=Fe?"none":"block"}),Fe&&(gi=O,O.update(Fe)),u&&(!x||!O.isActive)&&(Fe?Fw(u,we,ie):Mf(u,we,pn(u),Ce)),Fe||O.update(Fe),gi=Ke,O.isReverted=Fe)},O.refresh=function(ye,Ze,Fe,Ke){if(!((gi||!O.enabled)&&!Ze)){if(u&&ye&&fn){ni(n,"scrollEnd",rv);return}!Di&&re&&re(O),gi=O,he.tween&&!Fe&&(he.tween.kill(),he.tween=0),ee&&ee.pause(),p&&r&&r.revert({kill:!1}).invalidate(),O.isReverted||O.revert(!0,!0),O._subPinOffset=!1;var Ft=ae(),at=Te(),It=T?T.duration():Gn(C,b),ui=z<=.01,Ot=0,Ct=Ke||0,L=Ts(Fe)?Fe.end:i.end,W=i.endTrigger||f,$=Ts(Fe)?Fe.start:i.start||(i.start===0||!f?0:u?"0 0":"0 100%"),q=O.pinnedContainer=i.pinnedContainer&&Vi(i.pinnedContainer,O),j=f&&Math.max(0,st.indexOf(O))||0,de=j,xe,Me,Be,je,ke,Ue,gt,qt,wi,Ni,tt,qe,Jn;for(k&&Ts(Fe)&&(qe=Le.getProperty(X,b.p),Jn=Le.getProperty(Ye,b.p));de--;)Ue=st[de],Ue.end||Ue.refresh(0,1)||(gi=O),gt=Ue.pin,gt&&(gt===f||gt===u||gt===q)&&!Ue.isReverted&&(Ni||(Ni=[]),Ni.unshift(Ue),Ue.revert(!0,!0)),Ue!==st[de]&&(j--,de--);for(Li($)&&($=$(O)),$=Wg($,"start",O),ge=uv($,f,Ft,b,te(),Ie,X,O,at,K,D,It,T,O._startClamp&&"_startClamp")||(u?-.001:0),Li(L)&&(L=L(O)),Zi(L)&&!L.indexOf("+=")&&(~L.indexOf(" ")?L=(Zi($)?$.split(" ")[0]:"")+L:(Ot=Tc(L.substr(2),Ft),L=Zi($)?$:(T?Le.utils.mapRange(0,T.duration(),T.scrollTrigger.start,T.scrollTrigger.end,ge):ge)+Ot,W=f)),L=Wg(L,"end",O),fe=Math.max(ge,uv(L||(W?"100% 0":It),W,Ft,b,te()+Ot,Ne,Ye,O,at,K,D,It,T,O._endClamp&&"_endClamp"))||-.001,Ot=0,de=j;de--;)Ue=st[de],gt=Ue.pin,gt&&Ue.start-Ue._pinPush<=ge&&!T&&Ue.end>0&&(xe=Ue.end-(O._startClamp?Math.max(0,Ue.start):Ue.start),(gt===f&&Ue.start-Ue._pinPush<ge||gt===q)&&isNaN($)&&(Ot+=xe*(1-Ue.progress)),gt===u&&(Ct+=xe));if(ge+=Ot,fe+=Ot,O._startClamp&&(O._startClamp+=Ot),O._endClamp&&!Di&&(O._endClamp=fe||-.001,fe=Math.min(fe,Gn(C,b))),z=fe-ge||(ge-=.01)&&.001,ui&&(Q=Le.utils.clamp(0,1,Le.utils.normalize(ge,fe,Qe))),O._pinPush=Ct,Ie&&Ot&&(xe={},xe[b.a]="+="+Ot,q&&(xe[b.p]="-="+te()),Le.set([Ie,Ne],xe)),u&&!(df&&O.end>=Gn(C,b)))xe=pn(u),je=b===Yt,Be=te(),ue=parseFloat(ce(b.a))+Ct,!It&&fe>1&&(tt=(I?kt.scrollingElement||Tn:C).style,tt={style:tt,value:tt["overflow"+b.a.toUpperCase()]},I&&pn(Rt)["overflow"+b.a.toUpperCase()]!=="scroll"&&(tt.style["overflow"+b.a.toUpperCase()]="scroll")),Mf(u,we,xe),le=Rc(u),Me=lr(u,!0),qt=D&&kr(C,je?Ci:Yt)(),m?(Ce=[m+b.os2,z+Ct+jt],Ce.t=we,de=m===Xt?xc(u,b)+z+Ct:0,de&&(Ce.push(b.d,de+jt),we.style.flexBasis!=="auto"&&(we.style.flexBasis=de+jt)),Ta(Ce),q&&st.forEach(function(_t){_t.pin===q&&_t.vars.pinSpacing!==!1&&(_t._subPinOffset=!0)}),D&&te(Qe)):(de=xc(u,b),de&&we.style.flexBasis!=="auto"&&(we.style.flexBasis=de+jt)),D&&(ke={top:Me.top+(je?Be-ge:qt)+jt,left:Me.left+(je?qt:Be-ge)+jt,boxSizing:"border-box",position:"fixed"},ke[Es]=ke["max"+Sa]=Math.ceil(Me.width)+jt,ke[As]=ke["max"+vf]=Math.ceil(Me.height)+jt,ke[hn]=ke[hn+Zo]=ke[hn+jo]=ke[hn+Qo]=ke[hn+Ko]="0",ke[Xt]=xe[Xt],ke[Xt+Zo]=xe[Xt+Zo],ke[Xt+jo]=xe[Xt+jo],ke[Xt+Qo]=xe[Xt+Qo],ke[Xt+Ko]=xe[Xt+Ko],oe=zw(ie,ke,x),Di&&te(0)),r?(wi=r._initted,af(1),r.render(r.duration(),!0,!0),Oe=ce(b.a)-ue+z+Ct,Xe=Math.abs(z-Oe)>1,D&&Xe&&oe.splice(oe.length-2,2),r.render(0,!0,!0),wi||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),af(0)):Oe=z,tt&&(tt.value?tt.style["overflow"+b.a.toUpperCase()]=tt.value:tt.style.removeProperty("overflow-"+b.a));else if(f&&te()&&!T)for(Me=f.parentNode;Me&&Me!==Rt;)Me._pinOffset&&(ge-=Me._pinOffset,fe-=Me._pinOffset),Me=Me.parentNode;Ni&&Ni.forEach(function(_t){return _t.revert(!1,!0)}),O.start=ge,O.end=fe,ze=Re=Di?Qe:te(),!T&&!Di&&(ze<Qe&&te(Qe),O.scroll.rec=0),O.revert(!1,!0),Y=vi(),ve&&(G=-1,ve.restart(!0)),gi=0,r&&A&&(r._initted||pt)&&r.progress()!==pt&&r.progress(pt||0,!0).render(r.time(),!0,!0),(ui||Q!==O.progress||T||p)&&(r&&!A&&r.totalProgress(T&&ge<-.001&&!Q?Le.utils.normalize(ge,fe,0):Q,!0),O.progress=ui||(ze-ge)/z===Q?0:Q),u&&m&&(we._pinOffset=Math.round(O.progress*Oe)),ee&&ee.invalidate(),isNaN(qe)||(qe-=Le.getProperty(X,b.p),Jn-=Le.getProperty(Ye,b.p),Dc(X,b,qe),Dc(Ie,b,qe-(Ke||0)),Dc(Ye,b,Jn),Dc(Ne,b,Jn-(Ke||0))),ui&&!Di&&O.update(),d&&!Di&&!R&&(R=!0,d(O),R=!1)}},O.getVelocity=function(){return(te()-Re)/(vi()-Wo)*1e3||0},O.endAnimation=function(){Yo(O.callbackAnimation),r&&(ee?ee.progress(1):r.paused()?A||Yo(r,O.direction<0,1):Yo(r,r.reversed()))},O.labelToScroll=function(ye){return r&&r.labels&&(ge||O.refresh()||ge)+r.labels[ye]/r.duration()*z||0},O.getTrailing=function(ye){var Ze=st.indexOf(O),Fe=O.direction>0?st.slice(0,Ze).reverse():st.slice(Ze+1);return(Zi(ye)?Fe.filter(function(Ke){return Ke.vars.preventOverlaps===ye}):Fe).filter(function(Ke){return O.direction>0?Ke.end<=ge:Ke.start>=fe})},O.update=function(ye,Ze,Fe){if(!(T&&!Fe&&!ye)){var Ke=Di===!0?Qe:O.scroll(),Ft=ye?0:(Ke-ge)/z,at=Ft<0?0:Ft>1?1:Ft||0,It=O.progress,ui,Ot,Ct,L,W,$,q,j;if(Ze&&(Re=ze,ze=T?te():Ke,w&&(H=$e,$e=r&&!A?r.totalProgress():at)),g&&u&&!gi&&!_c&&fn&&(!at&&ge<Ke+(Ke-Re)/(vi()-Wo)*g?at=1e-4:at===1&&fe>Ke+(Ke-Re)/(vi()-Wo)*g&&(at=.9999)),at!==It&&O.enabled){if(ui=O.isActive=!!at&&at<1,Ot=!!It&&It<1,$=ui!==Ot,W=$||!!at!=!!It,O.direction=at>It?1:-1,O.progress=at,W&&!gi&&(Ct=at&&!It?0:at===1?1:It===1?2:3,A&&(L=!$&&B[Ct+1]!=="none"&&B[Ct+1]||B[Ct],j=r&&(L==="complete"||L==="reset"||L in r))),M&&($||j)&&(j||h||!r)&&(Li(M)?M(O):O.getTrailing(M).forEach(function(Be){return Be.endAnimation()})),A||(ee&&!gi&&!_c?(ee._dp._time-ee._start!==ee._time&&ee.render(ee._dp._time-ee._start),ee.resetTo?ee.resetTo("totalProgress",at,r._tTime/r._tDur):(ee.vars.totalProgress=at,ee.invalidate().restart())):r&&r.totalProgress(at,!!(gi&&(Y||ye)))),u){if(ye&&m&&(we.style[m+b.os2]=rt),!D)He($o(ue+Oe*at));else if(W){if(q=!ye&&at>It&&fe+1>Ke&&Ke+1>=Gn(C,b),x)if(!ye&&(ui||q)){var de=lr(u,!0),xe=Ke-ge;dv(u,Rt,de.top+(b===Yt?xe:0)+jt,de.left+(b===Yt?0:xe)+jt)}else dv(u,we);Ta(ui||q?oe:le),Xe&&at<1&&ui||He(ue+(at===1&&!q?Oe:0))}}w&&!he.tween&&!gi&&!_c&&ve.restart(!0),o&&($||_&&at&&(at<1||!ff))&&Ho(o.targets).forEach(function(Be){return Be.classList[ui||_?"add":"remove"](o.className)}),a&&!A&&!ye&&a(O),W&&!gi?(A&&(j&&(L==="complete"?r.pause().totalProgress(1):L==="reset"?r.restart(!0).pause():L==="restart"?r.restart(!0):r[L]()),a&&a(O)),($||!ff)&&(c&&$&&pf(O,c),F[Ct]&&pf(O,F[Ct]),_&&(at===1?O.kill(!1,1):F[Ct]=0),$||(Ct=at===1?1:3,F[Ct]&&pf(O,F[Ct]))),E&&!ui&&Math.abs(O.getVelocity())>(qo(E)?E:2500)&&(Yo(O.callbackAnimation),ee?ee.progress(1):Yo(r,L==="reverse"?1:!at,1))):A&&a&&!gi&&a(O)}if(Je){var Me=T?Ke/T.duration()*(T._caScrollDist||0):Ke;Pe(Me+(X._isFlipped?1:0)),Je(Me)}xt&&xt(-Ke/T.duration()*(T._caScrollDist||0))}},O.enable=function(ye,Ze){O.enabled||(O.enabled=!0,ni(C,"resize",el),I||ni(C,"scroll",Ma),re&&ni(n,"refreshInit",re),ye!==!1&&(O.progress=Q=0,ze=Re=G=te()),Ze!==!1&&O.refresh())},O.getTween=function(ye){return ye&&he?he.tween:ee},O.setPositions=function(ye,Ze,Fe,Ke){if(T){var Ft=T.scrollTrigger,at=T.duration(),It=Ft.end-Ft.start;ye=Ft.start+It*ye/at,Ze=Ft.start+It*Ze/at}O.refresh(!1,!1,{start:Xg(ye,Fe&&!!O._startClamp),end:Xg(Ze,Fe&&!!O._endClamp)},Ke),O.update()},O.adjustPinSpacing=function(ye){if(Ce&&ye){var Ze=Ce.indexOf(b.d)+1;Ce[Ze]=parseFloat(Ce[Ze])+ye+jt,Ce[1]=parseFloat(Ce[1])+ye+jt,Ta(Ce)}},O.disable=function(ye,Ze){if(O.enabled&&(ye!==!1&&O.revert(!0,!0),O.enabled=O.isActive=!1,Ze||ee&&ee.pause(),Qe=0,Ae&&(Ae.uncache=1),re&&ri(n,"refreshInit",re),ve&&(ve.pause(),he.tween&&he.tween.kill()&&(he.tween=0)),!I)){for(var Fe=st.length;Fe--;)if(st[Fe].scroller===C&&st[Fe]!==O)return;ri(C,"resize",el),I||ri(C,"scroll",Ma)}},O.kill=function(ye,Ze){O.disable(ye,Ze),ee&&!Ze&&ee.kill(),l&&delete yf[l];var Fe=st.indexOf(O);Fe>=0&&st.splice(Fe,1),Fe===Pi&&Cc>0&&Pi--,Fe=0,st.forEach(function(Ke){return Ke.scroller===O.scroller&&(Fe=1)}),Fe||Di||(O.scroll.rec=0),r&&(r.scrollTrigger=null,ye&&r.revert({kill:!1}),Ze||r.kill()),Ie&&[Ie,Ne,X,Ye].forEach(function(Ke){return Ke.parentNode&&Ke.parentNode.removeChild(Ke)}),tl===O&&(tl=0),u&&(Ae&&(Ae.uncache=1),Fe=0,st.forEach(function(Ke){return Ke.pin===u&&Fe++}),Fe||(Ae.spacer=0)),i.onKill&&i.onKill(O)},st.push(O),O.enable(!1,!1),At&&At(O),r&&r.add&&!z){var dt=O.update;O.update=function(){O.update=dt,ge||fe||O.refresh()},Le.delayedCall(.01,O.update),z=.01,ge=fe=0}else O.refresh();u&&kw()},n.register=function(i){return ya||(Le=i||jg(),Yg()&&window.document&&n.enable(),ya=Xo),ya},n.defaults=function(i){if(i)for(var r in i)Sc[r]=i[r];return Sc},n.disable=function(i,r){Xo=0,st.forEach(function(a){return a[r?"kill":"disable"](i)}),ri(ct,"wheel",Ma),ri(kt,"scroll",Ma),clearInterval(mc),ri(kt,"touchcancel",Hn),ri(Rt,"touchstart",Hn),bc(ri,kt,"pointerdown,touchstart,mousedown",$g),bc(ri,kt,"pointerup,touchend,mouseup",qg),pc.kill(),yc(ri);for(var s=0;s<ot.length;s+=3)wc(ri,ot[s],ot[s+1]),wc(ri,ot[s],ot[s+2])},n.enable=function(){if(ct=window,kt=document,Tn=kt.documentElement,Rt=kt.body,Le&&(Ho=Le.utils.toArray,Go=Le.utils.clamp,lf=Le.core.context||Hn,af=Le.core.suppressOverwrites||Hn,cf=ct.history.scrollRestoration||"auto",wf=ct.pageYOffset,Le.core.globals("ScrollTrigger",n),Rt)){Xo=1,ba=document.createElement("div"),ba.style.height="100vh",ba.style.position="absolute",lv(),Rw(),Vt.register(Le),n.isTouch=Vt.isTouch,Fr=Vt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),of=Vt.isTouch===1,ni(ct,"wheel",Ma),kg=[ct,kt,Tn,Rt],Le.matchMedia?(n.matchMedia=function(l){var c=Le.matchMedia(),d;for(d in l)c.add(d,l[d]);return c},Le.addEventListener("matchMediaInit",function(){return bf()}),Le.addEventListener("matchMediaRevert",function(){return sv()}),Le.addEventListener("matchMedia",function(){Ls(0,1),Ps("matchMedia")}),Le.matchMedia("(orientation: portrait)",function(){return xf(),xf})):console.warn("Requires GSAP 3.11.0 or later"),xf(),ni(kt,"scroll",Ma);var i=Rt.style,r=i.borderTopStyle,s=Le.core.Animation.prototype,a,o;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",a=lr(Rt),Yt.m=Math.round(a.top+Yt.sc())||0,Ci.m=Math.round(a.left+Ci.sc())||0,r?i.borderTopStyle=r:i.removeProperty("border-top-style"),mc=setInterval(nv,250),Le.delayedCall(.5,function(){return _c=0}),ni(kt,"touchcancel",Hn),ni(Rt,"touchstart",Hn),bc(ni,kt,"pointerdown,touchstart,mousedown",$g),bc(ni,kt,"pointerup,touchend,mouseup",qg),sf=Le.utils.checkPrefix("transform"),Pc.push(sf),ya=vi(),pc=Le.delayedCall(.2,Ls).pause(),xa=[kt,"visibilitychange",function(){var l=ct.innerWidth,c=ct.innerHeight;kt.hidden?(Fg=l,Bg=c):(Fg!==l||Bg!==c)&&el()},kt,"DOMContentLoaded",Ls,ct,"load",Ls,ct,"resize",el],yc(ni),st.forEach(function(l){return l.enable(0,1)}),o=0;o<ot.length;o+=3)wc(ri,ot[o],ot[o+1]),wc(ri,ot[o],ot[o+2])}},n.config=function(i){"limitCallbacks"in i&&(ff=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(mc)||(mc=r)&&setInterval(nv,r),"ignoreMobileResize"in i&&(of=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(yc(ri)||yc(ni,i.autoRefreshEvents||"none"),Vg=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=Vi(i),a=ot.indexOf(s),o=Ms(s);~a&&ot.splice(a,o?6:2),r&&(o?Vn.unshift(ct,r,Rt,r,Tn,r):Vn.unshift(s,r))},n.clearMatchMedia=function(i){st.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var a=(Zi(i)?Vi(i):i).getBoundingClientRect(),o=a[s?Es:As]*r||0;return s?a.right-o>0&&a.left+o<ct.innerWidth:a.bottom-o>0&&a.top+o<ct.innerHeight},n.positionInViewport=function(i,r,s){Zi(i)&&(i=Vi(i));var a=i.getBoundingClientRect(),o=a[s?Es:As],l=r==null?o/2:r in Mc?Mc[r]*o:~r.indexOf("%")?parseFloat(r)*o/100:parseFloat(r)||0;return s?(a.left+l)/ct.innerWidth:(a.top+l)/ct.innerHeight},n.killAll=function(i){if(st.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=Cs.killAll||[];Cs={},r.forEach(function(s){return s()})}},n}();et.version="3.12.5",et.saveStyles=function(n){return n?Ho(n).forEach(function(e){if(e&&e.style){var t=Qi.indexOf(e);t>=0&&Qi.splice(t,5),Qi.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Le.core.getCache(e),lf())}}):Qi},et.revert=function(n,e){return bf(!n,e)},et.create=function(n,e){return new et(n,e)},et.refresh=function(n){return n?el():(ya||et.register())&&Ls(!0)},et.update=function(n){return++ot.cache&&cr(n===!0?2:0)},et.clearScrollMemory=av,et.maxScroll=function(n,e){return Gn(n,e?Ci:Yt)},et.getScrollFunc=function(n,e){return kr(Vi(n),e?Ci:Yt)},et.getById=function(n){return yf[n]},et.getAll=function(){return st.filter(function(n){return n.vars.id!=="ScrollSmoother"})},et.isScrolling=function(){return!!fn},et.snapDirectional=_f,et.addEventListener=function(n,e){var t=Cs[n]||(Cs[n]=[]);~t.indexOf(e)||t.push(e)},et.removeEventListener=function(n,e){var t=Cs[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)},et.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,a=function(c,d){var h=[],f=[],u=Le.delayedCall(r,function(){d(h,f),h=[],f=[]}).pause();return function(m){h.length||u.restart(!0),h.push(m.trigger),f.push(m),s<=h.length&&u.progress(1)}},o;for(o in e)i[o]=o.substr(0,2)==="on"&&Li(e[o])&&o!=="onRefreshInit"?a(o,e[o]):e[o];return Li(s)&&(s=s(),ni(et,"refresh",function(){return s=e.batchMax()})),Ho(n).forEach(function(l){var c={};for(o in i)c[o]=i[o];c.trigger=l,t.push(et.create(c))}),t};var pv=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},Tf=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Vt.isTouch?" pinch-zoom":""):"none",e===Tn&&n(Rt,t)},Ic={auto:1,scroll:1},Hw=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,a=s._gsap||Le.core.getCache(s),o=vi(),l;if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==Rt&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Ic[(l=pn(s)).overflowY]||Ic[l.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==i&&!Ms(s)&&(Ic[(l=pn(s)).overflowY]||Ic[l.overflowX]),a._isScrollT=o}(a._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},mv=function(e,t,i,r){return Vt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&Hw,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&ni(kt,Vt.eventTypes[0],vv,!1,!0)},onDisable:function(){return ri(kt,Vt.eventTypes[0],vv,!0)}})},Gw=/(input|label|select|textarea)/i,gv,vv=function(e){var t=Gw.test(e.target.tagName);(t||gv)&&(e._gsapAllow=!0,gv=t)},Ww=function(e){Ts(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,a=t.onRelease,o,l,c=Vi(e.target)||Tn,d=Le.core.globals().ScrollSmoother,h=d&&d.get(),f=Fr&&(e.content&&Vi(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),u=kr(c,Yt),m=kr(c,Ci),p=1,g=(Vt.isTouch&&ct.visualViewport?ct.visualViewport.scale*ct.visualViewport.width:ct.outerWidth)/ct.innerWidth,v=0,y=Li(r)?function(){return r(o)}:function(){return r||2.8},_,w,x=mv(c,e.type,!0,s),S=function(){return w=!1},T=Hn,E=Hn,M=function(){l=Gn(c,Yt),E=Go(Fr?1:0,l),i&&(T=Go(0,Gn(c,Ci))),_=Rs},b=function(){f._gsap.y=$o(parseFloat(f._gsap.y)+u.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",u.offset=u.cacheID=0},A=function(){if(w){requestAnimationFrame(S);var k=$o(o.deltaY/2),K=E(u.v-k);if(f&&K!==u.v+u.offset){u.offset=K-u.v;var O=$o((parseFloat(f&&f._gsap.y)||0)-u.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+O+", 0, 1)",f._gsap.y=O+"px",u.cacheID=ot.cache,cr()}return!0}u.offset&&b(),w=!0},C,P,I,D,F=function(){M(),C.isActive()&&C.vars.scrollY>l&&(u()>l?C.progress(1)&&u(l):C.resetTo("scrollY",l))};return f&&Le.set(f,{y:"+=0"}),e.ignoreCheck=function(B){return Fr&&B.type==="touchmove"&&A()||p>1.05&&B.type!=="touchstart"||o.isGesturing||B.touches&&B.touches.length>1},e.onPress=function(){w=!1;var B=p;p=$o((ct.visualViewport&&ct.visualViewport.scale||1)/g),C.pause(),B!==p&&Tf(c,p>1.01?!0:i?!1:"x"),P=m(),I=u(),M(),_=Rs},e.onRelease=e.onGestureStart=function(B,k){if(u.offset&&b(),!k)D.restart(!0);else{ot.cache++;var K=y(),O,re;i&&(O=m(),re=O+K*.05*-B.velocityX/.227,K*=pv(m,O,re,Gn(c,Ci)),C.vars.scrollX=T(re)),O=u(),re=O+K*.05*-B.velocityY/.227,K*=pv(u,O,re,Gn(c,Yt)),C.vars.scrollY=E(re),C.invalidate().duration(K).play(.01),(Fr&&C.vars.scrollY>=l||O>=l-1)&&Le.to({},{onUpdate:F,duration:K})}a&&a(B)},e.onWheel=function(){C._ts&&C.pause(),vi()-v>1e3&&(_=0,v=vi())},e.onChange=function(B,k,K,O,re){if(Rs!==_&&M(),k&&i&&m(T(O[2]===k?P+(B.startX-B.x):m()+k-O[1])),K){u.offset&&b();var ae=re[2]===K,Te=ae?I+B.startY-B.y:u()+K-re[1],G=E(Te);ae&&Te!==G&&(I+=G-Te),u(G)}(K||k)&&cr()},e.onEnable=function(){Tf(c,i?!1:"x"),et.addEventListener("refresh",F),ni(ct,"resize",F),u.smooth&&(u.target.style.scrollBehavior="auto",u.smooth=m.smooth=!1),x.enable()},e.onDisable=function(){Tf(c,!0),ri(ct,"resize",F),et.removeEventListener("refresh",F),x.kill()},e.lockAxis=e.lockAxis!==!1,o=new Vt(e),o.iOS=Fr,Fr&&!u()&&u(1),Fr&&Le.ticker.add(Hn),D=o._dc,C=Le.to(o,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:fv(u,u(),function(){return C.pause()})},onUpdate:cr,onComplete:D.vars.onComplete}),o};et.sort=function(n){return st.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})},et.observe=function(n){return new Vt(n)},et.normalizeScroll=function(n){if(typeof n>"u")return Ri;if(n===!0&&Ri)return Ri.enable();if(n===!1){Ri&&Ri.kill(),Ri=n;return}var e=n instanceof Vt?n:Ww(n);return Ri&&Ri.target===e.target&&Ri.kill(),Ms(e.target)&&(Ri=e),e},et.core={_getVelocityProp:rf,_inputObserver:mv,_scrollers:ot,_proxies:Vn,bridge:{ss:function(){fn||Ps("scrollStart"),fn=vi()},ref:function(){return gi}}},jg()&&Le.registerPlugin(et),Ee.registerPlugin(et);function _v(){function n(e,t){const i=typeof e;return typeof t!="string"||t.trim()===""?e:t==="true"&&i==="boolean"?!0:t==="false"&&i==="boolean"?!1:isNaN(t)&&i==="string"?t:!isNaN(t)&&i==="number"?+t:e}document.querySelectorAll("[tr-marquee-element='component']").forEach(e=>{const t=e.querySelectorAll("[tr-marquee-element='panel']"),i=e.querySelector("[tr-marquee-element='triggerhover']"),r=e.querySelector("[tr-marquee-element='triggerclick']");let s=n(100,e.getAttribute("tr-marquee-speed")),a=n(!1,e.getAttribute("tr-marquee-vertical")),o=n(!1,e.getAttribute("tr-marquee-reverse")),l=n(!1,e.getAttribute("tr-marquee-scrolldirection")),c=n(!1,e.getAttribute("tr-marquee-scrollscrub")),d=-100,h=1,f=!1;o&&(d=100);let u=Ee.timeline({repeat:-1,onReverseComplete:()=>u.progress(1)});a?(s=t[0].offsetHeight/s,u.fromTo(t,{yPercent:0},{yPercent:d,ease:"none",duration:s})):(s=t[0].offsetWidth/s,u.fromTo(t,{xPercent:0},{xPercent:d,ease:"none",duration:s}));let m={value:1};et.create({trigger:"body",start:"top top",end:"bottom bottom",onUpdate:g=>{if(!f&&(l&&h!==g.direction&&(h=g.direction,u.timeScale(g.direction)),c)){let v=g.getVelocity()*.006;v=Ee.utils.clamp(-60,60,v),Ee.timeline({onUpdate:()=>u.timeScale(m.value)}).fromTo(m,{value:v},{value:h,duration:.5})}}});function p(g){f=g;let v={value:1},y=Ee.timeline({onUpdate:()=>u.timeScale(v.value)});g?(y.fromTo(v,{value:h},{value:0,duration:.5}),r==null||r.classList.add("is-paused")):(y.fromTo(v,{value:0},{value:h,duration:.5}),r==null||r.classList.remove("is-paused"))}window.matchMedia("(pointer: fine)").matches&&(i==null||i.addEventListener("mouseenter",()=>p(!0)),i==null||i.addEventListener("mouseleave",()=>p(!1))),r==null||r.addEventListener("click",function(){r.classList.contains("is-paused")?p(!1):p(!0)})})}window.addEventListener("DOMContentLoaded",()=>{_v()});/**
* @license
* Copyright 2010-2024 Three.js Authors
* SPDX-License-Identifier: MIT
*/const Ef="164",Xw=0,yv=1,$w=2,xv=1,qw=2,ur=3,Br=0,Hi=1,Wn=2,zr=0,Ea=1,bv=2,wv=3,Sv=4,Yw=5,Ds=100,jw=101,Kw=102,Zw=103,Qw=104,Jw=200,eS=201,tS=202,iS=203,Af=204,Cf=205,nS=206,rS=207,sS=208,aS=209,oS=210,lS=211,cS=212,uS=213,dS=214,fS=0,hS=1,pS=2,Oc=3,mS=4,gS=5,vS=6,_S=7,Mv=0,yS=1,xS=2,Vr=0,bS=1,wS=2,SS=3,MS=4,TS=5,ES=6,AS=7,Tv=300,Aa=301,Ca=302,Pf=303,Rf=304,Nc=306,Lf=1e3,Is=1001,Df=1002,Ii=1003,CS=1004,Uc=1005,Ji=1006,If=1007,Os=1008,Hr=1009,PS=1010,RS=1011,Ev=1012,Av=1013,Pa=1014,dr=1015,kc=1016,Cv=1017,Pv=1018,il=1020,LS=35902,DS=1021,IS=1022,mn=1023,OS=1024,NS=1025,Ra=1026,nl=1027,US=1028,Rv=1029,kS=1030,Lv=1031,Dv=1033,Of=33776,Nf=33777,Uf=33778,kf=33779,Iv=35840,Ov=35841,Nv=35842,Uv=35843,kv=36196,Fv=37492,Bv=37496,zv=37808,Vv=37809,Hv=37810,Gv=37811,Wv=37812,Xv=37813,$v=37814,qv=37815,Yv=37816,jv=37817,Kv=37818,Zv=37819,Qv=37820,Jv=37821,Ff=36492,e_=36494,t_=36495,FS=36283,i_=36284,n_=36285,r_=36286,BS=3200,zS=3201,VS=0,HS=1,Gr="",Xn="srgb",Wr="srgb-linear",Bf="display-p3",Fc="display-p3-linear",Bc="linear",Lt="srgb",zc="rec709",Vc="p3",La=7680,s_=519,GS=512,WS=513,XS=514,a_=515,$S=516,qS=517,YS=518,jS=519,o_=35044,l_="300 es",fr=2e3,Hc=2001;class Da{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const _i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],zf=Math.PI/180,Vf=180/Math.PI;function rl(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(_i[n&255]+_i[n>>8&255]+_i[n>>16&255]+_i[n>>24&255]+"-"+_i[e&255]+_i[e>>8&255]+"-"+_i[e>>16&15|64]+_i[e>>24&255]+"-"+_i[t&63|128]+_i[t>>8&255]+"-"+_i[t>>16&255]+_i[t>>24&255]+_i[i&255]+_i[i>>8&255]+_i[i>>16&255]+_i[i>>24&255]).toLowerCase()}function Gi(n,e,t){return Math.max(e,Math.min(t,n))}function KS(n,e){return(n%e+e)%e}function Hf(n,e,t){return(1-t)*n+t*e}function sl(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Wi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}class ft{constructor(e=0,t=0){ft.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Gi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class it{constructor(e,t,i,r,s,a,o,l,c){it.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c)}set(e,t,i,r,s,a,o,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=a,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],d=i[4],h=i[7],f=i[2],u=i[5],m=i[8],p=r[0],g=r[3],v=r[6],y=r[1],_=r[4],w=r[7],x=r[2],S=r[5],T=r[8];return s[0]=a*p+o*y+l*x,s[3]=a*g+o*_+l*S,s[6]=a*v+o*w+l*T,s[1]=c*p+d*y+h*x,s[4]=c*g+d*_+h*S,s[7]=c*v+d*w+h*T,s[2]=f*p+u*y+m*x,s[5]=f*g+u*_+m*S,s[8]=f*v+u*w+m*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8];return t*a*d-t*o*c-i*s*d+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=d*a-o*c,f=o*l-d*s,u=c*s-a*l,m=t*h+i*f+r*u;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return e[0]=h*p,e[1]=(r*c-d*i)*p,e[2]=(o*i-r*a)*p,e[3]=f*p,e[4]=(d*t-r*l)*p,e[5]=(r*s-o*t)*p,e[6]=u*p,e[7]=(i*l-c*t)*p,e[8]=(a*t-i*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Gf.makeScale(e,t)),this}rotate(e){return this.premultiply(Gf.makeRotation(-e)),this}translate(e,t){return this.premultiply(Gf.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Gf=new it;function c_(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function al(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function ZS(){const n=al("canvas");return n.style.display="block",n}const u_={};function QS(n){n in u_||(u_[n]=!0,console.warn(n))}const d_=new it().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),f_=new it().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Gc={[Wr]:{transfer:Bc,primaries:zc,toReference:n=>n,fromReference:n=>n},[Xn]:{transfer:Lt,primaries:zc,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Fc]:{transfer:Bc,primaries:Vc,toReference:n=>n.applyMatrix3(f_),fromReference:n=>n.applyMatrix3(d_)},[Bf]:{transfer:Lt,primaries:Vc,toReference:n=>n.convertSRGBToLinear().applyMatrix3(f_),fromReference:n=>n.applyMatrix3(d_).convertLinearToSRGB()}},JS=new Set([Wr,Fc]),bt={enabled:!0,_workingColorSpace:Wr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!JS.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Gc[e].toReference,r=Gc[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Gc[n].primaries},getTransfer:function(n){return n===Gr?Bc:Gc[n].transfer}};function Ia(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Wf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Oa;class eM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Oa===void 0&&(Oa=al("canvas")),Oa.width=e.width,Oa.height=e.height;const i=Oa.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Oa}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=al("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Ia(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ia(t[i]/255)*255):t[i]=Ia(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let tM=0;class h_{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:tM++}),this.uuid=rl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(Xf(r[a].image)):s.push(Xf(r[a]))}else s=Xf(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Xf(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?eM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iM=0;class yi extends Da{constructor(e=yi.DEFAULT_IMAGE,t=yi.DEFAULT_MAPPING,i=Is,r=Is,s=Ji,a=Os,o=mn,l=Hr,c=yi.DEFAULT_ANISOTROPY,d=Gr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iM++}),this.uuid=rl(),this.name="",this.source=new h_(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new ft(0,0),this.repeat=new ft(1,1),this.center=new ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new it,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Tv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Lf:e.x=e.x-Math.floor(e.x);break;case Is:e.x=e.x<0?0:1;break;case Df:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Lf:e.y=e.y-Math.floor(e.y);break;case Is:e.y=e.y<0?0:1;break;case Df:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}yi.DEFAULT_IMAGE=null,yi.DEFAULT_MAPPING=Tv,yi.DEFAULT_ANISOTROPY=1;class si{constructor(e=0,t=0,i=0,r=1){si.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],d=l[4],h=l[8],f=l[1],u=l[5],m=l[9],p=l[2],g=l[6],v=l[10];if(Math.abs(d-f)<.01&&Math.abs(h-p)<.01&&Math.abs(m-g)<.01){if(Math.abs(d+f)<.1&&Math.abs(h+p)<.1&&Math.abs(m+g)<.1&&Math.abs(c+u+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,w=(u+1)/2,x=(v+1)/2,S=(d+f)/4,T=(h+p)/4,E=(m+g)/4;return _>w&&_>x?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=S/i,s=T/i):w>x?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=S/r,s=E/r):x<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),i=T/s,r=E/s),this.set(i,r,s,t),this}let y=Math.sqrt((g-m)*(g-m)+(h-p)*(h-p)+(f-d)*(f-d));return Math.abs(y)<.001&&(y=1),this.x=(g-m)/y,this.y=(h-p)/y,this.z=(f-d)/y,this.w=Math.acos((c+u+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nM extends Da{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new si(0,0,e,t),this.scissorTest=!1,this.viewport=new si(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ji,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new yi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new h_(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ns extends nM{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class p_ extends yi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ii,this.minFilter=Ii,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rM extends yi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ii,this.minFilter=Ii,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ol{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],d=i[r+2],h=i[r+3];const f=s[a+0],u=s[a+1],m=s[a+2],p=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h;return}if(o===1){e[t+0]=f,e[t+1]=u,e[t+2]=m,e[t+3]=p;return}if(h!==p||l!==f||c!==u||d!==m){let g=1-o;const v=l*f+c*u+d*m+h*p,y=v>=0?1:-1,_=1-v*v;if(_>Number.EPSILON){const x=Math.sqrt(_),S=Math.atan2(x,v*y);g=Math.sin(g*S)/x,o=Math.sin(o*S)/x}const w=o*y;if(l=l*g+f*w,c=c*g+u*w,d=d*g+m*w,h=h*g+p*w,g===1-o){const x=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=x,c*=x,d*=x,h*=x}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],d=i[r+3],h=s[a],f=s[a+1],u=s[a+2],m=s[a+3];return e[t]=o*m+d*h+l*u-c*f,e[t+1]=l*m+d*f+c*h-o*u,e[t+2]=c*m+d*u+o*f-l*h,e[t+3]=d*m-o*h-l*f-c*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),d=o(r/2),h=o(s/2),f=l(i/2),u=l(r/2),m=l(s/2);switch(a){case"XYZ":this._x=f*d*h+c*u*m,this._y=c*u*h-f*d*m,this._z=c*d*m+f*u*h,this._w=c*d*h-f*u*m;break;case"YXZ":this._x=f*d*h+c*u*m,this._y=c*u*h-f*d*m,this._z=c*d*m-f*u*h,this._w=c*d*h+f*u*m;break;case"ZXY":this._x=f*d*h-c*u*m,this._y=c*u*h+f*d*m,this._z=c*d*m+f*u*h,this._w=c*d*h-f*u*m;break;case"ZYX":this._x=f*d*h-c*u*m,this._y=c*u*h+f*d*m,this._z=c*d*m-f*u*h,this._w=c*d*h+f*u*m;break;case"YZX":this._x=f*d*h+c*u*m,this._y=c*u*h+f*d*m,this._z=c*d*m-f*u*h,this._w=c*d*h-f*u*m;break;case"XZY":this._x=f*d*h-c*u*m,this._y=c*u*h-f*d*m,this._z=c*d*m+f*u*h,this._w=c*d*h+f*u*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],d=t[6],h=t[10],f=i+o+h;if(f>0){const u=.5/Math.sqrt(f+1);this._w=.25/u,this._x=(d-l)*u,this._y=(s-c)*u,this._z=(a-r)*u}else if(i>o&&i>h){const u=2*Math.sqrt(1+i-o-h);this._w=(d-l)/u,this._x=.25*u,this._y=(r+a)/u,this._z=(s+c)/u}else if(o>h){const u=2*Math.sqrt(1+o-i-h);this._w=(s-c)/u,this._x=(r+a)/u,this._y=.25*u,this._z=(l+d)/u}else{const u=2*Math.sqrt(1+h-i-o);this._w=(a-r)/u,this._x=(s+c)/u,this._y=(l+d)/u,this._z=.25*u}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+a*o+r*c-s*l,this._y=r*d+a*l+s*o-i*c,this._z=s*d+a*c+i*l-r*o,this._w=a*d-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const u=1-t;return this._w=u*a+t*this._w,this._x=u*i+t*this._x,this._y=u*r+t*this._y,this._z=u*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,o),h=Math.sin((1-t)*d)/c,f=Math.sin(t*d)/c;return this._w=a*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,i=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(m_.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(m_.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),d=2*(o*t-s*r),h=2*(s*i-a*t);return this.x=t+l*c+a*h-o*d,this.y=i+l*d+o*c-s*h,this.z=r+l*h+s*d-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return $f.copy(this).projectOnVector(e),this.sub($f)}reflect(e){return this.sub($f.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Gi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $f=new J,m_=new ol;class ll{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(En.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(En.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=En.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,En):En.fromBufferAttribute(s,a),En.applyMatrix4(e.matrixWorld),this.expandByPoint(En);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Wc.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Wc.copy(i.boundingBox)),Wc.applyMatrix4(e.matrixWorld),this.union(Wc)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,En),En.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cl),Xc.subVectors(this.max,cl),Na.subVectors(e.a,cl),Ua.subVectors(e.b,cl),ka.subVectors(e.c,cl),Xr.subVectors(Ua,Na),$r.subVectors(ka,Ua),Us.subVectors(Na,ka);let t=[0,-Xr.z,Xr.y,0,-$r.z,$r.y,0,-Us.z,Us.y,Xr.z,0,-Xr.x,$r.z,0,-$r.x,Us.z,0,-Us.x,-Xr.y,Xr.x,0,-$r.y,$r.x,0,-Us.y,Us.x,0];return!qf(t,Na,Ua,ka,Xc)||(t=[1,0,0,0,1,0,0,0,1],!qf(t,Na,Ua,ka,Xc))?!1:($c.crossVectors(Xr,$r),t=[$c.x,$c.y,$c.z],qf(t,Na,Ua,ka,Xc))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,En).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(En).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hr=[new J,new J,new J,new J,new J,new J,new J,new J],En=new J,Wc=new ll,Na=new J,Ua=new J,ka=new J,Xr=new J,$r=new J,Us=new J,cl=new J,Xc=new J,$c=new J,ks=new J;function qf(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){ks.fromArray(n,s);const o=r.x*Math.abs(ks.x)+r.y*Math.abs(ks.y)+r.z*Math.abs(ks.z),l=e.dot(ks),c=t.dot(ks),d=i.dot(ks);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>o)return!1}return!0}const sM=new ll,ul=new J,Yf=new J;class jf{constructor(e=new J,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):sM.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ul.subVectors(e,this.center);const t=ul.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(ul,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Yf.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ul.copy(e.center).add(Yf)),this.expandByPoint(ul.copy(e.center).sub(Yf))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const pr=new J,Kf=new J,qc=new J,qr=new J,Zf=new J,Yc=new J,Qf=new J;class aM{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,pr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=pr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(pr.copy(this.origin).addScaledVector(this.direction,t),pr.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Kf.copy(e).add(t).multiplyScalar(.5),qc.copy(t).sub(e).normalize(),qr.copy(this.origin).sub(Kf);const s=e.distanceTo(t)*.5,a=-this.direction.dot(qc),o=qr.dot(this.direction),l=-qr.dot(qc),c=qr.lengthSq(),d=Math.abs(1-a*a);let h,f,u,m;if(d>0)if(h=a*l-o,f=a*o-l,m=s*d,h>=0)if(f>=-m)if(f<=m){const p=1/d;h*=p,f*=p,u=h*(h+a*f+2*o)+f*(a*h+f+2*l)+c}else f=s,h=Math.max(0,-(a*f+o)),u=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(a*f+o)),u=-h*h+f*(f+2*l)+c;else f<=-m?(h=Math.max(0,-(-a*s+o)),f=h>0?-s:Math.min(Math.max(-s,-l),s),u=-h*h+f*(f+2*l)+c):f<=m?(h=0,f=Math.min(Math.max(-s,-l),s),u=f*(f+2*l)+c):(h=Math.max(0,-(a*s+o)),f=h>0?s:Math.min(Math.max(-s,-l),s),u=-h*h+f*(f+2*l)+c);else f=a>0?-s:s,h=Math.max(0,-(a*f+o)),u=-h*h+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(Kf).addScaledVector(qc,f),u}intersectSphere(e,t){pr.subVectors(e.center,this.origin);const i=pr.dot(this.direction),r=pr.dot(pr)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),d>=0?(s=(e.min.y-f.y)*d,a=(e.max.y-f.y)*d):(s=(e.max.y-f.y)*d,a=(e.min.y-f.y)*d),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(o=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,pr)!==null}intersectTriangle(e,t,i,r,s){Zf.subVectors(t,e),Yc.subVectors(i,e),Qf.crossVectors(Zf,Yc);let a=this.direction.dot(Qf),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;qr.subVectors(this.origin,e);const l=o*this.direction.dot(Yc.crossVectors(qr,Yc));if(l<0)return null;const c=o*this.direction.dot(Zf.cross(qr));if(c<0||l+c>a)return null;const d=-o*qr.dot(Qf);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Kt{constructor(e,t,i,r,s,a,o,l,c,d,h,f,u,m,p,g){Kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c,d,h,f,u,m,p,g)}set(e,t,i,r,s,a,o,l,c,d,h,f,u,m,p,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=c,v[6]=d,v[10]=h,v[14]=f,v[3]=u,v[7]=m,v[11]=p,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Kt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Fa.setFromMatrixColumn(e,0).length(),s=1/Fa.setFromMatrixColumn(e,1).length(),a=1/Fa.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=a*d,u=a*h,m=o*d,p=o*h;t[0]=l*d,t[4]=-l*h,t[8]=c,t[1]=u+m*c,t[5]=f-p*c,t[9]=-o*l,t[2]=p-f*c,t[6]=m+u*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*d,u=l*h,m=c*d,p=c*h;t[0]=f+p*o,t[4]=m*o-u,t[8]=a*c,t[1]=a*h,t[5]=a*d,t[9]=-o,t[2]=u*o-m,t[6]=p+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*d,u=l*h,m=c*d,p=c*h;t[0]=f-p*o,t[4]=-a*h,t[8]=m+u*o,t[1]=u+m*o,t[5]=a*d,t[9]=p-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*d,u=a*h,m=o*d,p=o*h;t[0]=l*d,t[4]=m*c-u,t[8]=f*c+p,t[1]=l*h,t[5]=p*c+f,t[9]=u*c-m,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,u=a*c,m=o*l,p=o*c;t[0]=l*d,t[4]=p-f*h,t[8]=m*h+u,t[1]=h,t[5]=a*d,t[9]=-o*d,t[2]=-c*d,t[6]=u*h+m,t[10]=f-p*h}else if(e.order==="XZY"){const f=a*l,u=a*c,m=o*l,p=o*c;t[0]=l*d,t[4]=-h,t[8]=c*d,t[1]=f*h+p,t[5]=a*d,t[9]=u*h-m,t[2]=m*h-u,t[6]=o*d,t[10]=p*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oM,e,lM)}lookAt(e,t,i){const r=this.elements;return en.subVectors(e,t),en.lengthSq()===0&&(en.z=1),en.normalize(),Yr.crossVectors(i,en),Yr.lengthSq()===0&&(Math.abs(i.z)===1?en.x+=1e-4:en.z+=1e-4,en.normalize(),Yr.crossVectors(i,en)),Yr.normalize(),jc.crossVectors(en,Yr),r[0]=Yr.x,r[4]=jc.x,r[8]=en.x,r[1]=Yr.y,r[5]=jc.y,r[9]=en.y,r[2]=Yr.z,r[6]=jc.z,r[10]=en.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],d=i[1],h=i[5],f=i[9],u=i[13],m=i[2],p=i[6],g=i[10],v=i[14],y=i[3],_=i[7],w=i[11],x=i[15],S=r[0],T=r[4],E=r[8],M=r[12],b=r[1],A=r[5],C=r[9],P=r[13],I=r[2],D=r[6],F=r[10],B=r[14],k=r[3],K=r[7],O=r[11],re=r[15];return s[0]=a*S+o*b+l*I+c*k,s[4]=a*T+o*A+l*D+c*K,s[8]=a*E+o*C+l*F+c*O,s[12]=a*M+o*P+l*B+c*re,s[1]=d*S+h*b+f*I+u*k,s[5]=d*T+h*A+f*D+u*K,s[9]=d*E+h*C+f*F+u*O,s[13]=d*M+h*P+f*B+u*re,s[2]=m*S+p*b+g*I+v*k,s[6]=m*T+p*A+g*D+v*K,s[10]=m*E+p*C+g*F+v*O,s[14]=m*M+p*P+g*B+v*re,s[3]=y*S+_*b+w*I+x*k,s[7]=y*T+_*A+w*D+x*K,s[11]=y*E+_*C+w*F+x*O,s[15]=y*M+_*P+w*B+x*re,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],d=e[2],h=e[6],f=e[10],u=e[14],m=e[3],p=e[7],g=e[11],v=e[15];return m*(+s*l*h-r*c*h-s*o*f+i*c*f+r*o*u-i*l*u)+p*(+t*l*u-t*c*f+s*a*f-r*a*u+r*c*d-s*l*d)+g*(+t*c*h-t*o*u-s*a*h+i*a*u+s*o*d-i*c*d)+v*(-r*o*d-t*l*h+t*o*f+r*a*h-i*a*f+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],u=e[11],m=e[12],p=e[13],g=e[14],v=e[15],y=h*g*c-p*f*c+p*l*u-o*g*u-h*l*v+o*f*v,_=m*f*c-d*g*c-m*l*u+a*g*u+d*l*v-a*f*v,w=d*p*c-m*h*c+m*o*u-a*p*u-d*o*v+a*h*v,x=m*h*l-d*p*l-m*o*f+a*p*f+d*o*g-a*h*g,S=t*y+i*_+r*w+s*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/S;return e[0]=y*T,e[1]=(p*f*s-h*g*s-p*r*u+i*g*u+h*r*v-i*f*v)*T,e[2]=(o*g*s-p*l*s+p*r*c-i*g*c-o*r*v+i*l*v)*T,e[3]=(h*l*s-o*f*s-h*r*c+i*f*c+o*r*u-i*l*u)*T,e[4]=_*T,e[5]=(d*g*s-m*f*s+m*r*u-t*g*u-d*r*v+t*f*v)*T,e[6]=(m*l*s-a*g*s-m*r*c+t*g*c+a*r*v-t*l*v)*T,e[7]=(a*f*s-d*l*s+d*r*c-t*f*c-a*r*u+t*l*u)*T,e[8]=w*T,e[9]=(m*h*s-d*p*s-m*i*u+t*p*u+d*i*v-t*h*v)*T,e[10]=(a*p*s-m*o*s+m*i*c-t*p*c-a*i*v+t*o*v)*T,e[11]=(d*o*s-a*h*s-d*i*c+t*h*c+a*i*u-t*o*u)*T,e[12]=x*T,e[13]=(d*p*r-m*h*r+m*i*f-t*p*f-d*i*g+t*h*g)*T,e[14]=(m*o*r-a*p*r-m*i*l+t*p*l+a*i*g-t*o*g)*T,e[15]=(a*h*r-d*o*r+d*i*l-t*h*l-a*i*f+t*o*f)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,d=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,d*o+i,d*l-r*a,0,c*l-r*o,d*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,d=a+a,h=o+o,f=s*c,u=s*d,m=s*h,p=a*d,g=a*h,v=o*h,y=l*c,_=l*d,w=l*h,x=i.x,S=i.y,T=i.z;return r[0]=(1-(p+v))*x,r[1]=(u+w)*x,r[2]=(m-_)*x,r[3]=0,r[4]=(u-w)*S,r[5]=(1-(f+v))*S,r[6]=(g+y)*S,r[7]=0,r[8]=(m+_)*T,r[9]=(g-y)*T,r[10]=(1-(f+p))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Fa.set(r[0],r[1],r[2]).length();const a=Fa.set(r[4],r[5],r[6]).length(),o=Fa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],An.copy(this);const c=1/s,d=1/a,h=1/o;return An.elements[0]*=c,An.elements[1]*=c,An.elements[2]*=c,An.elements[4]*=d,An.elements[5]*=d,An.elements[6]*=d,An.elements[8]*=h,An.elements[9]*=h,An.elements[10]*=h,t.setFromRotationMatrix(An),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=fr){const l=this.elements,c=2*s/(t-e),d=2*s/(i-r),h=(t+e)/(t-e),f=(i+r)/(i-r);let u,m;if(o===fr)u=-(a+s)/(a-s),m=-2*a*s/(a-s);else if(o===Hc)u=-a/(a-s),m=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=u,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=fr){const l=this.elements,c=1/(t-e),d=1/(i-r),h=1/(a-s),f=(t+e)*c,u=(i+r)*d;let m,p;if(o===fr)m=(a+s)*h,p=-2*h;else if(o===Hc)m=s*h,p=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-u,l[2]=0,l[6]=0,l[10]=p,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Fa=new J,An=new Kt,oM=new J(0,0,0),lM=new J(1,1,1),Yr=new J,jc=new J,en=new J,g_=new Kt,v_=new ol;class mr{constructor(e=0,t=0,i=0,r=mr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],d=r[9],h=r[2],f=r[6],u=r[10];switch(t){case"XYZ":this._y=Math.asin(Gi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,u),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Gi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,u),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Gi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,u),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Gi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,u),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Gi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,u));break;case"XZY":this._z=Math.asin(-Gi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-d,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return g_.makeRotationFromQuaternion(e),this.setFromRotationMatrix(g_,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return v_.setFromEuler(this),this.setFromQuaternion(v_,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}mr.DEFAULT_ORDER="XYZ";class __{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let cM=0;const y_=new J,Ba=new ol,gr=new Kt,Kc=new J,dl=new J,uM=new J,dM=new ol,x_=new J(1,0,0),b_=new J(0,1,0),w_=new J(0,0,1),S_={type:"added"},fM={type:"removed"},za={type:"childadded",child:null},Jf={type:"childremoved",child:null};class tn extends Da{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cM++}),this.uuid=rl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=tn.DEFAULT_UP.clone();const e=new J,t=new mr,i=new ol,r=new J(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Kt},normalMatrix:{value:new it}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=tn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=tn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new __,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ba.setFromAxisAngle(e,t),this.quaternion.multiply(Ba),this}rotateOnWorldAxis(e,t){return Ba.setFromAxisAngle(e,t),this.quaternion.premultiply(Ba),this}rotateX(e){return this.rotateOnAxis(x_,e)}rotateY(e){return this.rotateOnAxis(b_,e)}rotateZ(e){return this.rotateOnAxis(w_,e)}translateOnAxis(e,t){return y_.copy(e).applyQuaternion(this.quaternion),this.position.add(y_.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(x_,e)}translateY(e){return this.translateOnAxis(b_,e)}translateZ(e){return this.translateOnAxis(w_,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(gr.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Kc.copy(e):Kc.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),dl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gr.lookAt(dl,Kc,this.up):gr.lookAt(Kc,dl,this.up),this.quaternion.setFromRotationMatrix(gr),r&&(gr.extractRotation(r.matrixWorld),Ba.setFromRotationMatrix(gr),this.quaternion.premultiply(Ba.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(S_),za.child=e,this.dispatchEvent(za),za.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(fM),Jf.child=e,this.dispatchEvent(Jf),Jf.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),gr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),gr.multiply(e.parent.matrixWorld)),e.applyMatrix4(gr),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(S_),za.child=e,this.dispatchEvent(za),za.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dl,e,uM),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dl,dM,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),d=a(e.images),h=a(e.shapes),f=a(e.skeletons),u=a(e.animations),m=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),u.length>0&&(i.animations=u),m.length>0&&(i.nodes=m)}return i.object=r,i;function a(o){const l=[];for(const c in o){const d=o[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}tn.DEFAULT_UP=new J(0,1,0),tn.DEFAULT_MATRIX_AUTO_UPDATE=!0,tn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Cn=new J,vr=new J,eh=new J,_r=new J,Va=new J,Ha=new J,M_=new J,th=new J,ih=new J,nh=new J;class $n{constructor(e=new J,t=new J,i=new J){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Cn.subVectors(e,t),r.cross(Cn);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Cn.subVectors(r,t),vr.subVectors(i,t),eh.subVectors(e,t);const a=Cn.dot(Cn),o=Cn.dot(vr),l=Cn.dot(eh),c=vr.dot(vr),d=vr.dot(eh),h=a*c-o*o;if(h===0)return s.set(0,0,0),null;const f=1/h,u=(c*l-o*d)*f,m=(a*d-o*l)*f;return s.set(1-u-m,m,u)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,_r)===null?!1:_r.x>=0&&_r.y>=0&&_r.x+_r.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,_r)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,_r.x),l.addScaledVector(a,_r.y),l.addScaledVector(o,_r.z),l)}static isFrontFacing(e,t,i,r){return Cn.subVectors(i,t),vr.subVectors(e,t),Cn.cross(vr).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Cn.subVectors(this.c,this.b),vr.subVectors(this.a,this.b),Cn.cross(vr).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return $n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return $n.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return $n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Va.subVectors(r,i),Ha.subVectors(s,i),th.subVectors(e,i);const l=Va.dot(th),c=Ha.dot(th);if(l<=0&&c<=0)return t.copy(i);ih.subVectors(e,r);const d=Va.dot(ih),h=Ha.dot(ih);if(d>=0&&h<=d)return t.copy(r);const f=l*h-d*c;if(f<=0&&l>=0&&d<=0)return a=l/(l-d),t.copy(i).addScaledVector(Va,a);nh.subVectors(e,s);const u=Va.dot(nh),m=Ha.dot(nh);if(m>=0&&u<=m)return t.copy(s);const p=u*c-l*m;if(p<=0&&c>=0&&m<=0)return o=c/(c-m),t.copy(i).addScaledVector(Ha,o);const g=d*m-u*h;if(g<=0&&h-d>=0&&u-m>=0)return M_.subVectors(s,r),o=(h-d)/(h-d+(u-m)),t.copy(r).addScaledVector(M_,o);const v=1/(g+p+f);return a=p*v,o=f*v,t.copy(i).addScaledVector(Va,a).addScaledVector(Ha,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const T_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},jr={h:0,s:0,l:0},Zc={h:0,s:0,l:0};function rh(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let yt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=bt.workingColorSpace){return this.r=e,this.g=t,this.b=i,bt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=bt.workingColorSpace){if(e=KS(e,1),t=Gi(t,0,1),i=Gi(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=rh(a,s,e+1/3),this.g=rh(a,s,e),this.b=rh(a,s,e-1/3)}return bt.toWorkingColorSpace(this,r),this}setStyle(e,t=Xn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xn){const i=T_[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ia(e.r),this.g=Ia(e.g),this.b=Ia(e.b),this}copyLinearToSRGB(e){return this.r=Wf(e.r),this.g=Wf(e.g),this.b=Wf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xn){return bt.fromWorkingColorSpace(xi.copy(this),e),Math.round(Gi(xi.r*255,0,255))*65536+Math.round(Gi(xi.g*255,0,255))*256+Math.round(Gi(xi.b*255,0,255))}getHexString(e=Xn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=bt.workingColorSpace){bt.fromWorkingColorSpace(xi.copy(this),t);const i=xi.r,r=xi.g,s=xi.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const d=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=d<=.5?h/(a+o):h/(2-a-o),a){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=bt.workingColorSpace){return bt.fromWorkingColorSpace(xi.copy(this),t),e.r=xi.r,e.g=xi.g,e.b=xi.b,e}getStyle(e=Xn){bt.fromWorkingColorSpace(xi.copy(this),e);const t=xi.r,i=xi.g,r=xi.b;return e!==Xn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(jr),this.setHSL(jr.h+e,jr.s+t,jr.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(jr),e.getHSL(Zc);const i=Hf(jr.h,Zc.h,t),r=Hf(jr.s,Zc.s,t),s=Hf(jr.l,Zc.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const xi=new yt;yt.NAMES=T_;let hM=0;class Qc extends Da{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hM++}),this.uuid=rl(),this.name="",this.type="Material",this.blending=Ea,this.side=Br,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Af,this.blendDst=Cf,this.blendEquation=Ds,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new yt(0,0,0),this.blendAlpha=0,this.depthFunc=Oc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=s_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=La,this.stencilZFail=La,this.stencilZPass=La,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ea&&(i.blending=this.blending),this.side!==Br&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Af&&(i.blendSrc=this.blendSrc),this.blendDst!==Cf&&(i.blendDst=this.blendDst),this.blendEquation!==Ds&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Oc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==s_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==La&&(i.stencilFail=this.stencilFail),this.stencilZFail!==La&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==La&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class E_ extends Qc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new mr,this.combine=Mv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $t=new J,Jc=new ft;class qn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=o_,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=dr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return QS("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Jc.fromBufferAttribute(this,t),Jc.applyMatrix3(e),this.setXY(t,Jc.x,Jc.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.applyMatrix3(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.applyMatrix4(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.applyNormalMatrix(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.transformDirection(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=sl(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Wi(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sl(t,this.array)),t}setX(e,t){return this.normalized&&(t=Wi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sl(t,this.array)),t}setY(e,t){return this.normalized&&(t=Wi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Wi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sl(t,this.array)),t}setW(e,t){return this.normalized&&(t=Wi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Wi(t,this.array),i=Wi(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Wi(t,this.array),i=Wi(i,this.array),r=Wi(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Wi(t,this.array),i=Wi(i,this.array),r=Wi(r,this.array),s=Wi(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==o_&&(e.usage=this.usage),e}}class A_ extends qn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class C_ extends qn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Fs extends qn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let pM=0;const gn=new Kt,sh=new tn,Ga=new J,nn=new ll,fl=new ll,ai=new J;class Bs extends Da{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pM++}),this.uuid=rl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(c_(e)?C_:A_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new it().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return gn.makeRotationFromQuaternion(e),this.applyMatrix4(gn),this}rotateX(e){return gn.makeRotationX(e),this.applyMatrix4(gn),this}rotateY(e){return gn.makeRotationY(e),this.applyMatrix4(gn),this}rotateZ(e){return gn.makeRotationZ(e),this.applyMatrix4(gn),this}translate(e,t,i){return gn.makeTranslation(e,t,i),this.applyMatrix4(gn),this}scale(e,t,i){return gn.makeScale(e,t,i),this.applyMatrix4(gn),this}lookAt(e){return sh.lookAt(e),sh.updateMatrix(),this.applyMatrix4(sh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ga).negate(),this.translate(Ga.x,Ga.y,Ga.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Fs(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ll);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];nn.setFromBufferAttribute(s),this.morphTargetsRelative?(ai.addVectors(this.boundingBox.min,nn.min),this.boundingBox.expandByPoint(ai),ai.addVectors(this.boundingBox.max,nn.max),this.boundingBox.expandByPoint(ai)):(this.boundingBox.expandByPoint(nn.min),this.boundingBox.expandByPoint(nn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new jf);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(e){const i=this.boundingSphere.center;if(nn.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];fl.setFromBufferAttribute(o),this.morphTargetsRelative?(ai.addVectors(nn.min,fl.min),nn.expandByPoint(ai),ai.addVectors(nn.max,fl.max),nn.expandByPoint(ai)):(nn.expandByPoint(fl.min),nn.expandByPoint(fl.max))}nn.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)ai.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ai));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,d=o.count;c<d;c++)ai.fromBufferAttribute(o,c),l&&(Ga.fromBufferAttribute(e,c),ai.add(Ga)),r=Math.max(r,i.distanceToSquared(ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qn(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let E=0;E<i.count;E++)o[E]=new J,l[E]=new J;const c=new J,d=new J,h=new J,f=new ft,u=new ft,m=new ft,p=new J,g=new J;function v(E,M,b){c.fromBufferAttribute(i,E),d.fromBufferAttribute(i,M),h.fromBufferAttribute(i,b),f.fromBufferAttribute(s,E),u.fromBufferAttribute(s,M),m.fromBufferAttribute(s,b),d.sub(c),h.sub(c),u.sub(f),m.sub(f);const A=1/(u.x*m.y-m.x*u.y);isFinite(A)&&(p.copy(d).multiplyScalar(m.y).addScaledVector(h,-u.y).multiplyScalar(A),g.copy(h).multiplyScalar(u.x).addScaledVector(d,-m.x).multiplyScalar(A),o[E].add(p),o[M].add(p),o[b].add(p),l[E].add(g),l[M].add(g),l[b].add(g))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let E=0,M=y.length;E<M;++E){const b=y[E],A=b.start,C=b.count;for(let P=A,I=A+C;P<I;P+=3)v(e.getX(P+0),e.getX(P+1),e.getX(P+2))}const _=new J,w=new J,x=new J,S=new J;function T(E){x.fromBufferAttribute(r,E),S.copy(x);const M=o[E];_.copy(M),_.sub(x.multiplyScalar(x.dot(M))).normalize(),w.crossVectors(S,M);const A=w.dot(l[E])<0?-1:1;a.setXYZW(E,_.x,_.y,_.z,A)}for(let E=0,M=y.length;E<M;++E){const b=y[E],A=b.start,C=b.count;for(let P=A,I=A+C;P<I;P+=3)T(e.getX(P+0)),T(e.getX(P+1)),T(e.getX(P+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new qn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,u=i.count;f<u;f++)i.setXYZ(f,0,0,0);const r=new J,s=new J,a=new J,o=new J,l=new J,c=new J,d=new J,h=new J;if(e)for(let f=0,u=e.count;f<u;f+=3){const m=e.getX(f+0),p=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,p),a.fromBufferAttribute(t,g),d.subVectors(a,s),h.subVectors(r,s),d.cross(h),o.fromBufferAttribute(i,m),l.fromBufferAttribute(i,p),c.fromBufferAttribute(i,g),o.add(d),l.add(d),c.add(d),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(p,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let f=0,u=t.count;f<u;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),d.subVectors(a,s),h.subVectors(r,s),d.cross(h),i.setXYZ(f+0,d.x,d.y,d.z),i.setXYZ(f+1,d.x,d.y,d.z),i.setXYZ(f+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ai.fromBufferAttribute(e,t),ai.normalize(),e.setXYZ(t,ai.x,ai.y,ai.z)}toNonIndexed(){function e(o,l){const c=o.array,d=o.itemSize,h=o.normalized,f=new c.constructor(l.length*d);let u=0,m=0;for(let p=0,g=l.length;p<g;p++){o.isInterleavedBufferAttribute?u=l[p]*o.data.stride+o.offset:u=l[p]*d;for(let v=0;v<d;v++)f[m++]=c[u++]}return new qn(f,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Bs,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let d=0,h=c.length;d<h;d++){const f=c[d],u=e(f,i);l.push(u)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,f=c.length;h<f;h++){const u=c[h];d.push(u.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],h=s[c];for(let f=0,u=h.length;f<u;f++)d.push(h[f].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,d=a.length;c<d;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const P_=new Kt,zs=new aM,eu=new jf,R_=new J,Wa=new J,Xa=new J,$a=new J,ah=new J,tu=new J,iu=new ft,nu=new ft,ru=new ft,L_=new J,D_=new J,I_=new J,su=new J,au=new J;class Pn extends tn{constructor(e=new Bs,t=new E_){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){tu.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=o[l],h=s[l];d!==0&&(ah.fromBufferAttribute(h,e),a?tu.addScaledVector(ah,d):tu.addScaledVector(ah.sub(t),d))}t.add(tu)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),eu.copy(i.boundingSphere),eu.applyMatrix4(s),zs.copy(e.ray).recast(e.near),!(eu.containsPoint(zs.origin)===!1&&(zs.intersectSphere(eu,R_)===null||zs.origin.distanceToSquared(R_)>(e.far-e.near)**2))&&(P_.copy(s).invert(),zs.copy(e.ray).applyMatrix4(P_),!(i.boundingBox!==null&&zs.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,zs)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,h=s.attributes.normal,f=s.groups,u=s.drawRange;if(o!==null)if(Array.isArray(a))for(let m=0,p=f.length;m<p;m++){const g=f[m],v=a[g.materialIndex],y=Math.max(g.start,u.start),_=Math.min(o.count,Math.min(g.start+g.count,u.start+u.count));for(let w=y,x=_;w<x;w+=3){const S=o.getX(w),T=o.getX(w+1),E=o.getX(w+2);r=ou(this,v,e,i,c,d,h,S,T,E),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{const m=Math.max(0,u.start),p=Math.min(o.count,u.start+u.count);for(let g=m,v=p;g<v;g+=3){const y=o.getX(g),_=o.getX(g+1),w=o.getX(g+2);r=ou(this,a,e,i,c,d,h,y,_,w),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,p=f.length;m<p;m++){const g=f[m],v=a[g.materialIndex],y=Math.max(g.start,u.start),_=Math.min(l.count,Math.min(g.start+g.count,u.start+u.count));for(let w=y,x=_;w<x;w+=3){const S=w,T=w+1,E=w+2;r=ou(this,v,e,i,c,d,h,S,T,E),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{const m=Math.max(0,u.start),p=Math.min(l.count,u.start+u.count);for(let g=m,v=p;g<v;g+=3){const y=g,_=g+1,w=g+2;r=ou(this,a,e,i,c,d,h,y,_,w),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}}function mM(n,e,t,i,r,s,a,o){let l;if(e.side===Hi?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Br,o),l===null)return null;au.copy(o),au.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(au);return c<t.near||c>t.far?null:{distance:c,point:au.clone(),object:n}}function ou(n,e,t,i,r,s,a,o,l,c){n.getVertexPosition(o,Wa),n.getVertexPosition(l,Xa),n.getVertexPosition(c,$a);const d=mM(n,e,t,i,Wa,Xa,$a,su);if(d){r&&(iu.fromBufferAttribute(r,o),nu.fromBufferAttribute(r,l),ru.fromBufferAttribute(r,c),d.uv=$n.getInterpolation(su,Wa,Xa,$a,iu,nu,ru,new ft)),s&&(iu.fromBufferAttribute(s,o),nu.fromBufferAttribute(s,l),ru.fromBufferAttribute(s,c),d.uv1=$n.getInterpolation(su,Wa,Xa,$a,iu,nu,ru,new ft)),a&&(L_.fromBufferAttribute(a,o),D_.fromBufferAttribute(a,l),I_.fromBufferAttribute(a,c),d.normal=$n.getInterpolation(su,Wa,Xa,$a,L_,D_,I_,new J),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new J,materialIndex:0};$n.getNormal(Wa,Xa,$a,h.normal),d.face=h}return d}class hl extends Bs{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],d=[],h=[];let f=0,u=0;m("z","y","x",-1,-1,i,t,e,a,s,0),m("z","y","x",1,-1,i,t,-e,a,s,1),m("x","z","y",1,1,e,i,t,r,a,2),m("x","z","y",1,-1,e,i,-t,r,a,3),m("x","y","z",1,-1,e,t,i,r,s,4),m("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Fs(c,3)),this.setAttribute("normal",new Fs(d,3)),this.setAttribute("uv",new Fs(h,2));function m(p,g,v,y,_,w,x,S,T,E,M){const b=w/T,A=x/E,C=w/2,P=x/2,I=S/2,D=T+1,F=E+1;let B=0,k=0;const K=new J;for(let O=0;O<F;O++){const re=O*A-P;for(let ae=0;ae<D;ae++){const Te=ae*b-C;K[p]=Te*y,K[g]=re*_,K[v]=I,c.push(K.x,K.y,K.z),K[p]=0,K[g]=0,K[v]=S>0?1:-1,d.push(K.x,K.y,K.z),h.push(ae/T),h.push(1-O/E),B+=1}}for(let O=0;O<E;O++)for(let re=0;re<T;re++){const ae=f+re+D*O,Te=f+re+D*(O+1),G=f+(re+1)+D*(O+1),Y=f+(re+1)+D*O;l.push(ae,Te,Y),l.push(Te,G,Y),k+=6}o.addGroup(u,k,M),u+=k,f+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qa(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Oi(n){const e={};for(let t=0;t<n.length;t++){const i=qa(n[t]);for(const r in i)e[r]=i[r]}return e}function gM(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function O_(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:bt.workingColorSpace}const vM={clone:qa,merge:Oi};var _M=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,yM=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Yn extends Qc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_M,this.fragmentShader=yM,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qa(e.uniforms),this.uniformsGroups=gM(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class N_ extends tn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt,this.coordinateSystem=fr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Kr=new J,U_=new ft,k_=new ft;class rn extends N_{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Vf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Vf*2*Math.atan(Math.tan(zf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Kr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Kr.x,Kr.y).multiplyScalar(-e/Kr.z),Kr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Kr.x,Kr.y).multiplyScalar(-e/Kr.z)}getViewSize(e,t){return this.getViewBounds(e,U_,k_),t.subVectors(k_,U_)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(zf*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ya=-90,ja=1;class xM extends tn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new rn(Ya,ja,e,t);r.layers=this.layers,this.add(r);const s=new rn(Ya,ja,e,t);s.layers=this.layers,this.add(s);const a=new rn(Ya,ja,e,t);a.layers=this.layers,this.add(a);const o=new rn(Ya,ja,e,t);o.layers=this.layers,this.add(o);const l=new rn(Ya,ja,e,t);l.layers=this.layers,this.add(l);const c=new rn(Ya,ja,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===fr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Hc)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,d]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=p,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(h,f,u),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class F_ extends yi{constructor(e,t,i,r,s,a,o,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:Aa,super(e,t,i,r,s,a,o,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bM extends Ns{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new F_(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ji}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new hl(5,5,5),s=new Yn({name:"CubemapFromEquirect",uniforms:qa(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Hi,blending:zr});s.uniforms.tEquirect.value=t;const a=new Pn(r,s),o=t.minFilter;return t.minFilter===Os&&(t.minFilter=Ji),new xM(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}const oh=new J,wM=new J,SM=new it;class Vs{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=oh.subVectors(i,t).cross(wM.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(oh),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||SM.getNormalMatrix(e),r=this.coplanarPoint(oh).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hs=new jf,lu=new J;class B_{constructor(e=new Vs,t=new Vs,i=new Vs,r=new Vs,s=new Vs,a=new Vs){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=fr){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],d=r[5],h=r[6],f=r[7],u=r[8],m=r[9],p=r[10],g=r[11],v=r[12],y=r[13],_=r[14],w=r[15];if(i[0].setComponents(l-s,f-c,g-u,w-v).normalize(),i[1].setComponents(l+s,f+c,g+u,w+v).normalize(),i[2].setComponents(l+a,f+d,g+m,w+y).normalize(),i[3].setComponents(l-a,f-d,g-m,w-y).normalize(),i[4].setComponents(l-o,f-h,g-p,w-_).normalize(),t===fr)i[5].setComponents(l+o,f+h,g+p,w+_).normalize();else if(t===Hc)i[5].setComponents(o,h,p,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Hs.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Hs.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hs)}intersectsSprite(e){return Hs.center.set(0,0,0),Hs.radius=.7071067811865476,Hs.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hs)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(lu.x=r.normal.x>0?e.max.x:e.min.x,lu.y=r.normal.y>0?e.max.y:e.min.y,lu.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(lu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function z_(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function MM(n){const e=new WeakMap;function t(o,l){const c=o.array,d=o.usage,h=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,d),o.onUploadCallback();let u;if(c instanceof Float32Array)u=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?u=n.HALF_FLOAT:u=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)u=n.SHORT;else if(c instanceof Uint32Array)u=n.UNSIGNED_INT;else if(c instanceof Int32Array)u=n.INT;else if(c instanceof Int8Array)u=n.BYTE;else if(c instanceof Uint8Array)u=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)u=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:u,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:h}}function i(o,l,c){const d=l.array,h=l._updateRange,f=l.updateRanges;if(n.bindBuffer(c,o),h.count===-1&&f.length===0&&n.bufferSubData(c,0,d),f.length!==0){for(let u=0,m=f.length;u<m;u++){const p=f[u];n.bufferSubData(c,p.start*d.BYTES_PER_ELEMENT,d,p.start,p.count)}l.clearUpdateRanges()}h.count!==-1&&(n.bufferSubData(c,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count),h.count=-1),l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}class Ka extends Bs{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,d=l+1,h=e/o,f=t/l,u=[],m=[],p=[],g=[];for(let v=0;v<d;v++){const y=v*f-a;for(let _=0;_<c;_++){const w=_*h-s;m.push(w,-y,0),p.push(0,0,1),g.push(_/o),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let y=0;y<o;y++){const _=y+c*v,w=y+c*(v+1),x=y+1+c*(v+1),S=y+1+c*v;u.push(_,w,S),u.push(w,x,S)}this.setIndex(u),this.setAttribute("position",new Fs(m,3)),this.setAttribute("normal",new Fs(p,3)),this.setAttribute("uv",new Fs(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ka(e.width,e.height,e.widthSegments,e.heightSegments)}}var TM=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,EM=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,AM=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,CM=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PM=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,RM=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,LM=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,DM=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,IM=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,OM=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,NM=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,UM=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,kM=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,FM=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,BM=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,zM=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,VM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,GM=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,WM=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,XM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$M=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,qM=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,YM=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jM=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,KM=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ZM=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,QM=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,JM=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,eT=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,tT="gl_FragColor = linearToOutputTexel( gl_FragColor );",iT=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,nT=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,rT=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sT=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,aT=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oT=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lT=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cT=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uT=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,dT=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,fT=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hT=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pT=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mT=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,gT=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vT=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_T=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,yT=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xT=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bT=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wT=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,ST=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,MT=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TT=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ET=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,AT=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,CT=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,PT=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,RT=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,LT=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,DT=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,IT=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,OT=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NT=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,UT=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kT=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,FT=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,BT=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,zT=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,VT=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,HT=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,GT=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,WT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,XT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$T=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qT=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,YT=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,jT=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,KT=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ZT=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,QT=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,JT=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,eE=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tE=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,iE=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nE=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,rE=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,sE=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,aE=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,oE=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lE=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cE=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uE=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,dE=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,fE=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hE=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pE=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mE=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gE=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,vE=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_E=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,yE=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,xE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,SE=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const nt={alphahash_fragment:TM,alphahash_pars_fragment:EM,alphamap_fragment:AM,alphamap_pars_fragment:CM,alphatest_fragment:PM,alphatest_pars_fragment:RM,aomap_fragment:LM,aomap_pars_fragment:DM,batching_pars_vertex:IM,batching_vertex:OM,begin_vertex:NM,beginnormal_vertex:UM,bsdfs:kM,iridescence_fragment:FM,bumpmap_pars_fragment:BM,clipping_planes_fragment:zM,clipping_planes_pars_fragment:VM,clipping_planes_pars_vertex:HM,clipping_planes_vertex:GM,color_fragment:WM,color_pars_fragment:XM,color_pars_vertex:$M,color_vertex:qM,common:YM,cube_uv_reflection_fragment:jM,defaultnormal_vertex:KM,displacementmap_pars_vertex:ZM,displacementmap_vertex:QM,emissivemap_fragment:JM,emissivemap_pars_fragment:eT,colorspace_fragment:tT,colorspace_pars_fragment:iT,envmap_fragment:nT,envmap_common_pars_fragment:rT,envmap_pars_fragment:sT,envmap_pars_vertex:aT,envmap_physical_pars_fragment:vT,envmap_vertex:oT,fog_vertex:lT,fog_pars_vertex:cT,fog_fragment:uT,fog_pars_fragment:dT,gradientmap_pars_fragment:fT,lightmap_pars_fragment:hT,lights_lambert_fragment:pT,lights_lambert_pars_fragment:mT,lights_pars_begin:gT,lights_toon_fragment:_T,lights_toon_pars_fragment:yT,lights_phong_fragment:xT,lights_phong_pars_fragment:bT,lights_physical_fragment:wT,lights_physical_pars_fragment:ST,lights_fragment_begin:MT,lights_fragment_maps:TT,lights_fragment_end:ET,logdepthbuf_fragment:AT,logdepthbuf_pars_fragment:CT,logdepthbuf_pars_vertex:PT,logdepthbuf_vertex:RT,map_fragment:LT,map_pars_fragment:DT,map_particle_fragment:IT,map_particle_pars_fragment:OT,metalnessmap_fragment:NT,metalnessmap_pars_fragment:UT,morphinstance_vertex:kT,morphcolor_vertex:FT,morphnormal_vertex:BT,morphtarget_pars_vertex:zT,morphtarget_vertex:VT,normal_fragment_begin:HT,normal_fragment_maps:GT,normal_pars_fragment:WT,normal_pars_vertex:XT,normal_vertex:$T,normalmap_pars_fragment:qT,clearcoat_normal_fragment_begin:YT,clearcoat_normal_fragment_maps:jT,clearcoat_pars_fragment:KT,iridescence_pars_fragment:ZT,opaque_fragment:QT,packing:JT,premultiplied_alpha_fragment:eE,project_vertex:tE,dithering_fragment:iE,dithering_pars_fragment:nE,roughnessmap_fragment:rE,roughnessmap_pars_fragment:sE,shadowmap_pars_fragment:aE,shadowmap_pars_vertex:oE,shadowmap_vertex:lE,shadowmask_pars_fragment:cE,skinbase_vertex:uE,skinning_pars_vertex:dE,skinning_vertex:fE,skinnormal_vertex:hE,specularmap_fragment:pE,specularmap_pars_fragment:mE,tonemapping_fragment:gE,tonemapping_pars_fragment:vE,transmission_fragment:_E,transmission_pars_fragment:yE,uv_pars_fragment:xE,uv_pars_vertex:bE,uv_vertex:wE,worldpos_vertex:SE,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},be={common:{diffuse:{value:new yt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new it},alphaMap:{value:null},alphaMapTransform:{value:new it},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new it}},envmap:{envMap:{value:null},envMapRotation:{value:new it},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new it}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new it}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new it},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new it},normalScale:{value:new ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new it},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new it}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new it}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new it}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new it},alphaTest:{value:0},uvTransform:{value:new it}},sprite:{diffuse:{value:new yt(16777215)},opacity:{value:1},center:{value:new ft(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new it},alphaMap:{value:null},alphaMapTransform:{value:new it},alphaTest:{value:0}}},jn={basic:{uniforms:Oi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.fog]),vertexShader:nt.meshbasic_vert,fragmentShader:nt.meshbasic_frag},lambert:{uniforms:Oi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new yt(0)}}]),vertexShader:nt.meshlambert_vert,fragmentShader:nt.meshlambert_frag},phong:{uniforms:Oi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new yt(0)},specular:{value:new yt(1118481)},shininess:{value:30}}]),vertexShader:nt.meshphong_vert,fragmentShader:nt.meshphong_frag},standard:{uniforms:Oi([be.common,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.roughnessmap,be.metalnessmap,be.fog,be.lights,{emissive:{value:new yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nt.meshphysical_vert,fragmentShader:nt.meshphysical_frag},toon:{uniforms:Oi([be.common,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.gradientmap,be.fog,be.lights,{emissive:{value:new yt(0)}}]),vertexShader:nt.meshtoon_vert,fragmentShader:nt.meshtoon_frag},matcap:{uniforms:Oi([be.common,be.bumpmap,be.normalmap,be.displacementmap,be.fog,{matcap:{value:null}}]),vertexShader:nt.meshmatcap_vert,fragmentShader:nt.meshmatcap_frag},points:{uniforms:Oi([be.points,be.fog]),vertexShader:nt.points_vert,fragmentShader:nt.points_frag},dashed:{uniforms:Oi([be.common,be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nt.linedashed_vert,fragmentShader:nt.linedashed_frag},depth:{uniforms:Oi([be.common,be.displacementmap]),vertexShader:nt.depth_vert,fragmentShader:nt.depth_frag},normal:{uniforms:Oi([be.common,be.bumpmap,be.normalmap,be.displacementmap,{opacity:{value:1}}]),vertexShader:nt.meshnormal_vert,fragmentShader:nt.meshnormal_frag},sprite:{uniforms:Oi([be.sprite,be.fog]),vertexShader:nt.sprite_vert,fragmentShader:nt.sprite_frag},background:{uniforms:{uvTransform:{value:new it},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nt.background_vert,fragmentShader:nt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new it}},vertexShader:nt.backgroundCube_vert,fragmentShader:nt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nt.cube_vert,fragmentShader:nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nt.equirect_vert,fragmentShader:nt.equirect_frag},distanceRGBA:{uniforms:Oi([be.common,be.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nt.distanceRGBA_vert,fragmentShader:nt.distanceRGBA_frag},shadow:{uniforms:Oi([be.lights,be.fog,{color:{value:new yt(0)},opacity:{value:1}}]),vertexShader:nt.shadow_vert,fragmentShader:nt.shadow_frag}};jn.physical={uniforms:Oi([jn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new it},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new it},clearcoatNormalScale:{value:new ft(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new it},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new it},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new it},sheen:{value:0},sheenColor:{value:new yt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new it},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new it},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new it},transmissionSamplerSize:{value:new ft},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new it},attenuationDistance:{value:0},attenuationColor:{value:new yt(0)},specularColor:{value:new yt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new it},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new it},anisotropyVector:{value:new ft},anisotropyMap:{value:null},anisotropyMapTransform:{value:new it}}]),vertexShader:nt.meshphysical_vert,fragmentShader:nt.meshphysical_frag};const cu={r:0,b:0,g:0},Gs=new mr,ME=new Kt;function TE(n,e,t,i,r,s,a){const o=new yt(0);let l=s===!0?0:1,c,d,h=null,f=0,u=null;function m(y){let _=y.isScene===!0?y.background:null;return _&&_.isTexture&&(_=(y.backgroundBlurriness>0?t:e).get(_)),_}function p(y){let _=!1;const w=m(y);w===null?v(o,l):w&&w.isColor&&(v(w,1),_=!0);const x=n.xr.getEnvironmentBlendMode();x==="additive"?i.buffers.color.setClear(0,0,0,1,a):x==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil)}function g(y,_){const w=m(_);w&&(w.isCubeTexture||w.mapping===Nc)?(d===void 0&&(d=new Pn(new hl(1,1,1),new Yn({name:"BackgroundCubeMaterial",uniforms:qa(jn.backgroundCube.uniforms),vertexShader:jn.backgroundCube.vertexShader,fragmentShader:jn.backgroundCube.fragmentShader,side:Hi,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(x,S,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Gs.copy(_.backgroundRotation),Gs.x*=-1,Gs.y*=-1,Gs.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Gs.y*=-1,Gs.z*=-1),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(ME.makeRotationFromEuler(Gs)),d.material.toneMapped=bt.getTransfer(w.colorSpace)!==Lt,(h!==w||f!==w.version||u!==n.toneMapping)&&(d.material.needsUpdate=!0,h=w,f=w.version,u=n.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new Pn(new Ka(2,2),new Yn({name:"BackgroundMaterial",uniforms:qa(jn.background.uniforms),vertexShader:jn.background.vertexShader,fragmentShader:jn.background.fragmentShader,side:Br,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=bt.getTransfer(w.colorSpace)!==Lt,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(h!==w||f!==w.version||u!==n.toneMapping)&&(c.material.needsUpdate=!0,h=w,f=w.version,u=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function v(y,_){y.getRGB(cu,O_(n)),i.buffers.color.setClear(cu.r,cu.g,cu.b,_,a)}return{getClearColor:function(){return o},setClearColor:function(y,_=1){o.set(y),l=_,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(o,l)},render:p,addToRenderList:g}}function EE(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,a=!1;function o(b,A,C,P,I){let D=!1;const F=h(P,C,A);s!==F&&(s=F,c(s.object)),D=u(b,P,C,I),D&&m(b,P,C,I),I!==null&&e.update(I,n.ELEMENT_ARRAY_BUFFER),(D||a)&&(a=!1,w(b,A,C,P),I!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(I).buffer))}function l(){return n.createVertexArray()}function c(b){return n.bindVertexArray(b)}function d(b){return n.deleteVertexArray(b)}function h(b,A,C){const P=C.wireframe===!0;let I=i[b.id];I===void 0&&(I={},i[b.id]=I);let D=I[A.id];D===void 0&&(D={},I[A.id]=D);let F=D[P];return F===void 0&&(F=f(l()),D[P]=F),F}function f(b){const A=[],C=[],P=[];for(let I=0;I<t;I++)A[I]=0,C[I]=0,P[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:A,enabledAttributes:C,attributeDivisors:P,object:b,attributes:{},index:null}}function u(b,A,C,P){const I=s.attributes,D=A.attributes;let F=0;const B=C.getAttributes();for(const k in B)if(B[k].location>=0){const O=I[k];let re=D[k];if(re===void 0&&(k==="instanceMatrix"&&b.instanceMatrix&&(re=b.instanceMatrix),k==="instanceColor"&&b.instanceColor&&(re=b.instanceColor)),O===void 0||O.attribute!==re||re&&O.data!==re.data)return!0;F++}return s.attributesNum!==F||s.index!==P}function m(b,A,C,P){const I={},D=A.attributes;let F=0;const B=C.getAttributes();for(const k in B)if(B[k].location>=0){let O=D[k];O===void 0&&(k==="instanceMatrix"&&b.instanceMatrix&&(O=b.instanceMatrix),k==="instanceColor"&&b.instanceColor&&(O=b.instanceColor));const re={};re.attribute=O,O&&O.data&&(re.data=O.data),I[k]=re,F++}s.attributes=I,s.attributesNum=F,s.index=P}function p(){const b=s.newAttributes;for(let A=0,C=b.length;A<C;A++)b[A]=0}function g(b){v(b,0)}function v(b,A){const C=s.newAttributes,P=s.enabledAttributes,I=s.attributeDivisors;C[b]=1,P[b]===0&&(n.enableVertexAttribArray(b),P[b]=1),I[b]!==A&&(n.vertexAttribDivisor(b,A),I[b]=A)}function y(){const b=s.newAttributes,A=s.enabledAttributes;for(let C=0,P=A.length;C<P;C++)A[C]!==b[C]&&(n.disableVertexAttribArray(C),A[C]=0)}function _(b,A,C,P,I,D,F){F===!0?n.vertexAttribIPointer(b,A,C,I,D):n.vertexAttribPointer(b,A,C,P,I,D)}function w(b,A,C,P){p();const I=P.attributes,D=C.getAttributes(),F=A.defaultAttributeValues;for(const B in D){const k=D[B];if(k.location>=0){let K=I[B];if(K===void 0&&(B==="instanceMatrix"&&b.instanceMatrix&&(K=b.instanceMatrix),B==="instanceColor"&&b.instanceColor&&(K=b.instanceColor)),K!==void 0){const O=K.normalized,re=K.itemSize,ae=e.get(K);if(ae===void 0)continue;const Te=ae.buffer,G=ae.type,Y=ae.bytesPerElement,Q=G===n.INT||G===n.UNSIGNED_INT||K.gpuType===Av;if(K.isInterleavedBufferAttribute){const te=K.data,he=te.stride,Ae=K.offset;if(te.isInstancedInterleavedBuffer){for(let V=0;V<k.locationSize;V++)v(k.location+V,te.meshPerAttribute);b.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let V=0;V<k.locationSize;V++)g(k.location+V);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let V=0;V<k.locationSize;V++)_(k.location+V,re/k.locationSize,G,O,he*Y,(Ae+re/k.locationSize*V)*Y,Q)}else{if(K.isInstancedBufferAttribute){for(let te=0;te<k.locationSize;te++)v(k.location+te,K.meshPerAttribute);b.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let te=0;te<k.locationSize;te++)g(k.location+te);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let te=0;te<k.locationSize;te++)_(k.location+te,re/k.locationSize,G,O,re*Y,re/k.locationSize*te*Y,Q)}}else if(F!==void 0){const O=F[B];if(O!==void 0)switch(O.length){case 2:n.vertexAttrib2fv(k.location,O);break;case 3:n.vertexAttrib3fv(k.location,O);break;case 4:n.vertexAttrib4fv(k.location,O);break;default:n.vertexAttrib1fv(k.location,O)}}}}y()}function x(){E();for(const b in i){const A=i[b];for(const C in A){const P=A[C];for(const I in P)d(P[I].object),delete P[I];delete A[C]}delete i[b]}}function S(b){if(i[b.id]===void 0)return;const A=i[b.id];for(const C in A){const P=A[C];for(const I in P)d(P[I].object),delete P[I];delete A[C]}delete i[b.id]}function T(b){for(const A in i){const C=i[A];if(C[b.id]===void 0)continue;const P=C[b.id];for(const I in P)d(P[I].object),delete P[I];delete C[b.id]}}function E(){M(),a=!0,s!==r&&(s=r,c(s.object))}function M(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:E,resetDefaultState:M,dispose:x,releaseStatesOfGeometry:S,releaseStatesOfProgram:T,initAttributes:p,enableAttribute:g,disableUnusedAttributes:y}}function AE(n,e,t){let i;function r(c){i=c}function s(c,d){n.drawArrays(i,c,d),t.update(d,i,1)}function a(c,d,h){h!==0&&(n.drawArraysInstanced(i,c,d,h),t.update(d,i,h))}function o(c,d,h){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let u=0;u<h;u++)this.render(c[u],d[u]);else{f.multiDrawArraysWEBGL(i,c,0,d,0,h);let u=0;for(let m=0;m<h;m++)u+=d[m];t.update(u,i,1)}}function l(c,d,h,f){if(h===0)return;const u=e.get("WEBGL_multi_draw");if(u===null)for(let m=0;m<c.length;m++)a(c[m],d[m],f[m]);else{u.multiDrawArraysInstancedWEBGL(i,c,0,d,0,f,0,h);let m=0;for(let p=0;p<h;p++)m+=d[p];for(let p=0;p<f.length;p++)t.update(m,i,f[p])}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function CE(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const S=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(S){return!(S!==mn&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(S){const T=S===kc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(S!==Hr&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==dr&&!T)}function l(S){if(S==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const h=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),u=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=u>0,x=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:h,maxTextures:f,maxVertexTextures:u,maxTextureSize:m,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:w,maxSamples:x}}function PE(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Vs,o=new it,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const u=h.length!==0||f||i!==0||r;return r=f,i=h.length,u},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=d(h,f,0)},this.setState=function(h,f,u){const m=h.clippingPlanes,p=h.clipIntersection,g=h.clipShadows,v=n.get(h);if(!r||m===null||m.length===0||s&&!g)s?d(null):c();else{const y=s?0:i,_=y*4;let w=v.clippingState||null;l.value=w,w=d(m,f,_,u);for(let x=0;x!==_;++x)w[x]=t[x];v.clippingState=w,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(h,f,u,m){const p=h!==null?h.length:0;let g=null;if(p!==0){if(g=l.value,m!==!0||g===null){const v=u+p*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let _=0,w=u;_!==p;++_,w+=4)a.copy(h[_]).applyMatrix4(y,o),a.normal.toArray(g,w),g[w+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,g}}function RE(n){let e=new WeakMap;function t(a,o){return o===Pf?a.mapping=Aa:o===Rf&&(a.mapping=Ca),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===Pf||o===Rf)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new bM(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class V_ extends N_{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=d*this.view.offsetY,l=o-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Za=4,H_=[.125,.215,.35,.446,.526,.582],Ws=20,lh=new V_,G_=new yt;let ch=null,uh=0,dh=0,fh=!1;const Xs=(1+Math.sqrt(5))/2,Qa=1/Xs,W_=[new J(-Xs,Qa,0),new J(Xs,Qa,0),new J(-Qa,0,Xs),new J(Qa,0,Xs),new J(0,Xs,-Qa),new J(0,Xs,Qa),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)];class X_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){ch=this._renderer.getRenderTarget(),uh=this._renderer.getActiveCubeFace(),dh=this._renderer.getActiveMipmapLevel(),fh=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Y_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=q_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ch,uh,dh),this._renderer.xr.enabled=fh,e.scissorTest=!1,uu(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Aa||e.mapping===Ca?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ch=this._renderer.getRenderTarget(),uh=this._renderer.getActiveCubeFace(),dh=this._renderer.getActiveMipmapLevel(),fh=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ji,minFilter:Ji,generateMipmaps:!1,type:kc,format:mn,colorSpace:Wr,depthBuffer:!1},r=$_(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$_(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=LE(s)),this._blurMaterial=DE(s,e,t)}return r}_compileMaterial(e){const t=new Pn(this._lodPlanes[0],e);this._renderer.compile(t,lh)}_sceneToCubeUV(e,t,i,r){const o=new rn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(G_),d.toneMapping=Vr,d.autoClear=!1;const u=new E_({name:"PMREM.Background",side:Hi,depthWrite:!1,depthTest:!1}),m=new Pn(new hl,u);let p=!1;const g=e.background;g?g.isColor&&(u.color.copy(g),e.background=null,p=!0):(u.color.copy(G_),p=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(o.up.set(0,l[v],0),o.lookAt(c[v],0,0)):y===1?(o.up.set(0,0,l[v]),o.lookAt(0,c[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,c[v]));const _=this._cubeSize;uu(r,y*_,v>2?_:0,_,_),d.setRenderTarget(r),p&&d.render(m,o),d.render(e,o)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Aa||e.mapping===Ca;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Y_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=q_());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Pn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;uu(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,lh)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=W_[(r-s-1)%W_.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Pn(this._lodPlanes[r],c),f=c.uniforms,u=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*u):2*Math.PI/(2*Ws-1),p=s/m,g=isFinite(s)?1+Math.floor(d*p):Ws;g>Ws&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ws}`);const v=[];let y=0;for(let T=0;T<Ws;++T){const E=T/p,M=Math.exp(-E*E/2);v.push(M),T===0?y+=M:T<g&&(y+=2*M)}for(let T=0;T<v.length;T++)v[T]=v[T]/y;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=v,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:_}=this;f.dTheta.value=m,f.mipInt.value=_-i;const w=this._sizeLods[r],x=3*w*(r>_-Za?r-_+Za:0),S=4*(this._cubeSize-w);uu(t,x,S,3*w,2*w),l.setRenderTarget(t),l.render(h,lh)}}function LE(n){const e=[],t=[],i=[];let r=n;const s=n-Za+1+H_.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Za?l=H_[a-n+Za-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),d=-c,h=1+c,f=[d,d,h,d,h,h,d,d,h,h,d,h],u=6,m=6,p=3,g=2,v=1,y=new Float32Array(p*m*u),_=new Float32Array(g*m*u),w=new Float32Array(v*m*u);for(let S=0;S<u;S++){const T=S%3*2/3-1,E=S>2?0:-1,M=[T,E,0,T+2/3,E,0,T+2/3,E+1,0,T,E,0,T+2/3,E+1,0,T,E+1,0];y.set(M,p*m*S),_.set(f,g*m*S);const b=[S,S,S,S,S,S];w.set(b,v*m*S)}const x=new Bs;x.setAttribute("position",new qn(y,p)),x.setAttribute("uv",new qn(_,g)),x.setAttribute("faceIndex",new qn(w,v)),e.push(x),r>Za&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function $_(n,e,t){const i=new Ns(n,e,t);return i.texture.mapping=Nc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function uu(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function DE(n,e,t){const i=new Float32Array(Ws),r=new J(0,1,0);return new Yn({name:"SphericalGaussianBlur",defines:{n:Ws,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:hh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:zr,depthTest:!1,depthWrite:!1})}function q_(){return new Yn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:zr,depthTest:!1,depthWrite:!1})}function Y_(){return new Yn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:zr,depthTest:!1,depthWrite:!1})}function hh(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function IE(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===Pf||l===Rf,d=l===Aa||l===Ca;if(c||d){let h=e.get(o);const f=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new X_(n)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const u=o.image;return c&&u&&u.height>0||d&&u&&r(u)?(t===null&&(t=new X_(n)),h=c?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",s),h.texture):null}}}return o}function r(o){let l=0;const c=6;for(let d=0;d<c;d++)o[d]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function OE(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function NE(n,e,t,i){const r={},s=new WeakMap;function a(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);for(const m in f.morphAttributes){const p=f.morphAttributes[m];for(let g=0,v=p.length;g<v;g++)e.remove(p[g])}f.removeEventListener("dispose",a),delete r[f.id];const u=s.get(f);u&&(e.remove(u),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(h,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const m in f)e.update(f[m],n.ARRAY_BUFFER);const u=h.morphAttributes;for(const m in u){const p=u[m];for(let g=0,v=p.length;g<v;g++)e.update(p[g],n.ARRAY_BUFFER)}}function c(h){const f=[],u=h.index,m=h.attributes.position;let p=0;if(u!==null){const y=u.array;p=u.version;for(let _=0,w=y.length;_<w;_+=3){const x=y[_+0],S=y[_+1],T=y[_+2];f.push(x,S,S,T,T,x)}}else if(m!==void 0){const y=m.array;p=m.version;for(let _=0,w=y.length/3-1;_<w;_+=3){const x=_+0,S=_+1,T=_+2;f.push(x,S,S,T,T,x)}}else return;const g=new(c_(f)?C_:A_)(f,1);g.version=p;const v=s.get(h);v&&e.remove(v),s.set(h,g)}function d(h){const f=s.get(h);if(f){const u=h.index;u!==null&&f.version<u.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:d}}function UE(n,e,t){let i;function r(f){i=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,u){n.drawElements(i,u,s,f*a),t.update(u,i,1)}function c(f,u,m){m!==0&&(n.drawElementsInstanced(i,u,s,f*a,m),t.update(u,i,m))}function d(f,u,m){if(m===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<m;g++)this.render(f[g]/a,u[g]);else{p.multiDrawElementsWEBGL(i,u,0,s,f,0,m);let g=0;for(let v=0;v<m;v++)g+=u[v];t.update(g,i,1)}}function h(f,u,m,p){if(m===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<f.length;v++)c(f[v]/a,u[v],p[v]);else{g.multiDrawElementsInstancedWEBGL(i,u,0,s,f,0,p,0,m);let v=0;for(let y=0;y<m;y++)v+=u[y];for(let y=0;y<p.length;y++)t.update(v,i,p[y])}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=h}function kE(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function FE(n,e,t){const i=new WeakMap,r=new si;function s(a,o,l){const c=a.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=d!==void 0?d.length:0;let f=i.get(o);if(f===void 0||f.count!==h){let M=function(){T.dispose(),i.delete(o),o.removeEventListener("dispose",M)};f!==void 0&&f.texture.dispose();const u=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,p=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],v=o.morphAttributes.normal||[],y=o.morphAttributes.color||[];let _=0;u===!0&&(_=1),m===!0&&(_=2),p===!0&&(_=3);let w=o.attributes.position.count*_,x=1;w>e.maxTextureSize&&(x=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const S=new Float32Array(w*x*4*h),T=new p_(S,w,x,h);T.type=dr,T.needsUpdate=!0;const E=_*4;for(let b=0;b<h;b++){const A=g[b],C=v[b],P=y[b],I=w*x*4*b;for(let D=0;D<A.count;D++){const F=D*E;u===!0&&(r.fromBufferAttribute(A,D),S[I+F+0]=r.x,S[I+F+1]=r.y,S[I+F+2]=r.z,S[I+F+3]=0),m===!0&&(r.fromBufferAttribute(C,D),S[I+F+4]=r.x,S[I+F+5]=r.y,S[I+F+6]=r.z,S[I+F+7]=0),p===!0&&(r.fromBufferAttribute(P,D),S[I+F+8]=r.x,S[I+F+9]=r.y,S[I+F+10]=r.z,S[I+F+11]=P.itemSize===4?r.w:1)}}f={count:h,texture:T,size:new ft(w,x)},i.set(o,f),o.addEventListener("dispose",M)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let u=0;for(let p=0;p<c.length;p++)u+=c[p];const m=o.morphTargetsRelative?1:1-u;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function BE(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,d=l.geometry,h=e.get(l,d);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return h}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}class j_ extends yi{constructor(e,t,i,r,s,a,o,l,c,d){if(d=d!==void 0?d:Ra,d!==Ra&&d!==nl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Ra&&(i=Pa),i===void 0&&d===nl&&(i=il),super(null,r,s,a,o,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Ii,this.minFilter=l!==void 0?l:Ii,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const K_=new yi,Z_=new j_(1,1);Z_.compareFunction=a_;const Q_=new p_,J_=new rM,e0=new F_,t0=[],i0=[],n0=new Float32Array(16),r0=new Float32Array(9),s0=new Float32Array(4);function Ja(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=t0[r];if(s===void 0&&(s=new Float32Array(r),t0[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Zt(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Qt(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function du(n,e){let t=i0[e];t===void 0&&(t=new Int32Array(e),i0[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function zE(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function VE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zt(t,e))return;n.uniform2fv(this.addr,e),Qt(t,e)}}function HE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zt(t,e))return;n.uniform3fv(this.addr,e),Qt(t,e)}}function GE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zt(t,e))return;n.uniform4fv(this.addr,e),Qt(t,e)}}function WE(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zt(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qt(t,e)}else{if(Zt(t,i))return;s0.set(i),n.uniformMatrix2fv(this.addr,!1,s0),Qt(t,i)}}function XE(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zt(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qt(t,e)}else{if(Zt(t,i))return;r0.set(i),n.uniformMatrix3fv(this.addr,!1,r0),Qt(t,i)}}function $E(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zt(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qt(t,e)}else{if(Zt(t,i))return;n0.set(i),n.uniformMatrix4fv(this.addr,!1,n0),Qt(t,i)}}function qE(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function YE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zt(t,e))return;n.uniform2iv(this.addr,e),Qt(t,e)}}function jE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zt(t,e))return;n.uniform3iv(this.addr,e),Qt(t,e)}}function KE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zt(t,e))return;n.uniform4iv(this.addr,e),Qt(t,e)}}function ZE(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function QE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zt(t,e))return;n.uniform2uiv(this.addr,e),Qt(t,e)}}function JE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zt(t,e))return;n.uniform3uiv(this.addr,e),Qt(t,e)}}function e1(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zt(t,e))return;n.uniform4uiv(this.addr,e),Qt(t,e)}}function t1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?Z_:K_;t.setTexture2D(e||s,r)}function i1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||J_,r)}function n1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||e0,r)}function r1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Q_,r)}function s1(n){switch(n){case 5126:return zE;case 35664:return VE;case 35665:return HE;case 35666:return GE;case 35674:return WE;case 35675:return XE;case 35676:return $E;case 5124:case 35670:return qE;case 35667:case 35671:return YE;case 35668:case 35672:return jE;case 35669:case 35673:return KE;case 5125:return ZE;case 36294:return QE;case 36295:return JE;case 36296:return e1;case 35678:case 36198:case 36298:case 36306:case 35682:return t1;case 35679:case 36299:case 36307:return i1;case 35680:case 36300:case 36308:case 36293:return n1;case 36289:case 36303:case 36311:case 36292:return r1}}function a1(n,e){n.uniform1fv(this.addr,e)}function o1(n,e){const t=Ja(e,this.size,2);n.uniform2fv(this.addr,t)}function l1(n,e){const t=Ja(e,this.size,3);n.uniform3fv(this.addr,t)}function c1(n,e){const t=Ja(e,this.size,4);n.uniform4fv(this.addr,t)}function u1(n,e){const t=Ja(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function d1(n,e){const t=Ja(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function f1(n,e){const t=Ja(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function h1(n,e){n.uniform1iv(this.addr,e)}function p1(n,e){n.uniform2iv(this.addr,e)}function m1(n,e){n.uniform3iv(this.addr,e)}function g1(n,e){n.uniform4iv(this.addr,e)}function v1(n,e){n.uniform1uiv(this.addr,e)}function _1(n,e){n.uniform2uiv(this.addr,e)}function y1(n,e){n.uniform3uiv(this.addr,e)}function x1(n,e){n.uniform4uiv(this.addr,e)}function b1(n,e,t){const i=this.cache,r=e.length,s=du(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||K_,s[a])}function w1(n,e,t){const i=this.cache,r=e.length,s=du(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||J_,s[a])}function S1(n,e,t){const i=this.cache,r=e.length,s=du(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||e0,s[a])}function M1(n,e,t){const i=this.cache,r=e.length,s=du(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||Q_,s[a])}function T1(n){switch(n){case 5126:return a1;case 35664:return o1;case 35665:return l1;case 35666:return c1;case 35674:return u1;case 35675:return d1;case 35676:return f1;case 5124:case 35670:return h1;case 35667:case 35671:return p1;case 35668:case 35672:return m1;case 35669:case 35673:return g1;case 5125:return v1;case 36294:return _1;case 36295:return y1;case 36296:return x1;case 35678:case 36198:case 36298:case 36306:case 35682:return b1;case 35679:case 36299:case 36307:return w1;case 35680:case 36300:case 36308:case 36293:return S1;case 36289:case 36303:case 36311:case 36292:return M1}}class E1{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=s1(t.type)}}class A1{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=T1(t.type)}}class C1{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const ph=/(\w+)(\])?(\[|\.)?/g;function a0(n,e){n.seq.push(e),n.map[e.id]=e}function P1(n,e,t){const i=n.name,r=i.length;for(ph.lastIndex=0;;){const s=ph.exec(i),a=ph.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){a0(t,c===void 0?new E1(o,n,e):new A1(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new C1(o),a0(t,h)),t=h}}}class fu{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);P1(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function o0(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const R1=37297;let L1=0;function D1(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function I1(n){const e=bt.getPrimaries(bt.workingColorSpace),t=bt.getPrimaries(n);let i;switch(e===t?i="":e===Vc&&t===zc?i="LinearDisplayP3ToLinearSRGB":e===zc&&t===Vc&&(i="LinearSRGBToLinearDisplayP3"),n){case Wr:case Fc:return[i,"LinearTransferOETF"];case Xn:case Bf:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function l0(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+D1(n.getShaderSource(e),a)}else return r}function O1(n,e){const t=I1(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function N1(n,e){let t;switch(e){case bS:t="Linear";break;case wS:t="Reinhard";break;case SS:t="OptimizedCineon";break;case MS:t="ACESFilmic";break;case ES:t="AgX";break;case AS:t="Neutral";break;case TS:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function U1(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(pl).join(`
`)}function k1(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function F1(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function pl(n){return n!==""}function c0(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function u0(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const B1=/^[ \t]*#include +<([\w\d./]+)>/gm;function mh(n){return n.replace(B1,V1)}const z1=new Map;function V1(n,e){let t=nt[e];if(t===void 0){const i=z1.get(e);if(i!==void 0)t=nt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return mh(t)}const H1=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function d0(n){return n.replace(H1,G1)}function G1(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function f0(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function W1(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===xv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===qw?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ur&&(e="SHADOWMAP_TYPE_VSM"),e}function X1(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Aa:case Ca:e="ENVMAP_TYPE_CUBE";break;case Nc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function $1(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ca:e="ENVMAP_MODE_REFRACTION";break}return e}function q1(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Mv:e="ENVMAP_BLENDING_MULTIPLY";break;case yS:e="ENVMAP_BLENDING_MIX";break;case xS:e="ENVMAP_BLENDING_ADD";break}return e}function Y1(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function j1(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=W1(t),c=X1(t),d=$1(t),h=q1(t),f=Y1(t),u=U1(t),m=k1(s),p=r.createProgram();let g,v,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(pl).join(`
`),g.length>0&&(g+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(pl).join(`
`),v.length>0&&(v+=`
`)):(g=[f0(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pl).join(`
`),v=[f0(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vr?"#define TONE_MAPPING":"",t.toneMapping!==Vr?nt.tonemapping_pars_fragment:"",t.toneMapping!==Vr?N1("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nt.colorspace_pars_fragment,O1("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(pl).join(`
`)),a=mh(a),a=c0(a,t),a=u0(a,t),o=mh(o),o=c0(o,t),o=u0(o,t),a=d0(a),o=d0(o),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=[u,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",t.glslVersion===l_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===l_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const _=y+g+a,w=y+v+o,x=o0(r,r.VERTEX_SHADER,_),S=o0(r,r.FRAGMENT_SHADER,w);r.attachShader(p,x),r.attachShader(p,S),t.index0AttributeName!==void 0?r.bindAttribLocation(p,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(p,0,"position"),r.linkProgram(p);function T(A){if(n.debug.checkShaderErrors){const C=r.getProgramInfoLog(p).trim(),P=r.getShaderInfoLog(x).trim(),I=r.getShaderInfoLog(S).trim();let D=!0,F=!0;if(r.getProgramParameter(p,r.LINK_STATUS)===!1)if(D=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,p,x,S);else{const B=l0(r,x,"vertex"),k=l0(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(p,r.VALIDATE_STATUS)+`

Material Name: `+A.name+`
Material Type: `+A.type+`

Program Info Log: `+C+`
`+B+`
`+k)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(P===""||I==="")&&(F=!1);F&&(A.diagnostics={runnable:D,programLog:C,vertexShader:{log:P,prefix:g},fragmentShader:{log:I,prefix:v}})}r.deleteShader(x),r.deleteShader(S),E=new fu(r,p),M=F1(r,p)}let E;this.getUniforms=function(){return E===void 0&&T(this),E};let M;this.getAttributes=function(){return M===void 0&&T(this),M};let b=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return b===!1&&(b=r.getProgramParameter(p,R1)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(p),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=L1++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=x,this.fragmentShader=S,this}let K1=0;class Z1{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Q1(e),t.set(e,i)),i}}class Q1{constructor(e){this.id=K1++,this.code=e,this.usedTimes=0}}function J1(n,e,t,i,r,s,a){const o=new __,l=new Z1,c=new Set,d=[],h=r.logarithmicDepthBuffer,f=r.vertexTextures;let u=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(M){return c.add(M),M===0?"uv":`uv${M}`}function g(M,b,A,C,P){const I=C.fog,D=P.geometry,F=M.isMeshStandardMaterial?C.environment:null,B=(M.isMeshStandardMaterial?t:e).get(M.envMap||F),k=B&&B.mapping===Nc?B.image.height:null,K=m[M.type];M.precision!==null&&(u=r.getMaxPrecision(M.precision),u!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",u,"instead."));const O=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,re=O!==void 0?O.length:0;let ae=0;D.morphAttributes.position!==void 0&&(ae=1),D.morphAttributes.normal!==void 0&&(ae=2),D.morphAttributes.color!==void 0&&(ae=3);let Te,G,Y,Q;if(K){const ut=jn[K];Te=ut.vertexShader,G=ut.fragmentShader}else Te=M.vertexShader,G=M.fragmentShader,l.update(M),Y=l.getVertexShaderID(M),Q=l.getFragmentShaderID(M);const te=n.getRenderTarget(),he=P.isInstancedMesh===!0,Ae=P.isBatchedMesh===!0,V=!!M.map,ze=!!M.matcap,Re=!!B,ge=!!M.aoMap,fe=!!M.lightMap,Ie=!!M.bumpMap,Ne=!!M.normalMap,X=!!M.displacementMap,Ye=!!M.emissiveMap,U=!!M.metalnessMap,R=!!M.roughnessMap,z=M.anisotropy>0,ie=M.clearcoat>0,oe=M.dispersion>0,le=M.iridescence>0,we=M.sheen>0,pe=M.transmission>0,ce=z&&!!M.anisotropyMap,He=ie&&!!M.clearcoatMap,ue=ie&&!!M.clearcoatNormalMap,Oe=ie&&!!M.clearcoatRoughnessMap,rt=le&&!!M.iridescenceMap,Ce=le&&!!M.iridescenceThicknessMap,Pe=we&&!!M.sheenColorMap,Xe=we&&!!M.sheenRoughnessMap,Je=!!M.specularMap,St=!!M.specularColorMap,$e=!!M.specularIntensityMap,H=pe&&!!M.transmissionMap,ee=pe&&!!M.thicknessMap,ne=!!M.gradientMap,me=!!M.alphaMap,ve=M.alphaTest>0,Qe=!!M.alphaHash,pt=!!M.extensions;let xt=Vr;M.toneMapped&&(te===null||te.isXRRenderTarget===!0)&&(xt=n.toneMapping);const At={shaderID:K,shaderType:M.type,shaderName:M.name,vertexShader:Te,fragmentShader:G,defines:M.defines,customVertexShaderID:Y,customFragmentShaderID:Q,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:u,batching:Ae,instancing:he,instancingColor:he&&P.instanceColor!==null,instancingMorph:he&&P.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:te===null?n.outputColorSpace:te.isXRRenderTarget===!0?te.texture.colorSpace:Wr,alphaToCoverage:!!M.alphaToCoverage,map:V,matcap:ze,envMap:Re,envMapMode:Re&&B.mapping,envMapCubeUVHeight:k,aoMap:ge,lightMap:fe,bumpMap:Ie,normalMap:Ne,displacementMap:f&&X,emissiveMap:Ye,normalMapObjectSpace:Ne&&M.normalMapType===HS,normalMapTangentSpace:Ne&&M.normalMapType===VS,metalnessMap:U,roughnessMap:R,anisotropy:z,anisotropyMap:ce,clearcoat:ie,clearcoatMap:He,clearcoatNormalMap:ue,clearcoatRoughnessMap:Oe,dispersion:oe,iridescence:le,iridescenceMap:rt,iridescenceThicknessMap:Ce,sheen:we,sheenColorMap:Pe,sheenRoughnessMap:Xe,specularMap:Je,specularColorMap:St,specularIntensityMap:$e,transmission:pe,transmissionMap:H,thicknessMap:ee,gradientMap:ne,opaque:M.transparent===!1&&M.blending===Ea&&M.alphaToCoverage===!1,alphaMap:me,alphaTest:ve,alphaHash:Qe,combine:M.combine,mapUv:V&&p(M.map.channel),aoMapUv:ge&&p(M.aoMap.channel),lightMapUv:fe&&p(M.lightMap.channel),bumpMapUv:Ie&&p(M.bumpMap.channel),normalMapUv:Ne&&p(M.normalMap.channel),displacementMapUv:X&&p(M.displacementMap.channel),emissiveMapUv:Ye&&p(M.emissiveMap.channel),metalnessMapUv:U&&p(M.metalnessMap.channel),roughnessMapUv:R&&p(M.roughnessMap.channel),anisotropyMapUv:ce&&p(M.anisotropyMap.channel),clearcoatMapUv:He&&p(M.clearcoatMap.channel),clearcoatNormalMapUv:ue&&p(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&p(M.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&p(M.iridescenceMap.channel),iridescenceThicknessMapUv:Ce&&p(M.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&p(M.sheenColorMap.channel),sheenRoughnessMapUv:Xe&&p(M.sheenRoughnessMap.channel),specularMapUv:Je&&p(M.specularMap.channel),specularColorMapUv:St&&p(M.specularColorMap.channel),specularIntensityMapUv:$e&&p(M.specularIntensityMap.channel),transmissionMapUv:H&&p(M.transmissionMap.channel),thicknessMapUv:ee&&p(M.thicknessMap.channel),alphaMapUv:me&&p(M.alphaMap.channel),vertexTangents:!!D.attributes.tangent&&(Ne||z),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,pointsUvs:P.isPoints===!0&&!!D.attributes.uv&&(V||me),fog:!!I,useFog:M.fog===!0,fogExp2:!!I&&I.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:P.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:re,morphTextureStride:ae,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&A.length>0,shadowMapType:n.shadowMap.type,toneMapping:xt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:V&&M.map.isVideoTexture===!0&&bt.getTransfer(M.map.colorSpace)===Lt,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Wn,flipSided:M.side===Hi,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:pt&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:pt&&M.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return At.vertexUv1s=c.has(1),At.vertexUv2s=c.has(2),At.vertexUv3s=c.has(3),c.clear(),At}function v(M){const b=[];if(M.shaderID?b.push(M.shaderID):(b.push(M.customVertexShaderID),b.push(M.customFragmentShaderID)),M.defines!==void 0)for(const A in M.defines)b.push(A),b.push(M.defines[A]);return M.isRawShaderMaterial===!1&&(y(b,M),_(b,M),b.push(n.outputColorSpace)),b.push(M.customProgramCacheKey),b.join()}function y(M,b){M.push(b.precision),M.push(b.outputColorSpace),M.push(b.envMapMode),M.push(b.envMapCubeUVHeight),M.push(b.mapUv),M.push(b.alphaMapUv),M.push(b.lightMapUv),M.push(b.aoMapUv),M.push(b.bumpMapUv),M.push(b.normalMapUv),M.push(b.displacementMapUv),M.push(b.emissiveMapUv),M.push(b.metalnessMapUv),M.push(b.roughnessMapUv),M.push(b.anisotropyMapUv),M.push(b.clearcoatMapUv),M.push(b.clearcoatNormalMapUv),M.push(b.clearcoatRoughnessMapUv),M.push(b.iridescenceMapUv),M.push(b.iridescenceThicknessMapUv),M.push(b.sheenColorMapUv),M.push(b.sheenRoughnessMapUv),M.push(b.specularMapUv),M.push(b.specularColorMapUv),M.push(b.specularIntensityMapUv),M.push(b.transmissionMapUv),M.push(b.thicknessMapUv),M.push(b.combine),M.push(b.fogExp2),M.push(b.sizeAttenuation),M.push(b.morphTargetsCount),M.push(b.morphAttributeCount),M.push(b.numDirLights),M.push(b.numPointLights),M.push(b.numSpotLights),M.push(b.numSpotLightMaps),M.push(b.numHemiLights),M.push(b.numRectAreaLights),M.push(b.numDirLightShadows),M.push(b.numPointLightShadows),M.push(b.numSpotLightShadows),M.push(b.numSpotLightShadowsWithMaps),M.push(b.numLightProbes),M.push(b.shadowMapType),M.push(b.toneMapping),M.push(b.numClippingPlanes),M.push(b.numClipIntersection),M.push(b.depthPacking)}function _(M,b){o.disableAll(),b.supportsVertexTextures&&o.enable(0),b.instancing&&o.enable(1),b.instancingColor&&o.enable(2),b.instancingMorph&&o.enable(3),b.matcap&&o.enable(4),b.envMap&&o.enable(5),b.normalMapObjectSpace&&o.enable(6),b.normalMapTangentSpace&&o.enable(7),b.clearcoat&&o.enable(8),b.iridescence&&o.enable(9),b.alphaTest&&o.enable(10),b.vertexColors&&o.enable(11),b.vertexAlphas&&o.enable(12),b.vertexUv1s&&o.enable(13),b.vertexUv2s&&o.enable(14),b.vertexUv3s&&o.enable(15),b.vertexTangents&&o.enable(16),b.anisotropy&&o.enable(17),b.alphaHash&&o.enable(18),b.batching&&o.enable(19),b.dispersion&&o.enable(20),M.push(o.mask),o.disableAll(),b.fog&&o.enable(0),b.useFog&&o.enable(1),b.flatShading&&o.enable(2),b.logarithmicDepthBuffer&&o.enable(3),b.skinning&&o.enable(4),b.morphTargets&&o.enable(5),b.morphNormals&&o.enable(6),b.morphColors&&o.enable(7),b.premultipliedAlpha&&o.enable(8),b.shadowMapEnabled&&o.enable(9),b.useLegacyLights&&o.enable(10),b.doubleSided&&o.enable(11),b.flipSided&&o.enable(12),b.useDepthPacking&&o.enable(13),b.dithering&&o.enable(14),b.transmission&&o.enable(15),b.sheen&&o.enable(16),b.opaque&&o.enable(17),b.pointsUvs&&o.enable(18),b.decodeVideoTexture&&o.enable(19),b.alphaToCoverage&&o.enable(20),M.push(o.mask)}function w(M){const b=m[M.type];let A;if(b){const C=jn[b];A=vM.clone(C.uniforms)}else A=M.uniforms;return A}function x(M,b){let A;for(let C=0,P=d.length;C<P;C++){const I=d[C];if(I.cacheKey===b){A=I,++A.usedTimes;break}}return A===void 0&&(A=new j1(n,b,M,s),d.push(A)),A}function S(M){if(--M.usedTimes===0){const b=d.indexOf(M);d[b]=d[d.length-1],d.pop(),M.destroy()}}function T(M){l.remove(M)}function E(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:w,acquireProgram:x,releaseProgram:S,releaseShaderCache:T,programs:d,dispose:E}}function eA(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function tA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function h0(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function p0(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(h,f,u,m,p,g){let v=n[e];return v===void 0?(v={id:h.id,object:h,geometry:f,material:u,groupOrder:m,renderOrder:h.renderOrder,z:p,group:g},n[e]=v):(v.id=h.id,v.object=h,v.geometry=f,v.material=u,v.groupOrder=m,v.renderOrder=h.renderOrder,v.z=p,v.group=g),e++,v}function o(h,f,u,m,p,g){const v=a(h,f,u,m,p,g);u.transmission>0?i.push(v):u.transparent===!0?r.push(v):t.push(v)}function l(h,f,u,m,p,g){const v=a(h,f,u,m,p,g);u.transmission>0?i.unshift(v):u.transparent===!0?r.unshift(v):t.unshift(v)}function c(h,f){t.length>1&&t.sort(h||tA),i.length>1&&i.sort(f||h0),r.length>1&&r.sort(f||h0)}function d(){for(let h=e,f=n.length;h<f;h++){const u=n[h];if(u.id===null)break;u.id=null,u.object=null,u.geometry=null,u.material=null,u.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:d,sort:c}}function iA(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new p0,n.set(i,[a])):r>=s.length?(a=new p0,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function nA(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new yt};break;case"SpotLight":t={position:new J,direction:new J,color:new yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new yt,groundColor:new yt};break;case"RectAreaLight":t={color:new yt,position:new J,halfWidth:new J,halfHeight:new J};break}return n[e.id]=t,t}}}function rA(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let sA=0;function aA(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function oA(n){const e=new nA,t=rA(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new J);const r=new J,s=new Kt,a=new Kt;function o(c,d){let h=0,f=0,u=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let m=0,p=0,g=0,v=0,y=0,_=0,w=0,x=0,S=0,T=0,E=0;c.sort(aA);const M=d===!0?Math.PI:1;for(let A=0,C=c.length;A<C;A++){const P=c[A],I=P.color,D=P.intensity,F=P.distance,B=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)h+=I.r*D*M,f+=I.g*D*M,u+=I.b*D*M;else if(P.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(P.sh.coefficients[k],D);E++}else if(P.isDirectionalLight){const k=e.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity*M),P.castShadow){const K=P.shadow,O=t.get(P);O.shadowBias=K.bias,O.shadowNormalBias=K.normalBias,O.shadowRadius=K.radius,O.shadowMapSize=K.mapSize,i.directionalShadow[m]=O,i.directionalShadowMap[m]=B,i.directionalShadowMatrix[m]=P.shadow.matrix,_++}i.directional[m]=k,m++}else if(P.isSpotLight){const k=e.get(P);k.position.setFromMatrixPosition(P.matrixWorld),k.color.copy(I).multiplyScalar(D*M),k.distance=F,k.coneCos=Math.cos(P.angle),k.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),k.decay=P.decay,i.spot[g]=k;const K=P.shadow;if(P.map&&(i.spotLightMap[S]=P.map,S++,K.updateMatrices(P),P.castShadow&&T++),i.spotLightMatrix[g]=K.matrix,P.castShadow){const O=t.get(P);O.shadowBias=K.bias,O.shadowNormalBias=K.normalBias,O.shadowRadius=K.radius,O.shadowMapSize=K.mapSize,i.spotShadow[g]=O,i.spotShadowMap[g]=B,x++}g++}else if(P.isRectAreaLight){const k=e.get(P);k.color.copy(I).multiplyScalar(D),k.halfWidth.set(P.width*.5,0,0),k.halfHeight.set(0,P.height*.5,0),i.rectArea[v]=k,v++}else if(P.isPointLight){const k=e.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity*M),k.distance=P.distance,k.decay=P.decay,P.castShadow){const K=P.shadow,O=t.get(P);O.shadowBias=K.bias,O.shadowNormalBias=K.normalBias,O.shadowRadius=K.radius,O.shadowMapSize=K.mapSize,O.shadowCameraNear=K.camera.near,O.shadowCameraFar=K.camera.far,i.pointShadow[p]=O,i.pointShadowMap[p]=B,i.pointShadowMatrix[p]=P.shadow.matrix,w++}i.point[p]=k,p++}else if(P.isHemisphereLight){const k=e.get(P);k.skyColor.copy(P.color).multiplyScalar(D*M),k.groundColor.copy(P.groundColor).multiplyScalar(D*M),i.hemi[y]=k,y++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=be.LTC_FLOAT_1,i.rectAreaLTC2=be.LTC_FLOAT_2):(i.rectAreaLTC1=be.LTC_HALF_1,i.rectAreaLTC2=be.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=u;const b=i.hash;(b.directionalLength!==m||b.pointLength!==p||b.spotLength!==g||b.rectAreaLength!==v||b.hemiLength!==y||b.numDirectionalShadows!==_||b.numPointShadows!==w||b.numSpotShadows!==x||b.numSpotMaps!==S||b.numLightProbes!==E)&&(i.directional.length=m,i.spot.length=g,i.rectArea.length=v,i.point.length=p,i.hemi.length=y,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=x+S-T,i.spotLightMap.length=S,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=E,b.directionalLength=m,b.pointLength=p,b.spotLength=g,b.rectAreaLength=v,b.hemiLength=y,b.numDirectionalShadows=_,b.numPointShadows=w,b.numSpotShadows=x,b.numSpotMaps=S,b.numLightProbes=E,i.version=sA++)}function l(c,d){let h=0,f=0,u=0,m=0,p=0;const g=d.matrixWorldInverse;for(let v=0,y=c.length;v<y;v++){const _=c[v];if(_.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(g),h++}else if(_.isSpotLight){const w=i.spot[u];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(g),w.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(g),u++}else if(_.isRectAreaLight){const w=i.rectArea[m];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(g),a.identity(),s.copy(_.matrixWorld),s.premultiply(g),a.extractRotation(s),w.halfWidth.set(_.width*.5,0,0),w.halfHeight.set(0,_.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),m++}else if(_.isPointLight){const w=i.point[f];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(g),f++}else if(_.isHemisphereLight){const w=i.hemi[p];w.direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(g),p++}}}return{setup:o,setupView:l,state:i}}function m0(n){const e=new oA(n),t=[],i=[];function r(d){c.camera=d,t.length=0,i.length=0}function s(d){t.push(d)}function a(d){i.push(d)}function o(d){e.setup(t,d)}function l(d){e.setupView(t,d)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function lA(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new m0(n),e.set(r,[o])):s>=a.length?(o=new m0(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}class cA extends Qc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BS,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uA extends Qc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const dA=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fA=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hA(n,e,t){let i=new B_;const r=new ft,s=new ft,a=new si,o=new cA({depthPacking:zS}),l=new uA,c={},d=t.maxTextureSize,h={[Br]:Hi,[Hi]:Br,[Wn]:Wn},f=new Yn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ft},radius:{value:4}},vertexShader:dA,fragmentShader:fA}),u=f.clone();u.defines.HORIZONTAL_PASS=1;const m=new Bs;m.setAttribute("position",new qn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Pn(m,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xv;let v=this.type;this.render=function(S,T,E){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||S.length===0)return;const M=n.getRenderTarget(),b=n.getActiveCubeFace(),A=n.getActiveMipmapLevel(),C=n.state;C.setBlending(zr),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);const P=v!==ur&&this.type===ur,I=v===ur&&this.type!==ur;for(let D=0,F=S.length;D<F;D++){const B=S[D],k=B.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;r.copy(k.mapSize);const K=k.getFrameExtents();if(r.multiply(K),s.copy(k.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/K.x),r.x=s.x*K.x,k.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/K.y),r.y=s.y*K.y,k.mapSize.y=s.y)),k.map===null||P===!0||I===!0){const re=this.type!==ur?{minFilter:Ii,magFilter:Ii}:{};k.map!==null&&k.map.dispose(),k.map=new Ns(r.x,r.y,re),k.map.texture.name=B.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const O=k.getViewportCount();for(let re=0;re<O;re++){const ae=k.getViewport(re);a.set(s.x*ae.x,s.y*ae.y,s.x*ae.z,s.y*ae.w),C.viewport(a),k.updateMatrices(B,re),i=k.getFrustum(),w(T,E,k.camera,B,this.type)}k.isPointLightShadow!==!0&&this.type===ur&&y(k,E),k.needsUpdate=!1}v=this.type,g.needsUpdate=!1,n.setRenderTarget(M,b,A)};function y(S,T){const E=e.update(p);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,u.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,u.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Ns(r.x,r.y)),f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(T,null,E,f,p,null),u.uniforms.shadow_pass.value=S.mapPass.texture,u.uniforms.resolution.value=S.mapSize,u.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(T,null,E,u,p,null)}function _(S,T,E,M){let b=null;const A=E.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(A!==void 0)b=A;else if(b=E.isPointLight===!0?l:o,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const C=b.uuid,P=T.uuid;let I=c[C];I===void 0&&(I={},c[C]=I);let D=I[P];D===void 0&&(D=b.clone(),I[P]=D,T.addEventListener("dispose",x)),b=D}if(b.visible=T.visible,b.wireframe=T.wireframe,M===ur?b.side=T.shadowSide!==null?T.shadowSide:T.side:b.side=T.shadowSide!==null?T.shadowSide:h[T.side],b.alphaMap=T.alphaMap,b.alphaTest=T.alphaTest,b.map=T.map,b.clipShadows=T.clipShadows,b.clippingPlanes=T.clippingPlanes,b.clipIntersection=T.clipIntersection,b.displacementMap=T.displacementMap,b.displacementScale=T.displacementScale,b.displacementBias=T.displacementBias,b.wireframeLinewidth=T.wireframeLinewidth,b.linewidth=T.linewidth,E.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const C=n.properties.get(b);C.light=E}return b}function w(S,T,E,M,b){if(S.visible===!1)return;if(S.layers.test(T.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&b===ur)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,S.matrixWorld);const P=e.update(S),I=S.material;if(Array.isArray(I)){const D=P.groups;for(let F=0,B=D.length;F<B;F++){const k=D[F],K=I[k.materialIndex];if(K&&K.visible){const O=_(S,K,M,b);S.onBeforeShadow(n,S,T,E,P,O,k),n.renderBufferDirect(E,null,P,O,S,k),S.onAfterShadow(n,S,T,E,P,O,k)}}}else if(I.visible){const D=_(S,I,M,b);S.onBeforeShadow(n,S,T,E,P,D,null),n.renderBufferDirect(E,null,P,D,S,null),S.onAfterShadow(n,S,T,E,P,D,null)}}const C=S.children;for(let P=0,I=C.length;P<I;P++)w(C[P],T,E,M,b)}function x(S){S.target.removeEventListener("dispose",x);for(const E in c){const M=c[E],b=S.target.uuid;b in M&&(M[b].dispose(),delete M[b])}}}function pA(n){function e(){let H=!1;const ee=new si;let ne=null;const me=new si(0,0,0,0);return{setMask:function(ve){ne!==ve&&!H&&(n.colorMask(ve,ve,ve,ve),ne=ve)},setLocked:function(ve){H=ve},setClear:function(ve,Qe,pt,xt,At){At===!0&&(ve*=xt,Qe*=xt,pt*=xt),ee.set(ve,Qe,pt,xt),me.equals(ee)===!1&&(n.clearColor(ve,Qe,pt,xt),me.copy(ee))},reset:function(){H=!1,ne=null,me.set(-1,0,0,0)}}}function t(){let H=!1,ee=null,ne=null,me=null;return{setTest:function(ve){ve?Q(n.DEPTH_TEST):te(n.DEPTH_TEST)},setMask:function(ve){ee!==ve&&!H&&(n.depthMask(ve),ee=ve)},setFunc:function(ve){if(ne!==ve){switch(ve){case fS:n.depthFunc(n.NEVER);break;case hS:n.depthFunc(n.ALWAYS);break;case pS:n.depthFunc(n.LESS);break;case Oc:n.depthFunc(n.LEQUAL);break;case mS:n.depthFunc(n.EQUAL);break;case gS:n.depthFunc(n.GEQUAL);break;case vS:n.depthFunc(n.GREATER);break;case _S:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ne=ve}},setLocked:function(ve){H=ve},setClear:function(ve){me!==ve&&(n.clearDepth(ve),me=ve)},reset:function(){H=!1,ee=null,ne=null,me=null}}}function i(){let H=!1,ee=null,ne=null,me=null,ve=null,Qe=null,pt=null,xt=null,At=null;return{setTest:function(ut){H||(ut?Q(n.STENCIL_TEST):te(n.STENCIL_TEST))},setMask:function(ut){ee!==ut&&!H&&(n.stencilMask(ut),ee=ut)},setFunc:function(ut,Ve,De){(ne!==ut||me!==Ve||ve!==De)&&(n.stencilFunc(ut,Ve,De),ne=ut,me=Ve,ve=De)},setOp:function(ut,Ve,De){(Qe!==ut||pt!==Ve||xt!==De)&&(n.stencilOp(ut,Ve,De),Qe=ut,pt=Ve,xt=De)},setLocked:function(ut){H=ut},setClear:function(ut){At!==ut&&(n.clearStencil(ut),At=ut)},reset:function(){H=!1,ee=null,ne=null,me=null,ve=null,Qe=null,pt=null,xt=null,At=null}}}const r=new e,s=new t,a=new i,o=new WeakMap,l=new WeakMap;let c={},d={},h=new WeakMap,f=[],u=null,m=!1,p=null,g=null,v=null,y=null,_=null,w=null,x=null,S=new yt(0,0,0),T=0,E=!1,M=null,b=null,A=null,C=null,P=null;const I=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,F=0;const B=n.getParameter(n.VERSION);B.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(B)[1]),D=F>=1):B.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),D=F>=2);let k=null,K={};const O=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),ae=new si().fromArray(O),Te=new si().fromArray(re);function G(H,ee,ne,me){const ve=new Uint8Array(4),Qe=n.createTexture();n.bindTexture(H,Qe),n.texParameteri(H,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(H,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let pt=0;pt<ne;pt++)H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY?n.texImage3D(ee,0,n.RGBA,1,1,me,0,n.RGBA,n.UNSIGNED_BYTE,ve):n.texImage2D(ee+pt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ve);return Qe}const Y={};Y[n.TEXTURE_2D]=G(n.TEXTURE_2D,n.TEXTURE_2D,1),Y[n.TEXTURE_CUBE_MAP]=G(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Y[n.TEXTURE_2D_ARRAY]=G(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Y[n.TEXTURE_3D]=G(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),Q(n.DEPTH_TEST),s.setFunc(Oc),Ie(!1),Ne(yv),Q(n.CULL_FACE),ge(zr);function Q(H){c[H]!==!0&&(n.enable(H),c[H]=!0)}function te(H){c[H]!==!1&&(n.disable(H),c[H]=!1)}function he(H,ee){return d[H]!==ee?(n.bindFramebuffer(H,ee),d[H]=ee,H===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ee),H===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ee),!0):!1}function Ae(H,ee){let ne=f,me=!1;if(H){ne=h.get(ee),ne===void 0&&(ne=[],h.set(ee,ne));const ve=H.textures;if(ne.length!==ve.length||ne[0]!==n.COLOR_ATTACHMENT0){for(let Qe=0,pt=ve.length;Qe<pt;Qe++)ne[Qe]=n.COLOR_ATTACHMENT0+Qe;ne.length=ve.length,me=!0}}else ne[0]!==n.BACK&&(ne[0]=n.BACK,me=!0);me&&n.drawBuffers(ne)}function V(H){return u!==H?(n.useProgram(H),u=H,!0):!1}const ze={[Ds]:n.FUNC_ADD,[jw]:n.FUNC_SUBTRACT,[Kw]:n.FUNC_REVERSE_SUBTRACT};ze[Zw]=n.MIN,ze[Qw]=n.MAX;const Re={[Jw]:n.ZERO,[eS]:n.ONE,[tS]:n.SRC_COLOR,[Af]:n.SRC_ALPHA,[oS]:n.SRC_ALPHA_SATURATE,[sS]:n.DST_COLOR,[nS]:n.DST_ALPHA,[iS]:n.ONE_MINUS_SRC_COLOR,[Cf]:n.ONE_MINUS_SRC_ALPHA,[aS]:n.ONE_MINUS_DST_COLOR,[rS]:n.ONE_MINUS_DST_ALPHA,[lS]:n.CONSTANT_COLOR,[cS]:n.ONE_MINUS_CONSTANT_COLOR,[uS]:n.CONSTANT_ALPHA,[dS]:n.ONE_MINUS_CONSTANT_ALPHA};function ge(H,ee,ne,me,ve,Qe,pt,xt,At,ut){if(H===zr){m===!0&&(te(n.BLEND),m=!1);return}if(m===!1&&(Q(n.BLEND),m=!0),H!==Yw){if(H!==p||ut!==E){if((g!==Ds||_!==Ds)&&(n.blendEquation(n.FUNC_ADD),g=Ds,_=Ds),ut)switch(H){case Ea:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bv:n.blendFunc(n.ONE,n.ONE);break;case wv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Sv:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case Ea:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bv:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case wv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Sv:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}v=null,y=null,w=null,x=null,S.set(0,0,0),T=0,p=H,E=ut}return}ve=ve||ee,Qe=Qe||ne,pt=pt||me,(ee!==g||ve!==_)&&(n.blendEquationSeparate(ze[ee],ze[ve]),g=ee,_=ve),(ne!==v||me!==y||Qe!==w||pt!==x)&&(n.blendFuncSeparate(Re[ne],Re[me],Re[Qe],Re[pt]),v=ne,y=me,w=Qe,x=pt),(xt.equals(S)===!1||At!==T)&&(n.blendColor(xt.r,xt.g,xt.b,At),S.copy(xt),T=At),p=H,E=!1}function fe(H,ee){H.side===Wn?te(n.CULL_FACE):Q(n.CULL_FACE);let ne=H.side===Hi;ee&&(ne=!ne),Ie(ne),H.blending===Ea&&H.transparent===!1?ge(zr):ge(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.blendColor,H.blendAlpha,H.premultipliedAlpha),s.setFunc(H.depthFunc),s.setTest(H.depthTest),s.setMask(H.depthWrite),r.setMask(H.colorWrite);const me=H.stencilWrite;a.setTest(me),me&&(a.setMask(H.stencilWriteMask),a.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),a.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),Ye(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),H.alphaToCoverage===!0?Q(n.SAMPLE_ALPHA_TO_COVERAGE):te(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ie(H){M!==H&&(H?n.frontFace(n.CW):n.frontFace(n.CCW),M=H)}function Ne(H){H!==Xw?(Q(n.CULL_FACE),H!==b&&(H===yv?n.cullFace(n.BACK):H===$w?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):te(n.CULL_FACE),b=H}function X(H){H!==A&&(D&&n.lineWidth(H),A=H)}function Ye(H,ee,ne){H?(Q(n.POLYGON_OFFSET_FILL),(C!==ee||P!==ne)&&(n.polygonOffset(ee,ne),C=ee,P=ne)):te(n.POLYGON_OFFSET_FILL)}function U(H){H?Q(n.SCISSOR_TEST):te(n.SCISSOR_TEST)}function R(H){H===void 0&&(H=n.TEXTURE0+I-1),k!==H&&(n.activeTexture(H),k=H)}function z(H,ee,ne){ne===void 0&&(k===null?ne=n.TEXTURE0+I-1:ne=k);let me=K[ne];me===void 0&&(me={type:void 0,texture:void 0},K[ne]=me),(me.type!==H||me.texture!==ee)&&(k!==ne&&(n.activeTexture(ne),k=ne),n.bindTexture(H,ee||Y[H]),me.type=H,me.texture=ee)}function ie(){const H=K[k];H!==void 0&&H.type!==void 0&&(n.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function we(){try{n.texSubImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function pe(){try{n.texSubImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ce(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function He(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ue(){try{n.texStorage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Oe(){try{n.texStorage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function rt(){try{n.texImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ce(){try{n.texImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Pe(H){ae.equals(H)===!1&&(n.scissor(H.x,H.y,H.z,H.w),ae.copy(H))}function Xe(H){Te.equals(H)===!1&&(n.viewport(H.x,H.y,H.z,H.w),Te.copy(H))}function Je(H,ee){let ne=l.get(ee);ne===void 0&&(ne=new WeakMap,l.set(ee,ne));let me=ne.get(H);me===void 0&&(me=n.getUniformBlockIndex(ee,H.name),ne.set(H,me))}function St(H,ee){const me=l.get(ee).get(H);o.get(ee)!==me&&(n.uniformBlockBinding(ee,me,H.__bindingPointIndex),o.set(ee,me))}function $e(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},k=null,K={},d={},h=new WeakMap,f=[],u=null,m=!1,p=null,g=null,v=null,y=null,_=null,w=null,x=null,S=new yt(0,0,0),T=0,E=!1,M=null,b=null,A=null,C=null,P=null,ae.set(0,0,n.canvas.width,n.canvas.height),Te.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),a.reset()}return{buffers:{color:r,depth:s,stencil:a},enable:Q,disable:te,bindFramebuffer:he,drawBuffers:Ae,useProgram:V,setBlending:ge,setMaterial:fe,setFlipSided:Ie,setCullFace:Ne,setLineWidth:X,setPolygonOffset:Ye,setScissorTest:U,activeTexture:R,bindTexture:z,unbindTexture:ie,compressedTexImage2D:oe,compressedTexImage3D:le,texImage2D:rt,texImage3D:Ce,updateUBOMapping:Je,uniformBlockBinding:St,texStorage2D:ue,texStorage3D:Oe,texSubImage2D:we,texSubImage3D:pe,compressedTexSubImage2D:ce,compressedTexSubImage3D:He,scissor:Pe,viewport:Xe,reset:$e}}function mA(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ft,d=new WeakMap;let h;const f=new WeakMap;let u=!1;try{u=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(U,R){return u?new OffscreenCanvas(U,R):al("canvas")}function p(U,R,z){let ie=1;const oe=Ye(U);if((oe.width>z||oe.height>z)&&(ie=z/Math.max(oe.width,oe.height)),ie<1)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap||typeof VideoFrame<"u"&&U instanceof VideoFrame){const le=Math.floor(ie*oe.width),we=Math.floor(ie*oe.height);h===void 0&&(h=m(le,we));const pe=R?m(le,we):h;return pe.width=le,pe.height=we,pe.getContext("2d").drawImage(U,0,0,le,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+oe.width+"x"+oe.height+") to ("+le+"x"+we+")."),pe}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+oe.width+"x"+oe.height+")."),U;return U}function g(U){return U.generateMipmaps&&U.minFilter!==Ii&&U.minFilter!==Ji}function v(U){n.generateMipmap(U)}function y(U,R,z,ie,oe=!1){if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let le=R;if(R===n.RED&&(z===n.FLOAT&&(le=n.R32F),z===n.HALF_FLOAT&&(le=n.R16F),z===n.UNSIGNED_BYTE&&(le=n.R8)),R===n.RED_INTEGER&&(z===n.UNSIGNED_BYTE&&(le=n.R8UI),z===n.UNSIGNED_SHORT&&(le=n.R16UI),z===n.UNSIGNED_INT&&(le=n.R32UI),z===n.BYTE&&(le=n.R8I),z===n.SHORT&&(le=n.R16I),z===n.INT&&(le=n.R32I)),R===n.RG&&(z===n.FLOAT&&(le=n.RG32F),z===n.HALF_FLOAT&&(le=n.RG16F),z===n.UNSIGNED_BYTE&&(le=n.RG8)),R===n.RG_INTEGER&&(z===n.UNSIGNED_BYTE&&(le=n.RG8UI),z===n.UNSIGNED_SHORT&&(le=n.RG16UI),z===n.UNSIGNED_INT&&(le=n.RG32UI),z===n.BYTE&&(le=n.RG8I),z===n.SHORT&&(le=n.RG16I),z===n.INT&&(le=n.RG32I)),R===n.RGB&&z===n.UNSIGNED_INT_5_9_9_9_REV&&(le=n.RGB9_E5),R===n.RGBA){const we=oe?Bc:bt.getTransfer(ie);z===n.FLOAT&&(le=n.RGBA32F),z===n.HALF_FLOAT&&(le=n.RGBA16F),z===n.UNSIGNED_BYTE&&(le=we===Lt?n.SRGB8_ALPHA8:n.RGBA8),z===n.UNSIGNED_SHORT_4_4_4_4&&(le=n.RGBA4),z===n.UNSIGNED_SHORT_5_5_5_1&&(le=n.RGB5_A1)}return(le===n.R16F||le===n.R32F||le===n.RG16F||le===n.RG32F||le===n.RGBA16F||le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),le}function _(U,R){return g(U)===!0||U.isFramebufferTexture&&U.minFilter!==Ii&&U.minFilter!==Ji?Math.log2(Math.max(R.width,R.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?R.mipmaps.length:1}function w(U){const R=U.target;R.removeEventListener("dispose",w),S(R),R.isVideoTexture&&d.delete(R)}function x(U){const R=U.target;R.removeEventListener("dispose",x),E(R)}function S(U){const R=i.get(U);if(R.__webglInit===void 0)return;const z=U.source,ie=f.get(z);if(ie){const oe=ie[R.__cacheKey];oe.usedTimes--,oe.usedTimes===0&&T(U),Object.keys(ie).length===0&&f.delete(z)}i.remove(U)}function T(U){const R=i.get(U);n.deleteTexture(R.__webglTexture);const z=U.source,ie=f.get(z);delete ie[R.__cacheKey],a.memory.textures--}function E(U){const R=i.get(U);if(U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let ie=0;ie<6;ie++){if(Array.isArray(R.__webglFramebuffer[ie]))for(let oe=0;oe<R.__webglFramebuffer[ie].length;oe++)n.deleteFramebuffer(R.__webglFramebuffer[ie][oe]);else n.deleteFramebuffer(R.__webglFramebuffer[ie]);R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer[ie])}else{if(Array.isArray(R.__webglFramebuffer))for(let ie=0;ie<R.__webglFramebuffer.length;ie++)n.deleteFramebuffer(R.__webglFramebuffer[ie]);else n.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&n.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let ie=0;ie<R.__webglColorRenderbuffer.length;ie++)R.__webglColorRenderbuffer[ie]&&n.deleteRenderbuffer(R.__webglColorRenderbuffer[ie]);R.__webglDepthRenderbuffer&&n.deleteRenderbuffer(R.__webglDepthRenderbuffer)}const z=U.textures;for(let ie=0,oe=z.length;ie<oe;ie++){const le=i.get(z[ie]);le.__webglTexture&&(n.deleteTexture(le.__webglTexture),a.memory.textures--),i.remove(z[ie])}i.remove(U)}let M=0;function b(){M=0}function A(){const U=M;return U>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+r.maxTextures),M+=1,U}function C(U){const R=[];return R.push(U.wrapS),R.push(U.wrapT),R.push(U.wrapR||0),R.push(U.magFilter),R.push(U.minFilter),R.push(U.anisotropy),R.push(U.internalFormat),R.push(U.format),R.push(U.type),R.push(U.generateMipmaps),R.push(U.premultiplyAlpha),R.push(U.flipY),R.push(U.unpackAlignment),R.push(U.colorSpace),R.join()}function P(U,R){const z=i.get(U);if(U.isVideoTexture&&Ne(U),U.isRenderTargetTexture===!1&&U.version>0&&z.__version!==U.version){const ie=U.image;if(ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ae(z,U,R);return}}t.bindTexture(n.TEXTURE_2D,z.__webglTexture,n.TEXTURE0+R)}function I(U,R){const z=i.get(U);if(U.version>0&&z.__version!==U.version){ae(z,U,R);return}t.bindTexture(n.TEXTURE_2D_ARRAY,z.__webglTexture,n.TEXTURE0+R)}function D(U,R){const z=i.get(U);if(U.version>0&&z.__version!==U.version){ae(z,U,R);return}t.bindTexture(n.TEXTURE_3D,z.__webglTexture,n.TEXTURE0+R)}function F(U,R){const z=i.get(U);if(U.version>0&&z.__version!==U.version){Te(z,U,R);return}t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+R)}const B={[Lf]:n.REPEAT,[Is]:n.CLAMP_TO_EDGE,[Df]:n.MIRRORED_REPEAT},k={[Ii]:n.NEAREST,[CS]:n.NEAREST_MIPMAP_NEAREST,[Uc]:n.NEAREST_MIPMAP_LINEAR,[Ji]:n.LINEAR,[If]:n.LINEAR_MIPMAP_NEAREST,[Os]:n.LINEAR_MIPMAP_LINEAR},K={[GS]:n.NEVER,[jS]:n.ALWAYS,[WS]:n.LESS,[a_]:n.LEQUAL,[XS]:n.EQUAL,[YS]:n.GEQUAL,[$S]:n.GREATER,[qS]:n.NOTEQUAL};function O(U,R){if(R.type===dr&&e.has("OES_texture_float_linear")===!1&&(R.magFilter===Ji||R.magFilter===If||R.magFilter===Uc||R.magFilter===Os||R.minFilter===Ji||R.minFilter===If||R.minFilter===Uc||R.minFilter===Os)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(U,n.TEXTURE_WRAP_S,B[R.wrapS]),n.texParameteri(U,n.TEXTURE_WRAP_T,B[R.wrapT]),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,B[R.wrapR]),n.texParameteri(U,n.TEXTURE_MAG_FILTER,k[R.magFilter]),n.texParameteri(U,n.TEXTURE_MIN_FILTER,k[R.minFilter]),R.compareFunction&&(n.texParameteri(U,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(U,n.TEXTURE_COMPARE_FUNC,K[R.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(R.magFilter===Ii||R.minFilter!==Uc&&R.minFilter!==Os||R.type===dr&&e.has("OES_texture_float_linear")===!1)return;if(R.anisotropy>1||i.get(R).__currentAnisotropy){const z=e.get("EXT_texture_filter_anisotropic");n.texParameterf(U,z.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,r.getMaxAnisotropy())),i.get(R).__currentAnisotropy=R.anisotropy}}}function re(U,R){let z=!1;U.__webglInit===void 0&&(U.__webglInit=!0,R.addEventListener("dispose",w));const ie=R.source;let oe=f.get(ie);oe===void 0&&(oe={},f.set(ie,oe));const le=C(R);if(le!==U.__cacheKey){oe[le]===void 0&&(oe[le]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,z=!0),oe[le].usedTimes++;const we=oe[U.__cacheKey];we!==void 0&&(oe[U.__cacheKey].usedTimes--,we.usedTimes===0&&T(R)),U.__cacheKey=le,U.__webglTexture=oe[le].texture}return z}function ae(U,R,z){let ie=n.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(ie=n.TEXTURE_2D_ARRAY),R.isData3DTexture&&(ie=n.TEXTURE_3D);const oe=re(U,R),le=R.source;t.bindTexture(ie,U.__webglTexture,n.TEXTURE0+z);const we=i.get(le);if(le.version!==we.__version||oe===!0){t.activeTexture(n.TEXTURE0+z);const pe=bt.getPrimaries(bt.workingColorSpace),ce=R.colorSpace===Gr?null:bt.getPrimaries(R.colorSpace),He=R.colorSpace===Gr||pe===ce?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);let ue=p(R.image,!1,r.maxTextureSize);ue=X(R,ue);const Oe=s.convert(R.format,R.colorSpace),rt=s.convert(R.type);let Ce=y(R.internalFormat,Oe,rt,R.colorSpace,R.isVideoTexture);O(ie,R);let Pe;const Xe=R.mipmaps,Je=R.isVideoTexture!==!0,St=we.__version===void 0||oe===!0,$e=le.dataReady,H=_(R,ue);if(R.isDepthTexture)Ce=n.DEPTH_COMPONENT16,R.type===dr?Ce=n.DEPTH_COMPONENT32F:R.type===Pa?Ce=n.DEPTH_COMPONENT24:R.type===il&&(Ce=n.DEPTH24_STENCIL8),St&&(Je?t.texStorage2D(n.TEXTURE_2D,1,Ce,ue.width,ue.height):t.texImage2D(n.TEXTURE_2D,0,Ce,ue.width,ue.height,0,Oe,rt,null));else if(R.isDataTexture)if(Xe.length>0){Je&&St&&t.texStorage2D(n.TEXTURE_2D,H,Ce,Xe[0].width,Xe[0].height);for(let ee=0,ne=Xe.length;ee<ne;ee++)Pe=Xe[ee],Je?$e&&t.texSubImage2D(n.TEXTURE_2D,ee,0,0,Pe.width,Pe.height,Oe,rt,Pe.data):t.texImage2D(n.TEXTURE_2D,ee,Ce,Pe.width,Pe.height,0,Oe,rt,Pe.data);R.generateMipmaps=!1}else Je?(St&&t.texStorage2D(n.TEXTURE_2D,H,Ce,ue.width,ue.height),$e&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ue.width,ue.height,Oe,rt,ue.data)):t.texImage2D(n.TEXTURE_2D,0,Ce,ue.width,ue.height,0,Oe,rt,ue.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){Je&&St&&t.texStorage3D(n.TEXTURE_2D_ARRAY,H,Ce,Xe[0].width,Xe[0].height,ue.depth);for(let ee=0,ne=Xe.length;ee<ne;ee++)Pe=Xe[ee],R.format!==mn?Oe!==null?Je?$e&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ee,0,0,0,Pe.width,Pe.height,ue.depth,Oe,Pe.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ee,Ce,Pe.width,Pe.height,ue.depth,0,Pe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?$e&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ee,0,0,0,Pe.width,Pe.height,ue.depth,Oe,rt,Pe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ee,Ce,Pe.width,Pe.height,ue.depth,0,Oe,rt,Pe.data)}else{Je&&St&&t.texStorage2D(n.TEXTURE_2D,H,Ce,Xe[0].width,Xe[0].height);for(let ee=0,ne=Xe.length;ee<ne;ee++)Pe=Xe[ee],R.format!==mn?Oe!==null?Je?$e&&t.compressedTexSubImage2D(n.TEXTURE_2D,ee,0,0,Pe.width,Pe.height,Oe,Pe.data):t.compressedTexImage2D(n.TEXTURE_2D,ee,Ce,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?$e&&t.texSubImage2D(n.TEXTURE_2D,ee,0,0,Pe.width,Pe.height,Oe,rt,Pe.data):t.texImage2D(n.TEXTURE_2D,ee,Ce,Pe.width,Pe.height,0,Oe,rt,Pe.data)}else if(R.isDataArrayTexture)Je?(St&&t.texStorage3D(n.TEXTURE_2D_ARRAY,H,Ce,ue.width,ue.height,ue.depth),$e&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ue.width,ue.height,ue.depth,Oe,rt,ue.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ce,ue.width,ue.height,ue.depth,0,Oe,rt,ue.data);else if(R.isData3DTexture)Je?(St&&t.texStorage3D(n.TEXTURE_3D,H,Ce,ue.width,ue.height,ue.depth),$e&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ue.width,ue.height,ue.depth,Oe,rt,ue.data)):t.texImage3D(n.TEXTURE_3D,0,Ce,ue.width,ue.height,ue.depth,0,Oe,rt,ue.data);else if(R.isFramebufferTexture){if(St)if(Je)t.texStorage2D(n.TEXTURE_2D,H,Ce,ue.width,ue.height);else{let ee=ue.width,ne=ue.height;for(let me=0;me<H;me++)t.texImage2D(n.TEXTURE_2D,me,Ce,ee,ne,0,Oe,rt,null),ee>>=1,ne>>=1}}else if(Xe.length>0){if(Je&&St){const ee=Ye(Xe[0]);t.texStorage2D(n.TEXTURE_2D,H,Ce,ee.width,ee.height)}for(let ee=0,ne=Xe.length;ee<ne;ee++)Pe=Xe[ee],Je?$e&&t.texSubImage2D(n.TEXTURE_2D,ee,0,0,Oe,rt,Pe):t.texImage2D(n.TEXTURE_2D,ee,Ce,Oe,rt,Pe);R.generateMipmaps=!1}else if(Je){if(St){const ee=Ye(ue);t.texStorage2D(n.TEXTURE_2D,H,Ce,ee.width,ee.height)}$e&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe,rt,ue)}else t.texImage2D(n.TEXTURE_2D,0,Ce,Oe,rt,ue);g(R)&&v(ie),we.__version=le.version,R.onUpdate&&R.onUpdate(R)}U.__version=R.version}function Te(U,R,z){if(R.image.length!==6)return;const ie=re(U,R),oe=R.source;t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+z);const le=i.get(oe);if(oe.version!==le.__version||ie===!0){t.activeTexture(n.TEXTURE0+z);const we=bt.getPrimaries(bt.workingColorSpace),pe=R.colorSpace===Gr?null:bt.getPrimaries(R.colorSpace),ce=R.colorSpace===Gr||we===pe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ce);const He=R.isCompressedTexture||R.image[0].isCompressedTexture,ue=R.image[0]&&R.image[0].isDataTexture,Oe=[];for(let ne=0;ne<6;ne++)!He&&!ue?Oe[ne]=p(R.image[ne],!0,r.maxCubemapSize):Oe[ne]=ue?R.image[ne].image:R.image[ne],Oe[ne]=X(R,Oe[ne]);const rt=Oe[0],Ce=s.convert(R.format,R.colorSpace),Pe=s.convert(R.type),Xe=y(R.internalFormat,Ce,Pe,R.colorSpace),Je=R.isVideoTexture!==!0,St=le.__version===void 0||ie===!0,$e=oe.dataReady;let H=_(R,rt);O(n.TEXTURE_CUBE_MAP,R);let ee;if(He){Je&&St&&t.texStorage2D(n.TEXTURE_CUBE_MAP,H,Xe,rt.width,rt.height);for(let ne=0;ne<6;ne++){ee=Oe[ne].mipmaps;for(let me=0;me<ee.length;me++){const ve=ee[me];R.format!==mn?Ce!==null?Je?$e&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me,0,0,ve.width,ve.height,Ce,ve.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me,Xe,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me,0,0,ve.width,ve.height,Ce,Pe,ve.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me,Xe,ve.width,ve.height,0,Ce,Pe,ve.data)}}}else{if(ee=R.mipmaps,Je&&St){ee.length>0&&H++;const ne=Ye(Oe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,H,Xe,ne.width,ne.height)}for(let ne=0;ne<6;ne++)if(ue){Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,Oe[ne].width,Oe[ne].height,Ce,Pe,Oe[ne].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,Xe,Oe[ne].width,Oe[ne].height,0,Ce,Pe,Oe[ne].data);for(let me=0;me<ee.length;me++){const Qe=ee[me].image[ne].image;Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me+1,0,0,Qe.width,Qe.height,Ce,Pe,Qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me+1,Xe,Qe.width,Qe.height,0,Ce,Pe,Qe.data)}}else{Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,Ce,Pe,Oe[ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,Xe,Ce,Pe,Oe[ne]);for(let me=0;me<ee.length;me++){const ve=ee[me];Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me+1,0,0,Ce,Pe,ve.image[ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,me+1,Xe,Ce,Pe,ve.image[ne])}}}g(R)&&v(n.TEXTURE_CUBE_MAP),le.__version=oe.version,R.onUpdate&&R.onUpdate(R)}U.__version=R.version}function G(U,R,z,ie,oe,le){const we=s.convert(z.format,z.colorSpace),pe=s.convert(z.type),ce=y(z.internalFormat,we,pe,z.colorSpace);if(!i.get(R).__hasExternalTextures){const ue=Math.max(1,R.width>>le),Oe=Math.max(1,R.height>>le);oe===n.TEXTURE_3D||oe===n.TEXTURE_2D_ARRAY?t.texImage3D(oe,le,ce,ue,Oe,R.depth,0,we,pe,null):t.texImage2D(oe,le,ce,ue,Oe,0,we,pe,null)}t.bindFramebuffer(n.FRAMEBUFFER,U),Ie(R)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ie,oe,i.get(z).__webglTexture,0,fe(R)):(oe===n.TEXTURE_2D||oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ie,oe,i.get(z).__webglTexture,le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Y(U,R,z){if(n.bindRenderbuffer(n.RENDERBUFFER,U),R.depthBuffer&&!R.stencilBuffer){let ie=n.DEPTH_COMPONENT24;if(z||Ie(R)){const oe=R.depthTexture;oe&&oe.isDepthTexture&&(oe.type===dr?ie=n.DEPTH_COMPONENT32F:oe.type===Pa&&(ie=n.DEPTH_COMPONENT24));const le=fe(R);Ie(R)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,le,ie,R.width,R.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,le,ie,R.width,R.height)}else n.renderbufferStorage(n.RENDERBUFFER,ie,R.width,R.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,U)}else if(R.depthBuffer&&R.stencilBuffer){const ie=fe(R);z&&Ie(R)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ie,n.DEPTH24_STENCIL8,R.width,R.height):Ie(R)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ie,n.DEPTH24_STENCIL8,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,R.width,R.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,U)}else{const ie=R.textures;for(let oe=0;oe<ie.length;oe++){const le=ie[oe],we=s.convert(le.format,le.colorSpace),pe=s.convert(le.type),ce=y(le.internalFormat,we,pe,le.colorSpace),He=fe(R);z&&Ie(R)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,He,ce,R.width,R.height):Ie(R)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,He,ce,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,ce,R.width,R.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Q(U,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,U),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(R.depthTexture).__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),P(R.depthTexture,0);const ie=i.get(R.depthTexture).__webglTexture,oe=fe(R);if(R.depthTexture.format===Ra)Ie(R)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ie,0,oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ie,0);else if(R.depthTexture.format===nl)Ie(R)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ie,0,oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ie,0);else throw new Error("Unknown depthTexture format")}function te(U){const R=i.get(U),z=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!R.__autoAllocateDepthBuffer){if(z)throw new Error("target.depthTexture not supported in Cube render targets");Q(R.__webglFramebuffer,U)}else if(z){R.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)t.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[ie]),R.__webglDepthbuffer[ie]=n.createRenderbuffer(),Y(R.__webglDepthbuffer[ie],U,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer=n.createRenderbuffer(),Y(R.__webglDepthbuffer,U,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function he(U,R,z){const ie=i.get(U);R!==void 0&&G(ie.__webglFramebuffer,U,U.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),z!==void 0&&te(U)}function Ae(U){const R=U.texture,z=i.get(U),ie=i.get(R);U.addEventListener("dispose",x);const oe=U.textures,le=U.isWebGLCubeRenderTarget===!0,we=oe.length>1;if(we||(ie.__webglTexture===void 0&&(ie.__webglTexture=n.createTexture()),ie.__version=R.version,a.memory.textures++),le){z.__webglFramebuffer=[];for(let pe=0;pe<6;pe++)if(R.mipmaps&&R.mipmaps.length>0){z.__webglFramebuffer[pe]=[];for(let ce=0;ce<R.mipmaps.length;ce++)z.__webglFramebuffer[pe][ce]=n.createFramebuffer()}else z.__webglFramebuffer[pe]=n.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){z.__webglFramebuffer=[];for(let pe=0;pe<R.mipmaps.length;pe++)z.__webglFramebuffer[pe]=n.createFramebuffer()}else z.__webglFramebuffer=n.createFramebuffer();if(we)for(let pe=0,ce=oe.length;pe<ce;pe++){const He=i.get(oe[pe]);He.__webglTexture===void 0&&(He.__webglTexture=n.createTexture(),a.memory.textures++)}if(U.samples>0&&Ie(U)===!1){z.__webglMultisampledFramebuffer=n.createFramebuffer(),z.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,z.__webglMultisampledFramebuffer);for(let pe=0;pe<oe.length;pe++){const ce=oe[pe];z.__webglColorRenderbuffer[pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,z.__webglColorRenderbuffer[pe]);const He=s.convert(ce.format,ce.colorSpace),ue=s.convert(ce.type),Oe=y(ce.internalFormat,He,ue,ce.colorSpace,U.isXRRenderTarget===!0),rt=fe(U);n.renderbufferStorageMultisample(n.RENDERBUFFER,rt,Oe,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pe,n.RENDERBUFFER,z.__webglColorRenderbuffer[pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),U.depthBuffer&&(z.__webglDepthRenderbuffer=n.createRenderbuffer(),Y(z.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(le){t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture),O(n.TEXTURE_CUBE_MAP,R);for(let pe=0;pe<6;pe++)if(R.mipmaps&&R.mipmaps.length>0)for(let ce=0;ce<R.mipmaps.length;ce++)G(z.__webglFramebuffer[pe][ce],U,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,ce);else G(z.__webglFramebuffer[pe],U,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0);g(R)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(we){for(let pe=0,ce=oe.length;pe<ce;pe++){const He=oe[pe],ue=i.get(He);t.bindTexture(n.TEXTURE_2D,ue.__webglTexture),O(n.TEXTURE_2D,He),G(z.__webglFramebuffer,U,He,n.COLOR_ATTACHMENT0+pe,n.TEXTURE_2D,0),g(He)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let pe=n.TEXTURE_2D;if((U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(pe=U.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(pe,ie.__webglTexture),O(pe,R),R.mipmaps&&R.mipmaps.length>0)for(let ce=0;ce<R.mipmaps.length;ce++)G(z.__webglFramebuffer[ce],U,R,n.COLOR_ATTACHMENT0,pe,ce);else G(z.__webglFramebuffer,U,R,n.COLOR_ATTACHMENT0,pe,0);g(R)&&v(pe),t.unbindTexture()}U.depthBuffer&&te(U)}function V(U){const R=U.textures;for(let z=0,ie=R.length;z<ie;z++){const oe=R[z];if(g(oe)){const le=U.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,we=i.get(oe).__webglTexture;t.bindTexture(le,we),v(le),t.unbindTexture()}}}const ze=[],Re=[];function ge(U){if(U.samples>0){if(Ie(U)===!1){const R=U.textures,z=U.width,ie=U.height;let oe=n.COLOR_BUFFER_BIT;const le=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=i.get(U),pe=R.length>1;if(pe)for(let ce=0;ce<R.length;ce++)t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,we.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglFramebuffer);for(let ce=0;ce<R.length;ce++){if(U.resolveDepthBuffer&&(U.depthBuffer&&(oe|=n.DEPTH_BUFFER_BIT),U.stencilBuffer&&U.resolveStencilBuffer&&(oe|=n.STENCIL_BUFFER_BIT)),pe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,we.__webglColorRenderbuffer[ce]);const He=i.get(R[ce]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,He,0)}n.blitFramebuffer(0,0,z,ie,0,0,z,ie,oe,n.NEAREST),l===!0&&(ze.length=0,Re.length=0,ze.push(n.COLOR_ATTACHMENT0+ce),U.depthBuffer&&U.resolveDepthBuffer===!1&&(ze.push(le),Re.push(le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Re)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ze))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),pe)for(let ce=0;ce<R.length;ce++){t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.RENDERBUFFER,we.__webglColorRenderbuffer[ce]);const He=i.get(R[ce]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.TEXTURE_2D,He,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglMultisampledFramebuffer)}else if(U.depthBuffer&&U.resolveDepthBuffer===!1&&l){const R=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[R])}}}function fe(U){return Math.min(r.maxSamples,U.samples)}function Ie(U){const R=i.get(U);return U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function Ne(U){const R=a.render.frame;d.get(U)!==R&&(d.set(U,R),U.update())}function X(U,R){const z=U.colorSpace,ie=U.format,oe=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||z!==Wr&&z!==Gr&&(bt.getTransfer(z)===Lt?(ie!==mn||oe!==Hr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",z)),R}function Ye(U){return typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement?(c.width=U.naturalWidth||U.width,c.height=U.naturalHeight||U.height):typeof VideoFrame<"u"&&U instanceof VideoFrame?(c.width=U.displayWidth,c.height=U.displayHeight):(c.width=U.width,c.height=U.height),c}this.allocateTextureUnit=A,this.resetTextureUnits=b,this.setTexture2D=P,this.setTexture2DArray=I,this.setTexture3D=D,this.setTextureCube=F,this.rebindTextures=he,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=V,this.updateMultisampleRenderTarget=ge,this.setupDepthRenderbuffer=te,this.setupFrameBufferTexture=G,this.useMultisampledRTT=Ie}function gA(n,e){function t(i,r=Gr){let s;const a=bt.getTransfer(r);if(i===Hr)return n.UNSIGNED_BYTE;if(i===Cv)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Pv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===LS)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===PS)return n.BYTE;if(i===RS)return n.SHORT;if(i===Ev)return n.UNSIGNED_SHORT;if(i===Av)return n.INT;if(i===Pa)return n.UNSIGNED_INT;if(i===dr)return n.FLOAT;if(i===kc)return n.HALF_FLOAT;if(i===DS)return n.ALPHA;if(i===IS)return n.RGB;if(i===mn)return n.RGBA;if(i===OS)return n.LUMINANCE;if(i===NS)return n.LUMINANCE_ALPHA;if(i===Ra)return n.DEPTH_COMPONENT;if(i===nl)return n.DEPTH_STENCIL;if(i===US)return n.RED;if(i===Rv)return n.RED_INTEGER;if(i===kS)return n.RG;if(i===Lv)return n.RG_INTEGER;if(i===Dv)return n.RGBA_INTEGER;if(i===Of||i===Nf||i===Uf||i===kf)if(a===Lt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Of)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Nf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Uf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===kf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Of)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Nf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Uf)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===kf)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Iv||i===Ov||i===Nv||i===Uv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Iv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ov)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Nv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Uv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===kv||i===Fv||i===Bv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===kv||i===Fv)return a===Lt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Bv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===zv||i===Vv||i===Hv||i===Gv||i===Wv||i===Xv||i===$v||i===qv||i===Yv||i===jv||i===Kv||i===Zv||i===Qv||i===Jv)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===zv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Vv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Hv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Gv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Wv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Xv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===$v)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===qv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Yv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===jv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Kv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Zv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Qv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Jv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Ff||i===e_||i===t_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Ff)return a===Lt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===e_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===t_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===FS||i===i_||i===n_||i===r_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Ff)return s.COMPRESSED_RED_RGTC1_EXT;if(i===i_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===n_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===r_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===il?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class vA extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class hu extends tn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _A={type:"move"};class gh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const p of e.hand.values()){const g=t.getJointPose(p,i),v=this._getHandJoint(c,p);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=g.radius),v.visible=g!==null}const d=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=d.position.distanceTo(h.position),u=.02,m=.005;c.inputState.pinching&&f>u+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=u-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(_A)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new hu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const yA=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,xA=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bA{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new yi,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,r=new Yn({vertexShader:yA,fragmentShader:xA,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Pn(new Ka(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class wA extends Da{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,d=null,h=null,f=null,u=null,m=null;const p=new bA,g=t.getContextAttributes();let v=null,y=null;const _=[],w=[],x=new ft;let S=null;const T=new rn;T.layers.enable(1),T.viewport=new si;const E=new rn;E.layers.enable(2),E.viewport=new si;const M=[T,E],b=new vA;b.layers.enable(1),b.layers.enable(2);let A=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let Y=_[G];return Y===void 0&&(Y=new gh,_[G]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(G){let Y=_[G];return Y===void 0&&(Y=new gh,_[G]=Y),Y.getGripSpace()},this.getHand=function(G){let Y=_[G];return Y===void 0&&(Y=new gh,_[G]=Y),Y.getHandSpace()};function P(G){const Y=w.indexOf(G.inputSource);if(Y===-1)return;const Q=_[Y];Q!==void 0&&(Q.update(G.inputSource,G.frame,c||a),Q.dispatchEvent({type:G.type,data:G.inputSource}))}function I(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",D);for(let G=0;G<_.length;G++){const Y=w[G];Y!==null&&(w[G]=null,_[G].disconnect(Y))}A=null,C=null,p.reset(),e.setRenderTarget(v),u=null,f=null,h=null,r=null,y=null,Te.stop(),i.isPresenting=!1,e.setPixelRatio(S),e.setSize(x.width,x.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){s=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){o=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(G){c=G},this.getBaseLayer=function(){return f!==null?f:u},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(G){if(r=G,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",I),r.addEventListener("inputsourceschange",D),g.xrCompatible!==!0&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(x),r.renderState.layers===void 0){const Y={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};u=new XRWebGLLayer(r,t,Y),r.updateRenderState({baseLayer:u}),e.setPixelRatio(1),e.setSize(u.framebufferWidth,u.framebufferHeight,!1),y=new Ns(u.framebufferWidth,u.framebufferHeight,{format:mn,type:Hr,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let Y=null,Q=null,te=null;g.depth&&(te=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Y=g.stencil?nl:Ra,Q=g.stencil?il:Pa);const he={colorFormat:t.RGBA8,depthFormat:te,scaleFactor:s};h=new XRWebGLBinding(r,t),f=h.createProjectionLayer(he),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),y=new Ns(f.textureWidth,f.textureHeight,{format:mn,type:Hr,depthTexture:new j_(f.textureWidth,f.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),Te.setContext(r),Te.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function D(G){for(let Y=0;Y<G.removed.length;Y++){const Q=G.removed[Y],te=w.indexOf(Q);te>=0&&(w[te]=null,_[te].disconnect(Q))}for(let Y=0;Y<G.added.length;Y++){const Q=G.added[Y];let te=w.indexOf(Q);if(te===-1){for(let Ae=0;Ae<_.length;Ae++)if(Ae>=w.length){w.push(Q),te=Ae;break}else if(w[Ae]===null){w[Ae]=Q,te=Ae;break}if(te===-1)break}const he=_[te];he&&he.connect(Q)}}const F=new J,B=new J;function k(G,Y,Q){F.setFromMatrixPosition(Y.matrixWorld),B.setFromMatrixPosition(Q.matrixWorld);const te=F.distanceTo(B),he=Y.projectionMatrix.elements,Ae=Q.projectionMatrix.elements,V=he[14]/(he[10]-1),ze=he[14]/(he[10]+1),Re=(he[9]+1)/he[5],ge=(he[9]-1)/he[5],fe=(he[8]-1)/he[0],Ie=(Ae[8]+1)/Ae[0],Ne=V*fe,X=V*Ie,Ye=te/(-fe+Ie),U=Ye*-fe;Y.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(U),G.translateZ(Ye),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();const R=V+Ye,z=ze+Ye,ie=Ne-U,oe=X+(te-U),le=Re*ze/z*R,we=ge*ze/z*R;G.projectionMatrix.makePerspective(ie,oe,le,we,R,z),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}function K(G,Y){Y===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(Y.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(r===null)return;p.texture!==null&&(G.near=p.depthNear,G.far=p.depthFar),b.near=E.near=T.near=G.near,b.far=E.far=T.far=G.far,(A!==b.near||C!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),A=b.near,C=b.far,T.near=A,T.far=C,E.near=A,E.far=C,T.updateProjectionMatrix(),E.updateProjectionMatrix(),G.updateProjectionMatrix());const Y=G.parent,Q=b.cameras;K(b,Y);for(let te=0;te<Q.length;te++)K(Q[te],Y);Q.length===2?k(b,T,E):b.projectionMatrix.copy(T.projectionMatrix),O(G,b,Y)};function O(G,Y,Q){Q===null?G.matrix.copy(Y.matrixWorld):(G.matrix.copy(Q.matrixWorld),G.matrix.invert(),G.matrix.multiply(Y.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0),G.projectionMatrix.copy(Y.projectionMatrix),G.projectionMatrixInverse.copy(Y.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=Vf*2*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(f===null&&u===null))return l},this.setFoveation=function(G){l=G,f!==null&&(f.fixedFoveation=G),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=G)},this.hasDepthSensing=function(){return p.texture!==null};let re=null;function ae(G,Y){if(d=Y.getViewerPose(c||a),m=Y,d!==null){const Q=d.views;u!==null&&(e.setRenderTargetFramebuffer(y,u.framebuffer),e.setRenderTarget(y));let te=!1;Q.length!==b.cameras.length&&(b.cameras.length=0,te=!0);for(let Ae=0;Ae<Q.length;Ae++){const V=Q[Ae];let ze=null;if(u!==null)ze=u.getViewport(V);else{const ge=h.getViewSubImage(f,V);ze=ge.viewport,Ae===0&&(e.setRenderTargetTextures(y,ge.colorTexture,f.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(y))}let Re=M[Ae];Re===void 0&&(Re=new rn,Re.layers.enable(Ae),Re.viewport=new si,M[Ae]=Re),Re.matrix.fromArray(V.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(V.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(ze.x,ze.y,ze.width,ze.height),Ae===0&&(b.matrix.copy(Re.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),te===!0&&b.cameras.push(Re)}const he=r.enabledFeatures;if(he&&he.includes("depth-sensing")){const Ae=h.getDepthInformation(Q[0]);Ae&&Ae.isValid&&Ae.texture&&p.init(e,Ae,r.renderState)}}for(let Q=0;Q<_.length;Q++){const te=w[Q],he=_[Q];te!==null&&he!==void 0&&he.update(te,Y,c||a)}p.render(e,b),re&&re(G,Y),Y.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Y}),m=null}const Te=new z_;Te.setAnimationLoop(ae),this.setAnimationLoop=function(G){re=G},this.dispose=function(){}}}const $s=new mr,SA=new Kt;function MA(n,e){function t(g,v){g.matrixAutoUpdate===!0&&g.updateMatrix(),v.value.copy(g.matrix)}function i(g,v){v.color.getRGB(g.fogColor.value,O_(n)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function r(g,v,y,_,w){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(g,v):v.isMeshToonMaterial?(s(g,v),h(g,v)):v.isMeshPhongMaterial?(s(g,v),d(g,v)):v.isMeshStandardMaterial?(s(g,v),f(g,v),v.isMeshPhysicalMaterial&&u(g,v,w)):v.isMeshMatcapMaterial?(s(g,v),m(g,v)):v.isMeshDepthMaterial?s(g,v):v.isMeshDistanceMaterial?(s(g,v),p(g,v)):v.isMeshNormalMaterial?s(g,v):v.isLineBasicMaterial?(a(g,v),v.isLineDashedMaterial&&o(g,v)):v.isPointsMaterial?l(g,v,y,_):v.isSpriteMaterial?c(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.bumpMap&&(g.bumpMap.value=v.bumpMap,t(v.bumpMap,g.bumpMapTransform),g.bumpScale.value=v.bumpScale,v.side===Hi&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,t(v.normalMap,g.normalMapTransform),g.normalScale.value.copy(v.normalScale),v.side===Hi&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,t(v.displacementMap,g.displacementMapTransform),g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,g.emissiveMapTransform)),v.specularMap&&(g.specularMap.value=v.specularMap,t(v.specularMap,g.specularMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const y=e.get(v),_=y.envMap,w=y.envMapRotation;if(_&&(g.envMap.value=_,$s.copy(w),$s.x*=-1,$s.y*=-1,$s.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&($s.y*=-1,$s.z*=-1),g.envMapRotation.value.setFromMatrix4(SA.makeRotationFromEuler($s)),g.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap){g.lightMap.value=v.lightMap;const x=n._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=v.lightMapIntensity*x,t(v.lightMap,g.lightMapTransform)}v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,g.aoMapTransform))}function a(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform))}function o(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function l(g,v,y,_){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*y,g.scale.value=_*.5,v.map&&(g.map.value=v.map,t(v.map,g.uvTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function c(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function d(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function h(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function f(g,v){g.metalness.value=v.metalness,v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,g.metalnessMapTransform)),g.roughness.value=v.roughness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,g.roughnessMapTransform)),v.envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function u(g,v,y){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,g.sheenColorMapTransform)),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,g.sheenRoughnessMapTransform))),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,g.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(g.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Hi&&g.clearcoatNormalScale.value.negate())),v.dispersion>0&&(g.dispersion.value=v.dispersion),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,g.iridescenceMapTransform)),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=y.texture,g.transmissionSamplerSize.value.set(y.width,y.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,g.transmissionMapTransform)),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(g.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(g.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,g.specularColorMapTransform)),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,v){v.matcap&&(g.matcap.value=v.matcap)}function p(g,v){const y=e.get(v).light;g.referencePosition.value.setFromMatrixPosition(y.matrixWorld),g.nearDistance.value=y.shadow.camera.near,g.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function TA(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,_){const w=_.program;i.uniformBlockBinding(y,w)}function c(y,_){let w=r[y.id];w===void 0&&(m(y),w=d(y),r[y.id]=w,y.addEventListener("dispose",g));const x=_.program;i.updateUBOMapping(y,x);const S=e.render.frame;s[y.id]!==S&&(f(y),s[y.id]=S)}function d(y){const _=h();y.__bindingPointIndex=_;const w=n.createBuffer(),x=y.__size,S=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,x,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,w),w}function h(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const _=r[y.id],w=y.uniforms,x=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let S=0,T=w.length;S<T;S++){const E=Array.isArray(w[S])?w[S]:[w[S]];for(let M=0,b=E.length;M<b;M++){const A=E[M];if(u(A,S,M,x)===!0){const C=A.__offset,P=Array.isArray(A.value)?A.value:[A.value];let I=0;for(let D=0;D<P.length;D++){const F=P[D],B=p(F);typeof F=="number"||typeof F=="boolean"?(A.__data[0]=F,n.bufferSubData(n.UNIFORM_BUFFER,C+I,A.__data)):F.isMatrix3?(A.__data[0]=F.elements[0],A.__data[1]=F.elements[1],A.__data[2]=F.elements[2],A.__data[3]=0,A.__data[4]=F.elements[3],A.__data[5]=F.elements[4],A.__data[6]=F.elements[5],A.__data[7]=0,A.__data[8]=F.elements[6],A.__data[9]=F.elements[7],A.__data[10]=F.elements[8],A.__data[11]=0):(F.toArray(A.__data,I),I+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,C,A.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function u(y,_,w,x){const S=y.value,T=_+"_"+w;if(x[T]===void 0)return typeof S=="number"||typeof S=="boolean"?x[T]=S:x[T]=S.clone(),!0;{const E=x[T];if(typeof S=="number"||typeof S=="boolean"){if(E!==S)return x[T]=S,!0}else if(E.equals(S)===!1)return E.copy(S),!0}return!1}function m(y){const _=y.uniforms;let w=0;const x=16;for(let T=0,E=_.length;T<E;T++){const M=Array.isArray(_[T])?_[T]:[_[T]];for(let b=0,A=M.length;b<A;b++){const C=M[b],P=Array.isArray(C.value)?C.value:[C.value];for(let I=0,D=P.length;I<D;I++){const F=P[I],B=p(F),k=w%x;k!==0&&x-k<B.boundary&&(w+=x-k),C.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=w,w+=B.storage}}}const S=w%x;return S>0&&(w+=x-S),y.__size=w,y.__cache={},this}function p(y){const _={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function g(y){const _=y.target;_.removeEventListener("dispose",g);const w=a.indexOf(_.__bindingPointIndex);a.splice(w,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function v(){for(const y in r)n.deleteBuffer(r[y]);a=[],r={},s={}}return{bind:l,update:c,dispose:v}}class g0{constructor(e={}){const{canvas:t=ZS(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=a;const u=new Uint32Array(4),m=new Int32Array(4);let p=null,g=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Xn,this._useLegacyLights=!1,this.toneMapping=Vr,this.toneMappingExposure=1;const _=this;let w=!1,x=0,S=0,T=null,E=-1,M=null;const b=new si,A=new si;let C=null;const P=new yt(0);let I=0,D=t.width,F=t.height,B=1,k=null,K=null;const O=new si(0,0,D,F),re=new si(0,0,D,F);let ae=!1;const Te=new B_;let G=!1,Y=!1;const Q=new Kt,te=new J,he={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return T===null?B:1}let V=i;function ze(L,W){return t.getContext(L,W)}try{const L={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ef}`),t.addEventListener("webglcontextlost",H,!1),t.addEventListener("webglcontextrestored",ee,!1),t.addEventListener("webglcontextcreationerror",ne,!1),V===null){const W="webgl2";if(V=ze(W,L),V===null)throw ze(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let Re,ge,fe,Ie,Ne,X,Ye,U,R,z,ie,oe,le,we,pe,ce,He,ue,Oe,rt,Ce,Pe,Xe,Je;function St(){Re=new OE(V),Re.init(),Pe=new gA(V,Re),ge=new CE(V,Re,e,Pe),fe=new pA(V),Ie=new kE(V),Ne=new eA,X=new mA(V,Re,fe,Ne,ge,Pe,Ie),Ye=new RE(_),U=new IE(_),R=new MM(V),Xe=new EE(V,R),z=new NE(V,R,Ie,Xe),ie=new BE(V,z,R,Ie),Oe=new FE(V,ge,X),ce=new PE(Ne),oe=new J1(_,Ye,U,Re,ge,Xe,ce),le=new MA(_,Ne),we=new iA,pe=new lA(Re),ue=new TE(_,Ye,U,fe,ie,f,l),He=new hA(_,ie,ge),Je=new TA(V,Ie,ge,fe),rt=new AE(V,Re,Ie),Ce=new UE(V,Re,Ie),Ie.programs=oe.programs,_.capabilities=ge,_.extensions=Re,_.properties=Ne,_.renderLists=we,_.shadowMap=He,_.state=fe,_.info=Ie}St();const $e=new wA(_,V);this.xr=$e,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const L=Re.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=Re.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(L){L!==void 0&&(B=L,this.setSize(D,F,!1))},this.getSize=function(L){return L.set(D,F)},this.setSize=function(L,W,$=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=L,F=W,t.width=Math.floor(L*B),t.height=Math.floor(W*B),$===!0&&(t.style.width=L+"px",t.style.height=W+"px"),this.setViewport(0,0,L,W)},this.getDrawingBufferSize=function(L){return L.set(D*B,F*B).floor()},this.setDrawingBufferSize=function(L,W,$){D=L,F=W,B=$,t.width=Math.floor(L*$),t.height=Math.floor(W*$),this.setViewport(0,0,L,W)},this.getCurrentViewport=function(L){return L.copy(b)},this.getViewport=function(L){return L.copy(O)},this.setViewport=function(L,W,$,q){L.isVector4?O.set(L.x,L.y,L.z,L.w):O.set(L,W,$,q),fe.viewport(b.copy(O).multiplyScalar(B).round())},this.getScissor=function(L){return L.copy(re)},this.setScissor=function(L,W,$,q){L.isVector4?re.set(L.x,L.y,L.z,L.w):re.set(L,W,$,q),fe.scissor(A.copy(re).multiplyScalar(B).round())},this.getScissorTest=function(){return ae},this.setScissorTest=function(L){fe.setScissorTest(ae=L)},this.setOpaqueSort=function(L){k=L},this.setTransparentSort=function(L){K=L},this.getClearColor=function(L){return L.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(L=!0,W=!0,$=!0){let q=0;if(L){let j=!1;if(T!==null){const de=T.texture.format;j=de===Dv||de===Lv||de===Rv}if(j){const de=T.texture.type,xe=de===Hr||de===Pa||de===Ev||de===il||de===Cv||de===Pv,Me=ue.getClearColor(),Be=ue.getClearAlpha(),je=Me.r,ke=Me.g,Ue=Me.b;xe?(u[0]=je,u[1]=ke,u[2]=Ue,u[3]=Be,V.clearBufferuiv(V.COLOR,0,u)):(m[0]=je,m[1]=ke,m[2]=Ue,m[3]=Be,V.clearBufferiv(V.COLOR,0,m))}else q|=V.COLOR_BUFFER_BIT}W&&(q|=V.DEPTH_BUFFER_BIT),$&&(q|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",H,!1),t.removeEventListener("webglcontextrestored",ee,!1),t.removeEventListener("webglcontextcreationerror",ne,!1),we.dispose(),pe.dispose(),Ne.dispose(),Ye.dispose(),U.dispose(),ie.dispose(),Xe.dispose(),Je.dispose(),oe.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",ut),$e.removeEventListener("sessionend",Ve),De.stop()};function H(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function ee(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const L=Ie.autoReset,W=He.enabled,$=He.autoUpdate,q=He.needsUpdate,j=He.type;St(),Ie.autoReset=L,He.enabled=W,He.autoUpdate=$,He.needsUpdate=q,He.type=j}function ne(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function me(L){const W=L.target;W.removeEventListener("dispose",me),ve(W)}function ve(L){Qe(L),Ne.remove(L)}function Qe(L){const W=Ne.get(L).programs;W!==void 0&&(W.forEach(function($){oe.releaseProgram($)}),L.isShaderMaterial&&oe.releaseShaderCache(L))}this.renderBufferDirect=function(L,W,$,q,j,de){W===null&&(W=he);const xe=j.isMesh&&j.matrixWorld.determinant()<0,Me=ui(L,W,$,q,j);fe.setMaterial(q,xe);let Be=$.index,je=1;if(q.wireframe===!0){if(Be=z.getWireframeAttribute($),Be===void 0)return;je=2}const ke=$.drawRange,Ue=$.attributes.position;let gt=ke.start*je,qt=(ke.start+ke.count)*je;de!==null&&(gt=Math.max(gt,de.start*je),qt=Math.min(qt,(de.start+de.count)*je)),Be!==null?(gt=Math.max(gt,0),qt=Math.min(qt,Be.count)):Ue!=null&&(gt=Math.max(gt,0),qt=Math.min(qt,Ue.count));const wi=qt-gt;if(wi<0||wi===1/0)return;Xe.setup(j,q,Me,$,Be);let Ni,tt=rt;if(Be!==null&&(Ni=R.get(Be),tt=Ce,tt.setIndex(Ni)),j.isMesh)q.wireframe===!0?(fe.setLineWidth(q.wireframeLinewidth*Ae()),tt.setMode(V.LINES)):tt.setMode(V.TRIANGLES);else if(j.isLine){let qe=q.linewidth;qe===void 0&&(qe=1),fe.setLineWidth(qe*Ae()),j.isLineSegments?tt.setMode(V.LINES):j.isLineLoop?tt.setMode(V.LINE_LOOP):tt.setMode(V.LINE_STRIP)}else j.isPoints?tt.setMode(V.POINTS):j.isSprite&&tt.setMode(V.TRIANGLES);if(j.isBatchedMesh)j._multiDrawInstances!==null?tt.renderMultiDrawInstances(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount,j._multiDrawInstances):tt.renderMultiDraw(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount);else if(j.isInstancedMesh)tt.renderInstances(gt,wi,j.count);else if($.isInstancedBufferGeometry){const qe=$._maxInstanceCount!==void 0?$._maxInstanceCount:1/0,Jn=Math.min($.instanceCount,qe);tt.renderInstances(gt,wi,Jn)}else tt.render(gt,wi)};function pt(L,W,$){L.transparent===!0&&L.side===Wn&&L.forceSinglePass===!1?(L.side=Hi,L.needsUpdate=!0,Ft(L,W,$),L.side=Br,L.needsUpdate=!0,Ft(L,W,$),L.side=Wn):Ft(L,W,$)}this.compile=function(L,W,$=null){$===null&&($=L),g=pe.get($),g.init(W),y.push(g),$.traverseVisible(function(j){j.isLight&&j.layers.test(W.layers)&&(g.pushLight(j),j.castShadow&&g.pushShadow(j))}),L!==$&&L.traverseVisible(function(j){j.isLight&&j.layers.test(W.layers)&&(g.pushLight(j),j.castShadow&&g.pushShadow(j))}),g.setupLights(_._useLegacyLights);const q=new Set;return L.traverse(function(j){const de=j.material;if(de)if(Array.isArray(de))for(let xe=0;xe<de.length;xe++){const Me=de[xe];pt(Me,$,j),q.add(Me)}else pt(de,$,j),q.add(de)}),y.pop(),g=null,q},this.compileAsync=function(L,W,$=null){const q=this.compile(L,W,$);return new Promise(j=>{function de(){if(q.forEach(function(xe){Ne.get(xe).currentProgram.isReady()&&q.delete(xe)}),q.size===0){j(L);return}setTimeout(de,10)}Re.get("KHR_parallel_shader_compile")!==null?de():setTimeout(de,10)})};let xt=null;function At(L){xt&&xt(L)}function ut(){De.stop()}function Ve(){De.start()}const De=new z_;De.setAnimationLoop(At),typeof self<"u"&&De.setContext(self),this.setAnimationLoop=function(L){xt=L,$e.setAnimationLoop(L),L===null?De.stop():De.start()},$e.addEventListener("sessionstart",ut),$e.addEventListener("sessionend",Ve),this.render=function(L,W){if(W!==void 0&&W.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),W.parent===null&&W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(W),W=$e.getCamera()),L.isScene===!0&&L.onBeforeRender(_,L,W,T),g=pe.get(L,y.length),g.init(W),y.push(g),Q.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),Te.setFromProjectionMatrix(Q),Y=this.localClippingEnabled,G=ce.init(this.clippingPlanes,Y),p=we.get(L,v.length),p.init(),v.push(p),dt(L,W,0,_.sortObjects),p.finish(),_.sortObjects===!0&&p.sort(k,K);const $=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1;$&&ue.addToRenderList(p,L),this.info.render.frame++,G===!0&&ce.beginShadows();const q=g.state.shadowsArray;He.render(q,L,W),G===!0&&ce.endShadows(),this.info.autoReset===!0&&this.info.reset();const j=p.opaque,de=p.transmissive;if(g.setupLights(_._useLegacyLights),W.isArrayCamera){const xe=W.cameras;if(de.length>0)for(let Me=0,Be=xe.length;Me<Be;Me++){const je=xe[Me];Ze(j,de,L,je)}$&&ue.render(L);for(let Me=0,Be=xe.length;Me<Be;Me++){const je=xe[Me];ye(p,L,je,je.viewport)}}else de.length>0&&Ze(j,de,L,W),$&&ue.render(L),ye(p,L,W);T!==null&&(X.updateMultisampleRenderTarget(T),X.updateRenderTargetMipmap(T)),L.isScene===!0&&L.onAfterRender(_,L,W),Xe.resetDefaultState(),E=-1,M=null,y.pop(),y.length>0?(g=y[y.length-1],G===!0&&ce.setGlobalState(_.clippingPlanes,g.state.camera)):g=null,v.pop(),v.length>0?p=v[v.length-1]:p=null};function dt(L,W,$,q){if(L.visible===!1)return;if(L.layers.test(W.layers)){if(L.isGroup)$=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update(W);else if(L.isLight)g.pushLight(L),L.castShadow&&g.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||Te.intersectsSprite(L)){q&&te.setFromMatrixPosition(L.matrixWorld).applyMatrix4(Q);const xe=ie.update(L),Me=L.material;Me.visible&&p.push(L,xe,Me,$,te.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||Te.intersectsObject(L))){const xe=ie.update(L),Me=L.material;if(q&&(L.boundingSphere!==void 0?(L.boundingSphere===null&&L.computeBoundingSphere(),te.copy(L.boundingSphere.center)):(xe.boundingSphere===null&&xe.computeBoundingSphere(),te.copy(xe.boundingSphere.center)),te.applyMatrix4(L.matrixWorld).applyMatrix4(Q)),Array.isArray(Me)){const Be=xe.groups;for(let je=0,ke=Be.length;je<ke;je++){const Ue=Be[je],gt=Me[Ue.materialIndex];gt&&gt.visible&&p.push(L,xe,gt,$,te.z,Ue)}}else Me.visible&&p.push(L,xe,Me,$,te.z,null)}}const de=L.children;for(let xe=0,Me=de.length;xe<Me;xe++)dt(de[xe],W,$,q)}function ye(L,W,$,q){const j=L.opaque,de=L.transmissive,xe=L.transparent;g.setupLightsView($),G===!0&&ce.setGlobalState(_.clippingPlanes,$),q&&fe.viewport(b.copy(q)),j.length>0&&Fe(j,W,$),de.length>0&&Fe(de,W,$),xe.length>0&&Fe(xe,W,$),fe.buffers.depth.setTest(!0),fe.buffers.depth.setMask(!0),fe.buffers.color.setMask(!0),fe.setPolygonOffset(!1)}function Ze(L,W,$,q){if(($.isScene===!0?$.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[q.id]===void 0&&(g.state.transmissionRenderTarget[q.id]=new Ns(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")||Re.has("EXT_color_buffer_float")?kc:Hr,minFilter:Os,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const de=g.state.transmissionRenderTarget[q.id],xe=q.viewport||b;de.setSize(xe.z,xe.w);const Me=_.getRenderTarget();_.setRenderTarget(de),_.getClearColor(P),I=_.getClearAlpha(),I<1&&_.setClearColor(16777215,.5),_.clear();const Be=_.toneMapping;_.toneMapping=Vr;const je=q.viewport;if(q.viewport!==void 0&&(q.viewport=void 0),g.setupLightsView(q),G===!0&&ce.setGlobalState(_.clippingPlanes,q),Fe(L,$,q),X.updateMultisampleRenderTarget(de),X.updateRenderTargetMipmap(de),Re.has("WEBGL_multisampled_render_to_texture")===!1){let ke=!1;for(let Ue=0,gt=W.length;Ue<gt;Ue++){const qt=W[Ue],wi=qt.object,Ni=qt.geometry,tt=qt.material,qe=qt.group;if(tt.side===Wn&&wi.layers.test(q.layers)){const Jn=tt.side;tt.side=Hi,tt.needsUpdate=!0,Ke(wi,$,q,Ni,tt,qe),tt.side=Jn,tt.needsUpdate=!0,ke=!0}}ke===!0&&(X.updateMultisampleRenderTarget(de),X.updateRenderTargetMipmap(de))}_.setRenderTarget(Me),_.setClearColor(P,I),je!==void 0&&(q.viewport=je),_.toneMapping=Be}function Fe(L,W,$){const q=W.isScene===!0?W.overrideMaterial:null;for(let j=0,de=L.length;j<de;j++){const xe=L[j],Me=xe.object,Be=xe.geometry,je=q===null?xe.material:q,ke=xe.group;Me.layers.test($.layers)&&Ke(Me,W,$,Be,je,ke)}}function Ke(L,W,$,q,j,de){L.onBeforeRender(_,W,$,q,j,de),L.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),j.onBeforeRender(_,W,$,q,L,de),j.transparent===!0&&j.side===Wn&&j.forceSinglePass===!1?(j.side=Hi,j.needsUpdate=!0,_.renderBufferDirect($,W,q,j,L,de),j.side=Br,j.needsUpdate=!0,_.renderBufferDirect($,W,q,j,L,de),j.side=Wn):_.renderBufferDirect($,W,q,j,L,de),L.onAfterRender(_,W,$,q,j,de)}function Ft(L,W,$){W.isScene!==!0&&(W=he);const q=Ne.get(L),j=g.state.lights,de=g.state.shadowsArray,xe=j.state.version,Me=oe.getParameters(L,j.state,de,W,$),Be=oe.getProgramCacheKey(Me);let je=q.programs;q.environment=L.isMeshStandardMaterial?W.environment:null,q.fog=W.fog,q.envMap=(L.isMeshStandardMaterial?U:Ye).get(L.envMap||q.environment),q.envMapRotation=q.environment!==null&&L.envMap===null?W.environmentRotation:L.envMapRotation,je===void 0&&(L.addEventListener("dispose",me),je=new Map,q.programs=je);let ke=je.get(Be);if(ke!==void 0){if(q.currentProgram===ke&&q.lightsStateVersion===xe)return It(L,Me),ke}else Me.uniforms=oe.getUniforms(L),L.onBuild($,Me,_),L.onBeforeCompile(Me,_),ke=oe.acquireProgram(Me,Be),je.set(Be,ke),q.uniforms=Me.uniforms;const Ue=q.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(Ue.clippingPlanes=ce.uniform),It(L,Me),q.needsLights=Ct(L),q.lightsStateVersion=xe,q.needsLights&&(Ue.ambientLightColor.value=j.state.ambient,Ue.lightProbe.value=j.state.probe,Ue.directionalLights.value=j.state.directional,Ue.directionalLightShadows.value=j.state.directionalShadow,Ue.spotLights.value=j.state.spot,Ue.spotLightShadows.value=j.state.spotShadow,Ue.rectAreaLights.value=j.state.rectArea,Ue.ltc_1.value=j.state.rectAreaLTC1,Ue.ltc_2.value=j.state.rectAreaLTC2,Ue.pointLights.value=j.state.point,Ue.pointLightShadows.value=j.state.pointShadow,Ue.hemisphereLights.value=j.state.hemi,Ue.directionalShadowMap.value=j.state.directionalShadowMap,Ue.directionalShadowMatrix.value=j.state.directionalShadowMatrix,Ue.spotShadowMap.value=j.state.spotShadowMap,Ue.spotLightMatrix.value=j.state.spotLightMatrix,Ue.spotLightMap.value=j.state.spotLightMap,Ue.pointShadowMap.value=j.state.pointShadowMap,Ue.pointShadowMatrix.value=j.state.pointShadowMatrix),q.currentProgram=ke,q.uniformsList=null,ke}function at(L){if(L.uniformsList===null){const W=L.currentProgram.getUniforms();L.uniformsList=fu.seqWithValue(W.seq,L.uniforms)}return L.uniformsList}function It(L,W){const $=Ne.get(L);$.outputColorSpace=W.outputColorSpace,$.batching=W.batching,$.instancing=W.instancing,$.instancingColor=W.instancingColor,$.instancingMorph=W.instancingMorph,$.skinning=W.skinning,$.morphTargets=W.morphTargets,$.morphNormals=W.morphNormals,$.morphColors=W.morphColors,$.morphTargetsCount=W.morphTargetsCount,$.numClippingPlanes=W.numClippingPlanes,$.numIntersection=W.numClipIntersection,$.vertexAlphas=W.vertexAlphas,$.vertexTangents=W.vertexTangents,$.toneMapping=W.toneMapping}function ui(L,W,$,q,j){W.isScene!==!0&&(W=he),X.resetTextureUnits();const de=W.fog,xe=q.isMeshStandardMaterial?W.environment:null,Me=T===null?_.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:Wr,Be=(q.isMeshStandardMaterial?U:Ye).get(q.envMap||xe),je=q.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,ke=!!$.attributes.tangent&&(!!q.normalMap||q.anisotropy>0),Ue=!!$.morphAttributes.position,gt=!!$.morphAttributes.normal,qt=!!$.morphAttributes.color;let wi=Vr;q.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(wi=_.toneMapping);const Ni=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,tt=Ni!==void 0?Ni.length:0,qe=Ne.get(q),Jn=g.state.lights;if(G===!0&&(Y===!0||L!==M)){const yn=L===M&&q.id===E;ce.setState(q,L,yn)}let _t=!1;q.version===qe.__version?(qe.needsLights&&qe.lightsStateVersion!==Jn.state.version||qe.outputColorSpace!==Me||j.isBatchedMesh&&qe.batching===!1||!j.isBatchedMesh&&qe.batching===!0||j.isInstancedMesh&&qe.instancing===!1||!j.isInstancedMesh&&qe.instancing===!0||j.isSkinnedMesh&&qe.skinning===!1||!j.isSkinnedMesh&&qe.skinning===!0||j.isInstancedMesh&&qe.instancingColor===!0&&j.instanceColor===null||j.isInstancedMesh&&qe.instancingColor===!1&&j.instanceColor!==null||j.isInstancedMesh&&qe.instancingMorph===!0&&j.morphTexture===null||j.isInstancedMesh&&qe.instancingMorph===!1&&j.morphTexture!==null||qe.envMap!==Be||q.fog===!0&&qe.fog!==de||qe.numClippingPlanes!==void 0&&(qe.numClippingPlanes!==ce.numPlanes||qe.numIntersection!==ce.numIntersection)||qe.vertexAlphas!==je||qe.vertexTangents!==ke||qe.morphTargets!==Ue||qe.morphNormals!==gt||qe.morphColors!==qt||qe.toneMapping!==wi||qe.morphTargetsCount!==tt)&&(_t=!0):(_t=!0,qe.__version=q.version);let Zs=qe.currentProgram;_t===!0&&(Zs=Ft(q,W,j));let Uy=!1,Ll=!1,np=!1;const Si=Zs.getUniforms(),ns=qe.uniforms;if(fe.useProgram(Zs.program)&&(Uy=!0,Ll=!0,np=!0),q.id!==E&&(E=q.id,Ll=!0),Uy||M!==L){Si.setValue(V,"projectionMatrix",L.projectionMatrix),Si.setValue(V,"viewMatrix",L.matrixWorldInverse);const yn=Si.map.cameraPosition;yn!==void 0&&yn.setValue(V,te.setFromMatrixPosition(L.matrixWorld)),ge.logarithmicDepthBuffer&&Si.setValue(V,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial)&&Si.setValue(V,"isOrthographic",L.isOrthographicCamera===!0),M!==L&&(M=L,Ll=!0,np=!0)}if(j.isSkinnedMesh){Si.setOptional(V,j,"bindMatrix"),Si.setOptional(V,j,"bindMatrixInverse");const yn=j.skeleton;yn&&(yn.boneTexture===null&&yn.computeBoneTexture(),Si.setValue(V,"boneTexture",yn.boneTexture,X))}j.isBatchedMesh&&(Si.setOptional(V,j,"batchingTexture"),Si.setValue(V,"batchingTexture",j._matricesTexture,X));const rp=$.morphAttributes;if((rp.position!==void 0||rp.normal!==void 0||rp.color!==void 0)&&Oe.update(j,$,Zs),(Ll||qe.receiveShadow!==j.receiveShadow)&&(qe.receiveShadow=j.receiveShadow,Si.setValue(V,"receiveShadow",j.receiveShadow)),q.isMeshGouraudMaterial&&q.envMap!==null&&(ns.envMap.value=Be,ns.flipEnvMap.value=Be.isCubeTexture&&Be.isRenderTargetTexture===!1?-1:1),q.isMeshStandardMaterial&&q.envMap===null&&W.environment!==null&&(ns.envMapIntensity.value=W.environmentIntensity),Ll&&(Si.setValue(V,"toneMappingExposure",_.toneMappingExposure),qe.needsLights&&Ot(ns,np),de&&q.fog===!0&&le.refreshFogUniforms(ns,de),le.refreshMaterialUniforms(ns,q,B,F,g.state.transmissionRenderTarget[L.id]),fu.upload(V,at(qe),ns,X)),q.isShaderMaterial&&q.uniformsNeedUpdate===!0&&(fu.upload(V,at(qe),ns,X),q.uniformsNeedUpdate=!1),q.isSpriteMaterial&&Si.setValue(V,"center",j.center),Si.setValue(V,"modelViewMatrix",j.modelViewMatrix),Si.setValue(V,"normalMatrix",j.normalMatrix),Si.setValue(V,"modelMatrix",j.matrixWorld),q.isShaderMaterial||q.isRawShaderMaterial){const yn=q.uniformsGroups;for(let sp=0,KR=yn.length;sp<KR;sp++){const ky=yn[sp];Je.update(ky,Zs),Je.bind(ky,Zs)}}return Zs}function Ot(L,W){L.ambientLightColor.needsUpdate=W,L.lightProbe.needsUpdate=W,L.directionalLights.needsUpdate=W,L.directionalLightShadows.needsUpdate=W,L.pointLights.needsUpdate=W,L.pointLightShadows.needsUpdate=W,L.spotLights.needsUpdate=W,L.spotLightShadows.needsUpdate=W,L.rectAreaLights.needsUpdate=W,L.hemisphereLights.needsUpdate=W}function Ct(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(L,W,$){Ne.get(L.texture).__webglTexture=W,Ne.get(L.depthTexture).__webglTexture=$;const q=Ne.get(L);q.__hasExternalTextures=!0,q.__autoAllocateDepthBuffer=$===void 0,q.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),q.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(L,W){const $=Ne.get(L);$.__webglFramebuffer=W,$.__useDefaultFramebuffer=W===void 0},this.setRenderTarget=function(L,W=0,$=0){T=L,x=W,S=$;let q=!0,j=null,de=!1,xe=!1;if(L){const Be=Ne.get(L);Be.__useDefaultFramebuffer!==void 0?(fe.bindFramebuffer(V.FRAMEBUFFER,null),q=!1):Be.__webglFramebuffer===void 0?X.setupRenderTarget(L):Be.__hasExternalTextures&&X.rebindTextures(L,Ne.get(L.texture).__webglTexture,Ne.get(L.depthTexture).__webglTexture);const je=L.texture;(je.isData3DTexture||je.isDataArrayTexture||je.isCompressedArrayTexture)&&(xe=!0);const ke=Ne.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Array.isArray(ke[W])?j=ke[W][$]:j=ke[W],de=!0):L.samples>0&&X.useMultisampledRTT(L)===!1?j=Ne.get(L).__webglMultisampledFramebuffer:Array.isArray(ke)?j=ke[$]:j=ke,b.copy(L.viewport),A.copy(L.scissor),C=L.scissorTest}else b.copy(O).multiplyScalar(B).floor(),A.copy(re).multiplyScalar(B).floor(),C=ae;if(fe.bindFramebuffer(V.FRAMEBUFFER,j)&&q&&fe.drawBuffers(L,j),fe.viewport(b),fe.scissor(A),fe.setScissorTest(C),de){const Be=Ne.get(L.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+W,Be.__webglTexture,$)}else if(xe){const Be=Ne.get(L.texture),je=W||0;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,Be.__webglTexture,$||0,je)}E=-1},this.readRenderTargetPixels=function(L,W,$,q,j,de,xe){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Me=Ne.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&xe!==void 0&&(Me=Me[xe]),Me){fe.bindFramebuffer(V.FRAMEBUFFER,Me);try{const Be=L.texture,je=Be.format,ke=Be.type;if(!ge.textureFormatReadable(je)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ge.textureTypeReadable(ke)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}W>=0&&W<=L.width-q&&$>=0&&$<=L.height-j&&V.readPixels(W,$,q,j,Pe.convert(je),Pe.convert(ke),de)}finally{const Be=T!==null?Ne.get(T).__webglFramebuffer:null;fe.bindFramebuffer(V.FRAMEBUFFER,Be)}}},this.copyFramebufferToTexture=function(L,W,$=0){const q=Math.pow(2,-$),j=Math.floor(W.image.width*q),de=Math.floor(W.image.height*q);X.setTexture2D(W,0),V.copyTexSubImage2D(V.TEXTURE_2D,$,0,0,L.x,L.y,j,de),fe.unbindTexture()},this.copyTextureToTexture=function(L,W,$,q=0){const j=W.image.width,de=W.image.height,xe=Pe.convert($.format),Me=Pe.convert($.type);X.setTexture2D($,0),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,$.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,$.unpackAlignment),W.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,q,L.x,L.y,j,de,xe,Me,W.image.data):W.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,q,L.x,L.y,W.mipmaps[0].width,W.mipmaps[0].height,xe,W.mipmaps[0].data):V.texSubImage2D(V.TEXTURE_2D,q,L.x,L.y,xe,Me,W.image),q===0&&$.generateMipmaps&&V.generateMipmap(V.TEXTURE_2D),fe.unbindTexture()},this.copyTextureToTexture3D=function(L,W,$,q,j=0){const de=L.max.x-L.min.x,xe=L.max.y-L.min.y,Me=L.max.z-L.min.z,Be=Pe.convert(q.format),je=Pe.convert(q.type);let ke;if(q.isData3DTexture)X.setTexture3D(q,0),ke=V.TEXTURE_3D;else if(q.isDataArrayTexture||q.isCompressedArrayTexture)X.setTexture2DArray(q,0),ke=V.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,q.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,q.unpackAlignment);const Ue=V.getParameter(V.UNPACK_ROW_LENGTH),gt=V.getParameter(V.UNPACK_IMAGE_HEIGHT),qt=V.getParameter(V.UNPACK_SKIP_PIXELS),wi=V.getParameter(V.UNPACK_SKIP_ROWS),Ni=V.getParameter(V.UNPACK_SKIP_IMAGES),tt=$.isCompressedTexture?$.mipmaps[j]:$.image;V.pixelStorei(V.UNPACK_ROW_LENGTH,tt.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,tt.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,L.min.x),V.pixelStorei(V.UNPACK_SKIP_ROWS,L.min.y),V.pixelStorei(V.UNPACK_SKIP_IMAGES,L.min.z),$.isDataTexture||$.isData3DTexture?V.texSubImage3D(ke,j,W.x,W.y,W.z,de,xe,Me,Be,je,tt.data):q.isCompressedArrayTexture?V.compressedTexSubImage3D(ke,j,W.x,W.y,W.z,de,xe,Me,Be,tt.data):V.texSubImage3D(ke,j,W.x,W.y,W.z,de,xe,Me,Be,je,tt),V.pixelStorei(V.UNPACK_ROW_LENGTH,Ue),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,gt),V.pixelStorei(V.UNPACK_SKIP_PIXELS,qt),V.pixelStorei(V.UNPACK_SKIP_ROWS,wi),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Ni),j===0&&q.generateMipmaps&&V.generateMipmap(ke),fe.unbindTexture()},this.initTexture=function(L){L.isCubeTexture?X.setTextureCube(L,0):L.isData3DTexture?X.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?X.setTexture2DArray(L,0):X.setTexture2D(L,0),fe.unbindTexture()},this.resetState=function(){x=0,S=0,T=null,fe.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return fr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Bf?"display-p3":"srgb",t.unpackColorSpace=bt.workingColorSpace===Fc?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class v0 extends tn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new mr,this.environmentIntensity=1,this.environmentRotation=new mr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class EA extends yi{constructor(e=null,t=1,i=1,r,s,a,o,l,c=Ii,d=Ii,h,f){super(null,a,o,l,c,d,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _0={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class AA{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){o++,s===!1&&r.onStart!==void 0&&r.onStart(d,a,o),s=!0},this.itemEnd=function(d){a++,r.onProgress!==void 0&&r.onProgress(d,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return h!==-1&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,f=c.length;h<f;h+=2){const u=c[h],m=c[h+1];if(u.global&&(u.lastIndex=0),u.test(d))return m}return null}}}const CA=new AA;class vh{constructor(e){this.manager=e!==void 0?e:CA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}vh.DEFAULT_MATERIAL_NAME="__DEFAULT";class PA extends vh{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=_0.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=al("img");function l(){d(),_0.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class y0 extends vh{constructor(e){super(e)}load(e,t,i,r){const s=new yi,a=new PA(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ef}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ef);function RA(n){if(!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=n,document.head.appendChild(e),n}}function eo(n,e){var t=n.__state.conversionName.toString(),i=Math.round(n.r),r=Math.round(n.g),s=Math.round(n.b),a=n.a,o=Math.round(n.h),l=n.s.toFixed(1),c=n.v.toFixed(1);if(e||t==="THREE_CHAR_HEX"||t==="SIX_CHAR_HEX"){for(var d=n.hex.toString(16);d.length<6;)d="0"+d;return"#"+d}else{if(t==="CSS_RGB")return"rgb("+i+","+r+","+s+")";if(t==="CSS_RGBA")return"rgba("+i+","+r+","+s+","+a+")";if(t==="HEX")return"0x"+n.hex.toString(16);if(t==="RGB_ARRAY")return"["+i+","+r+","+s+"]";if(t==="RGBA_ARRAY")return"["+i+","+r+","+s+","+a+"]";if(t==="RGB_OBJ")return"{r:"+i+",g:"+r+",b:"+s+"}";if(t==="RGBA_OBJ")return"{r:"+i+",g:"+r+",b:"+s+",a:"+a+"}";if(t==="HSV_OBJ")return"{h:"+o+",s:"+l+",v:"+c+"}";if(t==="HSVA_OBJ")return"{h:"+o+",s:"+l+",v:"+c+",a:"+a+"}"}return"unknown format"}var x0=Array.prototype.forEach,ml=Array.prototype.slice,se={BREAK:{},extend:function(e){return this.each(ml.call(arguments,1),function(t){var i=this.isObject(t)?Object.keys(t):[];i.forEach((function(r){this.isUndefined(t[r])||(e[r]=t[r])}).bind(this))},this),e},defaults:function(e){return this.each(ml.call(arguments,1),function(t){var i=this.isObject(t)?Object.keys(t):[];i.forEach((function(r){this.isUndefined(e[r])&&(e[r]=t[r])}).bind(this))},this),e},compose:function(){var e=ml.call(arguments);return function(){for(var t=ml.call(arguments),i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,i){if(e){if(x0&&e.forEach&&e.forEach===x0)e.forEach(t,i);else if(e.length===e.length+0){var r=void 0,s=void 0;for(r=0,s=e.length;r<s;r++)if(r in e&&t.call(i,e[r],r)===this.BREAK)return}else for(var a in e)if(t.call(i,e[a],a)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var r=void 0;return function(){var s=this,a=arguments;function o(){r=null,i||e.apply(s,a)}var l=i||!r;clearTimeout(r),r=setTimeout(o,t),l&&e.apply(s,a)}},toArray:function(e){return e.toArray?e.toArray():ml.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(n){function e(t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){return isNaN(n)}),isArray:Array.isArray||function(n){return n.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},LA=[{litmus:se.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:eo},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:eo},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:eo},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:eo}}},{litmus:se.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:se.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:se.isObject,conversions:{RGBA_OBJ:{read:function(e){return se.isNumber(e.r)&&se.isNumber(e.g)&&se.isNumber(e.b)&&se.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return se.isNumber(e.r)&&se.isNumber(e.g)&&se.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return se.isNumber(e.h)&&se.isNumber(e.s)&&se.isNumber(e.v)&&se.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return se.isNumber(e.h)&&se.isNumber(e.s)&&se.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],gl=void 0,pu=void 0,_h=function(){pu=!1;var e=arguments.length>1?se.toArray(arguments):arguments[0];return se.each(LA,function(t){if(t.litmus(e))return se.each(t.conversions,function(i,r){if(gl=i.read(e),pu===!1&&gl!==!1)return pu=gl,gl.conversionName=r,gl.conversion=i,se.BREAK}),se.BREAK}),pu},b0=void 0,mu={hsv_to_rgb:function(e,t,i){var r=Math.floor(e/60)%6,s=e/60-Math.floor(e/60),a=i*(1-t),o=i*(1-s*t),l=i*(1-(1-s)*t),c=[[i,l,a],[o,i,a],[a,i,l],[a,o,i],[l,a,i],[i,a,o]][r];return{r:c[0]*255,g:c[1]*255,b:c[2]*255}},rgb_to_hsv:function(e,t,i){var r=Math.min(e,t,i),s=Math.max(e,t,i),a=s-r,o=void 0,l=void 0;if(s!==0)l=a/s;else return{h:NaN,s:0,v:0};return e===s?o=(t-i)/a:t===s?o=2+(i-e)/a:o=4+(e-t)/a,o/=6,o<0&&(o+=1),{h:o*360,s:l,v:s/255}},rgb_to_hex:function(e,t,i){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,i),r},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(e,t,i){return i<<(b0=t*8)|e&~(255<<b0)}},DA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rn=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Ln=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),Zr=function n(e,t,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:n(s,t,i)}else{if("value"in r)return r.value;var a=r.get;return a===void 0?void 0:a.call(i)}},Qr=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},Jr=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},oi=function(){function n(){if(Rn(this,n),this.__state=_h.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Ln(n,[{key:"toString",value:function(){return eo(this)}},{key:"toHexString",value:function(){return eo(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),n}();function yh(n,e,t){Object.defineProperty(n,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(oi.recalculateRGB(this,e,t),this.__state[e])},set:function(r){this.__state.space!=="RGB"&&(oi.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=r}})}function xh(n,e){Object.defineProperty(n,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(oi.recalculateHSV(this),this.__state[e])},set:function(i){this.__state.space!=="HSV"&&(oi.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=i}})}oi.recalculateRGB=function(n,e,t){if(n.__state.space==="HEX")n.__state[e]=mu.component_from_hex(n.__state.hex,t);else if(n.__state.space==="HSV")se.extend(n.__state,mu.hsv_to_rgb(n.__state.h,n.__state.s,n.__state.v));else throw new Error("Corrupted color state")},oi.recalculateHSV=function(n){var e=mu.rgb_to_hsv(n.r,n.g,n.b);se.extend(n.__state,{s:e.s,v:e.v}),se.isNaN(e.h)?se.isUndefined(n.__state.h)&&(n.__state.h=0):n.__state.h=e.h},oi.COMPONENTS=["r","g","b","h","s","v","hex","a"],yh(oi.prototype,"r",2),yh(oi.prototype,"g",1),yh(oi.prototype,"b",0),xh(oi.prototype,"h"),xh(oi.prototype,"s"),xh(oi.prototype,"v"),Object.defineProperty(oi.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(oi.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=mu.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var qs=function(){function n(e,t){Rn(this,n),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return Ln(n,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),n}(),IA={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},w0={};se.each(IA,function(n,e){se.each(n,function(t){w0[t]=e})});var OA=/(\d+(\.\d+)?)px/;function Kn(n){if(n==="0"||se.isUndefined(n))return 0;var e=n.match(OA);return se.isNull(e)?0:parseFloat(e[1])}var Z={makeSelectable:function(e,t){e===void 0||e.style===void 0||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,i){var r=i,s=t;se.isUndefined(s)&&(s=!0),se.isUndefined(r)&&(r=!0),e.style.position="absolute",s&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,i,r){var s=i||{},a=w0[t];if(!a)throw new Error("Event type "+t+" not supported.");var o=document.createEvent(a);switch(a){case"MouseEvents":{var l=s.x||s.clientX||0,c=s.y||s.clientY||0;o.initMouseEvent(t,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var d=o.initKeyboardEvent||o.initKeyEvent;se.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:{o.initEvent(t,s.bubbles||!1,s.cancelable||!0);break}}se.defaults(o,r),e.dispatchEvent(o)},bind:function(e,t,i,r){var s=r||!1;return e.addEventListener?e.addEventListener(t,i,s):e.attachEvent&&e.attachEvent("on"+t,i),Z},unbind:function(e,t,i,r){var s=r||!1;return e.removeEventListener?e.removeEventListener(t,i,s):e.detachEvent&&e.detachEvent("on"+t,i),Z},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);i.indexOf(t)===-1&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Z},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),r=i.indexOf(t);r!==-1&&(i.splice(r,1),e.className=i.join(" "))}else e.className=void 0;return Z},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return Kn(t["border-left-width"])+Kn(t["border-right-width"])+Kn(t["padding-left"])+Kn(t["padding-right"])+Kn(t.width)},getHeight:function(e){var t=getComputedStyle(e);return Kn(t["border-top-width"])+Kn(t["border-bottom-width"])+Kn(t["padding-top"])+Kn(t["padding-bottom"])+Kn(t.height)},getOffset:function(e){var t=e,i={left:0,top:0};if(t.offsetParent)do i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent;while(t);return i},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},S0=function(n){Qr(e,n);function e(t,i){Rn(this,e);var r=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r;r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox");function a(){s.setValue(!s.__prev)}return Z.bind(r.__checkbox,"change",a,!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return Ln(e,[{key:"setValue",value:function(i){var r=Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(qs),NA=function(n){Qr(e,n);function e(t,i,r){Rn(this,e);var s=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),a=r,o=s;if(s.__select=document.createElement("select"),se.isArray(a)){var l={};se.each(a,function(c){l[c]=c}),a=l}return se.each(a,function(c,d){var h=document.createElement("option");h.innerHTML=d,h.setAttribute("value",c),o.__select.appendChild(h)}),s.updateDisplay(),Z.bind(s.__select,"change",function(){var c=this.options[this.selectedIndex].value;o.setValue(c)}),s.domElement.appendChild(s.__select),s}return Ln(e,[{key:"setValue",value:function(i){var r=Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return Z.isActive(this.__select)?this:(this.__select.value=this.getValue(),Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(qs),UA=function(n){Qr(e,n);function e(t,i){Rn(this,e);var r=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r;function a(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Z.bind(r.__input,"keyup",a),Z.bind(r.__input,"change",a),Z.bind(r.__input,"blur",o),Z.bind(r.__input,"keydown",function(l){l.keyCode===13&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Ln(e,[{key:"updateDisplay",value:function(){return Z.isActive(this.__input)||(this.__input.value=this.getValue()),Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(qs);function M0(n){var e=n.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var T0=function(n){Qr(e,n);function e(t,i,r){Rn(this,e);var s=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),a=r||{};return s.__min=a.min,s.__max=a.max,s.__step=a.step,se.isUndefined(s.__step)?s.initialValue===0?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=M0(s.__impliedStep),s}return Ln(e,[{key:"setValue",value:function(i){var r=i;return this.__min!==void 0&&r<this.__min?r=this.__min:this.__max!==void 0&&r>this.__max&&(r=this.__max),this.__step!==void 0&&r%this.__step!==0&&(r=Math.round(r/this.__step)*this.__step),Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(i){return this.__min=i,this}},{key:"max",value:function(i){return this.__max=i,this}},{key:"step",value:function(i){return this.__step=i,this.__impliedStep=i,this.__precision=M0(i),this}}]),e}(qs);function kA(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}var gu=function(n){Qr(e,n);function e(t,i,r){Rn(this,e);var s=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,r));s.__truncationSuspended=!1;var a=s,o=void 0;function l(){var m=parseFloat(a.__input.value);se.isNaN(m)||a.setValue(m)}function c(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function d(){c()}function h(m){var p=o-m.clientY;a.setValue(a.getValue()+p*a.__impliedStep),o=m.clientY}function f(){Z.unbind(window,"mousemove",h),Z.unbind(window,"mouseup",f),c()}function u(m){Z.bind(window,"mousemove",h),Z.bind(window,"mouseup",f),o=m.clientY}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),Z.bind(s.__input,"change",l),Z.bind(s.__input,"blur",d),Z.bind(s.__input,"mousedown",u),Z.bind(s.__input,"keydown",function(m){m.keyCode===13&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,c())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return Ln(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():kA(this.getValue(),this.__precision),Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(T0);function E0(n,e,t,i,r){return i+(r-i)*((n-e)/(t-e))}var bh=function(n){Qr(e,n);function e(t,i,r,s,a){Rn(this,e);var o=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,{min:r,max:s,step:a})),l=o;o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),Z.bind(o.__background,"mousedown",c),Z.bind(o.__background,"touchstart",f),Z.addClass(o.__background,"slider"),Z.addClass(o.__foreground,"slider-fg");function c(p){document.activeElement.blur(),Z.bind(window,"mousemove",d),Z.bind(window,"mouseup",h),d(p)}function d(p){p.preventDefault();var g=l.__background.getBoundingClientRect();return l.setValue(E0(p.clientX,g.left,g.right,l.__min,l.__max)),!1}function h(){Z.unbind(window,"mousemove",d),Z.unbind(window,"mouseup",h),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function f(p){p.touches.length===1&&(Z.bind(window,"touchmove",u),Z.bind(window,"touchend",m),u(p))}function u(p){var g=p.touches[0].clientX,v=l.__background.getBoundingClientRect();l.setValue(E0(g,v.left,v.right,l.__min,l.__max))}function m(){Z.unbind(window,"touchmove",u),Z.unbind(window,"touchend",m),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}return o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return Ln(e,[{key:"updateDisplay",value:function(){var i=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=i*100+"%",Zr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(T0),A0=function(n){Qr(e,n);function e(t,i,r){Rn(this,e);var s=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),a=s;return s.__button=document.createElement("div"),s.__button.innerHTML=r===void 0?"Fire":r,Z.bind(s.__button,"click",function(o){return o.preventDefault(),a.fire(),!1}),Z.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return Ln(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(qs),wh=function(n){Qr(e,n);function e(t,i){Rn(this,e);var r=Jr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));r.__color=new oi(r.getValue()),r.__temp=new oi(0);var s=r;r.domElement=document.createElement("div"),Z.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",Z.bind(r.__input,"keydown",function(p){p.keyCode===13&&h.call(this)}),Z.bind(r.__input,"blur",h),Z.bind(r.__selector,"mousedown",function(){Z.addClass(this,"drag").bind(window,"mouseup",function(){Z.removeClass(s.__selector,"drag")})}),Z.bind(r.__selector,"touchstart",function(){Z.addClass(this,"drag").bind(window,"touchend",function(){Z.removeClass(s.__selector,"drag")})});var a=document.createElement("div");se.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),se.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),se.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),se.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),se.extend(a.style,{width:"100%",height:"100%",background:"none"}),C0(a,"top","rgba(0,0,0,0)","#000"),se.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),BA(r.__hue_field),se.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),Z.bind(r.__saturation_field,"mousedown",o),Z.bind(r.__saturation_field,"touchstart",o),Z.bind(r.__field_knob,"mousedown",o),Z.bind(r.__field_knob,"touchstart",o),Z.bind(r.__hue_field,"mousedown",l),Z.bind(r.__hue_field,"touchstart",l);function o(p){u(p),Z.bind(window,"mousemove",u),Z.bind(window,"touchmove",u),Z.bind(window,"mouseup",c),Z.bind(window,"touchend",c)}function l(p){m(p),Z.bind(window,"mousemove",m),Z.bind(window,"touchmove",m),Z.bind(window,"mouseup",d),Z.bind(window,"touchend",d)}function c(){Z.unbind(window,"mousemove",u),Z.unbind(window,"touchmove",u),Z.unbind(window,"mouseup",c),Z.unbind(window,"touchend",c),f()}function d(){Z.unbind(window,"mousemove",m),Z.unbind(window,"touchmove",m),Z.unbind(window,"mouseup",d),Z.unbind(window,"touchend",d),f()}function h(){var p=_h(this.value);p!==!1?(s.__color.__state=p,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function f(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay();function u(p){p.type.indexOf("touch")===-1&&p.preventDefault();var g=s.__saturation_field.getBoundingClientRect(),v=p.touches&&p.touches[0]||p,y=v.clientX,_=v.clientY,w=(y-g.left)/(g.right-g.left),x=1-(_-g.top)/(g.bottom-g.top);return x>1?x=1:x<0&&(x=0),w>1?w=1:w<0&&(w=0),s.__color.v=x,s.__color.s=w,s.setValue(s.__color.toOriginal()),!1}function m(p){p.type.indexOf("touch")===-1&&p.preventDefault();var g=s.__hue_field.getBoundingClientRect(),v=p.touches&&p.touches[0]||p,y=v.clientY,_=1-(y-g.top)/(g.bottom-g.top);return _>1?_=1:_<0&&(_=0),s.__color.h=_*360,s.setValue(s.__color.toOriginal()),!1}return r}return Ln(e,[{key:"updateDisplay",value:function(){var i=_h(this.getValue());if(i!==!1){var r=!1;se.each(oi.COMPONENTS,function(o){if(!se.isUndefined(i[o])&&!se.isUndefined(this.__color.__state[o])&&i[o]!==this.__color.__state[o])return r=!0,{}},this),r&&se.extend(this.__color.__state,i)}se.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;se.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,C0(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),se.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}}]),e}(qs),FA=["-moz-","-o-","-webkit-","-ms-",""];function C0(n,e,t,i){n.style.background="",se.each(FA,function(r){n.style.cssText+="background: "+r+"linear-gradient("+e+", "+t+" 0%, "+i+" 100%); "})}function BA(n){n.style.background="",n.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",n.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var zA={load:function(e,t){var i=t||document,r=i.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,i.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){var i=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var s=i.getElementsByTagName("head")[0];try{s.appendChild(r)}catch{}}},VA=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,HA=function(e,t){var i=e[t];return se.isArray(arguments[2])||se.isObject(arguments[2])?new NA(e,t,arguments[2]):se.isNumber(i)?se.isNumber(arguments[2])&&se.isNumber(arguments[3])?se.isNumber(arguments[4])?new bh(e,t,arguments[2],arguments[3],arguments[4]):new bh(e,t,arguments[2],arguments[3]):se.isNumber(arguments[4])?new gu(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new gu(e,t,{min:arguments[2],max:arguments[3]}):se.isString(i)?new UA(e,t):se.isFunction(i)?new A0(e,t,""):se.isBoolean(i)?new S0(e,t):null};function GA(n){setTimeout(n,1e3/60)}var WA=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||GA,XA=function(){function n(){Rn(this,n),this.backgroundElement=document.createElement("div"),se.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Z.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),se.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;Z.bind(this.backgroundElement,"click",function(){e.hide()})}return Ln(n,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),se.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,i=function r(){t.domElement.style.display="none",t.backgroundElement.style.display="none",Z.unbind(t.domElement,"webkitTransitionEnd",r),Z.unbind(t.domElement,"transitionend",r),Z.unbind(t.domElement,"oTransitionEnd",r)};Z.bind(this.domElement,"webkitTransitionEnd",i),Z.bind(this.domElement,"transitionend",i),Z.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Z.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Z.getHeight(this.domElement)/2+"px"}}]),n}(),$A=RA(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);zA.inject($A);var P0="dg",R0=72,L0=20,vl="Default",_l=function(){try{return!!window.localStorage}catch{return!1}}(),yl=void 0,D0=!0,to=void 0,Sh=!1,I0=[],Et=function n(e){var t=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Z.addClass(this.domElement,P0),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=se.defaults(i,{closeOnTop:!1,autoPlace:!0,width:n.DEFAULT_WIDTH}),i=se.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),se.isUndefined(i.load)?i.load={preset:vl}:i.preset&&(i.load.preset=i.preset),se.isUndefined(i.parent)&&i.hideable&&I0.push(this),i.resizable=se.isUndefined(i.parent)&&i.resizable,i.autoPlace&&se.isUndefined(i.scrollable)&&(i.scrollable=!0);var r=_l&&localStorage.getItem(io(this,"isLocal"))==="true",s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:i.load.preset},set:function(f){t.parent?t.getRoot().preset=f:i.load.preset=f,KA(this),t.revert()}},width:{get:function(){return i.width},set:function(f){i.width=f,Ah(t,f)}},name:{get:function(){return i.name},set:function(f){i.name=f,a&&(a.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(f){i.closed=f,i.closed?Z.addClass(t.__ul,n.CLASS_CLOSED):Z.removeClass(t.__ul,n.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=f?n.TEXT_OPEN:n.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return r},set:function(f){_l&&(r=f,f?Z.bind(window,"unload",s):Z.unbind(window,"unload",s),localStorage.setItem(io(t,"isLocal"),f))}}}),se.isUndefined(i.parent)){if(this.closed=i.closed||!1,Z.addClass(this.domElement,n.CLASS_MAIN),Z.makeSelectable(this.domElement,!1),_l&&r){t.useLocalStorage=!0;var o=localStorage.getItem(io(this,"gui"));o&&(i.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=n.TEXT_CLOSED,Z.addClass(this.__closeButton,n.CLASS_CLOSE_BUTTON),i.closeOnTop?(Z.addClass(this.__closeButton,n.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Z.addClass(this.__closeButton,n.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Z.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{i.closed===void 0&&(i.closed=!0);var l=document.createTextNode(i.name);Z.addClass(l,"controller-name"),a=Mh(t,l);var c=function(f){return f.preventDefault(),t.closed=!t.closed,!1};Z.addClass(this.__ul,n.CLASS_CLOSED),Z.addClass(a,"title"),Z.bind(a,"click",c),i.closed||(this.closed=!1)}i.autoPlace&&(se.isUndefined(i.parent)&&(D0&&(to=document.createElement("div"),Z.addClass(to,P0),Z.addClass(to,n.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(to),D0=!1),to.appendChild(this.domElement),Z.addClass(this.domElement,n.CLASS_AUTO_PLACE)),this.parent||Ah(t,i.width)),this.__resizeHandler=function(){t.onResizeDebounced()},Z.bind(window,"resize",this.__resizeHandler),Z.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Z.bind(this.__ul,"transitionend",this.__resizeHandler),Z.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&jA(this),s=function(){_l&&localStorage.getItem(io(t,"isLocal"))==="true"&&localStorage.setItem(io(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=s;function d(){var h=t.getRoot();h.width+=1,se.defer(function(){h.width-=1})}i.parent||d()};Et.toggleHide=function(){Sh=!Sh,se.each(I0,function(n){n.domElement.style.display=Sh?"none":""})},Et.CLASS_AUTO_PLACE="a",Et.CLASS_AUTO_PLACE_CONTAINER="ac",Et.CLASS_MAIN="main",Et.CLASS_CONTROLLER_ROW="cr",Et.CLASS_TOO_TALL="taller-than-window",Et.CLASS_CLOSED="closed",Et.CLASS_CLOSE_BUTTON="close-button",Et.CLASS_CLOSE_TOP="close-top",Et.CLASS_CLOSE_BOTTOM="close-bottom",Et.CLASS_DRAG="drag",Et.DEFAULT_WIDTH=245,Et.TEXT_CLOSED="Close Controls",Et.TEXT_OPEN="Open Controls",Et._keydownHandler=function(n){document.activeElement.type!=="text"&&(n.which===R0||n.keyCode===R0)&&Et.toggleHide()},Z.bind(window,"keydown",Et._keydownHandler,!1),se.extend(Et.prototype,{add:function(e,t){return xl(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return xl(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;se.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&to.removeChild(this.domElement);var e=this;se.each(this.__folders,function(t){e.removeFolder(t)}),Z.unbind(window,"keydown",Et._keydownHandler,!1),O0(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new Et(t);this.__folders[e]=i;var r=Mh(this,i.domElement);return Z.addClass(r,"folder"),i},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],O0(e);var t=this;se.each(e.__folders,function(i){e.removeFolder(i)}),se.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Z.getOffset(e.__ul).top,i=0;se.each(e.__ul.childNodes,function(r){e.autoPlace&&r===e.__save_row||(i+=Z.getHeight(r))}),window.innerHeight-t-L0<i?(Z.addClass(e.domElement,Et.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-L0+"px"):(Z.removeClass(e.domElement,Et.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&se.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:se.debounce(function(){this.onResize()},50),remember:function(){if(se.isUndefined(yl)&&(yl=new XA,yl.domElement.innerHTML=VA),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;se.each(Array.prototype.slice.call(arguments),function(t){e.__rememberedObjects.length===0&&YA(e),e.__rememberedObjects.indexOf(t)===-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&Ah(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=vu(this)),e.folders={},se.each(this.__folders,function(t,i){e.folders[i]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=vu(this),Th(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[vl]=vu(this,!0)),this.load.remembered[e]=vu(this),this.preset=e,Eh(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){se.each(this.__controllers,function(t){this.getRoot().load.remembered?N0(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),se.each(this.__folders,function(t){t.revert(t)}),e||Th(this.getRoot(),!1)},listen:function(e){var t=this.__listening.length===0;this.__listening.push(e),t&&k0(this.__listening)},updateDisplay:function(){se.each(this.__controllers,function(e){e.updateDisplay()}),se.each(this.__folders,function(e){e.updateDisplay()})}});function Mh(n,e,t){var i=document.createElement("li");return e&&i.appendChild(e),t?n.__ul.insertBefore(i,t):n.__ul.appendChild(i),n.onResize(),i}function O0(n){Z.unbind(window,"resize",n.__resizeHandler),n.saveToLocalStorageIfPossible&&Z.unbind(window,"unload",n.saveToLocalStorageIfPossible)}function Th(n,e){var t=n.__preset_select[n.__preset_select.selectedIndex];e?t.innerHTML=t.value+"*":t.innerHTML=t.value}function qA(n,e,t){if(t.__li=e,t.__gui=n,se.extend(t,{options:function(a){if(arguments.length>1){var o=t.__li.nextElementSibling;return t.remove(),xl(n,t.object,t.property,{before:o,factoryArgs:[se.toArray(arguments)]})}if(se.isArray(a)||se.isObject(a)){var l=t.__li.nextElementSibling;return t.remove(),xl(n,t.object,t.property,{before:l,factoryArgs:[a]})}},name:function(a){return t.__li.firstElementChild.firstElementChild.innerHTML=a,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof bh){var i=new gu(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});se.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var a=t[s],o=i[s];t[s]=i[s]=function(){var l=Array.prototype.slice.call(arguments);return o.apply(i,l),a.apply(t,l)}}),Z.addClass(e,"has-slider"),t.domElement.insertBefore(i.domElement,t.domElement.firstElementChild)}else if(t instanceof gu){var r=function(a){if(se.isNumber(t.__min)&&se.isNumber(t.__max)){var o=t.__li.firstElementChild.firstElementChild.innerHTML,l=t.__gui.__listening.indexOf(t)>-1;t.remove();var c=xl(n,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return c.name(o),l&&c.listen(),c}return a};t.min=se.compose(r,t.min),t.max=se.compose(r,t.max)}else t instanceof S0?(Z.bind(e,"click",function(){Z.fakeEvent(t.__checkbox,"click")}),Z.bind(t.__checkbox,"click",function(s){s.stopPropagation()})):t instanceof A0?(Z.bind(e,"click",function(){Z.fakeEvent(t.__button,"click")}),Z.bind(e,"mouseover",function(){Z.addClass(t.__button,"hover")}),Z.bind(e,"mouseout",function(){Z.removeClass(t.__button,"hover")})):t instanceof wh&&(Z.addClass(e,"color"),t.updateDisplay=se.compose(function(s){return e.style.borderLeftColor=t.__color.toString(),s},t.updateDisplay),t.updateDisplay());t.setValue=se.compose(function(s){return n.getRoot().__preset_select&&t.isModified()&&Th(n.getRoot(),!0),s},t.setValue)}function N0(n,e){var t=n.getRoot(),i=t.__rememberedObjects.indexOf(e.object);if(i!==-1){var r=t.__rememberedObjectIndecesToControllers[i];if(r===void 0&&(r={},t.__rememberedObjectIndecesToControllers[i]=r),r[e.property]=e,t.load&&t.load.remembered){var s=t.load.remembered,a=void 0;if(s[n.preset])a=s[n.preset];else if(s[vl])a=s[vl];else return;if(a[i]&&a[i][e.property]!==void 0){var o=a[i][e.property];e.initialValue=o,e.setValue(o)}}}}function xl(n,e,t,i){if(e[t]===void 0)throw new Error('Object "'+e+'" has no property "'+t+'"');var r=void 0;if(i.color)r=new wh(e,t);else{var s=[e,t].concat(i.factoryArgs);r=HA.apply(n,s)}i.before instanceof qs&&(i.before=i.before.__li),N0(n,r),Z.addClass(r.domElement,"c");var a=document.createElement("span");Z.addClass(a,"property-name"),a.innerHTML=r.property;var o=document.createElement("div");o.appendChild(a),o.appendChild(r.domElement);var l=Mh(n,o,i.before);return Z.addClass(l,Et.CLASS_CONTROLLER_ROW),r instanceof wh?Z.addClass(l,"color"):Z.addClass(l,DA(r.getValue())),qA(n,l,r),n.__controllers.push(r),r}function io(n,e){return document.location.href+"."+e}function Eh(n,e,t){var i=document.createElement("option");i.innerHTML=e,i.value=e,n.__preset_select.appendChild(i),t&&(n.__preset_select.selectedIndex=n.__preset_select.length-1)}function U0(n,e){e.style.display=n.useLocalStorage?"block":"none"}function YA(n){var e=n.__save_row=document.createElement("li");Z.addClass(n.domElement,"has-save"),n.__ul.insertBefore(e,n.__ul.firstChild),Z.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",Z.addClass(t,"button gears");var i=document.createElement("span");i.innerHTML="Save",Z.addClass(i,"button"),Z.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",Z.addClass(r,"button"),Z.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",Z.addClass(s,"button"),Z.addClass(s,"revert");var a=n.__preset_select=document.createElement("select");if(n.load&&n.load.remembered?se.each(n.load.remembered,function(h,f){Eh(n,f,f===n.preset)}):Eh(n,vl,!1),Z.bind(a,"change",function(){for(var h=0;h<n.__preset_select.length;h++)n.__preset_select[h].innerHTML=n.__preset_select[h].value;n.preset=this.value}),e.appendChild(a),e.appendChild(t),e.appendChild(i),e.appendChild(r),e.appendChild(s),_l){var o=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block",localStorage.getItem(io(n,"isLocal"))==="true"&&l.setAttribute("checked","checked"),U0(n,o),Z.bind(l,"change",function(){n.useLocalStorage=!n.useLocalStorage,U0(n,o)})}var d=document.getElementById("dg-new-constructor");Z.bind(d,"keydown",function(h){h.metaKey&&(h.which===67||h.keyCode===67)&&yl.hide()}),Z.bind(t,"click",function(){d.innerHTML=JSON.stringify(n.getSaveObject(),void 0,2),yl.show(),d.focus(),d.select()}),Z.bind(i,"click",function(){n.save()}),Z.bind(r,"click",function(){var h=prompt("Enter a new preset name.");h&&n.saveAs(h)}),Z.bind(s,"click",function(){n.revert()})}function jA(n){var e=void 0;n.__resize_handle=document.createElement("div"),se.extend(n.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function t(s){return s.preventDefault(),n.width+=e-s.clientX,n.onResize(),e=s.clientX,!1}function i(){Z.removeClass(n.__closeButton,Et.CLASS_DRAG),Z.unbind(window,"mousemove",t),Z.unbind(window,"mouseup",i)}function r(s){return s.preventDefault(),e=s.clientX,Z.addClass(n.__closeButton,Et.CLASS_DRAG),Z.bind(window,"mousemove",t),Z.bind(window,"mouseup",i),!1}Z.bind(n.__resize_handle,"mousedown",r),Z.bind(n.__closeButton,"mousedown",r),n.domElement.insertBefore(n.__resize_handle,n.domElement.firstElementChild)}function Ah(n,e){n.domElement.style.width=e+"px",n.__save_row&&n.autoPlace&&(n.__save_row.style.width=e+"px"),n.__closeButton&&(n.__closeButton.style.width=e+"px")}function vu(n,e){var t={};return se.each(n.__rememberedObjects,function(i,r){var s={},a=n.__rememberedObjectIndecesToControllers[r];se.each(a,function(o,l){s[l]=e?o.initialValue:o.getValue()}),t[r]=s}),t}function KA(n){for(var e=0;e<n.__preset_select.length;e++)n.__preset_select[e].value===n.preset&&(n.__preset_select.selectedIndex=e)}function k0(n){n.length!==0&&WA.call(window,function(){k0(n)}),se.each(n,function(e){e.updateDisplay()})}var ZA=Et,QA=`uniform float time;
varying vec2 vUv;
varying vec3 vPosition;
uniform vec2 pixels;
float PI = 3.141592653589793238;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,JA=`uniform float time;
uniform float progress;
uniform float rgbStrength;
uniform float rgbOpacity;
uniform sampler2D uDataTexture;
uniform sampler2D uTexture;

uniform vec4 resolution;
varying vec2 vUv;
varying vec3 vPosition;
float PI = 3.141592653589793238;
void main() {
    vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);
    vec4 color = texture2D(uTexture, newUV);
    vec4 offset = texture2D(uDataTexture, vUv);

    
    vec2 redUV = newUV + vec2(-rgbStrength, 0.0) * offset.rg;
    vec2 greenUV = newUV + vec2(0.0, rgbStrength) * offset.rg;
    vec2 blueUV = newUV + vec2(rgbStrength, -rgbStrength) * offset.rg;

    float red = texture2D(uTexture, redUV).r;
    float green = texture2D(uTexture, greenUV).g;
    float blue = texture2D(uTexture, blueUV).b;

    vec4 distortedColor = vec4(red, green, blue, 1.0);

    
    float mixFactor = clamp(length(offset.rg) * rgbOpacity, 0.0, 1.0);
    color = mix(color, distortedColor, mixFactor);

    gl_FragColor = color;
}`;function eC(n,e,t){return Math.max(e,Math.min(n,t))}class tC{constructor(e){this.showGUI=e.showGUI||!1,this.scene=new v0,this.container=e.dom,this.img=this.container.querySelector("img"),this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer=new g0,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(15658734,1),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=void 0,this.container.appendChild(this.renderer.domElement),this.camera=new rn(70,window.innerWidth/window.innerHeight,.1,100);var t=1;this.camera=new V_(t/-2,t/2,t/2,t/-2,-1e3,1e3),this.camera.position.set(0,0,2),this.time=0,this.mouse={x:0,y:0,prevX:0,prevY:0,vX:0,vY:0},this.isPlaying=!0,this.settings(),this.addObjects(),this.resize(),this.render(),this.setupResize(),this.showGUI&&this.setupGUI(),this.mouseEvents()}getValue(e){return parseFloat(this.container.getAttribute("data-"+e))}mouseEvents(){this.container.addEventListener("mousemove",e=>{const t=this.container.getBoundingClientRect();this.mouse.x=(e.clientX-t.left)/this.width,this.mouse.y=(e.clientY-t.top)/this.height,this.mouse.vX=this.mouse.x-this.mouse.prevX,this.mouse.vY=this.mouse.y-this.mouse.prevY,this.mouse.prevX=this.mouse.x,this.mouse.prevY=this.mouse.y})}settings(){this.settings={grid:this.getValue("grid")||34,mouse:this.getValue("mouse")||.25,strength:this.getValue("strength")||1,relaxation:this.getValue("relaxation")||.9,aspectRatio:this.getValue("aspectratio")||1,rgbStrength:this.getValue("rgbstrength")||.01,rgbOpacity:this.getValue("rgbopacity")||.5}}setupResize(){window.addEventListener("resize",this.resize.bind(this))}resize(){this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.imageAspect=1/this.settings.aspectRatio;let e,t;this.height/this.width>this.imageAspect?(e=this.width/this.height*this.imageAspect,t=1):(e=1,t=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=e,this.material.uniforms.resolution.value.w=t,this.camera.updateProjectionMatrix(),this.regenerateGrid()}regenerateGrid(){this.size=this.settings.grid;const e=this.size,t=this.size,i=e*t,r=new Float32Array(4*i);new yt(16777215);for(let s=0;s<i;s++){let a=Math.random()*255-125,o=Math.random()*255-125;const l=s*4;r[l]=a,r[l+1]=o,r[l+2]=a,r[l+3]=255}this.texture=new EA(r,e,t,mn,dr),this.texture.magFilter=this.texture.minFilter=Ii,this.texture.needsUpdate=!0,this.material&&(this.material.uniforms.uDataTexture.value=this.texture)}addObjects(){this.regenerateGrid(),new y0().load(this.img.src,t=>{t.minFilter=Ji,t.magFilter=Ji,t.format=mn,t.needsUpdate=!0,this.material.uniforms.uTexture.value=t}),this.material=new Yn({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:Wn,uniforms:{time:{value:0},resolution:{value:new si},uTexture:{value:null},uDataTexture:{value:this.texture},rgbStrength:{value:this.settings.rgbStrength},rgbOpacity:{value:this.settings.rgbOpacity}},vertexShader:QA,fragmentShader:JA}),this.geometry=new Ka(1,1,1,1),this.plane=new Pn(this.geometry,this.material),this.scene.add(this.plane),this.resize()}updateDataTexture(){let e=this.texture.image.data;for(let a=0;a<e.length;a+=4)e[a]*=this.settings.relaxation,e[a+1]*=this.settings.relaxation;let t=this.size*this.mouse.x,i=this.size*(1-this.mouse.y),r=this.size*this.settings.mouse,s=this.height/this.width;for(let a=0;a<this.size;a++)for(let o=0;o<this.size;o++){let l=(t-a)**2/s+(i-o)**2,c=r**2;if(l<c){let d=4*(a+this.size*o),h=r/Math.sqrt(l);h=eC(h,0,10),e[d]+=this.settings.strength*100*this.mouse.vX*h,e[d+1]-=this.settings.strength*100*this.mouse.vY*h}}this.mouse.vX*=.9,this.mouse.vY*=.9,this.texture.needsUpdate=!0}setupGUI(){this.gui=new ZA,this.gui.add(this.settings,"grid",10,100).onChange(()=>this.regenerateGrid()),this.gui.add(this.settings,"mouse",.01,1),this.gui.add(this.settings,"strength",.1,10),this.gui.add(this.settings,"relaxation",.1,1),this.gui.add(this.settings,"aspectRatio",.5,2).onChange(()=>this.resize()),this.gui.add(this.settings,"rgbStrength",.001,.1).onChange(e=>{this.material.uniforms.rgbStrength.value=e}),this.gui.add(this.settings,"rgbOpacity",.1,1).onChange(e=>{this.material.uniforms.rgbOpacity.value=e})}render(){this.isPlaying&&(this.time+=.05,this.updateDataTexture(),this.material.uniforms.time.value=this.time,requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera))}}function iC(){document.querySelectorAll('[data-webgl="grid-effect"]').forEach(n=>{new tC({dom:n,showGUI:!1})})}function F0(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function Ch(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:F0(e[t])&&F0(n[t])&&Object.keys(e[t]).length>0&&Ch(n[t],e[t])})}const B0={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function no(){const n=typeof document<"u"?document:{};return Ch(n,B0),n}const nC={document:B0,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function sn(){const n=typeof window<"u"?window:{};return Ch(n,nC),n}function rC(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function sC(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Ph(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Ys(){return Date.now()}function aC(n){const e=sn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function oC(n,e){e===void 0&&(e="x");const t=sn();let i,r,s;const a=aC(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function _u(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function lC(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function an(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!lC(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,a=r.length;s<a;s+=1){const o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(_u(n[o])&&_u(i[o])?i[o].__swiper__?n[o]=i[o]:an(n[o],i[o]):!_u(n[o])&&_u(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:an(n[o],i[o])):n[o]=i[o])}}}return n}function yu(n,e,t){n.style.setProperty(e,t)}function z0(n){let{swiper:e,targetPosition:t,side:i}=n;const r=sn(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",d=(f,u)=>c==="next"&&f>=u||c==="prev"&&f<=u,h=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),u=.5-Math.cos(f*Math.PI)/2;let m=s+u*(t-s);if(d(m,t)&&(m=t),e.wrapperEl.scrollTo({[i]:m}),d(m,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:m})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(h)};h()}function vn(n,e){e===void 0&&(e="");const t=[...n.children];return n instanceof HTMLSlotElement&&t.push(...n.assignedElements()),e?t.filter(i=>i.matches(e)):t}function cC(n,e){const t=e.contains(n);return!t&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(n):t}function xu(n){try{console.warn(n);return}catch{}}function bu(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:rC(e)),t}function uC(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function dC(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function es(n,e){return sn().getComputedStyle(n,null).getPropertyValue(e)}function V0(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function fC(n,e){const t=[];let i=n.parentElement;for(;i;)t.push(i),i=i.parentElement;return t}function Rh(n,e){function t(i){i.target===n&&(e.call(n,i),n.removeEventListener("transitionend",t))}e&&n.addEventListener("transitionend",t)}function H0(n,e,t){const i=sn();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function yr(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}let Lh;function hC(){const n=sn(),e=no();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function G0(){return Lh||(Lh=hC()),Lh}let Dh;function pC(n){let{userAgent:e}=n===void 0?{}:n;const t=G0(),i=sn(),r=i.navigator.platform,s=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),u=r==="Win32";let m=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&m&&t.touch&&p.indexOf(`${o}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),m=!1),c&&!u&&(a.os="android",a.android=!0),(d||f||h)&&(a.os="ios",a.ios=!0),a}function W0(n){return n===void 0&&(n={}),Dh||(Dh=pC(n)),Dh}let Ih;function mC(){const n=sn(),e=W0();let t=!1;function i(){const o=n.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(i()){const o=String(n.navigator.userAgent);if(o.includes("Version/")){const[l,c]=o.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=l<16||l===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=i(),a=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:a,isWebView:r}}function gC(){return Ih||(Ih=mC()),Ih}function vC(n){let{swiper:e,on:t,emit:i}=n;const r=sn();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{a=r.requestAnimationFrame(()=>{const{width:f,height:u}=e;let m=f,p=u;h.forEach(g=>{let{contentBoxSize:v,contentRect:y,target:_}=g;_&&_!==e.el||(m=y?y.width:(v[0]||v).inlineSize,p=y?y.height:(v[0]||v).blockSize)}),(m!==f||p!==u)&&o()})}),s.observe(e.el))},c=()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",d)}),t("destroy",()=>{c(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",d)})}function _C(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],a=sn(),o=function(d,h){h===void 0&&(h={});const f=a.MutationObserver||a.WebkitMutationObserver,u=new f(m=>{if(e.__preventObserver__)return;if(m.length===1){r("observerUpdate",m[0]);return}const p=function(){r("observerUpdate",m[0])};a.requestAnimationFrame?a.requestAnimationFrame(p):a.setTimeout(p,0)});u.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(u)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=fC(e.hostEl);for(let h=0;h<d.length;h+=1)o(d[h])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var yC={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(i,a)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function xC(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(es(i,"padding-left")||0,10)-parseInt(es(i,"padding-right")||0,10),t=t-parseInt(es(i,"padding-top")||0,10)-parseInt(es(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function bC(){const n=this;function e(b,A){return parseFloat(b.getPropertyValue(n.getDirectionLabel(A))||0)}const t=n.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:a,wrongRTL:o}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,d=vn(r,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:d.length;let f=[];const u=[],m=[];let p=t.slidesOffsetBefore;typeof p=="function"&&(p=t.slidesOffsetBefore.call(n));let g=t.slidesOffsetAfter;typeof g=="function"&&(g=t.slidesOffsetAfter.call(n));const v=n.snapGrid.length,y=n.slidesGrid.length;let _=t.spaceBetween,w=-p,x=0,S=0;if(typeof s>"u")return;typeof _=="string"&&_.indexOf("%")>=0?_=parseFloat(_.replace("%",""))/100*s:typeof _=="string"&&(_=parseFloat(_)),n.virtualSize=-_,d.forEach(b=>{a?b.style.marginLeft="":b.style.marginRight="",b.style.marginBottom="",b.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(yu(i,"--swiper-centered-offset-before",""),yu(i,"--swiper-centered-offset-after",""));const T=t.grid&&t.grid.rows>1&&n.grid;T?n.grid.initSlides(d):n.grid&&n.grid.unsetSlides();let E;const M=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(b=>typeof t.breakpoints[b].slidesPerView<"u").length>0;for(let b=0;b<h;b+=1){E=0;let A;if(d[b]&&(A=d[b]),T&&n.grid.updateSlide(b,A,d),!(d[b]&&es(A,"display")==="none")){if(t.slidesPerView==="auto"){M&&(d[b].style[n.getDirectionLabel("width")]="");const C=getComputedStyle(A),P=A.style.transform,I=A.style.webkitTransform;if(P&&(A.style.transform="none"),I&&(A.style.webkitTransform="none"),t.roundLengths)E=n.isHorizontal()?H0(A,"width"):H0(A,"height");else{const D=e(C,"width"),F=e(C,"padding-left"),B=e(C,"padding-right"),k=e(C,"margin-left"),K=e(C,"margin-right"),O=C.getPropertyValue("box-sizing");if(O&&O==="border-box")E=D+k+K;else{const{clientWidth:re,offsetWidth:ae}=A;E=D+F+B+k+K+(ae-re)}}P&&(A.style.transform=P),I&&(A.style.webkitTransform=I),t.roundLengths&&(E=Math.floor(E))}else E=(s-(t.slidesPerView-1)*_)/t.slidesPerView,t.roundLengths&&(E=Math.floor(E)),d[b]&&(d[b].style[n.getDirectionLabel("width")]=`${E}px`);d[b]&&(d[b].swiperSlideSize=E),m.push(E),t.centeredSlides?(w=w+E/2+x/2+_,x===0&&b!==0&&(w=w-s/2-_),b===0&&(w=w-s/2-_),Math.abs(w)<1/1e3&&(w=0),t.roundLengths&&(w=Math.floor(w)),S%t.slidesPerGroup===0&&f.push(w),u.push(w)):(t.roundLengths&&(w=Math.floor(w)),(S-Math.min(n.params.slidesPerGroupSkip,S))%n.params.slidesPerGroup===0&&f.push(w),u.push(w),w=w+E+_),n.virtualSize+=E+_,x=E,S+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+g,a&&o&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+_}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+_}px`),T&&n.grid.updateWrapperSize(E,f),!t.centeredSlides){const b=[];for(let A=0;A<f.length;A+=1){let C=f[A];t.roundLengths&&(C=Math.floor(C)),f[A]<=n.virtualSize-s&&b.push(C)}f=b,Math.floor(n.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-s)}if(l&&t.loop){const b=m[0]+_;if(t.slidesPerGroup>1){const A=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),C=b*t.slidesPerGroup;for(let P=0;P<A;P+=1)f.push(f[f.length-1]+C)}for(let A=0;A<n.virtual.slidesBefore+n.virtual.slidesAfter;A+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+b),u.push(u[u.length-1]+b),n.virtualSize+=b}if(f.length===0&&(f=[0]),_!==0){const b=n.isHorizontal()&&a?"marginLeft":n.getDirectionLabel("marginRight");d.filter((A,C)=>!t.cssMode||t.loop?!0:C!==d.length-1).forEach(A=>{A.style[b]=`${_}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let b=0;m.forEach(C=>{b+=C+(_||0)}),b-=_;const A=b>s?b-s:0;f=f.map(C=>C<=0?-p:C>A?A+g:C)}if(t.centerInsufficientSlides){let b=0;m.forEach(C=>{b+=C+(_||0)}),b-=_;const A=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(b+A<s){const C=(s-b-A)/2;f.forEach((P,I)=>{f[I]=P-C}),u.forEach((P,I)=>{u[I]=P+C})}}if(Object.assign(n,{slides:d,snapGrid:f,slidesGrid:u,slidesSizesGrid:m}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){yu(i,"--swiper-centered-offset-before",`${-f[0]}px`),yu(i,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const b=-n.snapGrid[0],A=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(C=>C+b),n.slidesGrid=n.slidesGrid.map(C=>C+A)}if(h!==c&&n.emit("slidesLengthChange"),f.length!==v&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),u.length!==y&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const b=`${t.containerModifierClass}backface-hidden`,A=n.el.classList.contains(b);h<=t.maxBackfaceHiddenSlides?A||n.el.classList.add(b):A&&n.el.classList.remove(b)}}function wC(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;r=o>r?o:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function SC(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}const X0=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function MC(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;r&&(a=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const c=i[l];let d=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(d-=i[0].swiperSlideOffset);const h=(a+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+o),f=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+o),u=-(a-d),m=u+e.slidesSizesGrid[l],p=u>=0&&u<=e.size-e.slidesSizesGrid[l],g=u>=0&&u<e.size-1||m>1&&m<=e.size||u<=0&&m>=e.size;g&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),X0(c,g,t.slideVisibleClass),X0(c,p,t.slideFullyVisibleClass),c.progress=r?-h:h,c.originalProgress=r?-f:f}}function TC(n){const e=this;if(typeof n>"u"){const d=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*d||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,c=a;if(i===0)r=0,s=!0,a=!0;else{r=(n-e.minTranslate())/i;const d=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;s=d||r<=0,a=h||r>=1,d&&(r=0),h&&(r=1)}if(t.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[d],u=e.slidesGrid[h],m=e.slidesGrid[e.slidesGrid.length-1],p=Math.abs(n);p>=f?o=(p-f)/m:o=(p+m-u)/m,o>1&&(o-=1)}Object.assign(e,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}const Oh=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function EC(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,a=n.grid&&t.grid&&t.grid.rows>1,o=h=>vn(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0];let l,c,d;if(s)if(t.loop){let h=r-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=o(`[data-swiper-slide-index="${h}"]`)}else l=o(`[data-swiper-slide-index="${r}"]`);else a?(l=e.filter(h=>h.column===r)[0],d=e.filter(h=>h.column===r+1)[0],c=e.filter(h=>h.column===r-1)[0]):l=e[r];l&&(a||(d=dC(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d&&(d=e[0]),c=uC(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{Oh(h,h===l,t.slideActiveClass),Oh(h,h===d,t.slideNextClass),Oh(h,h===c,t.slidePrevClass)}),n.emitSlidesClasses()}const wu=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Nh=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Uh=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=r,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+i+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&Nh(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let a=r-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<r||o>s)&&Nh(n,o)}else for(let a=Math.max(r-e,0);a<=Math.min(s+e,t-1);a+=1)a!==r&&(a>s||a<r)&&Nh(n,a)};function AC(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function CC(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,c;const d=u=>{let m=u-e.virtual.slidesBefore;return m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),m};if(typeof l>"u"&&(l=AC(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const u=Math.min(r.slidesPerGroupSkip,l);c=u+Math.floor((l-u)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const h=e.grid&&r.grid&&r.grid.rows>1;let f;if(e.virtual&&r.virtual.enabled&&r.loop)f=d(l);else if(h){const u=e.slides.filter(p=>p.column===l)[0];let m=parseInt(u.getAttribute("data-swiper-slide-index"),10);Number.isNaN(m)&&(m=Math.max(e.slides.indexOf(u),0)),f=Math.floor(m/r.grid.rows)}else if(e.slides[l]){const u=e.slides[l].getAttribute("data-swiper-slide-index");u?f=parseInt(u,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:f,previousIndex:s,activeIndex:l}),e.initialized&&Uh(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function PC(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!r&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(r=o)});let s=!1,a;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){s=!0,a=o;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var RC={updateSize:xC,updateSlides:bC,updateAutoHeight:wC,updateSlidesOffset:SC,updateSlidesProgress:MC,updateProgress:TC,updateSlidesClasses:EC,updateActiveIndex:CC,updateClickedSlide:PC};function LC(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let a=oC(s,n);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function DC(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=i?-n:n:l=n,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:r.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let d;const h=t.maxTranslate()-t.minTranslate();h===0?d=0:d=(n-t.minTranslate())/h,d!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function IC(){return-this.snapGrid[0]}function OC(){return-this.snapGrid[this.snapGrid.length-1]}function NC(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let d;if(i&&n>l?d=l:i&&n<c?d=c:d=n,s.updateProgress(d),a.cssMode){const h=s.isHorizontal();if(e===0)o[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return z0({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;o.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var UC={getTranslate:LC,setTranslate:DC,minTranslate:IC,maxTranslate:OC,translateTo:NC};function kC(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function $0(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:a}=e;let o=i;if(o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit(`transition${r}`),t&&s!==a){if(o==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),o==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function FC(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),$0({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function BC(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),$0({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var zC={setTransition:kC,transitionStart:FC,transitionEnd:BC};function VC(n,e,t,i,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:f,wrapperEl:u,enabled:m}=s;if(!m&&!i&&!r||s.destroyed||s.animating&&o.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const p=Math.min(s.params.slidesPerGroupSkip,a);let g=p+Math.floor((a-p)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const v=-l[g];if(o.normalizeSlideIndex)for(let x=0;x<c.length;x+=1){const S=-Math.floor(v*100),T=Math.floor(c[x]*100),E=Math.floor(c[x+1]*100);typeof c[x+1]<"u"?S>=T&&S<E-(E-T)/2?a=x:S>=T&&S<E&&(a=x+1):S>=T&&(a=x)}if(s.initialized&&a!==h&&(!s.allowSlideNext&&(f?v>s.translate&&v>s.minTranslate():v<s.translate&&v<s.minTranslate())||!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(h||0)!==a))return!1;a!==(d||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(v);let y;a>h?y="next":a<h?y="prev":y="reset";const _=s.virtual&&s.params.virtual.enabled;if(!(_&&r)&&(f&&-v===s.translate||!f&&v===s.translate))return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(v),y!=="reset"&&(s.transitionStart(t,y),s.transitionEnd(t,y)),!1;if(o.cssMode){const x=s.isHorizontal(),S=f?v:-v;if(e===0)_&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),_&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{u[x?"scrollLeft":"scrollTop"]=S})):u[x?"scrollLeft":"scrollTop"]=S,_&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return z0({swiper:s,targetPosition:S,side:x?"left":"top"}),!0;u.scrollTo({[x?"left":"top"]:S,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,y),e===0?s.transitionEnd(t,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(S){!s||s.destroyed||S.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function HC(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let a=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a=a+r.virtual.slidesBefore;else{let o;if(s){const f=a*r.params.grid.rows;o=r.slides.filter(u=>u.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=r.getSlideIndexByData(a);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let d=r.params.slidesPerView;d==="auto"?d=r.slidesPerViewDynamic():(d=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&d%2===0&&(d=d+1));let h=l-o<d;if(c&&(h=h||o<Math.ceil(d/2)),i&&c&&r.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=c?o<r.activeIndex?"prev":"next":o-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?o+1:o-l+1,slideRealIndex:f==="next"?r.realIndex:void 0})}if(s){const f=a*r.params.grid.rows;a=r.slides.filter(u=>u.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,e,t,i)}),r}function GC(n,e,t){e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:a}=i;if(!r||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,c=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function WC(n,e,t){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const d=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const h=o?i.translate:-i.translate;function f(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const u=f(h),m=s.map(v=>f(v));let p=s[m.indexOf(u)-1];if(typeof p>"u"&&r.cssMode){let v;s.forEach((y,_)=>{u>=y&&(v=_)}),typeof v<"u"&&(p=s[v>0?v-1:v])}let g=0;if(typeof p<"u"&&(g=a.indexOf(p),g<0&&(g=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&i.isBeginning){const v=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(v,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(g,n,e,t)}),!0;return i.slideTo(g,n,e,t)}function XC(n,e,t){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function $C(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const c=r.snapGrid[o],d=r.snapGrid[o+1];l-c>(d-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[o-1],d=r.snapGrid[o];l-c<=(d-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function qC(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const a=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(vn(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),Ph(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(vn(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),Ph(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var YC={slideTo:VC,slideToLoop:HC,slideNext:GC,slidePrev:WC,slideReset:XC,slideToClosest:$C,slideToClickedSlide:qC};function jC(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{vn(i,`.${t.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},s=e.grid&&t.grid&&t.grid.rows>1,a=t.slidesPerGroup*(s?t.grid.rows:1),o=e.slides.length%a!==0,l=s&&e.slides.length%t.grid.rows!==0,c=d=>{for(let h=0;h<d;h+=1){const f=e.isElement?bu("swiper-slide",[t.slideBlankClass]):bu("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(f)}};if(o){if(t.loopAddBlankSlides){const d=a-e.slides.length%a;c(d),e.recalcSlides(),e.updateSlides()}else xu("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(t.loopAddBlankSlides){const d=t.grid.rows-e.slides.length%t.grid.rows;c(d),e.recalcSlides(),e.updateSlides()}else xu("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function KC(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:d,allowSlideNext:h,slidesEl:f,params:u}=l,{centeredSlides:m}=u;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&u.virtual.enabled){t&&(!u.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):u.centeredSlides&&l.snapIndex<u.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=h,l.emit("loopFix");return}let p=u.slidesPerView;p==="auto"?p=l.slidesPerViewDynamic():(p=Math.ceil(parseFloat(u.slidesPerView,10)),m&&p%2===0&&(p=p+1));const g=u.slidesPerGroupAuto?p:u.slidesPerGroup;let v=g;v%g!==0&&(v+=g-v%g),v+=u.loopAdditionalSlides,l.loopedSlides=v;const y=l.grid&&u.grid&&u.grid.rows>1;c.length<p+v?xu("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&u.grid.fill==="row"&&xu("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const _=[],w=[];let x=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(P=>P.classList.contains(u.slideActiveClass))[0]):x=s;const S=i==="next"||!i,T=i==="prev"||!i;let E=0,M=0;const b=y?Math.ceil(c.length/u.grid.rows):c.length,C=(y?c[s].column:s)+(m&&typeof r>"u"?-p/2+.5:0);if(C<v){E=Math.max(v-C,g);for(let P=0;P<v-C;P+=1){const I=P-Math.floor(P/b)*b;if(y){const D=b-I-1;for(let F=c.length-1;F>=0;F-=1)c[F].column===D&&_.push(F)}else _.push(b-I-1)}}else if(C+p>b-v){M=Math.max(C-(b-v*2),g);for(let P=0;P<M;P+=1){const I=P-Math.floor(P/b)*b;y?c.forEach((D,F)=>{D.column===I&&w.push(F)}):w.push(I)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),T&&_.forEach(P=>{c[P].swiperLoopMoveDOM=!0,f.prepend(c[P]),c[P].swiperLoopMoveDOM=!1}),S&&w.forEach(P=>{c[P].swiperLoopMoveDOM=!0,f.append(c[P]),c[P].swiperLoopMoveDOM=!1}),l.recalcSlides(),u.slidesPerView==="auto"?l.updateSlides():y&&(_.length>0&&T||w.length>0&&S)&&l.slides.forEach((P,I)=>{l.grid.updateSlide(I,P,l.slides)}),u.watchSlidesProgress&&l.updateSlidesOffset(),t){if(_.length>0&&T){if(typeof e>"u"){const P=l.slidesGrid[x],D=l.slidesGrid[x+E]-P;o?l.setTranslate(l.translate-D):(l.slideTo(x+Math.ceil(E),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-D,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-D))}else if(r){const P=y?_.length/u.grid.rows:_.length;l.slideTo(l.activeIndex+P,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(w.length>0&&S)if(typeof e>"u"){const P=l.slidesGrid[x],D=l.slidesGrid[x-M]-P;o?l.setTranslate(l.translate-D):(l.slideTo(x-M,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-D,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-D))}else{const P=y?w.length/u.grid.rows:w.length;l.slideTo(l.activeIndex-P,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=h,l.controller&&l.controller.control&&!a){const P={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(I=>{!I.destroyed&&I.params.loop&&I.loopFix({...P,slideTo:I.params.slidesPerView===u.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...P,slideTo:l.controller.control.params.slidesPerView===u.slidesPerView?t:!1})}l.emit("loopFix")}function ZC(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var QC={loopCreate:jC,loopFix:KC,loopDestroy:ZC};function JC(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function eP(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var tP={setGrabCursor:JC,unsetGrabCursor:eP};function iP(n,e){e===void 0&&(e=this);function t(i){if(!i||i===no()||i===sn())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function q0(n,e,t){const i=sn(),{params:r}=n,s=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return s&&(t<=a||t>=i.innerWidth-a)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function nP(n){const e=this,t=no();let i=n;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){q0(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!cC(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",d=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&d&&(l=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(f?iP(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;a.currentX=i.pageX,a.currentY=i.pageY;const u=a.currentX,m=a.currentY;if(!q0(e,i,u))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=u,a.startY=m,r.touchStartTime=Ys(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let p=!0;l.matches(r.focusableElements)&&(p=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!l.matches(r.focusableElements))&&t.activeElement.blur();const g=p&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||g)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function rP(n){const e=no(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(S=>S.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const d=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),i.touchStartTime=Ys());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,u=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(f**2+u**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let S;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+u*u>=25&&(S=Math.atan2(Math.abs(u),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?S>r.touchAngle:90-S>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let m=t.isHorizontal()?f:u,p=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),p=Math.abs(p)*(a?1:-1)),s.diff=m,m*=r.touchRatio,a&&(m=-m,p=-p);const g=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=p>0?"prev":"next";const v=t.params.loop&&!r.cssMode,y=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(v&&y&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const S=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(S)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let _;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&g!==t.touchesDirection&&v&&y&&Math.abs(m)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;let w=!0,x=r.resistanceRatio;if(r.touchReleaseOnEdges&&(x=0),m>0?(v&&y&&!_&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(w=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+m)**x))):m<0&&(v&&y&&!_&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(w=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-m)**x))),w&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function sP(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(x=>x.identifier===t.touchId)[0],!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:c,enabled:d}=e;if(!d||!a.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&a.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}a.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=Ys(),f=h-t.touchStartTime;if(e.allowClick){const x=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(x&&x[0]||i.target,x),e.emit("tap click",i),f<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=Ys(),Ph(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||o.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let u;if(a.followFinger?u=l?e.translate:-e.translate:u=-t.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:u});return}const m=u>=-e.maxTranslate()&&!e.params.loop;let p=0,g=e.slidesSizesGrid[0];for(let x=0;x<c.length;x+=x<a.slidesPerGroupSkip?1:a.slidesPerGroup){const S=x<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof c[x+S]<"u"?(m||u>=c[x]&&u<c[x+S])&&(p=x,g=c[x+S]-c[x]):(m||u>=c[x])&&(p=x,g=c[c.length-1]-c[c.length-2])}let v=null,y=null;a.rewind&&(e.isBeginning?y=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(v=0));const _=(u-c[p])/g,w=p<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(f>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(_>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?v:p+w):e.slideTo(p)),e.swipeDirection==="prev"&&(_>1-a.longSwipesRatio?e.slideTo(p+w):y!==null&&_<0&&Math.abs(_)>a.longSwipesRatio?e.slideTo(y):e.slideTo(p))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(p+w):e.slideTo(p):(e.swipeDirection==="next"&&e.slideTo(v!==null?v:p+w),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:p))}}function Y0(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function aP(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function oP(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function lP(n){const e=this;wu(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function cP(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const j0=(n,e)=>{const t=no(),{params:i,el:r,wrapperEl:s,device:a}=n,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!r||typeof r=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:o}),r[l]("touchstart",n.onTouchStart,{passive:!1}),r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Y0,!0):n[c]("observerUpdate",Y0,!0),r[l]("load",n.onLoad,{capture:!0}))};function uP(){const n=this,{params:e}=n;n.onTouchStart=nP.bind(n),n.onTouchMove=rP.bind(n),n.onTouchEnd=sP.bind(n),n.onDocumentTouchStart=cP.bind(n),e.cssMode&&(n.onScroll=oP.bind(n)),n.onClick=aP.bind(n),n.onLoad=lP.bind(n),j0(n,"on")}function dP(){j0(this,"off")}var fP={attachEvents:uP,detachEvents:dP};const K0=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function hP(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||n.originalParams,c=K0(n,i),d=K0(n,l),h=n.params.grabCursor,f=l.grabCursor,u=i.enabled;c&&!d?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&d&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),h&&!f?n.unsetGrabCursor():!h&&f&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(_=>{if(typeof l[_]>"u")return;const w=i[_]&&i[_].enabled,x=l[_]&&l[_].enabled;w&&!x&&n[_].disable(),!w&&x&&n[_].enable()});const m=l.direction&&l.direction!==i.direction,p=i.loop&&(l.slidesPerView!==i.slidesPerView||m),g=i.loop;m&&t&&n.changeDirection(),an(n.params,l);const v=n.params.enabled,y=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),u&&!v?n.disable():!u&&v&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(p?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!g&&y?(n.loopCreate(e),n.updateSlides()):g&&!y&&n.loopDestroy()),n.emit("breakpoint",l)}function pP(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=sn(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var mP={setBreakpoint:hP,getBreakpoint:pP};function gP(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function vP(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,a=gP(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),n.emitContainerClasses()}function _P(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var yP={addClasses:vP,removeClasses:_P};function xP(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var bP={checkOverflow:xP},Z0={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function wP(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){an(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){an(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),an(e,i)}}const kh={eventsEmitter:yC,update:RC,translate:UC,transition:zC,slide:YC,loop:QC,grabCursor:tP,events:fP,breakpoints:mP,checkOverflow:bP,classes:yP},Fh={};class _n{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=an({},t),e&&!t.el&&(t.el=e);const a=no();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const d=[];return a.querySelectorAll(t.el).forEach(h=>{const f=an({},t,{el:h});d.push(new _n(f))}),d}const o=this;o.__swiper__=!0,o.support=G0(),o.device=W0({userAgent:t.userAgent}),o.browser=gC(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(d=>{d({params:t,swiper:o,extendParams:wP(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=an({},Z0,l);return o.params=an({},c,Fh,t),o.originalParams=an({},o.params),o.passedParams=an({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(d=>{o.on(d,o.params.on[d])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=vn(t,`.${i.slideClass}, swiper-slide`),s=V0(r[0]);return V0(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=vn(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let d=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,f;for(let u=c+1;u<s.length;u+=1)s[u]&&!f&&(h+=Math.ceil(s[u].swiperSlideSize),d+=1,h>l&&(f=!0));for(let u=c-1;u>=0;u-=1)s[u]&&!f&&(h+=s[u].swiperSlideSize,d+=1,h>l&&(f=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(t?a[h]+o[h]-a[c]<l:a[h]-a[c]<l)&&(d+=1);else for(let h=c-1;h>=0;h-=1)a[c]-a[h]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&wu(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):vn(i,r())[0];return!a&&t.params.createElements&&(a=bu("div",t.params.wrapperClass),i.append(a),vn(i,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:i,wrapperEl:a,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||es(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||es(i,"direction")==="rtl"),wrongRTL:es(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?wu(t,s):s.addEventListener("load",a=>{wu(t,a.target)})}),Uh(t),t.initialized=!0,Uh(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),sC(i)),i.destroyed=!0),null}static extendDefaults(e){an(Fh,e)}static get extendedDefaults(){return Fh}static get defaults(){return Z0}static installModule(e){_n.prototype.__modules__||(_n.prototype.__modules__=[]);const t=_n.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>_n.installModule(t)),_n):(_n.installModule(e),_n)}}Object.keys(kh).forEach(n=>{Object.keys(kh[n]).forEach(e=>{_n.prototype[e]=kh[n][e]})}),_n.use([vC,_C]);function SP(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let s=vn(n.el,`.${i[r]}`)[0];s||(s=bu("div",i[r]),s.className=i[r],n.el.append(s)),t[r]=s,e[r]=s}}),t}function MP(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(m){let p;return m&&typeof m=="string"&&e.isElement&&(p=e.el.querySelector(m)||e.hostEl.querySelector(m),p)?p:(m&&(typeof m=="string"&&(p=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&p&&p.length>1&&e.el.querySelectorAll(m).length===1?p=e.el.querySelector(m):p&&p.length===1&&(p=p[0])),m&&!p?m:p)}function a(m,p){const g=e.params.navigation;m=yr(m),m.forEach(v=>{v&&(v.classList[p?"add":"remove"](...g.disabledClass.split(" ")),v.tagName==="BUTTON"&&(v.disabled=p),e.params.watchOverflow&&e.enabled&&v.classList[e.isLocked?"add":"remove"](g.lockClass))})}function o(){const{nextEl:m,prevEl:p}=e.navigation;if(e.params.loop){a(p,!1),a(m,!1);return}a(p,e.isBeginning&&!e.params.rewind),a(m,e.isEnd&&!e.params.rewind)}function l(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){const m=e.params.navigation;if(e.params.navigation=SP(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let p=s(m.nextEl),g=s(m.prevEl);Object.assign(e.navigation,{nextEl:p,prevEl:g}),p=yr(p),g=yr(g);const v=(y,_)=>{y&&y.addEventListener("click",_==="next"?c:l),!e.enabled&&y&&y.classList.add(...m.lockClass.split(" "))};p.forEach(y=>v(y,"next")),g.forEach(y=>v(y,"prev"))}function h(){let{nextEl:m,prevEl:p}=e.navigation;m=yr(m),p=yr(p);const g=(v,y)=>{v.removeEventListener("click",y==="next"?c:l),v.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(v=>g(v,"next")),p.forEach(v=>g(v,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?u():(d(),o())}),i("toEdge fromEdge lock unlock",()=>{o()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:m,prevEl:p}=e.navigation;if(m=yr(m),p=yr(p),e.enabled){o();return}[...m,...p].filter(g=>!!g).forEach(g=>g.classList.add(e.params.navigation.lockClass))}),i("click",(m,p)=>{let{nextEl:g,prevEl:v}=e.navigation;g=yr(g),v=yr(v);const y=p.target;let _=v.includes(y)||g.includes(y);if(e.isElement&&!_){const w=p.path||p.composedPath&&p.composedPath();w&&(_=w.find(x=>g.includes(x)||v.includes(x)))}if(e.params.navigation.hideOnClick&&!_){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let w;g.length?w=g[0].classList.contains(e.params.navigation.hiddenClass):v.length&&(w=v[0].classList.contains(e.params.navigation.hiddenClass)),r(w===!0?"navigationShow":"navigationHide"),[...g,...v].filter(x=>!!x).forEach(x=>x.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),o()},u=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:u,update:o,init:d,destroy:h})}function TP(n){let{swiper:e,extendParams:t,on:i}=n;t({parallax:{enabled:!1}});const r="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",s=(l,c)=>{const{rtl:d}=e,h=d?-1:1,f=l.getAttribute("data-swiper-parallax")||"0";let u=l.getAttribute("data-swiper-parallax-x"),m=l.getAttribute("data-swiper-parallax-y");const p=l.getAttribute("data-swiper-parallax-scale"),g=l.getAttribute("data-swiper-parallax-opacity"),v=l.getAttribute("data-swiper-parallax-rotate");if(u||m?(u=u||"0",m=m||"0"):e.isHorizontal()?(u=f,m="0"):(m=f,u="0"),u.indexOf("%")>=0?u=`${parseInt(u,10)*c*h}%`:u=`${u*c*h}px`,m.indexOf("%")>=0?m=`${parseInt(m,10)*c}%`:m=`${m*c}px`,typeof g<"u"&&g!==null){const _=g-(g-1)*(1-Math.abs(c));l.style.opacity=_}let y=`translate3d(${u}, ${m}, 0px)`;if(typeof p<"u"&&p!==null){const _=p-(p-1)*(1-Math.abs(c));y+=` scale(${_})`}if(v&&typeof v<"u"&&v!==null){const _=v*c*-1;y+=` rotate(${_}deg)`}l.style.transform=y},a=()=>{const{el:l,slides:c,progress:d,snapGrid:h,isElement:f}=e,u=vn(l,r);e.isElement&&u.push(...vn(e.hostEl,r)),u.forEach(m=>{s(m,d)}),c.forEach((m,p)=>{let g=m.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(g+=Math.ceil(p/2)-d*(h.length-1)),g=Math.min(Math.max(g,-1),1),m.querySelectorAll(`${r}, [data-swiper-parallax-rotate]`).forEach(v=>{s(v,g)})})},o=function(l){l===void 0&&(l=e.params.speed);const{el:c,hostEl:d}=e,h=[...c.querySelectorAll(r)];e.isElement&&h.push(...d.querySelectorAll(r)),h.forEach(f=>{let u=parseInt(f.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(u=0),f.style.transitionDuration=`${u}ms`})};i("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),i("init",()=>{e.params.parallax.enabled&&a()}),i("setTranslate",()=>{e.params.parallax.enabled&&a()}),i("setTransition",(l,c)=>{e.params.parallax.enabled&&o(c)})}function EP(n){let{swiper:e,extendParams:t,emit:i,once:r}=n;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function s(){if(e.params.cssMode)return;const l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function a(){if(e.params.cssMode)return;const{touchEventsData:l,touches:c}=e;l.velocities.length===0&&l.velocities.push({position:c[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[e.isHorizontal()?"currentX":"currentY"],time:Ys()})}function o(l){let{currentPos:c}=l;if(e.params.cssMode)return;const{params:d,wrapperEl:h,rtlTranslate:f,snapGrid:u,touchEventsData:m}=e,g=Ys()-m.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<u.length?e.slideTo(u.length-1):e.slideTo(e.slides.length-1);return}if(d.freeMode.momentum){if(m.velocities.length>1){const E=m.velocities.pop(),M=m.velocities.pop(),b=E.position-M.position,A=E.time-M.time;e.velocity=b/A,e.velocity/=2,Math.abs(e.velocity)<d.freeMode.minimumVelocity&&(e.velocity=0),(A>150||Ys()-E.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=d.freeMode.momentumVelocityRatio,m.velocities.length=0;let v=1e3*d.freeMode.momentumRatio;const y=e.velocity*v;let _=e.translate+y;f&&(_=-_);let w=!1,x;const S=Math.abs(e.velocity)*20*d.freeMode.momentumBounceRatio;let T;if(_<e.maxTranslate())d.freeMode.momentumBounce?(_+e.maxTranslate()<-S&&(_=e.maxTranslate()-S),x=e.maxTranslate(),w=!0,m.allowMomentumBounce=!0):_=e.maxTranslate(),d.loop&&d.centeredSlides&&(T=!0);else if(_>e.minTranslate())d.freeMode.momentumBounce?(_-e.minTranslate()>S&&(_=e.minTranslate()+S),x=e.minTranslate(),w=!0,m.allowMomentumBounce=!0):_=e.minTranslate(),d.loop&&d.centeredSlides&&(T=!0);else if(d.freeMode.sticky){let E;for(let M=0;M<u.length;M+=1)if(u[M]>-_){E=M;break}Math.abs(u[E]-_)<Math.abs(u[E-1]-_)||e.swipeDirection==="next"?_=u[E]:_=u[E-1],_=-_}if(T&&r("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(f?v=Math.abs((-_-e.translate)/e.velocity):v=Math.abs((_-e.translate)/e.velocity),d.freeMode.sticky){const E=Math.abs((f?-_:_)-e.translate),M=e.slidesSizesGrid[e.activeIndex];E<M?v=d.speed:E<2*M?v=d.speed*1.5:v=d.speed*2.5}}else if(d.freeMode.sticky){e.slideToClosest();return}d.freeMode.momentumBounce&&w?(e.updateProgress(x),e.setTransition(v),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,Rh(h,()=>{!e||e.destroyed||!m.allowMomentumBounce||(i("momentumBounce"),e.setTransition(d.speed),setTimeout(()=>{e.setTranslate(x),Rh(h,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(i("_freeModeNoMomentumRelease"),e.updateProgress(_),e.setTransition(v),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,Rh(h,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(_),e.updateActiveIndex(),e.updateSlidesClasses()}else if(d.freeMode.sticky){e.slideToClosest();return}else d.freeMode&&i("_freeModeNoMomentumRelease");(!d.freeMode.momentum||g>=d.longSwipesMs)&&(i("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:s,onTouchMove:a,onTouchEnd:o}})}Ee.registerPlugin(zn);function AP(){new _n(".swiper.is-work-cms",{modules:[MP,EP,TP],direction:"horizontal",freeMode:!0,slidesPerView:"auto",loop:!1,loopFillGroupWithBlank:!0,speed:800,grabCursor:!0,parallax:!0,on:{touchStart:()=>{document.querySelectorAll(".swiper-slide.is-work-cms").forEach(n=>{n.classList.add("is--scaling")})},touchMove:()=>{document.querySelectorAll(".swiper-slide.is-work-cms").forEach(n=>{n.classList.add("is--scaling")})},touchEnd:()=>{document.querySelectorAll(".swiper-slide.is-work-cms").forEach(n=>{n.classList.remove("is--scaling")})}}})}function CP(){document.querySelectorAll('[data-element="project-nav"]').forEach(e=>{const t=e.querySelector('[data-element="project-nav-img"]'),i=e.querySelector('[data-element="project-nav-text"]'),r=i?i.getAttribute("data-element-class"):null;e.addEventListener("mouseenter",()=>{Ee.fromTo(t,{height:"0rem",y:"100%"},{height:"auto",y:"0%",duration:.7,ease:"expo.out"}),i&&r&&i.classList.add(r)}),e.addEventListener("mouseleave",()=>{Ee.to(t,{height:"0rem",y:"100%",duration:.5,ease:"expo.out"}),i&&r&&i.classList.remove(r)})})}function PP(){const n=document.querySelector(".cursor_dot");document.querySelectorAll('[data-element="show-cursor"]').forEach(t=>{t.addEventListener("mouseover",()=>{n.classList.add("is--active")}),t.addEventListener("mouseout",()=>{n.classList.remove("is--active")})})}var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Q0={exports:{}};/*!
* matter-js 0.19.0 by @liabru
* http://brm.io/matter-js/
* License MIT
* 
* The MIT License (MIT)
* 
* Copyright (c) Liam Brummitt and contributors.
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/(function(n,e){(function(i,r){n.exports=r()})(Bh,function(){return function(t){var i={};function r(s){if(i[s])return i[s].exports;var a=i[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=i,r.d=function(s,a,o){r.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:o})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,a){if(a&1&&(s=r(s)),a&8||a&4&&typeof s=="object"&&s&&s.__esModule)return s;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:s}),a&2&&typeof s!="string")for(var l in s)r.d(o,l,(function(c){return s[c]}).bind(null,l));return o},r.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(a,"a",a),a},r.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},r.p="",r(r.s=20)}([function(t,i){var r={};t.exports=r,function(){r._baseDelta=1e3/60,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(a,o){var l,c;typeof o=="boolean"?(l=2,c=o):(l=1,c=!0);for(var d=l;d<arguments.length;d++){var h=arguments[d];if(h)for(var f in h)c&&h[f]&&h[f].constructor===Object&&(!a[f]||a[f].constructor===Object)?(a[f]=a[f]||{},r.extend(a[f],c,h[f])):a[f]=h[f]}return a},r.clone=function(a,o){return r.extend({},o,a)},r.keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var l in a)o.push(l);return o},r.values=function(a){var o=[];if(Object.keys){for(var l=Object.keys(a),c=0;c<l.length;c++)o.push(a[l[c]]);return o}for(var d in a)o.push(a[d]);return o},r.get=function(a,o,l,c){o=o.split(".").slice(l,c);for(var d=0;d<o.length;d+=1)a=a[o[d]];return a},r.set=function(a,o,l,c,d){var h=o.split(".").slice(c,d);return r.get(a,o,0,-1)[h[h.length-1]]=l,l},r.shuffle=function(a){for(var o=a.length-1;o>0;o--){var l=Math.floor(r.random()*(o+1)),c=a[o];a[o]=a[l],a[l]=c}return a},r.choose=function(a){return a[Math.floor(r.random()*a.length)]},r.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},r.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},r.isFunction=function(a){return typeof a=="function"},r.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},r.isString=function(a){return toString.call(a)==="[object String]"},r.clamp=function(a,o,l){return a<o?o:a>l?l:a},r.sign=function(a){return a<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(a,o){return a=typeof a<"u"?a:0,o=typeof o<"u"?o:1,a+s()*(o-a)};var s=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[a]||(r.warn(a),r._warnedOnce[a]=!0)},r.deprecated=function(a,o,l){a[o]=r.chain(function(){r.warnOnce(" deprecated ",l)},a[o])},r.nextId=function(){return r._nextId++},r.indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var l=0;l<a.length;l++)if(a[l]===o)return l;return-1},r.map=function(a,o){if(a.map)return a.map(o);for(var l=[],c=0;c<a.length;c+=1)l.push(o(a[c]));return l},r.topologicalSort=function(a){var o=[],l=[],c=[];for(var d in a)!l[d]&&!c[d]&&r._topologicalSort(d,l,c,a,o);return o},r._topologicalSort=function(a,o,l,c,d){var h=c[a]||[];l[a]=!0;for(var f=0;f<h.length;f+=1){var u=h[f];l[u]||o[u]||r._topologicalSort(u,o,l,c,d)}l[a]=!1,o[a]=!0,d.push(a)},r.chain=function(){for(var a=[],o=0;o<arguments.length;o+=1){var l=arguments[o];l._chained?a.push.apply(a,l._chained):a.push(l)}var c=function(){for(var d,h=new Array(arguments.length),f=0,u=arguments.length;f<u;f++)h[f]=arguments[f];for(f=0;f<a.length;f+=1){var m=a[f].apply(d,h);typeof m<"u"&&(d=m)}return d};return c._chained=a,c},r.chainPathBefore=function(a,o,l){return r.set(a,o,r.chain(l,r.get(a,o)))},r.chainPathAfter=function(a,o,l){return r.set(a,o,r.chain(r.get(a,o),l))},r.setDecomp=function(a){r._decomp=a},r.getDecomp=function(){var a=r._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof Bh<"u"&&(a=Bh.decomp)}catch{a=null}return a}}()},function(t,i){var r={};t.exports=r,function(){r.create=function(s){var a={min:{x:0,y:0},max:{x:0,y:0}};return s&&r.update(a,s),a},r.update=function(s,a,o){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var l=0;l<a.length;l++){var c=a[l];c.x>s.max.x&&(s.max.x=c.x),c.x<s.min.x&&(s.min.x=c.x),c.y>s.max.y&&(s.max.y=c.y),c.y<s.min.y&&(s.min.y=c.y)}o&&(o.x>0?s.max.x+=o.x:s.min.x+=o.x,o.y>0?s.max.y+=o.y:s.min.y+=o.y)},r.contains=function(s,a){return a.x>=s.min.x&&a.x<=s.max.x&&a.y>=s.min.y&&a.y<=s.max.y},r.overlaps=function(s,a){return s.min.x<=a.max.x&&s.max.x>=a.min.x&&s.max.y>=a.min.y&&s.min.y<=a.max.y},r.translate=function(s,a){s.min.x+=a.x,s.max.x+=a.x,s.min.y+=a.y,s.max.y+=a.y},r.shift=function(s,a){var o=s.max.x-s.min.x,l=s.max.y-s.min.y;s.min.x=a.x,s.max.x=a.x+o,s.min.y=a.y,s.max.y=a.y+l}}()},function(t,i){var r={};t.exports=r,function(){r.create=function(s,a){return{x:s||0,y:a||0}},r.clone=function(s){return{x:s.x,y:s.y}},r.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},r.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},r.rotate=function(s,a,o){var l=Math.cos(a),c=Math.sin(a);o||(o={});var d=s.x*l-s.y*c;return o.y=s.x*c+s.y*l,o.x=d,o},r.rotateAbout=function(s,a,o,l){var c=Math.cos(a),d=Math.sin(a);l||(l={});var h=o.x+((s.x-o.x)*c-(s.y-o.y)*d);return l.y=o.y+((s.x-o.x)*d+(s.y-o.y)*c),l.x=h,l},r.normalise=function(s){var a=r.magnitude(s);return a===0?{x:0,y:0}:{x:s.x/a,y:s.y/a}},r.dot=function(s,a){return s.x*a.x+s.y*a.y},r.cross=function(s,a){return s.x*a.y-s.y*a.x},r.cross3=function(s,a,o){return(a.x-s.x)*(o.y-s.y)-(a.y-s.y)*(o.x-s.x)},r.add=function(s,a,o){return o||(o={}),o.x=s.x+a.x,o.y=s.y+a.y,o},r.sub=function(s,a,o){return o||(o={}),o.x=s.x-a.x,o.y=s.y-a.y,o},r.mult=function(s,a){return{x:s.x*a,y:s.y*a}},r.div=function(s,a){return{x:s.x/a,y:s.y/a}},r.perp=function(s,a){return a=a===!0?-1:1,{x:a*-s.y,y:a*s.x}},r.neg=function(s){return{x:-s.x,y:-s.y}},r.angle=function(s,a){return Math.atan2(a.y-s.y,a.x-s.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(t,i,r){var s={};t.exports=s;var a=r(2),o=r(0);(function(){s.create=function(l,c){for(var d=[],h=0;h<l.length;h++){var f=l[h],u={x:f.x,y:f.y,index:h,body:c,isInternal:!1};d.push(u)}return d},s.fromPath=function(l,c){var d=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return l.replace(d,function(f,u,m){h.push({x:parseFloat(u),y:parseFloat(m)})}),s.create(h,c)},s.centre=function(l){for(var c=s.area(l,!0),d={x:0,y:0},h,f,u,m=0;m<l.length;m++)u=(m+1)%l.length,h=a.cross(l[m],l[u]),f=a.mult(a.add(l[m],l[u]),h),d=a.add(d,f);return a.div(d,6*c)},s.mean=function(l){for(var c={x:0,y:0},d=0;d<l.length;d++)c.x+=l[d].x,c.y+=l[d].y;return a.div(c,l.length)},s.area=function(l,c){for(var d=0,h=l.length-1,f=0;f<l.length;f++)d+=(l[h].x-l[f].x)*(l[h].y+l[f].y),h=f;return c?d/2:Math.abs(d)/2},s.inertia=function(l,c){for(var d=0,h=0,f=l,u,m,p=0;p<f.length;p++)m=(p+1)%f.length,u=Math.abs(a.cross(f[m],f[p])),d+=u*(a.dot(f[m],f[m])+a.dot(f[m],f[p])+a.dot(f[p],f[p])),h+=u;return c/6*(d/h)},s.translate=function(l,c,d){d=typeof d<"u"?d:1;var h=l.length,f=c.x*d,u=c.y*d,m;for(m=0;m<h;m++)l[m].x+=f,l[m].y+=u;return l},s.rotate=function(l,c,d){if(c!==0){var h=Math.cos(c),f=Math.sin(c),u=d.x,m=d.y,p=l.length,g,v,y,_;for(_=0;_<p;_++)g=l[_],v=g.x-u,y=g.y-m,g.x=u+(v*h-y*f),g.y=m+(v*f+y*h);return l}},s.contains=function(l,c){for(var d=c.x,h=c.y,f=l.length,u=l[f-1],m,p=0;p<f;p++){if(m=l[p],(d-u.x)*(m.y-u.y)+(h-u.y)*(u.x-m.x)>0)return!1;u=m}return!0},s.scale=function(l,c,d,h){if(c===1&&d===1)return l;h=h||s.centre(l);for(var f,u,m=0;m<l.length;m++)f=l[m],u=a.sub(f,h),l[m].x=h.x+u.x*c,l[m].y=h.y+u.y*d;return l},s.chamfer=function(l,c,d,h,f){typeof c=="number"?c=[c]:c=c||[8],d=typeof d<"u"?d:-1,h=h||2,f=f||14;for(var u=[],m=0;m<l.length;m++){var p=l[m-1>=0?m-1:l.length-1],g=l[m],v=l[(m+1)%l.length],y=c[m<c.length?m:c.length-1];if(y===0){u.push(g);continue}var _=a.normalise({x:g.y-p.y,y:p.x-g.x}),w=a.normalise({x:v.y-g.y,y:g.x-v.x}),x=Math.sqrt(2*Math.pow(y,2)),S=a.mult(o.clone(_),y),T=a.normalise(a.mult(a.add(_,w),.5)),E=a.sub(g,a.mult(T,x)),M=d;d===-1&&(M=Math.pow(y,.32)*1.75),M=o.clamp(M,h,f),M%2===1&&(M+=1);for(var b=Math.acos(a.dot(_,w)),A=b/M,C=0;C<M;C++)u.push(a.add(a.rotate(S,A*C),E))}return u},s.clockwiseSort=function(l){var c=s.mean(l);return l.sort(function(d,h){return a.angle(c,d)-a.angle(c,h)}),l},s.isConvex=function(l){var c=0,d=l.length,h,f,u,m;if(d<3)return null;for(h=0;h<d;h++)if(f=(h+1)%d,u=(h+2)%d,m=(l[f].x-l[h].x)*(l[u].y-l[f].y),m-=(l[f].y-l[h].y)*(l[u].x-l[f].x),m<0?c|=1:m>0&&(c|=2),c===3)return!1;return c!==0?!0:null},s.hull=function(l){var c=[],d=[],h,f;for(l=l.slice(0),l.sort(function(u,m){var p=u.x-m.x;return p!==0?p:u.y-m.y}),f=0;f<l.length;f+=1){for(h=l[f];d.length>=2&&a.cross3(d[d.length-2],d[d.length-1],h)<=0;)d.pop();d.push(h)}for(f=l.length-1;f>=0;f-=1){for(h=l[f];c.length>=2&&a.cross3(c[c.length-2],c[c.length-1],h)<=0;)c.pop();c.push(h)}return c.pop(),d.pop(),c.concat(d)}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(2),l=r(7),c=r(0),d=r(1),h=r(11);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=1e3/60,s.create=function(u){var m={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},p=c.extend(m,u);return f(p,u),p},s.nextGroup=function(u){return u?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var f=function(u,m){m=m||{},s.set(u,{bounds:u.bounds||d.create(u.vertices),positionPrev:u.positionPrev||o.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u}),a.rotate(u.vertices,u.angle,u.position),h.rotate(u.axes,u.angle),d.update(u.bounds,u.vertices,u.velocity),s.set(u,{axes:m.axes||u.axes,area:m.area||u.area,mass:m.mass||u.mass,inertia:m.inertia||u.inertia});var p=u.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),g=u.isStatic?"#555":"#ccc",v=u.isStatic&&u.render.fillStyle===null?1:0;u.render.fillStyle=u.render.fillStyle||p,u.render.strokeStyle=u.render.strokeStyle||g,u.render.lineWidth=u.render.lineWidth||v,u.render.sprite.xOffset+=-(u.bounds.min.x-u.position.x)/(u.bounds.max.x-u.bounds.min.x),u.render.sprite.yOffset+=-(u.bounds.min.y-u.position.y)/(u.bounds.max.y-u.bounds.min.y)};s.set=function(u,m,p){var g;typeof m=="string"&&(g=m,m={},m[g]=p);for(g in m)if(Object.prototype.hasOwnProperty.call(m,g))switch(p=m[g],g){case"isStatic":s.setStatic(u,p);break;case"isSleeping":l.set(u,p);break;case"mass":s.setMass(u,p);break;case"density":s.setDensity(u,p);break;case"inertia":s.setInertia(u,p);break;case"vertices":s.setVertices(u,p);break;case"position":s.setPosition(u,p);break;case"angle":s.setAngle(u,p);break;case"velocity":s.setVelocity(u,p);break;case"angularVelocity":s.setAngularVelocity(u,p);break;case"speed":s.setSpeed(u,p);break;case"angularSpeed":s.setAngularSpeed(u,p);break;case"parts":s.setParts(u,p);break;case"centre":s.setCentre(u,p);break;default:u[g]=p}},s.setStatic=function(u,m){for(var p=0;p<u.parts.length;p++){var g=u.parts[p];g.isStatic=m,m?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},s.setMass=function(u,m){var p=u.inertia/(u.mass/6);u.inertia=p*(m/6),u.inverseInertia=1/u.inertia,u.mass=m,u.inverseMass=1/u.mass,u.density=u.mass/u.area},s.setDensity=function(u,m){s.setMass(u,m*u.area),u.density=m},s.setInertia=function(u,m){u.inertia=m,u.inverseInertia=1/u.inertia},s.setVertices=function(u,m){m[0].body===u?u.vertices=m:u.vertices=a.create(m,u),u.axes=h.fromVertices(u.vertices),u.area=a.area(u.vertices),s.setMass(u,u.density*u.area);var p=a.centre(u.vertices);a.translate(u.vertices,p,-1),s.setInertia(u,s._inertiaScale*a.inertia(u.vertices,u.mass)),a.translate(u.vertices,u.position),d.update(u.bounds,u.vertices,u.velocity)},s.setParts=function(u,m,p){var g;for(m=m.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,g=0;g<m.length;g++){var v=m[g];v!==u&&(v.parent=u,u.parts.push(v))}if(u.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var y=[];for(g=0;g<m.length;g++)y=y.concat(m[g].vertices);a.clockwiseSort(y);var _=a.hull(y),w=a.centre(_);s.setVertices(u,_),a.translate(u.vertices,w)}var x=s._totalProperties(u);u.area=x.area,u.parent=u,u.position.x=x.centre.x,u.position.y=x.centre.y,u.positionPrev.x=x.centre.x,u.positionPrev.y=x.centre.y,s.setMass(u,x.mass),s.setInertia(u,x.inertia),s.setPosition(u,x.centre)}},s.setCentre=function(u,m,p){p?(u.positionPrev.x+=m.x,u.positionPrev.y+=m.y,u.position.x+=m.x,u.position.y+=m.y):(u.positionPrev.x=m.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=m.y-(u.position.y-u.positionPrev.y),u.position.x=m.x,u.position.y=m.y)},s.setPosition=function(u,m,p){var g=o.sub(m,u.position);p?(u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.velocity.x=g.x,u.velocity.y=g.y,u.speed=o.magnitude(g)):(u.positionPrev.x+=g.x,u.positionPrev.y+=g.y);for(var v=0;v<u.parts.length;v++){var y=u.parts[v];y.position.x+=g.x,y.position.y+=g.y,a.translate(y.vertices,g),d.update(y.bounds,y.vertices,u.velocity)}},s.setAngle=function(u,m,p){var g=m-u.angle;p?(u.anglePrev=u.angle,u.angularVelocity=g,u.angularSpeed=Math.abs(g)):u.anglePrev+=g;for(var v=0;v<u.parts.length;v++){var y=u.parts[v];y.angle+=g,a.rotate(y.vertices,g,u.position),h.rotate(y.axes,g),d.update(y.bounds,y.vertices,u.velocity),v>0&&o.rotateAbout(y.position,g,u.position,y.position)}},s.setVelocity=function(u,m){var p=u.deltaTime/s._baseDelta;u.positionPrev.x=u.position.x-m.x*p,u.positionPrev.y=u.position.y-m.y*p,u.velocity.x=(u.position.x-u.positionPrev.x)/p,u.velocity.y=(u.position.y-u.positionPrev.y)/p,u.speed=o.magnitude(u.velocity)},s.getVelocity=function(u){var m=s._baseDelta/u.deltaTime;return{x:(u.position.x-u.positionPrev.x)*m,y:(u.position.y-u.positionPrev.y)*m}},s.getSpeed=function(u){return o.magnitude(s.getVelocity(u))},s.setSpeed=function(u,m){s.setVelocity(u,o.mult(o.normalise(s.getVelocity(u)),m))},s.setAngularVelocity=function(u,m){var p=u.deltaTime/s._baseDelta;u.anglePrev=u.angle-m*p,u.angularVelocity=(u.angle-u.anglePrev)/p,u.angularSpeed=Math.abs(u.angularVelocity)},s.getAngularVelocity=function(u){return(u.angle-u.anglePrev)*s._baseDelta/u.deltaTime},s.getAngularSpeed=function(u){return Math.abs(s.getAngularVelocity(u))},s.setAngularSpeed=function(u,m){s.setAngularVelocity(u,c.sign(s.getAngularVelocity(u))*m)},s.translate=function(u,m,p){s.setPosition(u,o.add(u.position,m),p)},s.rotate=function(u,m,p,g){if(!p)s.setAngle(u,u.angle+m,g);else{var v=Math.cos(m),y=Math.sin(m),_=u.position.x-p.x,w=u.position.y-p.y;s.setPosition(u,{x:p.x+(_*v-w*y),y:p.y+(_*y+w*v)},g),s.setAngle(u,u.angle+m,g)}},s.scale=function(u,m,p,g){var v=0,y=0;g=g||u.position;for(var _=0;_<u.parts.length;_++){var w=u.parts[_];a.scale(w.vertices,m,p,g),w.axes=h.fromVertices(w.vertices),w.area=a.area(w.vertices),s.setMass(w,u.density*w.area),a.translate(w.vertices,{x:-w.position.x,y:-w.position.y}),s.setInertia(w,s._inertiaScale*a.inertia(w.vertices,w.mass)),a.translate(w.vertices,{x:w.position.x,y:w.position.y}),_>0&&(v+=w.area,y+=w.inertia),w.position.x=g.x+(w.position.x-g.x)*m,w.position.y=g.y+(w.position.y-g.y)*p,d.update(w.bounds,w.vertices,u.velocity)}u.parts.length>1&&(u.area=v,u.isStatic||(s.setMass(u,u.density*v),s.setInertia(u,y))),u.circleRadius&&(m===p?u.circleRadius*=m:u.circleRadius=null)},s.update=function(u,m){m=(typeof m<"u"?m:1e3/60)*u.timeScale;var p=m*m,g=s._timeCorrection?m/(u.deltaTime||m):1,v=1-u.frictionAir*(m/c._baseDelta),y=(u.position.x-u.positionPrev.x)*g,_=(u.position.y-u.positionPrev.y)*g;u.velocity.x=y*v+u.force.x/u.mass*p,u.velocity.y=_*v+u.force.y/u.mass*p,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.deltaTime=m,u.angularVelocity=(u.angle-u.anglePrev)*v*g+u.torque/u.inertia*p,u.anglePrev=u.angle,u.angle+=u.angularVelocity;for(var w=0;w<u.parts.length;w++){var x=u.parts[w];a.translate(x.vertices,u.velocity),w>0&&(x.position.x+=u.velocity.x,x.position.y+=u.velocity.y),u.angularVelocity!==0&&(a.rotate(x.vertices,u.angularVelocity,u.position),h.rotate(x.axes,u.angularVelocity),w>0&&o.rotateAbout(x.position,u.angularVelocity,u.position,x.position)),d.update(x.bounds,x.vertices,u.velocity)}},s.updateVelocities=function(u){var m=s._baseDelta/u.deltaTime,p=u.velocity;p.x=(u.position.x-u.positionPrev.x)*m,p.y=(u.position.y-u.positionPrev.y)*m,u.speed=Math.sqrt(p.x*p.x+p.y*p.y),u.angularVelocity=(u.angle-u.anglePrev)*m,u.angularSpeed=Math.abs(u.angularVelocity)},s.applyForce=function(u,m,p){var g={x:m.x-u.position.x,y:m.y-u.position.y};u.force.x+=p.x,u.force.y+=p.y,u.torque+=g.x*p.y-g.y*p.x},s._totalProperties=function(u){for(var m={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=u.parts.length===1?0:1;p<u.parts.length;p++){var g=u.parts[p],v=g.mass!==1/0?g.mass:1;m.mass+=v,m.area+=g.area,m.inertia+=g.inertia,m.centre=o.add(m.centre,o.mult(g.position,v))}return m.centre=o.div(m.centre,m.mass),m}})()},function(t,i,r){var s={};t.exports=s;var a=r(0);(function(){s.on=function(o,l,c){for(var d=l.split(" "),h,f=0;f<d.length;f++)h=d[f],o.events=o.events||{},o.events[h]=o.events[h]||[],o.events[h].push(c);return c},s.off=function(o,l,c){if(!l){o.events={};return}typeof l=="function"&&(c=l,l=a.keys(o.events).join(" "));for(var d=l.split(" "),h=0;h<d.length;h++){var f=o.events[d[h]],u=[];if(c&&f)for(var m=0;m<f.length;m++)f[m]!==c&&u.push(f[m]);o.events[d[h]]=u}},s.trigger=function(o,l,c){var d,h,f,u,m=o.events;if(m&&a.keys(m).length>0){c||(c={}),d=l.split(" ");for(var p=0;p<d.length;p++)if(h=d[p],f=m[h],f){u=a.clone(c,!1),u.name=h,u.source=o;for(var g=0;g<f.length;g++)f[g].apply(o,[u])}}}})()},function(t,i,r){var s={};t.exports=s;var a=r(5),o=r(0),l=r(1),c=r(4);(function(){s.create=function(d){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},d)},s.setModified=function(d,h,f,u){if(d.isModified=h,h&&d.cache&&(d.cache.allBodies=null,d.cache.allConstraints=null,d.cache.allComposites=null),f&&d.parent&&s.setModified(d.parent,h,f,u),u)for(var m=0;m<d.composites.length;m++){var p=d.composites[m];s.setModified(p,h,f,u)}},s.add=function(d,h){var f=[].concat(h);a.trigger(d,"beforeAdd",{object:h});for(var u=0;u<f.length;u++){var m=f[u];switch(m.type){case"body":if(m.parent!==m){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(d,m);break;case"constraint":s.addConstraint(d,m);break;case"composite":s.addComposite(d,m);break;case"mouseConstraint":s.addConstraint(d,m.constraint);break}}return a.trigger(d,"afterAdd",{object:h}),d},s.remove=function(d,h,f){var u=[].concat(h);a.trigger(d,"beforeRemove",{object:h});for(var m=0;m<u.length;m++){var p=u[m];switch(p.type){case"body":s.removeBody(d,p,f);break;case"constraint":s.removeConstraint(d,p,f);break;case"composite":s.removeComposite(d,p,f);break;case"mouseConstraint":s.removeConstraint(d,p.constraint);break}}return a.trigger(d,"afterRemove",{object:h}),d},s.addComposite=function(d,h){return d.composites.push(h),h.parent=d,s.setModified(d,!0,!0,!1),d},s.removeComposite=function(d,h,f){var u=o.indexOf(d.composites,h);if(u!==-1&&s.removeCompositeAt(d,u),f)for(var m=0;m<d.composites.length;m++)s.removeComposite(d.composites[m],h,!0);return d},s.removeCompositeAt=function(d,h){return d.composites.splice(h,1),s.setModified(d,!0,!0,!1),d},s.addBody=function(d,h){return d.bodies.push(h),s.setModified(d,!0,!0,!1),d},s.removeBody=function(d,h,f){var u=o.indexOf(d.bodies,h);if(u!==-1&&s.removeBodyAt(d,u),f)for(var m=0;m<d.composites.length;m++)s.removeBody(d.composites[m],h,!0);return d},s.removeBodyAt=function(d,h){return d.bodies.splice(h,1),s.setModified(d,!0,!0,!1),d},s.addConstraint=function(d,h){return d.constraints.push(h),s.setModified(d,!0,!0,!1),d},s.removeConstraint=function(d,h,f){var u=o.indexOf(d.constraints,h);if(u!==-1&&s.removeConstraintAt(d,u),f)for(var m=0;m<d.composites.length;m++)s.removeConstraint(d.composites[m],h,!0);return d},s.removeConstraintAt=function(d,h){return d.constraints.splice(h,1),s.setModified(d,!0,!0,!1),d},s.clear=function(d,h,f){if(f)for(var u=0;u<d.composites.length;u++)s.clear(d.composites[u],h,!0);return h?d.bodies=d.bodies.filter(function(m){return m.isStatic}):d.bodies.length=0,d.constraints.length=0,d.composites.length=0,s.setModified(d,!0,!0,!1),d},s.allBodies=function(d){if(d.cache&&d.cache.allBodies)return d.cache.allBodies;for(var h=[].concat(d.bodies),f=0;f<d.composites.length;f++)h=h.concat(s.allBodies(d.composites[f]));return d.cache&&(d.cache.allBodies=h),h},s.allConstraints=function(d){if(d.cache&&d.cache.allConstraints)return d.cache.allConstraints;for(var h=[].concat(d.constraints),f=0;f<d.composites.length;f++)h=h.concat(s.allConstraints(d.composites[f]));return d.cache&&(d.cache.allConstraints=h),h},s.allComposites=function(d){if(d.cache&&d.cache.allComposites)return d.cache.allComposites;for(var h=[].concat(d.composites),f=0;f<d.composites.length;f++)h=h.concat(s.allComposites(d.composites[f]));return d.cache&&(d.cache.allComposites=h),h},s.get=function(d,h,f){var u,m;switch(f){case"body":u=s.allBodies(d);break;case"constraint":u=s.allConstraints(d);break;case"composite":u=s.allComposites(d).concat(d);break}return u?(m=u.filter(function(p){return p.id.toString()===h.toString()}),m.length===0?null:m[0]):null},s.move=function(d,h,f){return s.remove(d,h),s.add(f,h),d},s.rebase=function(d){for(var h=s.allBodies(d).concat(s.allConstraints(d)).concat(s.allComposites(d)),f=0;f<h.length;f++)h[f].id=o.nextId();return d},s.translate=function(d,h,f){for(var u=f?s.allBodies(d):d.bodies,m=0;m<u.length;m++)c.translate(u[m],h);return d},s.rotate=function(d,h,f,u){for(var m=Math.cos(h),p=Math.sin(h),g=u?s.allBodies(d):d.bodies,v=0;v<g.length;v++){var y=g[v],_=y.position.x-f.x,w=y.position.y-f.y;c.setPosition(y,{x:f.x+(_*m-w*p),y:f.y+(_*p+w*m)}),c.rotate(y,h)}return d},s.scale=function(d,h,f,u,m){for(var p=m?s.allBodies(d):d.bodies,g=0;g<p.length;g++){var v=p[g],y=v.position.x-u.x,_=v.position.y-u.y;c.setPosition(v,{x:u.x+y*h,y:u.y+_*f}),c.scale(v,h,f)}return d},s.bounds=function(d){for(var h=s.allBodies(d),f=[],u=0;u<h.length;u+=1){var m=h[u];f.push(m.bounds.min,m.bounds.max)}return l.create(f)}})()},function(t,i,r){var s={};t.exports=s;var a=r(4),o=r(5),l=r(0);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(c,d){for(var h=d/l._baseDelta,f=s._motionSleepThreshold,u=0;u<c.length;u++){var m=c[u],p=a.getSpeed(m),g=a.getAngularSpeed(m),v=p*p+g*g;if(m.force.x!==0||m.force.y!==0){s.set(m,!1);continue}var y=Math.min(m.motion,v),_=Math.max(m.motion,v);m.motion=s._minBias*y+(1-s._minBias)*_,m.sleepThreshold>0&&m.motion<f?(m.sleepCounter+=1,m.sleepCounter>=m.sleepThreshold/h&&s.set(m,!0)):m.sleepCounter>0&&(m.sleepCounter-=1)}},s.afterCollisions=function(c){for(var d=s._motionSleepThreshold,h=0;h<c.length;h++){var f=c[h];if(f.isActive){var u=f.collision,m=u.bodyA.parent,p=u.bodyB.parent;if(!(m.isSleeping&&p.isSleeping||m.isStatic||p.isStatic)&&(m.isSleeping||p.isSleeping)){var g=m.isSleeping&&!m.isStatic?m:p,v=g===m?p:m;!g.isStatic&&v.motion>d&&s.set(g,!1)}}}},s.set=function(c,d){var h=c.isSleeping;d?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,h||o.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,h&&o.trigger(c,"sleepEnd"))}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(9);(function(){var l=[],c={overlap:0,axis:null},d={overlap:0,axis:null};s.create=function(h,f){return{pair:null,collided:!1,bodyA:h,bodyB:f,parentA:h.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},s.collides=function(h,f,u){if(s._overlapAxes(c,h.vertices,f.vertices,h.axes),c.overlap<=0||(s._overlapAxes(d,f.vertices,h.vertices,f.axes),d.overlap<=0))return null;var m=u&&u.table[o.id(h,f)],p;m?p=m.collision:(p=s.create(h,f),p.collided=!0,p.bodyA=h.id<f.id?h:f,p.bodyB=h.id<f.id?f:h,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),h=p.bodyA,f=p.bodyB;var g;c.overlap<d.overlap?g=c:g=d;var v=p.normal,y=p.supports,_=g.axis,w=_.x,x=_.y;w*(f.position.x-h.position.x)+x*(f.position.y-h.position.y)<0?(v.x=w,v.y=x):(v.x=-w,v.y=-x),p.tangent.x=-v.y,p.tangent.y=v.x,p.depth=g.overlap,p.penetration.x=v.x*p.depth,p.penetration.y=v.y*p.depth;var S=s._findSupports(h,f,v,1),T=0;if(a.contains(h.vertices,S[0])&&(y[T++]=S[0]),a.contains(h.vertices,S[1])&&(y[T++]=S[1]),T<2){var E=s._findSupports(f,h,v,-1);a.contains(f.vertices,E[0])&&(y[T++]=E[0]),T<2&&a.contains(f.vertices,E[1])&&(y[T++]=E[1])}return T===0&&(y[T++]=S[0]),y.length=T,p},s._overlapAxes=function(h,f,u,m){var p=f.length,g=u.length,v=f[0].x,y=f[0].y,_=u[0].x,w=u[0].y,x=m.length,S=Number.MAX_VALUE,T=0,E,M,b,A,C,P;for(C=0;C<x;C++){var I=m[C],D=I.x,F=I.y,B=v*D+y*F,k=_*D+w*F,K=B,O=k;for(P=1;P<p;P+=1)A=f[P].x*D+f[P].y*F,A>K?K=A:A<B&&(B=A);for(P=1;P<g;P+=1)A=u[P].x*D+u[P].y*F,A>O?O=A:A<k&&(k=A);if(M=K-k,b=O-B,E=M<b?M:b,E<S&&(S=E,T=C,E<=0))break}h.axis=m[T],h.overlap=S},s._projectToAxis=function(h,f,u){for(var m=f[0].x*u.x+f[0].y*u.y,p=m,g=1;g<f.length;g+=1){var v=f[g].x*u.x+f[g].y*u.y;v>p?p=v:v<m&&(m=v)}h.min=m,h.max=p},s._findSupports=function(h,f,u,m){var p=f.vertices,g=p.length,v=h.position.x,y=h.position.y,_=u.x*m,w=u.y*m,x=Number.MAX_VALUE,S,T,E,M,b;for(b=0;b<g;b+=1)T=p[b],M=_*(v-T.x)+w*(y-T.y),M<x&&(x=M,S=T);return E=p[(g+S.index-1)%g],x=_*(v-E.x)+w*(y-E.y),T=p[(S.index+1)%g],_*(v-T.x)+w*(y-T.y)<x?(l[0]=S,l[1]=T,l):(l[0]=S,l[1]=E,l)}})()},function(t,i,r){var s={};t.exports=s;var a=r(16);(function(){s.create=function(o,l){var c=o.bodyA,d=o.bodyB,h={id:s.id(c,d),bodyA:c,bodyB:d,collision:o,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||d.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(h,o,l),h},s.update=function(o,l,c){var d=o.contacts,h=l.supports,f=o.activeContacts,u=l.parentA,m=l.parentB,p=u.vertices.length;o.isActive=!0,o.timeUpdated=c,o.collision=l,o.separation=l.depth,o.inverseMass=u.inverseMass+m.inverseMass,o.friction=u.friction<m.friction?u.friction:m.friction,o.frictionStatic=u.frictionStatic>m.frictionStatic?u.frictionStatic:m.frictionStatic,o.restitution=u.restitution>m.restitution?u.restitution:m.restitution,o.slop=u.slop>m.slop?u.slop:m.slop,l.pair=o,f.length=0;for(var g=0;g<h.length;g++){var v=h[g],y=v.body===u?v.index:p+v.index,_=d[y];_?f.push(_):f.push(d[y]=a.create(v))}},s.setActive=function(o,l,c){l?(o.isActive=!0,o.timeUpdated=c):(o.isActive=!1,o.activeContacts.length=0)},s.id=function(o,l){return o.id<l.id?"A"+o.id+"B"+l.id:"A"+l.id+"B"+o.id}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(2),l=r(7),c=r(1),d=r(11),h=r(0);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(f){var u=f;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var m=u.bodyA?o.add(u.bodyA.position,u.pointA):u.pointA,p=u.bodyB?o.add(u.bodyB.position,u.pointB):u.pointB,g=o.magnitude(o.sub(m,p));u.length=typeof u.length<"u"?u.length:g,u.id=u.id||h.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var v={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return u.length===0&&u.stiffness>.1?(v.type="pin",v.anchors=!1):u.stiffness<.9&&(v.type="spring"),u.render=h.extend(v,u.render),u},s.preSolveAll=function(f){for(var u=0;u<f.length;u+=1){var m=f[u],p=m.constraintImpulse;m.isStatic||p.x===0&&p.y===0&&p.angle===0||(m.position.x+=p.x,m.position.y+=p.y,m.angle+=p.angle)}},s.solveAll=function(f,u){for(var m=h.clamp(u/h._baseDelta,0,1),p=0;p<f.length;p+=1){var g=f[p],v=!g.bodyA||g.bodyA&&g.bodyA.isStatic,y=!g.bodyB||g.bodyB&&g.bodyB.isStatic;(v||y)&&s.solve(f[p],m)}for(p=0;p<f.length;p+=1)g=f[p],v=!g.bodyA||g.bodyA&&g.bodyA.isStatic,y=!g.bodyB||g.bodyB&&g.bodyB.isStatic,!v&&!y&&s.solve(f[p],m)},s.solve=function(f,u){var m=f.bodyA,p=f.bodyB,g=f.pointA,v=f.pointB;if(!(!m&&!p)){m&&!m.isStatic&&(o.rotate(g,m.angle-f.angleA,g),f.angleA=m.angle),p&&!p.isStatic&&(o.rotate(v,p.angle-f.angleB,v),f.angleB=p.angle);var y=g,_=v;if(m&&(y=o.add(m.position,g)),p&&(_=o.add(p.position,v)),!(!y||!_)){var w=o.sub(y,_),x=o.magnitude(w);x<s._minLength&&(x=s._minLength);var S=(x-f.length)/x,T=f.stiffness>=1||f.length===0,E=T?f.stiffness*u:f.stiffness*u*u,M=f.damping*u,b=o.mult(w,S*E),A=(m?m.inverseMass:0)+(p?p.inverseMass:0),C=(m?m.inverseInertia:0)+(p?p.inverseInertia:0),P=A+C,I,D,F,B,k;if(M>0){var K=o.create();F=o.div(w,x),k=o.sub(p&&o.sub(p.position,p.positionPrev)||K,m&&o.sub(m.position,m.positionPrev)||K),B=o.dot(F,k)}m&&!m.isStatic&&(D=m.inverseMass/A,m.constraintImpulse.x-=b.x*D,m.constraintImpulse.y-=b.y*D,m.position.x-=b.x*D,m.position.y-=b.y*D,M>0&&(m.positionPrev.x-=M*F.x*B*D,m.positionPrev.y-=M*F.y*B*D),I=o.cross(g,b)/P*s._torqueDampen*m.inverseInertia*(1-f.angularStiffness),m.constraintImpulse.angle-=I,m.angle-=I),p&&!p.isStatic&&(D=p.inverseMass/A,p.constraintImpulse.x+=b.x*D,p.constraintImpulse.y+=b.y*D,p.position.x+=b.x*D,p.position.y+=b.y*D,M>0&&(p.positionPrev.x+=M*F.x*B*D,p.positionPrev.y+=M*F.y*B*D),I=o.cross(v,b)/P*s._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle+=I,p.angle+=I)}}},s.postSolveAll=function(f){for(var u=0;u<f.length;u++){var m=f[u],p=m.constraintImpulse;if(!(m.isStatic||p.x===0&&p.y===0&&p.angle===0)){l.set(m,!1);for(var g=0;g<m.parts.length;g++){var v=m.parts[g];a.translate(v.vertices,p),g>0&&(v.position.x+=p.x,v.position.y+=p.y),p.angle!==0&&(a.rotate(v.vertices,p.angle,m.position),d.rotate(v.axes,p.angle),g>0&&o.rotateAbout(v.position,p.angle,m.position,v.position)),c.update(v.bounds,v.vertices,m.velocity)}p.angle*=s._warming,p.x*=s._warming,p.y*=s._warming}}},s.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},s.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}}})()},function(t,i,r){var s={};t.exports=s;var a=r(2),o=r(0);(function(){s.fromVertices=function(l){for(var c={},d=0;d<l.length;d++){var h=(d+1)%l.length,f=a.normalise({x:l[h].y-l[d].y,y:l[d].x-l[h].x}),u=f.y===0?1/0:f.x/f.y;u=u.toFixed(3).toString(),c[u]=f}return o.values(c)},s.rotate=function(l,c){if(c!==0)for(var d=Math.cos(c),h=Math.sin(c),f=0;f<l.length;f++){var u=l[f],m;m=u.x*d-u.y*h,u.y=u.x*h+u.y*d,u.x=m}}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(0),l=r(4),c=r(1),d=r(2);(function(){s.rectangle=function(h,f,u,m,p){p=p||{};var g={label:"Rectangle Body",position:{x:h,y:f},vertices:a.fromPath("L 0 0 L "+u+" 0 L "+u+" "+m+" L 0 "+m)};if(p.chamfer){var v=p.chamfer;g.vertices=a.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete p.chamfer}return l.create(o.extend({},g,p))},s.trapezoid=function(h,f,u,m,p,g){g=g||{},p*=.5;var v=(1-p*2)*u,y=u*p,_=y+v,w=_+y,x;p<.5?x="L 0 0 L "+y+" "+-m+" L "+_+" "+-m+" L "+w+" 0":x="L 0 0 L "+_+" "+-m+" L "+w+" 0";var S={label:"Trapezoid Body",position:{x:h,y:f},vertices:a.fromPath(x)};if(g.chamfer){var T=g.chamfer;S.vertices=a.chamfer(S.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete g.chamfer}return l.create(o.extend({},S,g))},s.circle=function(h,f,u,m,p){m=m||{};var g={label:"Circle Body",circleRadius:u};p=p||25;var v=Math.ceil(Math.max(10,Math.min(p,u)));return v%2===1&&(v+=1),s.polygon(h,f,v,u,o.extend({},g,m))},s.polygon=function(h,f,u,m,p){if(p=p||{},u<3)return s.circle(h,f,m,p);for(var g=2*Math.PI/u,v="",y=g*.5,_=0;_<u;_+=1){var w=y+_*g,x=Math.cos(w)*m,S=Math.sin(w)*m;v+="L "+x.toFixed(3)+" "+S.toFixed(3)+" "}var T={label:"Polygon Body",position:{x:h,y:f},vertices:a.fromPath(v)};if(p.chamfer){var E=p.chamfer;T.vertices=a.chamfer(T.vertices,E.radius,E.quality,E.qualityMin,E.qualityMax),delete p.chamfer}return l.create(o.extend({},T,p))},s.fromVertices=function(h,f,u,m,p,g,v,y){var _=o.getDecomp(),w,x,S,T,E,M,b,A,C,P,I;for(w=!!(_&&_.quickDecomp),m=m||{},S=[],p=typeof p<"u"?p:!1,g=typeof g<"u"?g:.01,v=typeof v<"u"?v:10,y=typeof y<"u"?y:.01,o.isArray(u[0])||(u=[u]),P=0;P<u.length;P+=1)if(M=u[P],T=a.isConvex(M),E=!T,E&&!w&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),T||!w)T?M=a.clockwiseSort(M):M=a.hull(M),S.push({position:{x:h,y:f},vertices:M});else{var D=M.map(function(Q){return[Q.x,Q.y]});_.makeCCW(D),g!==!1&&_.removeCollinearPoints(D,g),y!==!1&&_.removeDuplicatePoints&&_.removeDuplicatePoints(D,y);var F=_.quickDecomp(D);for(b=0;b<F.length;b++){var B=F[b],k=B.map(function(Q){return{x:Q[0],y:Q[1]}});v>0&&a.area(k)<v||S.push({position:a.centre(k),vertices:k})}}for(b=0;b<S.length;b++)S[b]=l.create(o.extend(S[b],m));if(p){var K=5;for(b=0;b<S.length;b++){var O=S[b];for(A=b+1;A<S.length;A++){var re=S[A];if(c.overlaps(O.bounds,re.bounds)){var ae=O.vertices,Te=re.vertices;for(C=0;C<O.vertices.length;C++)for(I=0;I<re.vertices.length;I++){var G=d.magnitudeSquared(d.sub(ae[(C+1)%ae.length],Te[I])),Y=d.magnitudeSquared(d.sub(ae[C],Te[(I+1)%Te.length]));G<K&&Y<K&&(ae[C].isInternal=!0,Te[I].isInternal=!0)}}}}}return S.length>1?(x=l.create(o.extend({parts:S.slice(0)},m)),l.setPosition(x,{x:h,y:f}),x):S[0]}})()},function(t,i,r){var s={};t.exports=s;var a=r(0),o=r(8);(function(){s.create=function(l){var c={bodies:[],pairs:null};return a.extend(c,l)},s.setBodies=function(l,c){l.bodies=c.slice(0)},s.clear=function(l){l.bodies=[]},s.collisions=function(l){var c=[],d=l.pairs,h=l.bodies,f=h.length,u=s.canCollide,m=o.collides,p,g;for(h.sort(s._compareBoundsX),p=0;p<f;p++){var v=h[p],y=v.bounds,_=v.bounds.max.x,w=v.bounds.max.y,x=v.bounds.min.y,S=v.isStatic||v.isSleeping,T=v.parts.length,E=T===1;for(g=p+1;g<f;g++){var M=h[g],b=M.bounds;if(b.min.x>_)break;if(!(w<b.min.y||x>b.max.y)&&!(S&&(M.isStatic||M.isSleeping))&&u(v.collisionFilter,M.collisionFilter)){var A=M.parts.length;if(E&&A===1){var C=m(v,M,d);C&&c.push(C)}else for(var P=T>1?1:0,I=A>1?1:0,D=P;D<T;D++)for(var F=v.parts[D],y=F.bounds,B=I;B<A;B++){var k=M.parts[B],b=k.bounds;if(!(y.min.x>b.max.x||y.max.x<b.min.x||y.max.y<b.min.y||y.min.y>b.max.y)){var C=m(F,k,d);C&&c.push(C)}}}}}return c},s.canCollide=function(l,c){return l.group===c.group&&l.group!==0?l.group>0:(l.mask&c.category)!==0&&(c.mask&l.category)!==0},s._compareBoundsX=function(l,c){return l.bounds.min.x-c.bounds.min.x}})()},function(t,i,r){var s={};t.exports=s;var a=r(0);(function(){s.create=function(o){var l={};return o||a.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=o||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(c){var d=s._getRelativeMousePosition(c,l.element,l.pixelRatio),h=c.changedTouches;h&&(l.button=0,c.preventDefault()),l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=c},l.mousedown=function(c){var d=s._getRelativeMousePosition(c,l.element,l.pixelRatio),h=c.changedTouches;h?(l.button=0,c.preventDefault()):l.button=c.button,l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=c},l.mouseup=function(c){var d=s._getRelativeMousePosition(c,l.element,l.pixelRatio),h=c.changedTouches;h&&c.preventDefault(),l.button=-1,l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=c},l.mousewheel=function(c){l.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},s.setElement(l,l.element),l},s.setElement=function(o,l){o.element=l,l.addEventListener("mousemove",o.mousemove),l.addEventListener("mousedown",o.mousedown),l.addEventListener("mouseup",o.mouseup),l.addEventListener("mousewheel",o.mousewheel),l.addEventListener("DOMMouseScroll",o.mousewheel),l.addEventListener("touchmove",o.mousemove),l.addEventListener("touchstart",o.mousedown),l.addEventListener("touchend",o.mouseup)},s.clearSourceEvents=function(o){o.sourceEvents.mousemove=null,o.sourceEvents.mousedown=null,o.sourceEvents.mouseup=null,o.sourceEvents.mousewheel=null,o.wheelDelta=0},s.setOffset=function(o,l){o.offset.x=l.x,o.offset.y=l.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},s.setScale=function(o,l){o.scale.x=l.x,o.scale.y=l.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},s._getRelativeMousePosition=function(o,l,c){var d=l.getBoundingClientRect(),h=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:h.scrollLeft,u=window.pageYOffset!==void 0?window.pageYOffset:h.scrollTop,m=o.changedTouches,p,g;return m?(p=m[0].pageX-d.left-f,g=m[0].pageY-d.top-u):(p=o.pageX-d.left-f,g=o.pageY-d.top-u),{x:p/(l.clientWidth/(l.width||l.clientWidth)*c),y:g/(l.clientHeight/(l.height||l.clientHeight)*c)}}})()},function(t,i,r){var s={};t.exports=s;var a=r(0);(function(){s._registry={},s.register=function(o){if(s.isPlugin(o)||a.warn("Plugin.register:",s.toString(o),"does not implement all required fields."),o.name in s._registry){var l=s._registry[o.name],c=s.versionParse(o.version).number,d=s.versionParse(l.version).number;c>d?(a.warn("Plugin.register:",s.toString(l),"was upgraded to",s.toString(o)),s._registry[o.name]=o):c<d?a.warn("Plugin.register:",s.toString(l),"can not be downgraded to",s.toString(o)):o!==l&&a.warn("Plugin.register:",s.toString(o),"is already registered to different plugin object")}else s._registry[o.name]=o;return o},s.resolve=function(o){return s._registry[s.dependencyParse(o).name]},s.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},s.isPlugin=function(o){return o&&o.name&&o.version&&o.install},s.isUsed=function(o,l){return o.used.indexOf(l)>-1},s.isFor=function(o,l){var c=o.for&&s.dependencyParse(o.for);return!o.for||l.name===c.name&&s.versionSatisfies(l.version,c.range)},s.use=function(o,l){if(o.uses=(o.uses||[]).concat(l||[]),o.uses.length===0){a.warn("Plugin.use:",s.toString(o),"does not specify any dependencies to install.");return}for(var c=s.dependencies(o),d=a.topologicalSort(c),h=[],f=0;f<d.length;f+=1)if(d[f]!==o.name){var u=s.resolve(d[f]);if(!u){h.push(" "+d[f]);continue}s.isUsed(o,u.name)||(s.isFor(u,o)||(a.warn("Plugin.use:",s.toString(u),"is for",u.for,"but installed on",s.toString(o)+"."),u._warned=!0),u.install?u.install(o):(a.warn("Plugin.use:",s.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(h.push(" "+s.toString(u)),delete u._warned):h.push(" "+s.toString(u)),o.used.push(u.name))}h.length>0&&a.info(h.join("  "))},s.dependencies=function(o,l){var c=s.dependencyParse(o),d=c.name;if(l=l||{},!(d in l)){o=s.resolve(o)||o,l[d]=a.map(o.uses||[],function(f){s.isPlugin(f)&&s.register(f);var u=s.dependencyParse(f),m=s.resolve(f);return m&&!s.versionSatisfies(m.version,u.range)?(a.warn("Plugin.dependencies:",s.toString(m),"does not satisfy",s.toString(u),"used by",s.toString(c)+"."),m._warned=!0,o._warned=!0):m||(a.warn("Plugin.dependencies:",s.toString(f),"used by",s.toString(c),"could not be resolved."),o._warned=!0),u.name});for(var h=0;h<l[d].length;h+=1)s.dependencies(l[d][h],l);return l}},s.dependencyParse=function(o){if(a.isString(o)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(o)||a.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},s.versionParse=function(o){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(o)||a.warn("Plugin.versionParse:",o,"is not a valid version or range.");var c=l.exec(o),d=Number(c[4]),h=Number(c[5]),f=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:o,operator:c[1]||c[2]||"",major:d,minor:h,patch:f,parts:[d,h,f],prerelease:c[7],number:d*1e8+h*1e4+f}},s.versionSatisfies=function(o,l){l=l||"*";var c=s.versionParse(l),d=s.versionParse(o);if(c.isRange){if(c.operator==="*"||o==="*")return!0;if(c.operator===">")return d.number>c.number;if(c.operator===">=")return d.number>=c.number;if(c.operator==="~")return d.major===c.major&&d.minor===c.minor&&d.patch>=c.patch;if(c.operator==="^")return c.major>0?d.major===c.major&&d.number>=c.number:c.minor>0?d.minor===c.minor&&d.patch>=c.patch:d.patch===c.patch}return o===l||o==="*"}})()},function(t,i){var r={};t.exports=r,function(){r.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},function(t,i,r){var s={};t.exports=s;var a=r(7),o=r(18),l=r(13),c=r(19),d=r(5),h=r(6),f=r(10),u=r(0),m=r(4);(function(){s.create=function(p){p=p||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},v=u.extend(g,p);return v.world=p.world||h.create({label:"World"}),v.pairs=p.pairs||c.create(),v.detector=p.detector||l.create(),v.grid={buckets:[]},v.world.gravity=v.gravity,v.broadphase=v.grid,v.metrics={},v},s.update=function(p,g){var v=u.now(),y=p.world,_=p.detector,w=p.pairs,x=p.timing,S=x.timestamp,T;g=typeof g<"u"?g:u._baseDelta,g*=x.timeScale,x.timestamp+=g,x.lastDelta=g;var E={timestamp:x.timestamp,delta:g};d.trigger(p,"beforeUpdate",E);var M=h.allBodies(y),b=h.allConstraints(y);for(y.isModified&&(l.setBodies(_,M),h.setModified(y,!1,!1,!0)),p.enableSleeping&&a.update(M,g),s._bodiesApplyGravity(M,p.gravity),g>0&&s._bodiesUpdate(M,g),f.preSolveAll(M),T=0;T<p.constraintIterations;T++)f.solveAll(b,g);f.postSolveAll(M),_.pairs=p.pairs;var A=l.collisions(_);c.update(w,A,S),p.enableSleeping&&a.afterCollisions(w.list),w.collisionStart.length>0&&d.trigger(p,"collisionStart",{pairs:w.collisionStart});var C=u.clamp(20/p.positionIterations,0,1);for(o.preSolvePosition(w.list),T=0;T<p.positionIterations;T++)o.solvePosition(w.list,g,C);for(o.postSolvePosition(M),f.preSolveAll(M),T=0;T<p.constraintIterations;T++)f.solveAll(b,g);for(f.postSolveAll(M),o.preSolveVelocity(w.list),T=0;T<p.velocityIterations;T++)o.solveVelocity(w.list,g);return s._bodiesUpdateVelocities(M),w.collisionActive.length>0&&d.trigger(p,"collisionActive",{pairs:w.collisionActive}),w.collisionEnd.length>0&&d.trigger(p,"collisionEnd",{pairs:w.collisionEnd}),s._bodiesClearForces(M),d.trigger(p,"afterUpdate",E),p.timing.lastElapsed=u.now()-v,p},s.merge=function(p,g){if(u.extend(p,g),g.world){p.world=g.world,s.clear(p);for(var v=h.allBodies(p.world),y=0;y<v.length;y++){var _=v[y];a.set(_,!1),_.id=u.nextId()}}},s.clear=function(p){c.clear(p.pairs),l.clear(p.detector)},s._bodiesClearForces=function(p){for(var g=p.length,v=0;v<g;v++){var y=p[v];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(p,g){var v=typeof g.scale<"u"?g.scale:.001,y=p.length;if(!(g.x===0&&g.y===0||v===0))for(var _=0;_<y;_++){var w=p[_];w.isStatic||w.isSleeping||(w.force.y+=w.mass*g.y*v,w.force.x+=w.mass*g.x*v)}},s._bodiesUpdate=function(p,g){for(var v=p.length,y=0;y<v;y++){var _=p[y];_.isStatic||_.isSleeping||m.update(_,g)}},s._bodiesUpdateVelocities=function(p){for(var g=p.length,v=0;v<g;v++)m.updateVelocities(p[v])}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(0),l=r(1);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(c){var d,h,f,u=c.length;for(d=0;d<u;d++)h=c[d],h.isActive&&(f=h.activeContacts.length,h.collision.parentA.totalContacts+=f,h.collision.parentB.totalContacts+=f)},s.solvePosition=function(c,d,h){var f,u,m,p,g,v,y,_,w=s._positionDampen*(h||1),x=o.clamp(d/o._baseDelta,0,1),S=c.length;for(f=0;f<S;f++)u=c[f],!(!u.isActive||u.isSensor)&&(m=u.collision,p=m.parentA,g=m.parentB,v=m.normal,u.separation=v.x*(g.positionImpulse.x+m.penetration.x-p.positionImpulse.x)+v.y*(g.positionImpulse.y+m.penetration.y-p.positionImpulse.y));for(f=0;f<S;f++)u=c[f],!(!u.isActive||u.isSensor)&&(m=u.collision,p=m.parentA,g=m.parentB,v=m.normal,_=u.separation-u.slop*x,(p.isStatic||g.isStatic)&&(_*=2),p.isStatic||p.isSleeping||(y=w/p.totalContacts,p.positionImpulse.x+=v.x*_*y,p.positionImpulse.y+=v.y*_*y),g.isStatic||g.isSleeping||(y=w/g.totalContacts,g.positionImpulse.x-=v.x*_*y,g.positionImpulse.y-=v.y*_*y))},s.postSolvePosition=function(c){for(var d=s._positionWarming,h=c.length,f=a.translate,u=l.update,m=0;m<h;m++){var p=c[m],g=p.positionImpulse,v=g.x,y=g.y,_=p.velocity;if(p.totalContacts=0,v!==0||y!==0){for(var w=0;w<p.parts.length;w++){var x=p.parts[w];f(x.vertices,g),u(x.bounds,x.vertices,_),x.position.x+=v,x.position.y+=y}p.positionPrev.x+=v,p.positionPrev.y+=y,v*_.x+y*_.y<0?(g.x=0,g.y=0):(g.x*=d,g.y*=d)}}},s.preSolveVelocity=function(c){var d=c.length,h,f;for(h=0;h<d;h++){var u=c[h];if(!(!u.isActive||u.isSensor)){var m=u.activeContacts,p=m.length,g=u.collision,v=g.parentA,y=g.parentB,_=g.normal,w=g.tangent;for(f=0;f<p;f++){var x=m[f],S=x.vertex,T=x.normalImpulse,E=x.tangentImpulse;if(T!==0||E!==0){var M=_.x*T+w.x*E,b=_.y*T+w.y*E;v.isStatic||v.isSleeping||(v.positionPrev.x+=M*v.inverseMass,v.positionPrev.y+=b*v.inverseMass,v.anglePrev+=v.inverseInertia*((S.x-v.position.x)*b-(S.y-v.position.y)*M)),y.isStatic||y.isSleeping||(y.positionPrev.x-=M*y.inverseMass,y.positionPrev.y-=b*y.inverseMass,y.anglePrev-=y.inverseInertia*((S.x-y.position.x)*b-(S.y-y.position.y)*M))}}}}},s.solveVelocity=function(c,d){var h=d/o._baseDelta,f=h*h,u=f*h,m=-s._restingThresh*h,p=s._restingThreshTangent,g=s._frictionNormalMultiplier*h,v=s._frictionMaxStatic,y=c.length,_,w,x,S;for(x=0;x<y;x++){var T=c[x];if(!(!T.isActive||T.isSensor)){var E=T.collision,M=E.parentA,b=E.parentB,A=M.velocity,C=b.velocity,P=E.normal.x,I=E.normal.y,D=E.tangent.x,F=E.tangent.y,B=T.activeContacts,k=B.length,K=1/k,O=M.inverseMass+b.inverseMass,re=T.friction*T.frictionStatic*g;for(A.x=M.position.x-M.positionPrev.x,A.y=M.position.y-M.positionPrev.y,C.x=b.position.x-b.positionPrev.x,C.y=b.position.y-b.positionPrev.y,M.angularVelocity=M.angle-M.anglePrev,b.angularVelocity=b.angle-b.anglePrev,S=0;S<k;S++){var ae=B[S],Te=ae.vertex,G=Te.x-M.position.x,Y=Te.y-M.position.y,Q=Te.x-b.position.x,te=Te.y-b.position.y,he=A.x-Y*M.angularVelocity,Ae=A.y+G*M.angularVelocity,V=C.x-te*b.angularVelocity,ze=C.y+Q*b.angularVelocity,Re=he-V,ge=Ae-ze,fe=P*Re+I*ge,Ie=D*Re+F*ge,Ne=T.separation+fe,X=Math.min(Ne,1);X=Ne<0?0:X;var Ye=X*re;Ie<-Ye||Ie>Ye?(w=Ie>0?Ie:-Ie,_=T.friction*(Ie>0?1:-1)*u,_<-w?_=-w:_>w&&(_=w)):(_=Ie,w=v);var U=G*I-Y*P,R=Q*I-te*P,z=K/(O+M.inverseInertia*U*U+b.inverseInertia*R*R),ie=(1+T.restitution)*fe*z;if(_*=z,fe<m)ae.normalImpulse=0;else{var oe=ae.normalImpulse;ae.normalImpulse+=ie,ae.normalImpulse>0&&(ae.normalImpulse=0),ie=ae.normalImpulse-oe}if(Ie<-p||Ie>p)ae.tangentImpulse=0;else{var le=ae.tangentImpulse;ae.tangentImpulse+=_,ae.tangentImpulse<-w&&(ae.tangentImpulse=-w),ae.tangentImpulse>w&&(ae.tangentImpulse=w),_=ae.tangentImpulse-le}var we=P*ie+D*_,pe=I*ie+F*_;M.isStatic||M.isSleeping||(M.positionPrev.x+=we*M.inverseMass,M.positionPrev.y+=pe*M.inverseMass,M.anglePrev+=(G*pe-Y*we)*M.inverseInertia),b.isStatic||b.isSleeping||(b.positionPrev.x-=we*b.inverseMass,b.positionPrev.y-=pe*b.inverseMass,b.anglePrev-=(Q*pe-te*we)*b.inverseInertia)}}}}})()},function(t,i,r){var s={};t.exports=s;var a=r(9),o=r(0);(function(){s.create=function(l){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},s.update=function(l,c,d){var h=l.list,f=h.length,u=l.table,m=c.length,p=l.collisionStart,g=l.collisionEnd,v=l.collisionActive,y,_,w,x;for(p.length=0,g.length=0,v.length=0,x=0;x<f;x++)h[x].confirmedActive=!1;for(x=0;x<m;x++)y=c[x],w=y.pair,w?(w.isActive?v.push(w):p.push(w),a.update(w,y,d),w.confirmedActive=!0):(w=a.create(y,d),u[w.id]=w,p.push(w),h.push(w));var S=[];for(f=h.length,x=0;x<f;x++)w=h[x],w.confirmedActive||(a.setActive(w,!1,d),g.push(w),!w.collision.bodyA.isSleeping&&!w.collision.bodyB.isSleeping&&S.push(x));for(x=0;x<S.length;x++)_=S[x]-x,w=h[_],h.splice(_,1),delete u[w.id]},s.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(t,i,r){var s=t.exports=r(21);s.Axes=r(11),s.Bodies=r(12),s.Body=r(4),s.Bounds=r(1),s.Collision=r(8),s.Common=r(0),s.Composite=r(6),s.Composites=r(22),s.Constraint=r(10),s.Contact=r(16),s.Detector=r(13),s.Engine=r(17),s.Events=r(5),s.Grid=r(23),s.Mouse=r(14),s.MouseConstraint=r(24),s.Pair=r(9),s.Pairs=r(19),s.Plugin=r(15),s.Query=r(25),s.Render=r(26),s.Resolver=r(18),s.Runner=r(27),s.SAT=r(28),s.Sleeping=r(7),s.Svg=r(29),s.Vector=r(2),s.Vertices=r(3),s.World=r(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(t,i,r){var s={};t.exports=s;var a=r(15),o=r(0);(function(){s.name="matter-js",s.version="0.19.0",s.uses=[],s.used=[],s.use=function(){a.use(s,Array.prototype.slice.call(arguments))},s.before=function(l,c){return l=l.replace(/^Matter./,""),o.chainPathBefore(s,l,c)},s.after=function(l,c){return l=l.replace(/^Matter./,""),o.chainPathAfter(s,l,c)}})()},function(t,i,r){var s={};t.exports=s;var a=r(6),o=r(10),l=r(0),c=r(4),d=r(12),h=l.deprecated;(function(){s.stack=function(f,u,m,p,g,v,y){for(var _=a.create({label:"Stack"}),w=f,x=u,S,T=0,E=0;E<p;E++){for(var M=0,b=0;b<m;b++){var A=y(w,x,b,E,S,T);if(A){var C=A.bounds.max.y-A.bounds.min.y,P=A.bounds.max.x-A.bounds.min.x;C>M&&(M=C),c.translate(A,{x:P*.5,y:C*.5}),w=A.bounds.max.x+g,a.addBody(_,A),S=A,T+=1}else w+=g}x+=M+v,w=f}return _},s.chain=function(f,u,m,p,g,v){for(var y=f.bodies,_=1;_<y.length;_++){var w=y[_-1],x=y[_],S=w.bounds.max.y-w.bounds.min.y,T=w.bounds.max.x-w.bounds.min.x,E=x.bounds.max.y-x.bounds.min.y,M=x.bounds.max.x-x.bounds.min.x,b={bodyA:w,pointA:{x:T*u,y:S*m},bodyB:x,pointB:{x:M*p,y:E*g}},A=l.extend(b,v);a.addConstraint(f,o.create(A))}return f.label+=" Chain",f},s.mesh=function(f,u,m,p,g){var v=f.bodies,y,_,w,x,S;for(y=0;y<m;y++){for(_=1;_<u;_++)w=v[_-1+y*u],x=v[_+y*u],a.addConstraint(f,o.create(l.extend({bodyA:w,bodyB:x},g)));if(y>0)for(_=0;_<u;_++)w=v[_+(y-1)*u],x=v[_+y*u],a.addConstraint(f,o.create(l.extend({bodyA:w,bodyB:x},g))),p&&_>0&&(S=v[_-1+(y-1)*u],a.addConstraint(f,o.create(l.extend({bodyA:S,bodyB:x},g)))),p&&_<u-1&&(S=v[_+1+(y-1)*u],a.addConstraint(f,o.create(l.extend({bodyA:S,bodyB:x},g))))}return f.label+=" Mesh",f},s.pyramid=function(f,u,m,p,g,v,y){return s.stack(f,u,m,p,g,v,function(_,w,x,S,T,E){var M=Math.min(p,Math.ceil(m/2)),b=T?T.bounds.max.x-T.bounds.min.x:0;if(!(S>M)){S=M-S;var A=S,C=m-1-S;if(!(x<A||x>C)){E===1&&c.translate(T,{x:(x+(m%2===1?1:-1))*b,y:0});var P=T?x*b:0;return y(f+P+x*g,w,x,S,T,E)}}})},s.newtonsCradle=function(f,u,m,p,g){for(var v=a.create({label:"Newtons Cradle"}),y=0;y<m;y++){var _=1.9,w=d.circle(f+y*(p*_),u+g,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=o.create({pointA:{x:f+y*(p*_),y:u},bodyB:w});a.addBody(v,w),a.addConstraint(v,x)}return v},h(s,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),s.car=function(f,u,m,p,g){var v=c.nextGroup(!0),y=20,_=-m*.5+y,w=m*.5-y,x=0,S=a.create({label:"Car"}),T=d.rectangle(f,u,m,p,{collisionFilter:{group:v},chamfer:{radius:p*.5},density:2e-4}),E=d.circle(f+_,u+x,g,{collisionFilter:{group:v},friction:.8}),M=d.circle(f+w,u+x,g,{collisionFilter:{group:v},friction:.8}),b=o.create({bodyB:T,pointB:{x:_,y:x},bodyA:E,stiffness:1,length:0}),A=o.create({bodyB:T,pointB:{x:w,y:x},bodyA:M,stiffness:1,length:0});return a.addBody(S,T),a.addBody(S,E),a.addBody(S,M),a.addConstraint(S,b),a.addConstraint(S,A),S},h(s,"car","Composites.car  moved to car example"),s.softBody=function(f,u,m,p,g,v,y,_,w,x){w=l.extend({inertia:1/0},w),x=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var S=s.stack(f,u,m,p,g,v,function(T,E){return d.circle(T,E,_,w)});return s.mesh(S,m,p,y,x),S.label="Soft Body",S},h(s,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(t,i,r){var s={};t.exports=s;var a=r(9),o=r(0),l=o.deprecated;(function(){s.create=function(c){var d={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(d,c)},s.update=function(c,d,h,f){var u,m,p,g=h.world,v=c.buckets,y,_,w=!1;for(u=0;u<d.length;u++){var x=d[u];if(!(x.isSleeping&&!f)&&!(g.bounds&&(x.bounds.max.x<g.bounds.min.x||x.bounds.min.x>g.bounds.max.x||x.bounds.max.y<g.bounds.min.y||x.bounds.min.y>g.bounds.max.y))){var S=s._getRegion(c,x);if(!x.region||S.id!==x.region.id||f){(!x.region||f)&&(x.region=S);var T=s._regionUnion(S,x.region);for(m=T.startCol;m<=T.endCol;m++)for(p=T.startRow;p<=T.endRow;p++){_=s._getBucketId(m,p),y=v[_];var E=m>=S.startCol&&m<=S.endCol&&p>=S.startRow&&p<=S.endRow,M=m>=x.region.startCol&&m<=x.region.endCol&&p>=x.region.startRow&&p<=x.region.endRow;!E&&M&&M&&y&&s._bucketRemoveBody(c,y,x),(x.region===S||E&&!M||f)&&(y||(y=s._createBucket(v,_)),s._bucketAddBody(c,y,x))}x.region=S,w=!0}}}w&&(c.pairsList=s._createActivePairsList(c))},l(s,"update","Grid.update  replaced by Matter.Detector"),s.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},l(s,"clear","Grid.clear  replaced by Matter.Detector"),s._regionUnion=function(c,d){var h=Math.min(c.startCol,d.startCol),f=Math.max(c.endCol,d.endCol),u=Math.min(c.startRow,d.startRow),m=Math.max(c.endRow,d.endRow);return s._createRegion(h,f,u,m)},s._getRegion=function(c,d){var h=d.bounds,f=Math.floor(h.min.x/c.bucketWidth),u=Math.floor(h.max.x/c.bucketWidth),m=Math.floor(h.min.y/c.bucketHeight),p=Math.floor(h.max.y/c.bucketHeight);return s._createRegion(f,u,m,p)},s._createRegion=function(c,d,h,f){return{id:c+","+d+","+h+","+f,startCol:c,endCol:d,startRow:h,endRow:f}},s._getBucketId=function(c,d){return"C"+c+"R"+d},s._createBucket=function(c,d){var h=c[d]=[];return h},s._bucketAddBody=function(c,d,h){var f=c.pairs,u=a.id,m=d.length,p;for(p=0;p<m;p++){var g=d[p];if(!(h.id===g.id||h.isStatic&&g.isStatic)){var v=u(h,g),y=f[v];y?y[2]+=1:f[v]=[h,g,1]}}d.push(h)},s._bucketRemoveBody=function(c,d,h){var f=c.pairs,u=a.id,m;d.splice(o.indexOf(d,h),1);var p=d.length;for(m=0;m<p;m++){var g=f[u(h,d[m])];g&&(g[2]-=1)}},s._createActivePairsList=function(c){var d,h=c.pairs,f=o.keys(h),u=f.length,m=[],p;for(p=0;p<u;p++)d=h[f[p]],d[2]>0?m.push(d):delete h[f[p]];return m}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(7),l=r(14),c=r(5),d=r(13),h=r(10),f=r(6),u=r(0),m=r(1);(function(){s.create=function(p,g){var v=(p?p.mouse:null)||(g?g.mouse:null);v||(p&&p.render&&p.render.canvas?v=l.create(p.render.canvas):g&&g.element?v=l.create(g.element):(v=l.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=h.create({label:"Mouse Constraint",pointA:v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),_={type:"mouseConstraint",mouse:v,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},w=u.extend(_,g);return c.on(p,"beforeUpdate",function(){var x=f.allBodies(p.world);s.update(w,x),s._triggerEvents(w)}),w},s.update=function(p,g){var v=p.mouse,y=p.constraint,_=p.body;if(v.button===0){if(y.bodyB)o.set(y.bodyB,!1),y.pointA=v.position;else for(var w=0;w<g.length;w++)if(_=g[w],m.contains(_.bounds,v.position)&&d.canCollide(_.collisionFilter,p.collisionFilter))for(var x=_.parts.length>1?1:0;x<_.parts.length;x++){var S=_.parts[x];if(a.contains(S.vertices,v.position)){y.pointA=v.position,y.bodyB=p.body=_,y.pointB={x:v.position.x-_.position.x,y:v.position.y-_.position.y},y.angleB=_.angle,o.set(_,!1),c.trigger(p,"startdrag",{mouse:v,body:_});break}}}else y.bodyB=p.body=null,y.pointB=null,_&&c.trigger(p,"enddrag",{mouse:v,body:_})},s._triggerEvents=function(p){var g=p.mouse,v=g.sourceEvents;v.mousemove&&c.trigger(p,"mousemove",{mouse:g}),v.mousedown&&c.trigger(p,"mousedown",{mouse:g}),v.mouseup&&c.trigger(p,"mouseup",{mouse:g}),l.clearSourceEvents(g)}})()},function(t,i,r){var s={};t.exports=s;var a=r(2),o=r(8),l=r(1),c=r(12),d=r(3);(function(){s.collides=function(h,f){for(var u=[],m=f.length,p=h.bounds,g=o.collides,v=l.overlaps,y=0;y<m;y++){var _=f[y],w=_.parts.length,x=w===1?0:1;if(v(_.bounds,p))for(var S=x;S<w;S++){var T=_.parts[S];if(v(T.bounds,p)){var E=g(T,h);if(E){u.push(E);break}}}}return u},s.ray=function(h,f,u,m){m=m||1e-100;for(var p=a.angle(f,u),g=a.magnitude(a.sub(f,u)),v=(u.x+f.x)*.5,y=(u.y+f.y)*.5,_=c.rectangle(v,y,g,m,{angle:p}),w=s.collides(_,h),x=0;x<w.length;x+=1){var S=w[x];S.body=S.bodyB=S.bodyA}return w},s.region=function(h,f,u){for(var m=[],p=0;p<h.length;p++){var g=h[p],v=l.overlaps(g.bounds,f);(v&&!u||!v&&u)&&m.push(g)}return m},s.point=function(h,f){for(var u=[],m=0;m<h.length;m++){var p=h[m];if(l.contains(p.bounds,f))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var v=p.parts[g];if(l.contains(v.bounds,f)&&d.contains(v.vertices,f)){u.push(p);break}}}return u}})()},function(t,i,r){var s={};t.exports=s;var a=r(4),o=r(0),l=r(6),c=r(1),d=r(5),h=r(2),f=r(14);(function(){var u,m;typeof window<"u"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(x){window.setTimeout(function(){x(o.now())},1e3/60)},m=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(x){var S={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!x.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},T=o.extend(S,x);return T.canvas&&(T.canvas.width=T.options.width||T.canvas.width,T.canvas.height=T.options.height||T.canvas.height),T.mouse=x.mouse,T.engine=x.engine,T.canvas=T.canvas||v(T.options.width,T.options.height),T.context=T.canvas.getContext("2d"),T.textures={},T.bounds=T.bounds||{min:{x:0,y:0},max:{x:T.canvas.width,y:T.canvas.height}},T.controller=s,T.options.showBroadphase=!1,T.options.pixelRatio!==1&&s.setPixelRatio(T,T.options.pixelRatio),o.isElement(T.element)&&T.element.appendChild(T.canvas),T},s.run=function(x){(function S(T){x.frameRequestId=u(S),p(x,T),s.world(x,T),(x.options.showStats||x.options.showDebug)&&s.stats(x,x.context,T),(x.options.showPerformance||x.options.showDebug)&&s.performance(x,x.context,T)})()},s.stop=function(x){m(x.frameRequestId)},s.setPixelRatio=function(x,S){var T=x.options,E=x.canvas;S==="auto"&&(S=y(E)),T.pixelRatio=S,E.setAttribute("data-pixel-ratio",S),E.width=T.width*S,E.height=T.height*S,E.style.width=T.width+"px",E.style.height=T.height+"px"},s.lookAt=function(x,S,T,E){E=typeof E<"u"?E:!0,S=o.isArray(S)?S:[S],T=T||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},b=0;b<S.length;b+=1){var A=S[b],C=A.bounds?A.bounds.min:A.min||A.position||A,P=A.bounds?A.bounds.max:A.max||A.position||A;C&&P&&(C.x<M.min.x&&(M.min.x=C.x),P.x>M.max.x&&(M.max.x=P.x),C.y<M.min.y&&(M.min.y=C.y),P.y>M.max.y&&(M.max.y=P.y))}var I=M.max.x-M.min.x+2*T.x,D=M.max.y-M.min.y+2*T.y,F=x.canvas.height,B=x.canvas.width,k=B/F,K=I/D,O=1,re=1;K>k?re=K/k:O=k/K,x.options.hasBounds=!0,x.bounds.min.x=M.min.x,x.bounds.max.x=M.min.x+I*O,x.bounds.min.y=M.min.y,x.bounds.max.y=M.min.y+D*re,E&&(x.bounds.min.x+=I*.5-I*O*.5,x.bounds.max.x+=I*.5-I*O*.5,x.bounds.min.y+=D*.5-D*re*.5,x.bounds.max.y+=D*.5-D*re*.5),x.bounds.min.x-=T.x,x.bounds.max.x-=T.x,x.bounds.min.y-=T.y,x.bounds.max.y-=T.y,x.mouse&&(f.setScale(x.mouse,{x:(x.bounds.max.x-x.bounds.min.x)/x.canvas.width,y:(x.bounds.max.y-x.bounds.min.y)/x.canvas.height}),f.setOffset(x.mouse,x.bounds.min))},s.startViewTransform=function(x){var S=x.bounds.max.x-x.bounds.min.x,T=x.bounds.max.y-x.bounds.min.y,E=S/x.options.width,M=T/x.options.height;x.context.setTransform(x.options.pixelRatio/E,0,0,x.options.pixelRatio/M,0,0),x.context.translate(-x.bounds.min.x,-x.bounds.min.y)},s.endViewTransform=function(x){x.context.setTransform(x.options.pixelRatio,0,0,x.options.pixelRatio,0,0)},s.world=function(x,S){var T=o.now(),E=x.engine,M=E.world,b=x.canvas,A=x.context,C=x.options,P=x.timing,I=l.allBodies(M),D=l.allConstraints(M),F=C.wireframes?C.wireframeBackground:C.background,B=[],k=[],K,O={timestamp:E.timing.timestamp};if(d.trigger(x,"beforeRender",O),x.currentBackground!==F&&w(x,F),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,b.width,b.height),A.globalCompositeOperation="source-over",C.hasBounds){for(K=0;K<I.length;K++){var re=I[K];c.overlaps(re.bounds,x.bounds)&&B.push(re)}for(K=0;K<D.length;K++){var ae=D[K],Te=ae.bodyA,G=ae.bodyB,Y=ae.pointA,Q=ae.pointB;Te&&(Y=h.add(Te.position,ae.pointA)),G&&(Q=h.add(G.position,ae.pointB)),!(!Y||!Q)&&(c.contains(x.bounds,Y)||c.contains(x.bounds,Q))&&k.push(ae)}s.startViewTransform(x),x.mouse&&(f.setScale(x.mouse,{x:(x.bounds.max.x-x.bounds.min.x)/x.options.width,y:(x.bounds.max.y-x.bounds.min.y)/x.options.height}),f.setOffset(x.mouse,x.bounds.min))}else k=D,B=I,x.options.pixelRatio!==1&&x.context.setTransform(x.options.pixelRatio,0,0,x.options.pixelRatio,0,0);!C.wireframes||E.enableSleeping&&C.showSleeping?s.bodies(x,B,A):(C.showConvexHulls&&s.bodyConvexHulls(x,B,A),s.bodyWireframes(x,B,A)),C.showBounds&&s.bodyBounds(x,B,A),(C.showAxes||C.showAngleIndicator)&&s.bodyAxes(x,B,A),C.showPositions&&s.bodyPositions(x,B,A),C.showVelocity&&s.bodyVelocity(x,B,A),C.showIds&&s.bodyIds(x,B,A),C.showSeparations&&s.separations(x,E.pairs.list,A),C.showCollisions&&s.collisions(x,E.pairs.list,A),C.showVertexNumbers&&s.vertexNumbers(x,B,A),C.showMousePosition&&s.mousePosition(x,x.mouse,A),s.constraints(k,A),C.hasBounds&&s.endViewTransform(x),d.trigger(x,"afterRender",O),P.lastElapsed=o.now()-T},s.stats=function(x,S,T){for(var E=x.engine,M=E.world,b=l.allBodies(M),A=0,C=55,P=44,I=0,D=0,F=0;F<b.length;F+=1)A+=b[F].parts.length;var B={Part:A,Body:b.length,Cons:l.allConstraints(M).length,Comp:l.allComposites(M).length,Pair:E.pairs.list.length};S.fillStyle="#0e0f19",S.fillRect(I,D,C*5.5,P),S.font="12px Arial",S.textBaseline="top",S.textAlign="right";for(var k in B){var K=B[k];S.fillStyle="#aaa",S.fillText(k,I+C,D+8),S.fillStyle="#eee",S.fillText(K,I+C,D+26),I+=C}},s.performance=function(x,S){var T=x.engine,E=x.timing,M=E.deltaHistory,b=E.elapsedHistory,A=E.timestampElapsedHistory,C=E.engineDeltaHistory,P=E.engineElapsedHistory,I=T.timing.lastDelta,D=g(M),F=g(b),B=g(C),k=g(P),K=g(A),O=K/D||0,re=1e3/D||0,ae=4,Te=12,G=60,Y=34,Q=10,te=69;S.fillStyle="#0e0f19",S.fillRect(0,50,Te*4+G*5+22,Y),s.status(S,Q,te,G,ae,M.length,Math.round(re)+" fps",re/s._goodFps,function(he){return M[he]/D-1}),s.status(S,Q+Te+G,te,G,ae,C.length,I.toFixed(2)+" dt",s._goodDelta/I,function(he){return C[he]/B-1}),s.status(S,Q+(Te+G)*2,te,G,ae,P.length,k.toFixed(2)+" ut",1-k/s._goodFps,function(he){return P[he]/k-1}),s.status(S,Q+(Te+G)*3,te,G,ae,b.length,F.toFixed(2)+" rt",1-F/s._goodFps,function(he){return b[he]/F-1}),s.status(S,Q+(Te+G)*4,te,G,ae,A.length,O.toFixed(2)+" x",O*O*O,function(he){return(A[he]/M[he]/O||0)-1})},s.status=function(x,S,T,E,M,b,A,C,P){x.strokeStyle="#888",x.fillStyle="#444",x.lineWidth=1,x.fillRect(S,T+7,E,1),x.beginPath(),x.moveTo(S,T+7-M*o.clamp(.4*P(0),-2,2));for(var I=0;I<E;I+=1)x.lineTo(S+I,T+7-(I<b?M*o.clamp(.4*P(I),-2,2):0));x.stroke(),x.fillStyle="hsl("+o.clamp(25+95*C,0,120)+",100%,60%)",x.fillRect(S,T-7,4,4),x.font="12px Arial",x.textBaseline="middle",x.textAlign="right",x.fillStyle="#eee",x.fillText(A,S+E,T-5)},s.constraints=function(x,S){for(var T=S,E=0;E<x.length;E++){var M=x[E];if(!(!M.render.visible||!M.pointA||!M.pointB)){var b=M.bodyA,A=M.bodyB,C,P;if(b?C=h.add(b.position,M.pointA):C=M.pointA,M.render.type==="pin")T.beginPath(),T.arc(C.x,C.y,3,0,2*Math.PI),T.closePath();else{if(A?P=h.add(A.position,M.pointB):P=M.pointB,T.beginPath(),T.moveTo(C.x,C.y),M.render.type==="spring")for(var I=h.sub(P,C),D=h.perp(h.normalise(I)),F=Math.ceil(o.clamp(M.length/5,12,20)),B,k=1;k<F;k+=1)B=k%2===0?1:-1,T.lineTo(C.x+I.x*(k/F)+D.x*B*4,C.y+I.y*(k/F)+D.y*B*4);T.lineTo(P.x,P.y)}M.render.lineWidth&&(T.lineWidth=M.render.lineWidth,T.strokeStyle=M.render.strokeStyle,T.stroke()),M.render.anchors&&(T.fillStyle=M.render.strokeStyle,T.beginPath(),T.arc(C.x,C.y,3,0,2*Math.PI),T.arc(P.x,P.y,3,0,2*Math.PI),T.closePath(),T.fill())}}},s.bodies=function(x,S,T){var E=T;x.engine;var M=x.options,b=M.showInternalEdges||!M.wireframes,A,C,P,I;for(P=0;P<S.length;P++)if(A=S[P],!!A.render.visible){for(I=A.parts.length>1?1:0;I<A.parts.length;I++)if(C=A.parts[I],!!C.render.visible){if(M.showSleeping&&A.isSleeping?E.globalAlpha=.5*C.render.opacity:C.render.opacity!==1&&(E.globalAlpha=C.render.opacity),C.render.sprite&&C.render.sprite.texture&&!M.wireframes){var D=C.render.sprite,F=_(x,D.texture);E.translate(C.position.x,C.position.y),E.rotate(C.angle),E.drawImage(F,F.width*-D.xOffset*D.xScale,F.height*-D.yOffset*D.yScale,F.width*D.xScale,F.height*D.yScale),E.rotate(-C.angle),E.translate(-C.position.x,-C.position.y)}else{if(C.circleRadius)E.beginPath(),E.arc(C.position.x,C.position.y,C.circleRadius,0,2*Math.PI);else{E.beginPath(),E.moveTo(C.vertices[0].x,C.vertices[0].y);for(var B=1;B<C.vertices.length;B++)!C.vertices[B-1].isInternal||b?E.lineTo(C.vertices[B].x,C.vertices[B].y):E.moveTo(C.vertices[B].x,C.vertices[B].y),C.vertices[B].isInternal&&!b&&E.moveTo(C.vertices[(B+1)%C.vertices.length].x,C.vertices[(B+1)%C.vertices.length].y);E.lineTo(C.vertices[0].x,C.vertices[0].y),E.closePath()}M.wireframes?(E.lineWidth=1,E.strokeStyle="#bbb",E.stroke()):(E.fillStyle=C.render.fillStyle,C.render.lineWidth&&(E.lineWidth=C.render.lineWidth,E.strokeStyle=C.render.strokeStyle,E.stroke()),E.fill())}E.globalAlpha=1}}},s.bodyWireframes=function(x,S,T){var E=T,M=x.options.showInternalEdges,b,A,C,P,I;for(E.beginPath(),C=0;C<S.length;C++)if(b=S[C],!!b.render.visible)for(I=b.parts.length>1?1:0;I<b.parts.length;I++){for(A=b.parts[I],E.moveTo(A.vertices[0].x,A.vertices[0].y),P=1;P<A.vertices.length;P++)!A.vertices[P-1].isInternal||M?E.lineTo(A.vertices[P].x,A.vertices[P].y):E.moveTo(A.vertices[P].x,A.vertices[P].y),A.vertices[P].isInternal&&!M&&E.moveTo(A.vertices[(P+1)%A.vertices.length].x,A.vertices[(P+1)%A.vertices.length].y);E.lineTo(A.vertices[0].x,A.vertices[0].y)}E.lineWidth=1,E.strokeStyle="#bbb",E.stroke()},s.bodyConvexHulls=function(x,S,T){var E=T,M,b,A;for(E.beginPath(),b=0;b<S.length;b++)if(M=S[b],!(!M.render.visible||M.parts.length===1)){for(E.moveTo(M.vertices[0].x,M.vertices[0].y),A=1;A<M.vertices.length;A++)E.lineTo(M.vertices[A].x,M.vertices[A].y);E.lineTo(M.vertices[0].x,M.vertices[0].y)}E.lineWidth=1,E.strokeStyle="rgba(255,255,255,0.2)",E.stroke()},s.vertexNumbers=function(x,S,T){var E=T,M,b,A;for(M=0;M<S.length;M++){var C=S[M].parts;for(A=C.length>1?1:0;A<C.length;A++){var P=C[A];for(b=0;b<P.vertices.length;b++)E.fillStyle="rgba(255,255,255,0.2)",E.fillText(M+"_"+b,P.position.x+(P.vertices[b].x-P.position.x)*.8,P.position.y+(P.vertices[b].y-P.position.y)*.8)}}},s.mousePosition=function(x,S,T){var E=T;E.fillStyle="rgba(255,255,255,0.8)",E.fillText(S.position.x+"  "+S.position.y,S.position.x+5,S.position.y-5)},s.bodyBounds=function(x,S,T){var E=T;x.engine;var M=x.options;E.beginPath();for(var b=0;b<S.length;b++){var A=S[b];if(A.render.visible)for(var C=S[b].parts,P=C.length>1?1:0;P<C.length;P++){var I=C[P];E.rect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}M.wireframes?E.strokeStyle="rgba(255,255,255,0.08)":E.strokeStyle="rgba(0,0,0,0.1)",E.lineWidth=1,E.stroke()},s.bodyAxes=function(x,S,T){var E=T;x.engine;var M=x.options,b,A,C,P;for(E.beginPath(),A=0;A<S.length;A++){var I=S[A],D=I.parts;if(I.render.visible)if(M.showAxes)for(C=D.length>1?1:0;C<D.length;C++)for(b=D[C],P=0;P<b.axes.length;P++){var F=b.axes[P];E.moveTo(b.position.x,b.position.y),E.lineTo(b.position.x+F.x*20,b.position.y+F.y*20)}else for(C=D.length>1?1:0;C<D.length;C++)for(b=D[C],P=0;P<b.axes.length;P++)E.moveTo(b.position.x,b.position.y),E.lineTo((b.vertices[0].x+b.vertices[b.vertices.length-1].x)/2,(b.vertices[0].y+b.vertices[b.vertices.length-1].y)/2)}M.wireframes?(E.strokeStyle="indianred",E.lineWidth=1):(E.strokeStyle="rgba(255, 255, 255, 0.4)",E.globalCompositeOperation="overlay",E.lineWidth=2),E.stroke(),E.globalCompositeOperation="source-over"},s.bodyPositions=function(x,S,T){var E=T;x.engine;var M=x.options,b,A,C,P;for(E.beginPath(),C=0;C<S.length;C++)if(b=S[C],!!b.render.visible)for(P=0;P<b.parts.length;P++)A=b.parts[P],E.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),E.closePath();for(M.wireframes?E.fillStyle="indianred":E.fillStyle="rgba(0,0,0,0.5)",E.fill(),E.beginPath(),C=0;C<S.length;C++)b=S[C],b.render.visible&&(E.arc(b.positionPrev.x,b.positionPrev.y,2,0,2*Math.PI,!1),E.closePath());E.fillStyle="rgba(255,165,0,0.8)",E.fill()},s.bodyVelocity=function(x,S,T){var E=T;E.beginPath();for(var M=0;M<S.length;M++){var b=S[M];if(b.render.visible){var A=a.getVelocity(b);E.moveTo(b.position.x,b.position.y),E.lineTo(b.position.x+A.x,b.position.y+A.y)}}E.lineWidth=3,E.strokeStyle="cornflowerblue",E.stroke()},s.bodyIds=function(x,S,T){var E=T,M,b;for(M=0;M<S.length;M++)if(S[M].render.visible){var A=S[M].parts;for(b=A.length>1?1:0;b<A.length;b++){var C=A[b];E.font="12px Arial",E.fillStyle="rgba(255,255,255,0.5)",E.fillText(C.id,C.position.x+10,C.position.y-10)}}},s.collisions=function(x,S,T){var E=T,M=x.options,b,A,C,P;for(E.beginPath(),C=0;C<S.length;C++)if(b=S[C],!!b.isActive)for(A=b.collision,P=0;P<b.activeContacts.length;P++){var I=b.activeContacts[P],D=I.vertex;E.rect(D.x-1.5,D.y-1.5,3.5,3.5)}for(M.wireframes?E.fillStyle="rgba(255,255,255,0.7)":E.fillStyle="orange",E.fill(),E.beginPath(),C=0;C<S.length;C++)if(b=S[C],!!b.isActive&&(A=b.collision,b.activeContacts.length>0)){var F=b.activeContacts[0].vertex.x,B=b.activeContacts[0].vertex.y;b.activeContacts.length===2&&(F=(b.activeContacts[0].vertex.x+b.activeContacts[1].vertex.x)/2,B=(b.activeContacts[0].vertex.y+b.activeContacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?E.moveTo(F-A.normal.x*8,B-A.normal.y*8):E.moveTo(F+A.normal.x*8,B+A.normal.y*8),E.lineTo(F,B)}M.wireframes?E.strokeStyle="rgba(255,165,0,0.7)":E.strokeStyle="orange",E.lineWidth=1,E.stroke()},s.separations=function(x,S,T){var E=T,M=x.options,b,A,C,P,I;for(E.beginPath(),I=0;I<S.length;I++)if(b=S[I],!!b.isActive){A=b.collision,C=A.bodyA,P=A.bodyB;var D=1;!P.isStatic&&!C.isStatic&&(D=.5),P.isStatic&&(D=0),E.moveTo(P.position.x,P.position.y),E.lineTo(P.position.x-A.penetration.x*D,P.position.y-A.penetration.y*D),D=1,!P.isStatic&&!C.isStatic&&(D=.5),C.isStatic&&(D=0),E.moveTo(C.position.x,C.position.y),E.lineTo(C.position.x+A.penetration.x*D,C.position.y+A.penetration.y*D)}M.wireframes?E.strokeStyle="rgba(255,165,0,0.5)":E.strokeStyle="orange",E.stroke()},s.inspector=function(x,S){x.engine;var T=x.selected,E=x.render,M=E.options,b;if(M.hasBounds){var A=E.bounds.max.x-E.bounds.min.x,C=E.bounds.max.y-E.bounds.min.y,P=A/E.options.width,I=C/E.options.height;S.scale(1/P,1/I),S.translate(-E.bounds.min.x,-E.bounds.min.y)}for(var D=0;D<T.length;D++){var F=T[D].data;switch(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.9)",S.setLineDash([1,2]),F.type){case"body":b=F.bounds,S.beginPath(),S.rect(Math.floor(b.min.x-3),Math.floor(b.min.y-3),Math.floor(b.max.x-b.min.x+6),Math.floor(b.max.y-b.min.y+6)),S.closePath(),S.stroke();break;case"constraint":var B=F.pointA;F.bodyA&&(B=F.pointB),S.beginPath(),S.arc(B.x,B.y,10,0,2*Math.PI),S.closePath(),S.stroke();break}S.setLineDash([]),S.translate(-.5,-.5)}x.selectStart!==null&&(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.6)",S.fillStyle="rgba(255,165,0,0.1)",b=x.selectBounds,S.beginPath(),S.rect(Math.floor(b.min.x),Math.floor(b.min.y),Math.floor(b.max.x-b.min.x),Math.floor(b.max.y-b.min.y)),S.closePath(),S.stroke(),S.fill(),S.translate(-.5,-.5)),M.hasBounds&&S.setTransform(1,0,0,1,0,0)};var p=function(x,S){var T=x.engine,E=x.timing,M=E.historySize,b=T.timing.timestamp;E.delta=S-E.lastTime||s._goodDelta,E.lastTime=S,E.timestampElapsed=b-E.lastTimestamp||0,E.lastTimestamp=b,E.deltaHistory.unshift(E.delta),E.deltaHistory.length=Math.min(E.deltaHistory.length,M),E.engineDeltaHistory.unshift(T.timing.lastDelta),E.engineDeltaHistory.length=Math.min(E.engineDeltaHistory.length,M),E.timestampElapsedHistory.unshift(E.timestampElapsed),E.timestampElapsedHistory.length=Math.min(E.timestampElapsedHistory.length,M),E.engineElapsedHistory.unshift(T.timing.lastElapsed),E.engineElapsedHistory.length=Math.min(E.engineElapsedHistory.length,M),E.elapsedHistory.unshift(E.lastElapsed),E.elapsedHistory.length=Math.min(E.elapsedHistory.length,M)},g=function(x){for(var S=0,T=0;T<x.length;T+=1)S+=x[T];return S/x.length||0},v=function(x,S){var T=document.createElement("canvas");return T.width=x,T.height=S,T.oncontextmenu=function(){return!1},T.onselectstart=function(){return!1},T},y=function(x){var S=x.getContext("2d"),T=window.devicePixelRatio||1,E=S.webkitBackingStorePixelRatio||S.mozBackingStorePixelRatio||S.msBackingStorePixelRatio||S.oBackingStorePixelRatio||S.backingStorePixelRatio||1;return T/E},_=function(x,S){var T=x.textures[S];return T||(T=x.textures[S]=new Image,T.src=S,T)},w=function(x,S){var T=S;/(jpg|gif|png)$/.test(S)&&(T="url("+S+")"),x.canvas.style.background=T,x.canvas.style.backgroundSize="contain",x.currentBackground=S}})()},function(t,i,r){var s={};t.exports=s;var a=r(5),o=r(17),l=r(0);(function(){var c,d;if(typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var h;c=function(f){h=setTimeout(function(){f(l.now())},1e3/60)},d=function(){clearTimeout(h)}}s.create=function(f){var u={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},m=l.extend(u,f);return m.delta=m.delta||1e3/m.fps,m.deltaMin=m.deltaMin||1e3/m.fps,m.deltaMax=m.deltaMax||1e3/(m.fps*.5),m.fps=1e3/m.delta,m},s.run=function(f,u){return typeof f.positionIterations<"u"&&(u=f,f=s.create()),function m(p){f.frameRequestId=c(m),p&&f.enabled&&s.tick(f,u,p)}(),f},s.tick=function(f,u,m){var p=u.timing,g;f.isFixed?g=f.delta:(g=m-f.timePrev||f.delta,f.timePrev=m,f.deltaHistory.push(g),f.deltaHistory=f.deltaHistory.slice(-f.deltaSampleSize),g=Math.min.apply(null,f.deltaHistory),g=g<f.deltaMin?f.deltaMin:g,g=g>f.deltaMax?f.deltaMax:g,f.delta=g);var v={timestamp:p.timestamp};a.trigger(f,"beforeTick",v),f.frameCounter+=1,m-f.counterTimestamp>=1e3&&(f.fps=f.frameCounter*((m-f.counterTimestamp)/1e3),f.counterTimestamp=m,f.frameCounter=0),a.trigger(f,"tick",v),a.trigger(f,"beforeUpdate",v),o.update(u,g),a.trigger(f,"afterUpdate",v),a.trigger(f,"afterTick",v)},s.stop=function(f){d(f.frameRequestId)},s.start=function(f,u){s.run(f,u)}})()},function(t,i,r){var s={};t.exports=s;var a=r(8),o=r(0),l=o.deprecated;(function(){s.collides=function(c,d){return a.collides(c,d)},l(s,"collides","SAT.collides  replaced by Collision.collides")})()},function(t,i,r){var s={};t.exports=s,r(1);var a=r(0);(function(){s.pathToVertices=function(o,l){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,d,h,f,u,m,p,g,v,y,_=[],w,x,S=0,T=0,E=0;l=l||15;var M=function(A,C,P){var I=P%2===1&&P>1;if(!v||A!=v.x||C!=v.y){v&&I?(w=v.x,x=v.y):(w=0,x=0);var D={x:w+A,y:x+C};(I||!v)&&(v=D),_.push(D),T=w+A,E=x+C}},b=function(A){var C=A.pathSegTypeAsLetter.toUpperCase();if(C!=="Z"){switch(C){case"M":case"L":case"T":case"C":case"S":case"Q":T=A.x,E=A.y;break;case"H":T=A.x;break;case"V":E=A.y;break}M(T,E,A.pathSegType)}};for(s._svgPathToAbsolute(o),h=o.getTotalLength(),m=[],c=0;c<o.pathSegList.numberOfItems;c+=1)m.push(o.pathSegList.getItem(c));for(p=m.concat();S<h;){if(y=o.getPathSegAtLength(S),u=m[y],u!=g){for(;p.length&&p[0]!=u;)b(p.shift());g=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=o.getPointAtLength(S),M(f.x,f.y,0);break}S+=l}for(c=0,d=p.length;c<d;++c)b(p[c]);return _},s._svgPathToAbsolute=function(o){for(var l,c,d,h,f,u,m=o.pathSegList,p=0,g=0,v=m.numberOfItems,y=0;y<v;++y){var _=m.getItem(y),w=_.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(w))"x"in _&&(p=_.x),"y"in _&&(g=_.y);else switch("x1"in _&&(d=p+_.x1),"x2"in _&&(f=p+_.x2),"y1"in _&&(h=g+_.y1),"y2"in _&&(u=g+_.y2),"x"in _&&(p+=_.x),"y"in _&&(g+=_.y),w){case"m":m.replaceItem(o.createSVGPathSegMovetoAbs(p,g),y);break;case"l":m.replaceItem(o.createSVGPathSegLinetoAbs(p,g),y);break;case"h":m.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(p),y);break;case"v":m.replaceItem(o.createSVGPathSegLinetoVerticalAbs(g),y);break;case"c":m.replaceItem(o.createSVGPathSegCurvetoCubicAbs(p,g,d,h,f,u),y);break;case"s":m.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(p,g,f,u),y);break;case"q":m.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(p,g,d,h),y);break;case"t":m.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),y);break;case"a":m.replaceItem(o.createSVGPathSegArcAbs(p,g,_.r1,_.r2,_.angle,_.largeArcFlag,_.sweepFlag),y);break;case"z":case"Z":p=l,g=c;break}(w=="M"||w=="m")&&(l=p,c=g)}}})()},function(t,i,r){var s={};t.exports=s;var a=r(6);r(0),function(){s.create=a.create,s.add=a.add,s.remove=a.remove,s.clear=a.clear,s.addComposite=a.addComposite,s.addBody=a.addBody,s.addConstraint=a.addConstraint}()}])})})(Q0);var LP=Q0.exports;const DP=RP(LP);function IP(){const{Engine:n,Render:e,Events:t,MouseConstraint:i,Mouse:r,World:s,Bodies:a,Runner:o,Bounds:l,Body:c}=DP,d=-.4,h=.1;let f,u;const m=n.create(),p=m.world;m.gravity.x=d,m.gravity.y=h;const g=document.querySelector(".tag-canvas");if(!g){console.error("Container element not found");return}let v=g.clientWidth+2,y=g.clientHeight+2;f=v,u=y;const _=e.create({element:g,engine:m,options:{width:v,height:y,pixelRatio:2,background:"transparent",wireframes:!1}});let w=[];const x=(Y,Q,te,he,Ae)=>a.rectangle(Y,Q,te,he,{isStatic:!0,...Ae}),S=()=>{w.forEach(Ae=>s.remove(p,Ae)),w=[];const Y=x(v/2+160,y+80,v+320,160,{render:{fillStyle:"#1A1A1A"}}),Q=x(-80,y/2,160,y,{}),te=x(v+80,y/2,160,y,{}),he=x(v/2+160,-80,v+320,160,{});w.push(Y,Q,te,he),s.add(p,w)};S();const T=(Y,Q,te,he)=>({text:Y,width:Q,height:te,url:he}),E=Y=>Promise.all(Y.map(Q=>new Promise((te,he)=>{const Ae=new Image;Ae.onload=()=>te(Ae),Ae.onerror=()=>{console.error(`Failed to load image: ${Q.url}`),he(new Error(`Image load error for ${Q.url}`))},Ae.src=Q.url}))),M=[T("B",214.4,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/b-balky.svg"),T("A",267.2,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/a-balky.svg"),T("L",175.6,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/l-balky.svg"),T("K",234,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/k-balky.svg"),T("Y",243.2,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/y-balky.svg"),T(".",56.8,55.6,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/dot-balky.svg")],b=[],A=1.5;for(let Y=0;Y<A;Y++)M.forEach(Q=>{b.push({...Q})});const C=(Y,Q)=>({x:Math.random()*Y,y:Math.random()*Q}),P=()=>({x:(Math.random()-.5)*10,y:(Math.random()-.5)*10});let I=[];E(b).then(()=>{I=b.map(Y=>{const Q=C(v,y/2),te=P();return a.rectangle(Q.x,Q.y,Y.width,Y.height,{chamfer:{radius:20},render:{sprite:{texture:Y.url,xScale:1,yScale:1}},velocity:{x:te.x,y:te.y}})}),s.add(p,I),o.run(m),e.run(_)}).catch(Y=>{console.error("Failed to load images:",Y)});const D=r.create(_.canvas),F=i.create(m,{mouse:D,constraint:{stiffness:.2,render:{visible:!1}}});s.add(p,F),_.mouse=D;const B=()=>{D.element.removeEventListener("mousewheel",D.mousewheel),D.element.removeEventListener("DOMMouseScroll",D.mousewheel)};B();let k=!1;const K=()=>k=!0,O=()=>k=!1,re=()=>console.log(k?"click":"drag");document.addEventListener("mousedown",K),document.addEventListener("mousemove",O),document.addEventListener("mouseup",re);const ae=()=>{f=_.options.width,u=_.options.height,v=g.clientWidth+2,y=g.clientHeight+2,_.canvas.width=v*_.options.pixelRatio,_.canvas.height=y*_.options.pixelRatio,_.canvas.style.width=`${v}px`,_.canvas.style.height=`${y}px`,_.options.width=v,_.options.height=y},Te=()=>{if(!f||!u)return;const Y=v/f,Q=y/u;I.forEach(te=>{c.scale(te,Y,Q);const he=te.position.x*Y,Ae=te.position.y*Q;c.setPosition(te,{x:he,y:Ae})})},G=()=>{ae(),Te(),S()};return window.addEventListener("resize",G),()=>{document.removeEventListener("mousedown",K),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",re),B(),window.removeEventListener("resize",G)}}function J0(){function n(){document.querySelectorAll('[data-element="headline"]').forEach(s=>{new wo(s,{types:"chars"})})}n();const e=document.querySelectorAll('[data-element="headline"]');document.querySelector('[data-element="headline-wrapper"]');let t=0;function i(){e.forEach((s,a)=>{a!==t?Ee.set(s,{y:100,autoAlpha:0}):Ee.set(s,{y:0,autoAlpha:1})})}i();function r(){const s=e[t],a=(t+1)%e.length,o=e[a];n(),Ee.timeline({onComplete:()=>{t=a,r()}}).to(s,{y:-100,autoAlpha:0,duration:1.25,ease:"power3.inOut",delay:.5,onComplete:()=>{Ee.set(s,{y:100})}}).fromTo(o,{y:100,autoAlpha:0},{y:0,autoAlpha:1,duration:1.25,ease:"power3.inOut",delay:.5},0)}r()}Ee.registerPlugin(et);function OP(){const n=document.querySelectorAll(".scale_img_item");if(n.length===0)return;Ee.set(n,{scale:0});const e=()=>{Ee.to(n,{scale:1,duration:1.6,ease:"expo.out",stagger:{each:.02,from:"random"}})},t=()=>{Ee.set(n,{scale:0})};et.create({trigger:".img_scale_main",delay:.2,start:"top 100%",onEnter:e,onEnterBack:e,onLeave:t,onLeaveBack:t,markers:!1})}Ee.registerPlugin(et);const ey={"move-up":n=>({y:0,opacity:1}),"move-up-fade":n=>({y:0,opacity:1}),"move-up-scale":n=>({y:0,scale:1,opacity:1}),"move-up-scale-fade":n=>({y:0,scale:1,opacity:1})},ty={"move-up":{y:50,opacity:0},"move-up-fade":{y:50,opacity:0},"move-up-scale":{y:50,scale:.9,opacity:0},"move-up-scale-fade":{y:50,scale:.9,opacity:0}};function NP(){document.querySelectorAll("[data-gen-animation]").forEach(e=>{const t=e.getAttribute("data-gen-animation"),i=e.getAttribute("data-reset")==="true";if(t&&ey[t]){Ee.set(e,ty[t]);const r=ey[t](e),s=()=>{Ee.to(e,{...r,duration:1.4,ease:"expo.out"})},a=()=>{Ee.set(e,ty[t])};et.create({trigger:e,start:"top bottom",onEnter:s,onEnterBack:s,onLeave:i?a:null,onLeaveBack:i?a:null,markers:!1})}})}function UP(){const n=document.querySelectorAll('[data-time="utah"]'),e=()=>{const t=new Date,i={timeZone:"America/Denver",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return new Intl.DateTimeFormat([],i).format(t)};n.forEach(t=>{const i=()=>{const r=e(),[s,a,o]=r.split(":");t.innerHTML=`${s}<span class="colon" id="colon1">:</span>${a}<span class="colon" id="colon2">:</span>${o}`};setInterval(i,1e3),i()}),setInterval(()=>{document.querySelectorAll("#colon1").forEach(i=>{i.classList.toggle("hidden")})},500),setTimeout(()=>{setInterval(()=>{document.querySelectorAll("#colon2").forEach(i=>{i.classList.toggle("hidden")})},500)},250)}function kP(){const n=!sessionStorage.getItem("firstVisit");sessionStorage.setItem("firstVisit","false");const e=document.querySelector(".page_loader"),t=document.querySelector('[data-page-load="brand-logo"]'),i=document.querySelectorAll(".page_loader_img_wrap"),r=document.querySelector(".page_loader_wrap"),s=document.querySelector(".page_load_trigger"),a=()=>{Ee.set(e,{display:"block"}),Ee.set(r,{position:"absolute",top:0,bottom:"auto"}),Ee.timeline({onComplete:()=>{sessionStorage.setItem("firstVisit","false"),e.style.display="none"}}).to(t,{yPercent:0,duration:.5},0).to(i,{scale:1,duration:1.6,stagger:.1,ease:"expo.out"},"-=0.2").to(t,{yPercent:-100,duration:1,ease:"expo.inOut"},"-=0.8").to(i,{scale:0,duration:1,stagger:.1,ease:"expo.out"},"-=0.3").to(r,{height:"0%",duration:1,ease:"expo.out"},"-=0.5").add(()=>{console.log("Page load trigger clicked (first visit)"),s.click()},"-=0.751")},o=l=>{Ee.set(e,{display:"block"}),Ee.set(t,{yPercent:100}),Ee.set(i,{scale:0}),Ee.set(r,{position:"absolute",bottom:0,top:"auto",height:"0%"}),Ee.timeline({onComplete:()=>{window.location.href=l}}).to(r,{height:"100%",duration:.8,ease:"expo.out"},0).to(t,{yPercent:0,duration:1,ease:"expo.inOut"},"-=1").add(()=>{console.log("Page load trigger clicked (page-to-page transition)"),s.click()},"-=0.751")};document.querySelectorAll("a:not(.excluded-class)").forEach(l=>{l.addEventListener("click",c=>{const d=l.getAttribute("href");l.hostname===window.location.hostname&&!d.includes("#")&&l.getAttribute("target")!=="_blank"&&(c.preventDefault(),o(d))})}),n?a():(Ee.set(e,{display:"block"}),Ee.set(r,{position:"absolute",top:0,bottom:"auto"}),Ee.set(t,{yPercent:0}),Ee.timeline().to(t,{yPercent:-100,duration:1,ease:"expo.inOut"},0).to(r,{height:"0%",duration:1,ease:"expo.out"},"-=0.5").set(e,{display:"none"}).add(()=>{console.log("Page load trigger clicked (back button navigation)"),s.click()},"-=0.751")),window.onpageshow=function(l){l.persisted&&location.reload()}}function Se(n,e,t){return(e=BP(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FP(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function BP(n){var e=FP(n,"string");return typeof e=="symbol"?e:String(e)}function zP(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function iy(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function VP(n,e,t){return iy(n.prototype,e),iy(n,t),n}function HP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ny(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ry(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ny(Object(t),!0).forEach(function(i){HP(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ny(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}var sy={addCSS:!0,thumbWidth:15,watch:!0};function GP(n,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(n,e)}function WP(n,e){if(n&&e){var t=new Event(e,{bubbles:!0});n.dispatchEvent(t)}}var bl=function(n){return n!=null?n.constructor:null},zh=function(n,e){return!!(n&&e&&n instanceof e)},ay=function(n){return n==null},oy=function(n){return bl(n)===Object},XP=function(n){return bl(n)===Number&&!Number.isNaN(n)},ly=function(n){return bl(n)===String},$P=function(n){return bl(n)===Boolean},qP=function(n){return bl(n)===Function},cy=function(n){return Array.isArray(n)},uy=function(n){return zh(n,NodeList)},YP=function(n){return zh(n,Element)},jP=function(n){return zh(n,Event)},KP=function(n){return ay(n)||(ly(n)||cy(n)||uy(n))&&!n.length||oy(n)&&!Object.keys(n).length},bi={nullOrUndefined:ay,object:oy,number:XP,string:ly,boolean:$P,function:qP,array:cy,nodeList:uy,element:YP,event:jP,empty:KP};function ZP(n){var e="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function QP(n,e){if(1>e){var t=ZP(e);return parseFloat(n.toFixed(t))}return Math.round(n/e)*e}var JP=function(){function n(e,t){zP(this,n),bi.element(e)?this.element=e:bi.string(e)&&(this.element=document.querySelector(e)),bi.element(this.element)&&bi.empty(this.element.rangeTouch)&&(this.config=ry({},sy,{},t),this.init())}return VP(n,[{key:"init",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(r){t.element[i](r,function(s){return t.set(s)},!1)})}},{key:"get",value:function(e){if(!n.enabled||!bi.event(e))return null;var t,i=e.target,r=e.changedTouches[0],s=parseFloat(i.getAttribute("min"))||0,a=parseFloat(i.getAttribute("max"))||100,o=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(t=100/l.width*(r.clientX-l.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*c:50<t&&(t+=2*(t-50)*c),s+QP(t/100*(a-s),o)}},{key:"set",value:function(e){n.enabled&&bi.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),WP(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;if(bi.empty(e)||bi.string(e)?i=Array.from(document.querySelectorAll(bi.string(e)?e:'input[type="range"]')):bi.element(e)?i=[e]:bi.nodeList(e)?i=Array.from(e):bi.array(e)&&(i=e.filter(bi.element)),bi.empty(i))return null;var r=ry({},sy,{},t);if(bi.string(e)&&r.watch){var s=new MutationObserver(function(a){Array.from(a).forEach(function(o){Array.from(o.addedNodes).forEach(function(l){bi.element(l)&&GP(l,e)&&new n(l,r)})})});s.observe(document.body,{childList:!0,subtree:!0})}return i.map(function(a){return new n(a,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),n}();const wl=n=>n!=null?n.constructor:null,xr=(n,e)=>!!(n&&e&&n instanceof e),Vh=n=>n==null,dy=n=>wl(n)===Object,eR=n=>wl(n)===Number&&!Number.isNaN(n),Su=n=>wl(n)===String,tR=n=>wl(n)===Boolean,fy=n=>typeof n=="function",hy=n=>Array.isArray(n),iR=n=>xr(n,WeakMap),py=n=>xr(n,NodeList),nR=n=>wl(n)===Text,rR=n=>xr(n,Event),sR=n=>xr(n,KeyboardEvent),aR=n=>xr(n,window.TextTrackCue)||xr(n,window.VTTCue),oR=n=>xr(n,TextTrack)||!Vh(n)&&Su(n.kind),lR=n=>xr(n,Promise)&&fy(n.then),cR=n=>n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object",my=n=>Vh(n)||(Su(n)||hy(n)||py(n))&&!n.length||dy(n)&&!Object.keys(n).length;var N={nullOrUndefined:Vh,object:dy,number:eR,string:Su,boolean:tR,function:fy,array:hy,weakMap:iR,nodeList:py,element:cR,textNode:nR,event:rR,keyboardEvent:sR,cue:aR,track:oR,promise:lR,url:n=>{if(xr(n,window.URL))return!0;if(!Su(n))return!1;let e=n;n.startsWith("http://")&&n.startsWith("https://")||(e=`http://${n}`);try{return!my(new URL(e).hostname)}catch{return!1}},empty:my};const Hh=(()=>{const n=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(e).find(i=>n.style[i]!==void 0);return!!N.string(t)&&e[t]})();function gy(n,e){setTimeout(()=>{try{n.hidden=!0,n.offsetHeight,n.hidden=!1}catch{}},e)}const uR=!!window.document.documentMode,dR=/Edge/g.test(navigator.userAgent),fR="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),hR=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,pR=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,mR=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var li={isIE:uR,isEdge:dR,isWebKit:fR,isIPhone:hR,isIPadOS:pR,isIos:mR};function gR(n){return JSON.parse(JSON.stringify(n))}function vy(n,e){return e.split(".").reduce((t,i)=>t&&t[i],n)}function Ht(n={},...e){if(!e.length)return n;const t=e.shift();return N.object(t)?(Object.keys(t).forEach(i=>{N.object(t[i])?(Object.keys(n).includes(i)||Object.assign(n,{[i]:{}}),Ht(n[i],t[i])):Object.assign(n,{[i]:t[i]})}),Ht(n,...e)):n}function _y(n,e){const t=n.length?n:[n];Array.from(t).reverse().forEach((i,r)=>{const s=r>0?e.cloneNode(!0):e,a=i.parentNode,o=i.nextSibling;s.appendChild(i),o?a.insertBefore(s,o):a.appendChild(s)})}function Gh(n,e){N.element(n)&&!N.empty(e)&&Object.entries(e).filter(([,t])=>!N.nullOrUndefined(t)).forEach(([t,i])=>n.setAttribute(t,i))}function Ge(n,e,t){const i=document.createElement(n);return N.object(e)&&Gh(i,e),N.string(t)&&(i.innerText=t),i}function vR(n,e){N.element(n)&&N.element(e)&&e.parentNode.insertBefore(n,e.nextSibling)}function yy(n,e,t,i){N.element(e)&&e.appendChild(Ge(n,t,i))}function br(n){N.nodeList(n)||N.array(n)?Array.from(n).forEach(br):N.element(n)&&N.element(n.parentNode)&&n.parentNode.removeChild(n)}function Mu(n){if(!N.element(n))return;let{length:e}=n.childNodes;for(;e>0;)n.removeChild(n.lastChild),e-=1}function Tu(n,e){return N.element(e)&&N.element(e.parentNode)&&N.element(n)?(e.parentNode.replaceChild(n,e),n):null}function Zn(n,e){if(!N.string(n)||N.empty(n))return{};const t={},i=Ht({},e);return n.split(",").forEach(r=>{const s=r.trim(),a=s.replace(".",""),o=s.replace(/[[\]]/g,"").split("="),[l]=o,c=o.length>1?o[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":N.string(i.class)?t.class=`${i.class} ${a}`:t.class=a;break;case"#":t.id=s.replace("#","");break;case"[":t[l]=c}}),Ht(i,t)}function js(n,e){if(!N.element(n))return;let t=e;N.boolean(t)||(t=!n.hidden),n.hidden=t}function vt(n,e,t){if(N.nodeList(n))return Array.from(n).map(i=>vt(i,e,t));if(N.element(n)){let i="toggle";return t!==void 0&&(i=t?"add":"remove"),n.classList[i](e),n.classList.contains(e)}return!1}function Eu(n,e){return N.element(n)&&n.classList.contains(e)}function Ks(n,e){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(n,e)}function _R(n,e){const{prototype:t}=Element;return(t.closest||function(){let i=this;do{if(Ks.matches(i,e))return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}).call(n,e)}function Sl(n){return this.elements.container.querySelectorAll(n)}function Jt(n){return this.elements.container.querySelector(n)}function Wh(n=null,e=!1){N.element(n)&&n.focus({preventScroll:!0,focusVisible:e})}const xy={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Gt={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(n,e){const t=Gt[n]||e!=="html5";return{api:t,ui:t&&Gt.rangeInput}},pip:!(li.isIPhone||!N.function(Ge("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Ge("video").disablePictureInPicture)),airplay:N.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(n){if(N.empty(n))return!1;const[e]=n.split("/");let t=n;if(!this.isHTML5||e!==this.type)return!1;Object.keys(xy).includes(t)&&(t+=`; codecs="${xy[n]}"`);try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const n=document.createElement("input");return n.type="range",n.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:Hh!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},yR=(()=>{let n=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(n=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n})();function Ml(n,e,t,i=!1,r=!0,s=!1){if(!n||!("addEventListener"in n)||N.empty(e)||!N.function(t))return;const a=e.split(" ");let o=s;yR&&(o={passive:r,capture:s}),a.forEach(l=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:n,type:l,callback:t,options:o}),n[i?"addEventListener":"removeEventListener"](l,t,o)})}function ht(n,e="",t,i=!0,r=!1){Ml.call(this,n,e,t,!0,i,r)}function Au(n,e="",t,i=!0,r=!1){Ml.call(this,n,e,t,!1,i,r)}function Xh(n,e="",t,i=!0,r=!1){const s=(...a)=>{Au(n,e,s,i,r),t.apply(this,a)};Ml.call(this,n,e,s,!0,i,r)}function We(n,e="",t=!1,i={}){if(!N.element(n)||N.empty(e))return;const r=new CustomEvent(e,{bubbles:t,detail:{...i,plyr:this}});n.dispatchEvent(r)}function xR(){this&&this.eventListeners&&(this.eventListeners.forEach(n=>{const{element:e,type:t,callback:i,options:r}=n;e.removeEventListener(t,i,r)}),this.eventListeners=[])}function bR(){return new Promise(n=>this.ready?setTimeout(n,0):ht.call(this,this.elements.container,"ready",n)).then(()=>{})}function Qn(n){N.promise(n)&&n.then(null,()=>{})}function $h(n){return N.array(n)?n.filter((e,t)=>n.indexOf(e)===t):n}function by(n,e){return N.array(n)&&n.length?n.reduce((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t):null}function wy(n){return!(!window||!window.CSS)&&window.CSS.supports(n)}const Sy=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((n,[e,t])=>({...n,[e/t]:[e,t]}),{});function My(n){return N.array(n)||N.string(n)&&n.includes(":")?(N.array(n)?n:n.split(":")).map(Number).every(N.number):!1}function Cu(n){if(!N.array(n)||!n.every(N.number))return null;const[e,t]=n,i=(s,a)=>a===0?s:i(a,s%a),r=i(e,t);return[e/r,t/r]}function qh(n){const e=i=>My(i)?i.split(":").map(Number):null;let t=e(n);if(t===null&&(t=e(this.config.ratio)),t===null&&!N.empty(this.embed)&&N.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:i,videoHeight:r}=this.media;t=[i,r]}return Cu(t)}function ro(n){if(!this.isVideo)return{};const{wrapper:e}=this.elements,t=qh.call(this,n);if(!N.array(t))return{};const[i,r]=Cu(t),s=100/i*r;if(wy(`aspect-ratio: ${i}/${r}`)?e.style.aspectRatio=`${i}/${r}`:e.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),o=(a-s)/(a/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${o}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:t}}function Ty(n,e,t=.05){const i=n/e,r=by(Object.keys(Sy),i);return Math.abs(r-i)<=t?Sy[r]:[n,e]}function wR(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const ts={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(n=>{const e=n.getAttribute("type");return!!N.empty(e)||Gt.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:ts.getSources.call(this).map(n=>Number(n.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const n=this;n.options.speed=n.config.speed.options,N.empty(this.config.ratio)||ro.call(n),Object.defineProperty(n.media,"quality",{get(){const e=ts.getSources.call(n).find(t=>t.getAttribute("src")===n.source);return e&&Number(e.getAttribute("size"))},set(e){if(n.quality!==e){if(n.config.quality.forced&&N.function(n.config.quality.onChange))n.config.quality.onChange(e);else{const t=ts.getSources.call(n).find(l=>Number(l.getAttribute("size"))===e);if(!t)return;const{currentTime:i,paused:r,preload:s,readyState:a,playbackRate:o}=n.media;n.media.src=t.getAttribute("src"),(s!=="none"||a)&&(n.once("loadedmetadata",()=>{n.speed=o,n.currentTime=i,r||Qn(n.play())}),n.media.load())}We.call(n,n.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(br(ts.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function SR(n){return`${n}-${Math.floor(1e4*Math.random())}`}function Yh(n,...e){return N.empty(n)?n:n.toString().replace(/{(\d+)}/g,(t,i)=>e[i].toString())}function MR(n,e){return n===0||e===0||Number.isNaN(n)||Number.isNaN(e)?0:(n/e*100).toFixed(2)}const Tl=(n="",e="",t="")=>n.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),Ey=(n="")=>n.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function TR(n=""){let e=n.toString();return e=Tl(e,"-"," "),e=Tl(e,"_"," "),e=Ey(e),Tl(e," ","")}function ER(n=""){let e=n.toString();return e=TR(e),e.charAt(0).toLowerCase()+e.slice(1)}function AR(n){const e=document.createDocumentFragment(),t=document.createElement("div");return e.appendChild(t),t.innerHTML=n,e.firstChild.innerText}function CR(n){const e=document.createElement("div");return e.appendChild(n),e.innerHTML}const Ay={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},ci={get(n="",e={}){if(N.empty(n)||N.empty(e))return"";let t=vy(e.i18n,n);if(N.empty(t))return Object.keys(Ay).includes(n)?Ay[n]:"";const i={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(i).forEach(([r,s])=>{t=Tl(t,r,s)}),t}};class El{constructor(e){Se(this,"get",t=>{if(!El.supported||!this.enabled)return null;const i=window.localStorage.getItem(this.key);if(N.empty(i))return null;const r=JSON.parse(i);return N.string(t)&&t.length?r[t]:r}),Se(this,"set",t=>{if(!El.supported||!this.enabled||!N.object(t))return;let i=this.get();N.empty(i)&&(i={}),Ht(i,t);try{window.localStorage.setItem(this.key,JSON.stringify(i))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function Al(n,e="text"){return new Promise((t,i)=>{try{const r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",()=>{if(e==="text")try{t(JSON.parse(r.responseText))}catch{t(r.responseText)}else t(r.response)}),r.addEventListener("error",()=>{throw new Error(r.status)}),r.open("GET",n,!0),r.responseType=e,r.send()}catch(r){i(r)}})}function Cy(n,e){if(!N.string(n))return;const t="cache",i=N.string(e);let r=!1;const s=()=>document.getElementById(e)!==null,a=(o,l)=>{o.innerHTML=l,i&&s()||document.body.insertAdjacentElement("afterbegin",o)};if(!i||!s()){const o=El.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),i&&l.setAttribute("id",e),o){const c=window.localStorage.getItem(`${t}-${e}`);if(r=c!==null,r){const d=JSON.parse(c);a(l,d.content)}}Al(n).then(c=>{if(!N.empty(c)){if(o)try{window.localStorage.setItem(`${t}-${e}`,JSON.stringify({content:c}))}catch{}a(l,c)}}).catch(()=>{})}}const Py=n=>Math.trunc(n/60/60%60,10),PR=n=>Math.trunc(n/60%60,10),RR=n=>Math.trunc(n%60,10);function Pu(n=0,e=!1,t=!1){if(!N.number(n))return Pu(void 0,e,t);const i=o=>`0${o}`.slice(-2);let r=Py(n);const s=PR(n),a=RR(n);return r=e||r>0?`${r}:`:"",`${t&&n>0?"-":""}${r}${i(s)}:${i(a)}`}const _e={getIconUrl(){const n=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,t=n.host!==e||li.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=Jt.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Sl.call(this,this.config.selectors.buttons.play),pause:Jt.call(this,this.config.selectors.buttons.pause),restart:Jt.call(this,this.config.selectors.buttons.restart),rewind:Jt.call(this,this.config.selectors.buttons.rewind),fastForward:Jt.call(this,this.config.selectors.buttons.fastForward),mute:Jt.call(this,this.config.selectors.buttons.mute),pip:Jt.call(this,this.config.selectors.buttons.pip),airplay:Jt.call(this,this.config.selectors.buttons.airplay),settings:Jt.call(this,this.config.selectors.buttons.settings),captions:Jt.call(this,this.config.selectors.buttons.captions),fullscreen:Jt.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Jt.call(this,this.config.selectors.progress),this.elements.inputs={seek:Jt.call(this,this.config.selectors.inputs.seek),volume:Jt.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Jt.call(this,this.config.selectors.display.buffer),currentTime:Jt.call(this,this.config.selectors.display.currentTime),duration:Jt.call(this,this.config.selectors.display.duration)},N.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(n){return this.debug.warn("It looks like there is a problem with your custom controls HTML",n),this.toggleNativeControls(!0),!1}},createIcon(n,e){const t="http://www.w3.org/2000/svg",i=_e.getIconUrl.call(this),r=`${i.cors?"":i.url}#${this.config.iconPrefix}`,s=document.createElementNS(t,"svg");Gh(s,Ht(e,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(t,"use"),o=`${r}-${n}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),s.appendChild(a),s},createLabel(n,e={}){const t=ci.get(n,this.config);return Ge("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},t)},createBadge(n){if(N.empty(n))return null;const e=Ge("span",{class:this.config.classNames.menu.value});return e.appendChild(Ge("span",{class:this.config.classNames.menu.badge},n)),e},createButton(n,e){const t=Ht({},e);let i=ER(n);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(a=>{Object.keys(t).includes(a)&&(r[a]=t[a],delete t[a])}),r.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(a=>a===this.config.classNames.control)||Ht(t,{class:`${t.class} ${this.config.classNames.control}`}):t.class=this.config.classNames.control,n){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":t.class+=` ${this.config.classNames.control}--overlaid`,i="play",r.label="play",r.icon="play";break;default:N.empty(r.label)&&(r.label=i),N.empty(r.icon)&&(r.icon=n)}const s=Ge(r.element);return r.toggle?(s.appendChild(_e.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild(_e.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild(_e.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild(_e.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild(_e.createIcon.call(this,r.icon)),s.appendChild(_e.createLabel.call(this,r.label))),Ht(t,Zn(this.config.selectors.buttons[i],t)),Gh(s,t),i==="play"?(N.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(s)):this.elements.buttons[i]=s,s},createRange(n,e){const t=Ge("input",Ht(Zn(this.config.selectors.inputs[n]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":ci.get(n,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[n]=t,_e.updateRangeFill.call(this,t),JP.setup(t),t},createProgress(n,e){const t=Ge("progress",Ht(Zn(this.config.selectors.display[n]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(n!=="volume"){t.appendChild(Ge("span",null,"0"));const i={played:"played",buffer:"buffered"}[n],r=i?ci.get(i,this.config):"";t.innerText=`% ${r.toLowerCase()}`}return this.elements.display[n]=t,t},createTime(n,e){const t=Zn(this.config.selectors.display[n],e),i=Ge("div",Ht(t,{class:`${t.class?t.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":ci.get(n,this.config),role:"timer"}),"00:00");return this.elements.display[n]=i,i},bindMenuItemShortcuts(n,e){ht.call(this,n,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const i=Ks(n,'[role="menuitemradio"]');if(!i&&[" ","ArrowRight"].includes(t.key))_e.showMenuPanel.call(this,e,!0);else{let r;t.key!==" "&&(t.key==="ArrowDown"||i&&t.key==="ArrowRight"?(r=n.nextElementSibling,N.element(r)||(r=n.parentNode.firstElementChild)):(r=n.previousElementSibling,N.element(r)||(r=n.parentNode.lastElementChild)),Wh.call(this,r,!0))}},!1),ht.call(this,n,"keyup",t=>{t.key==="Return"&&_e.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:n,list:e,type:t,title:i,badge:r=null,checked:s=!1}){const a=Zn(this.config.selectors.inputs[t]),o=Ge("button",Ht(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":s,value:n})),l=Ge("span");l.innerHTML=i,N.element(r)&&l.appendChild(r),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>o.getAttribute("aria-checked")==="true",set(c){c&&Array.from(o.parentNode.children).filter(d=>Ks(d,'[role="menuitemradio"]')).forEach(d=>d.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",c?"true":"false")}}),this.listeners.bind(o,"click keyup",c=>{if(!N.keyboardEvent(c)||c.key===" "){switch(c.preventDefault(),c.stopPropagation(),o.checked=!0,t){case"language":this.currentTrack=Number(n);break;case"quality":this.quality=n;break;case"speed":this.speed=parseFloat(n)}_e.showMenuPanel.call(this,"home",N.keyboardEvent(c))}},t,!1),_e.bindMenuItemShortcuts.call(this,o,t),e.appendChild(o)},formatTime(n=0,e=!1){return N.number(n)?Pu(n,Py(this.duration)>0,e):n},updateTimeDisplay(n=null,e=0,t=!1){N.element(n)&&N.number(e)&&(n.innerText=_e.formatTime(e,t))},updateVolume(){this.supported.ui&&(N.element(this.elements.inputs.volume)&&_e.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),N.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(n,e=0){N.element(n)&&(n.value=e,_e.updateRangeFill.call(this,n))},updateProgress(n){if(!this.supported.ui||!N.event(n))return;let e=0;const t=(i,r)=>{const s=N.number(r)?r:0,a=N.element(i)?i:this.elements.display.buffer;if(N.element(a)){a.value=s;const o=a.getElementsByTagName("span")[0];N.element(o)&&(o.childNodes[0].nodeValue=s)}};if(n)switch(n.type){case"timeupdate":case"seeking":case"seeked":e=MR(this.currentTime,this.duration),n.type==="timeupdate"&&_e.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(n){const e=N.event(n)?n.target:n;if(N.element(e)&&e.getAttribute("type")==="range"){if(Ks(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const t=_e.formatTime(this.currentTime),i=_e.formatTime(this.duration),r=ci.get("seekLabel",this.config);e.setAttribute("aria-valuetext",r.replace("{currentTime}",t).replace("{duration}",i))}else if(Ks(e,this.config.selectors.inputs.volume)){const t=100*e.value;e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(li.isWebKit||li.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(n){var e,t;if(!this.config.tooltips.seek||!N.element(this.elements.inputs.seek)||!N.element(this.elements.display.seekTooltip)||this.duration===0)return;const i=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,s=d=>vt(i,r,d);if(this.touch)return void s(!1);let a=0;const o=this.elements.progress.getBoundingClientRect();if(N.event(n))a=100/o.width*(n.pageX-o.left);else{if(!Eu(i,r))return;a=parseFloat(i.style.left,10)}a<0?a=0:a>100&&(a=100);const l=this.duration/100*a;i.innerText=_e.formatTime(l);const c=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.find(({time:d})=>d===Math.round(l));c&&i.insertAdjacentHTML("afterbegin",`${c.label}<br>`),i.style.left=`${a}%`,N.event(n)&&["mouseenter","mouseleave"].includes(n.type)&&s(n.type==="mouseenter")},timeUpdate(n){const e=!N.element(this.elements.display.duration)&&this.config.invertTime;_e.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),n&&n.type==="timeupdate"&&this.media.seeking||_e.updateProgress.call(this,n)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return js(this.elements.display.currentTime,!0),void js(this.elements.progress,!0);N.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const n=N.element(this.elements.display.duration);!n&&this.config.displayDuration&&this.paused&&_e.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),n&&_e.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&_e.setMarkers.call(this),_e.updateSeekTooltip.call(this)},toggleMenuButton(n,e){js(this.elements.settings.buttons[n],!e)},updateSetting(n,e,t){const i=this.elements.settings.panels[n];let r=null,s=e;if(n==="captions")r=this.currentTrack;else{if(r=N.empty(t)?this[n]:t,N.empty(r)&&(r=this.config[n].default),!N.empty(this.options[n])&&!this.options[n].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${n}`);if(!this.config[n].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${n}`)}if(N.element(s)||(s=i&&i.querySelector('[role="menu"]')),!N.element(s))return;this.elements.settings.buttons[n].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=_e.getLabel.call(this,n,r);const a=s&&s.querySelector(`[value="${r}"]`);N.element(a)&&(a.checked=!0)},getLabel(n,e){switch(n){case"speed":return e===1?ci.get("normal",this.config):`${e}&times;`;case"quality":if(N.number(e)){const t=ci.get(`qualityLabel.${e}`,this.config);return t.length?t:`${e}p`}return Ey(e);case"captions":return mt.getLabel.call(this);default:return null}},setQualityMenu(n){if(!N.element(this.elements.settings.panels.quality))return;const e="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');N.array(n)&&(this.options.quality=$h(n).filter(s=>this.config.quality.options.includes(s)));const i=!N.empty(this.options.quality)&&this.options.quality.length>1;if(_e.toggleMenuButton.call(this,e,i),Mu(t),_e.checkMenu.call(this),!i)return;const r=s=>{const a=ci.get(`qualityBadge.${s}`,this.config);return a.length?_e.createBadge.call(this,a):null};this.options.quality.sort((s,a)=>{const o=this.config.quality.options;return o.indexOf(s)>o.indexOf(a)?1:-1}).forEach(s=>{_e.createMenuItem.call(this,{value:s,list:t,type:e,title:_e.getLabel.call(this,"quality",s),badge:r(s)})}),_e.updateSetting.call(this,e,t)},setCaptionsMenu(){if(!N.element(this.elements.settings.panels.captions))return;const n="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=mt.getTracks.call(this),i=!!t.length;if(_e.toggleMenuButton.call(this,n,i),Mu(e),_e.checkMenu.call(this),!i)return;const r=t.map((s,a)=>({value:a,checked:this.captions.toggled&&this.currentTrack===a,title:mt.getLabel.call(this,s),badge:s.language&&_e.createBadge.call(this,s.language.toUpperCase()),list:e,type:"language"}));r.unshift({value:-1,checked:!this.captions.toggled,title:ci.get("disabled",this.config),list:e,type:"language"}),r.forEach(_e.createMenuItem.bind(this)),_e.updateSetting.call(this,n,e)},setSpeedMenu(){if(!N.element(this.elements.settings.panels.speed))return;const n="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(i=>i>=this.minimumSpeed&&i<=this.maximumSpeed);const t=!N.empty(this.options.speed)&&this.options.speed.length>1;_e.toggleMenuButton.call(this,n,t),Mu(e),_e.checkMenu.call(this),t&&(this.options.speed.forEach(i=>{_e.createMenuItem.call(this,{value:i,list:e,type:n,title:_e.getLabel.call(this,"speed",i)})}),_e.updateSetting.call(this,n,e))},checkMenu(){const{buttons:n}=this.elements.settings,e=!N.empty(n)&&Object.values(n).some(t=>!t.hidden);js(this.elements.settings.menu,!e)},focusFirstMenuItem(n,e=!1){if(this.elements.settings.popup.hidden)return;let t=n;N.element(t)||(t=Object.values(this.elements.settings.panels).find(r=>!r.hidden));const i=t.querySelector('[role^="menuitem"]');Wh.call(this,i,e)},toggleMenu(n){const{popup:e}=this.elements.settings,t=this.elements.buttons.settings;if(!N.element(e)||!N.element(t))return;const{hidden:i}=e;let r=i;if(N.boolean(n))r=n;else if(N.keyboardEvent(n)&&n.key==="Escape")r=!1;else if(N.event(n)){const s=N.function(n.composedPath)?n.composedPath()[0]:n.target,a=e.contains(s);if(a||!a&&n.target!==t&&r)return}t.setAttribute("aria-expanded",r),js(e,!r),vt(this.elements.container,this.config.classNames.menu.open,r),r&&N.keyboardEvent(n)?_e.focusFirstMenuItem.call(this,null,!0):r||i||Wh.call(this,t,N.keyboardEvent(n))},getMenuSize(n){const e=n.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),n.parentNode.appendChild(e);const t=e.scrollWidth,i=e.scrollHeight;return br(e),{width:t,height:i}},showMenuPanel(n="",e=!1){const t=this.elements.container.querySelector(`#plyr-settings-${this.id}-${n}`);if(!N.element(t))return;const i=t.parentNode,r=Array.from(i.children).find(s=>!s.hidden);if(Gt.transitions&&!Gt.reducedMotion){i.style.width=`${r.scrollWidth}px`,i.style.height=`${r.scrollHeight}px`;const s=_e.getMenuSize.call(this,t),a=o=>{o.target===i&&["width","height"].includes(o.propertyName)&&(i.style.width="",i.style.height="",Au.call(this,i,Hh,a))};ht.call(this,i,Hh,a),i.style.width=`${s.width}px`,i.style.height=`${s.height}px`}js(r,!0),js(t,!1),_e.focusFirstMenuItem.call(this,t,e)},setDownloadUrl(){const n=this.elements.buttons.download;N.element(n)&&n.setAttribute("href",this.download)},create(n){const{bindMenuItemShortcuts:e,createButton:t,createProgress:i,createRange:r,createTime:s,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=_e;this.elements.controls=null,N.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const c=Ge("div",Zn(this.config.selectors.controls.wrapper));this.elements.controls=c;const d={class:"plyr__controls__item"};return $h(N.array(this.config.controls)?this.config.controls:[]).forEach(h=>{if(h==="restart"&&c.appendChild(t.call(this,"restart",d)),h==="rewind"&&c.appendChild(t.call(this,"rewind",d)),h==="play"&&c.appendChild(t.call(this,"play",d)),h==="fast-forward"&&c.appendChild(t.call(this,"fast-forward",d)),h==="progress"){const f=Ge("div",{class:`${d.class} plyr__progress__container`}),u=Ge("div",Zn(this.config.selectors.progress));if(u.appendChild(r.call(this,"seek",{id:`plyr-seek-${n.id}`})),u.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const m=Ge("span",{class:this.config.classNames.tooltip},"00:00");u.appendChild(m),this.elements.display.seekTooltip=m}this.elements.progress=u,f.appendChild(this.elements.progress),c.appendChild(f)}if(h==="current-time"&&c.appendChild(s.call(this,"currentTime",d)),h==="duration"&&c.appendChild(s.call(this,"duration",d)),h==="mute"||h==="volume"){let{volume:f}=this.elements;if(N.element(f)&&c.contains(f)||(f=Ge("div",Ht({},d,{class:`${d.class} plyr__volume`.trim()})),this.elements.volume=f,c.appendChild(f)),h==="mute"&&f.appendChild(t.call(this,"mute")),h==="volume"&&!li.isIos&&!li.isIPadOS){const u={max:1,step:.05,value:this.config.volume};f.appendChild(r.call(this,"volume",Ht(u,{id:`plyr-volume-${n.id}`})))}}if(h==="captions"&&c.appendChild(t.call(this,"captions",d)),h==="settings"&&!N.empty(this.config.settings)){const f=Ge("div",Ht({},d,{class:`${d.class} plyr__menu`.trim(),hidden:""}));f.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${n.id}`,"aria-expanded":!1}));const u=Ge("div",{class:"plyr__menu__container",id:`plyr-settings-${n.id}`,hidden:""}),m=Ge("div"),p=Ge("div",{id:`plyr-settings-${n.id}-home`}),g=Ge("div",{role:"menu"});p.appendChild(g),m.appendChild(p),this.elements.settings.panels.home=p,this.config.settings.forEach(v=>{const y=Ge("button",Ht(Zn(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,y,v),ht.call(this,y,"click",()=>{l.call(this,v,!1)});const _=Ge("span",null,ci.get(v,this.config)),w=Ge("span",{class:this.config.classNames.menu.value});w.innerHTML=n[v],_.appendChild(w),y.appendChild(_),g.appendChild(y);const x=Ge("div",{id:`plyr-settings-${n.id}-${v}`,hidden:""}),S=Ge("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});S.appendChild(Ge("span",{"aria-hidden":!0},ci.get(v,this.config))),S.appendChild(Ge("span",{class:this.config.classNames.hidden},ci.get("menuBack",this.config))),ht.call(this,x,"keydown",T=>{T.key==="ArrowLeft"&&(T.preventDefault(),T.stopPropagation(),l.call(this,"home",!0))},!1),ht.call(this,S,"click",()=>{l.call(this,"home",!1)}),x.appendChild(S),x.appendChild(Ge("div",{role:"menu"})),m.appendChild(x),this.elements.settings.buttons[v]=y,this.elements.settings.panels[v]=x}),u.appendChild(m),f.appendChild(u),c.appendChild(f),this.elements.settings.popup=u,this.elements.settings.menu=f}if(h==="pip"&&Gt.pip&&c.appendChild(t.call(this,"pip",d)),h==="airplay"&&Gt.airplay&&c.appendChild(t.call(this,"airplay",d)),h==="download"){const f=Ht({},d,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:u}=this.config.urls;!N.url(u)&&this.isEmbed&&Ht(f,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(t.call(this,"download",f))}h==="fullscreen"&&c.appendChild(t.call(this,"fullscreen",d))}),this.isHTML5&&a.call(this,ts.getQualityOptions.call(this)),o.call(this),c},inject(){if(this.config.loadSprite){const r=_e.getIconUrl.call(this);r.cors&&Cy(r.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let n=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;N.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),N.element(this.config.controls)||N.string(this.config.controls)?n=this.config.controls:(n=_e.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:mt.getLabel.call(this)}),t=!1);let i;if(t&&N.string(this.config.controls)&&(n=(r=>{let s=r;return Object.entries(e).forEach(([a,o])=>{s=Tl(s,`{${a}}`,o)}),s})(n)),N.string(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),N.element(i)||(i=this.elements.container),i[N.element(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),N.element(this.elements.controls)||_e.findElements.call(this),!N.empty(this.elements.buttons)){const r=s=>{const a=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>Eu(s,a),set(o=!1){vt(s,a,o),s.setAttribute("aria-pressed",o?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{N.array(s)||N.nodeList(s)?Array.from(s).filter(Boolean).forEach(r):r(s)})}if(li.isEdge&&gy(i),this.config.tooltips.controls){const{classNames:r,selectors:s}=this.config,a=`${s.controls.wrapper} ${s.labels} .${r.hidden}`,o=Sl.call(this,a);Array.from(o).forEach(l=>{vt(l,this.config.classNames.hidden,!1),vt(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var n,e;if(!this.duration||this.elements.markers)return;const t=(n=this.config.markers)===null||n===void 0||(e=n.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(t==null||!t.length)return;const i=document.createDocumentFragment(),r=document.createDocumentFragment();let s=null;const a=`${this.config.classNames.tooltip}--visible`,o=l=>vt(s,a,l);t.forEach(l=>{const c=Ge("span",{class:this.config.classNames.marker},""),d=l.time/this.duration*100+"%";s&&(c.addEventListener("mouseenter",()=>{l.label||(s.style.left=d,s.innerHTML=l.label,o(!0))}),c.addEventListener("mouseleave",()=>{o(!1)})),c.addEventListener("click",()=>{this.currentTime=l.time}),c.style.left=d,r.appendChild(c)}),i.appendChild(r),this.config.tooltips.seek||(s=Ge("span",{class:this.config.classNames.tooltip},""),i.appendChild(s)),this.elements.markers={points:r,tip:s},this.elements.progress.appendChild(i)}};function Ry(n,e=!0){let t=n;if(e){const i=document.createElement("a");i.href=t,t=i.href}try{return new URL(t)}catch{return null}}function Ly(n){const e=new URLSearchParams;return N.object(n)&&Object.entries(n).forEach(([t,i])=>{e.set(t,i)}),e}const mt={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!Gt.textTracks)return void(N.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&_e.setCaptionsMenu.call(this));if(N.element(this.elements.captions)||(this.elements.captions=Ge("div",Zn(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),vR(this.elements.captions,this.elements.wrapper)),li.isIE&&window.URL){const i=this.media.querySelectorAll("track");Array.from(i).forEach(r=>{const s=r.getAttribute("src"),a=Ry(s);a!==null&&a.hostname!==window.location.href.hostname&&["http:","https:"].includes(a.protocol)&&Al(s,"blob").then(o=>{r.setAttribute("src",window.URL.createObjectURL(o))}).catch(()=>{br(r)})})}const n=$h((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(i=>i.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=n);let t=this.storage.get("captions");if(N.boolean(t)||({active:t}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:t,language:e,languages:n}),this.isHTML5){const i=this.config.captions.update?"addtrack removetrack":"removetrack";ht.call(this,this.media.textTracks,i,mt.update.bind(this))}setTimeout(mt.update.bind(this),0)},update(){const n=mt.getTracks.call(this,!0),{active:e,language:t,meta:i,currentTrackNode:r}=this.captions,s=!!n.find(a=>a.language===t);this.isHTML5&&this.isVideo&&n.filter(a=>!i.get(a)).forEach(a=>{this.debug.log("Track added",a),i.set(a,{default:a.mode==="showing"}),a.mode==="showing"&&(a.mode="hidden"),ht.call(this,a,"cuechange",()=>mt.updateCues.call(this))}),(s&&this.language!==t||!n.includes(r))&&(mt.setLanguage.call(this,t),mt.toggle.call(this,e&&s)),this.elements&&vt(this.elements.container,this.config.classNames.captions.enabled,!N.empty(n)),N.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&_e.setCaptionsMenu.call(this)},toggle(n,e=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,i=this.config.classNames.captions.active,r=N.nullOrUndefined(n)?!t:n;if(r!==t){if(e||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!e){const s=mt.getTracks.call(this),a=mt.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=a.language,void mt.set.call(this,s.indexOf(a))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),vt(this.elements.container,i,r),this.captions.toggled=r,_e.updateSetting.call(this,"captions"),We.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout(()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(n,e=!0){const t=mt.getTracks.call(this);if(n!==-1)if(N.number(n))if(n in t){if(this.captions.currentTrack!==n){this.captions.currentTrack=n;const i=t[n],{language:r}=i||{};this.captions.currentTrackNode=i,_e.updateSetting.call(this,"captions"),e||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),We.call(this,this.media,"languagechange")}mt.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&mt.updateCues.call(this)}else this.debug.warn("Track not found",n);else this.debug.warn("Invalid caption argument",n);else mt.toggle.call(this,!1,e)},setLanguage(n,e=!0){if(!N.string(n))return void this.debug.warn("Invalid language argument",n);const t=n.toLowerCase();this.captions.language=t;const i=mt.getTracks.call(this),r=mt.findTrack.call(this,[t]);mt.set.call(this,i.indexOf(r),e)},getTracks(n=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||n||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(n,e=!1){const t=mt.getTracks.call(this),i=a=>Number((this.captions.meta.get(a)||{}).default),r=Array.from(t).sort((a,o)=>i(o)-i(a));let s;return n.every(a=>(s=r.find(o=>o.language===a),!s)),s||(e?r[0]:void 0)},getCurrentTrack(){return mt.getTracks.call(this)[this.currentTrack]},getLabel(n){let e=n;return!N.track(e)&&Gt.textTracks&&this.captions.toggled&&(e=mt.getCurrentTrack.call(this)),N.track(e)?N.empty(e.label)?N.empty(e.language)?ci.get("enabled",this.config):n.language.toUpperCase():e.label:ci.get("disabled",this.config)},updateCues(n){if(!this.supported.ui)return;if(!N.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!N.nullOrUndefined(n)&&!Array.isArray(n))return void this.debug.warn("updateCues: Invalid input",n);let e=n;if(!e){const i=mt.getCurrentTrack.call(this);e=Array.from((i||{}).activeCues||[]).map(r=>r.getCueAsHTML()).map(CR)}const t=e.map(i=>i.trim()).join(`
`);if(t!==this.elements.captions.innerHTML){Mu(this.elements.captions);const i=Ge("span",Zn(this.config.selectors.caption));i.innerHTML=t,this.elements.captions.appendChild(i),We.call(this,this.media,"cuechange")}}},Dy={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},jh={active:"picture-in-picture",inactive:"inline"},is={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Kh={audio:"audio",video:"video"};function LR(n){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(n)?is.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(n)?is.vimeo:null}const Zh=()=>{};class DR{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Zh}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Zh}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Zh}}class Dn{constructor(e){Se(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;N.element(t)&&(t.pressed=this.active);const i=this.target===this.player.media?this.target:this.player.elements.container;We.call(this.player,i,this.active?"enterfullscreen":"exitfullscreen",!0)}),Se(this,"toggleFallback",(t=!1)=>{if(t?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",vt(this.target,this.player.config.classNames.fullscreen.fallback,t),li.isIos){let i=document.head.querySelector('meta[name="viewport"]');const r="viewport-fit=cover";i||(i=document.createElement("meta"),i.setAttribute("name","viewport"));const s=N.string(i.content)&&i.content.includes(r);t?(this.cleanupViewport=!s,s||(i.content+=`,${r}`)):this.cleanupViewport&&(i.content=i.content.split(",").filter(a=>a.trim()!==r).join(","))}this.onChange()}),Se(this,"trapFocus",t=>{if(li.isIos||li.isIPadOS||!this.active||t.key!=="Tab")return;const i=document.activeElement,r=Sl.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=r,a=r[r.length-1];i!==a||t.shiftKey?i===s&&t.shiftKey&&(a.focus(),t.preventDefault()):(s.focus(),t.preventDefault())}),Se(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":Dn.nativeSupported?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");vt(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Se(this,"enter",()=>{this.supported&&(li.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Dn.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?N.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),Se(this,"exit",()=>{if(this.supported)if(li.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),Qn(this.player.play());else if(!Dn.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!N.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Se(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=Dn.prefix,this.property=Dn.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&_R(this.player.elements.container,e.config.fullscreen.container),ht.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),ht.call(this.player,this.player.elements.container,"dblclick",t=>{N.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),ht.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Dn.nativeSupported&&!this.forceFallback}static get prefix(){if(N.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!N.function(document[`${t}ExitFullscreen`])&&!N.function(document[`${t}CancelFullScreen`]))&&(e=t,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Dn.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Dn.nativeSupported||!li.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Dn.nativeSupported||this.forceFallback)return Eu(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return li.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Ru(n,e=1){return new Promise((t,i)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=e?t:i)(r)};Object.assign(r,{onload:s,onerror:s,src:n})})}const wt={addStyleHook(){vt(this.elements.container,this.config.selectors.container.replace(".",""),!0),vt(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(n=!1){n&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void wt.toggleNativeControls.call(this,!0);N.element(this.elements.controls)||(_e.inject.call(this),this.listeners.controls()),wt.toggleNativeControls.call(this),this.isHTML5&&mt.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,_e.updateVolume.call(this),_e.timeUpdate.call(this),_e.durationUpdate.call(this),wt.checkPlaying.call(this),vt(this.elements.container,this.config.classNames.pip.supported,Gt.pip&&this.isHTML5&&this.isVideo),vt(this.elements.container,this.config.classNames.airplay.supported,Gt.airplay&&this.isHTML5),vt(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{We.call(this,this.media,"ready")},0),wt.setTitle.call(this),this.poster&&wt.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&_e.durationUpdate.call(this),this.config.mediaMetadata&&_e.setMediaMetadata.call(this)},setTitle(){let n=ci.get("play",this.config);if(N.string(this.config.title)&&!N.empty(this.config.title)&&(n+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",n)}),this.isEmbed){const e=Jt.call(this,"iframe");if(!N.element(e))return;const t=N.empty(this.config.title)?"video":this.config.title,i=ci.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",t))}},togglePoster(n){vt(this.elements.container,this.config.classNames.posterEnabled,n)},setPoster(n,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",n),this.elements.poster.removeAttribute("hidden"),bR.call(this).then(()=>Ru(n)).catch(t=>{throw n===this.poster&&wt.togglePoster.call(this,!1),t}).then(()=>{if(n!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${n}')`,backgroundSize:""}),wt.togglePoster.call(this,!0),n)))},checkPlaying(n){vt(this.elements.container,this.config.classNames.playing,this.playing),vt(this.elements.container,this.config.classNames.paused,this.paused),vt(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",ci.get(this.playing?"pause":"play",this.config))}),N.event(n)&&n.type==="timeupdate"||wt.toggleControls.call(this)},checkLoading(n){this.loading=["stalled","waiting"].includes(n.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{vt(this.elements.container,this.config.classNames.loading,this.loading),wt.toggleControls.call(this)},this.loading?250:0)},toggleControls(n){const{controls:e}=this.elements;if(e&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(n||this.loading||this.paused||e.pressed||e.hover||t))}},migrateStyles(){Object.values({...this.media.style}).filter(n=>!N.empty(n)&&N.string(n)&&n.startsWith("--plyr")).forEach(n=>{this.elements.container.style.setProperty(n,this.media.style.getPropertyValue(n)),this.media.style.removeProperty(n)}),N.empty(this.media.style)&&this.media.removeAttribute("style")}};class IR{constructor(e){Se(this,"firstTouch",()=>{const{player:t}=this,{elements:i}=t;t.touch=!0,vt(i.container,t.config.classNames.isTouch,!0)}),Se(this,"global",(t=!0)=>{const{player:i}=this;i.config.keyboard.global&&Ml.call(i,window,"keydown keyup",this.handleKey,t,!1),Ml.call(i,document.body,"click",this.toggleMenu,t),Xh.call(i,document.body,"touchstart",this.firstTouch)}),Se(this,"container",()=>{const{player:t}=this,{config:i,elements:r,timers:s}=t;!i.keyboard.global&&i.keyboard.focused&&ht.call(t,r.container,"keydown keyup",this.handleKey,!1),ht.call(t,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:c}=r;c&&l.type==="enterfullscreen"&&(c.pressed=!1,c.hover=!1);let d=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(wt.toggleControls.call(t,!0),d=t.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>wt.toggleControls.call(t,!1),d)});const a=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const l=r.wrapper,{active:c}=t.fullscreen,[d,h]=qh.call(t),f=wy(`aspect-ratio: ${d} / ${h}`);if(!c)return void(f?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[u,m]=wR(),p=u/m>d/h;f?(l.style.width=p?"auto":"100%",l.style.height=p?"100%":"auto"):(l.style.maxWidth=p?m/h*d+"px":null,l.style.margin=p?"0 auto":null)},o=()=>{clearTimeout(s.resized),s.resized=setTimeout(a,50)};ht.call(t,r.container,"enterfullscreen exitfullscreen",l=>{const{target:c}=t.fullscreen;c===r.container&&(!t.isEmbed&&N.empty(t.config.ratio)||(a(),(l.type==="enterfullscreen"?ht:Au).call(t,window,"resize",o)))})}),Se(this,"media",()=>{const{player:t}=this,{elements:i}=t;if(ht.call(t,t.media,"timeupdate seeking seeked",s=>_e.timeUpdate.call(t,s)),ht.call(t,t.media,"durationchange loadeddata loadedmetadata",s=>_e.durationUpdate.call(t,s)),ht.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),ht.call(t,t.media,"progress playing seeking seeked",s=>_e.updateProgress.call(t,s)),ht.call(t,t.media,"volumechange",s=>_e.updateVolume.call(t,s)),ht.call(t,t.media,"playing play pause ended emptied timeupdate",s=>wt.checkPlaying.call(t,s)),ht.call(t,t.media,"waiting canplay seeked playing",s=>wt.checkLoading.call(t,s)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const s=Jt.call(t,`.${t.config.classNames.video}`);if(!N.element(s))return;ht.call(t,i.container,"click",a=>{([i.container,s].includes(a.target)||s.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(a,t.restart,"restart"),this.proxy(a,()=>{Qn(t.play())},"play")):this.proxy(a,()=>{Qn(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&ht.call(t,i.wrapper,"contextmenu",s=>{s.preventDefault()},!1),ht.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),ht.call(t,t.media,"ratechange",()=>{_e.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),ht.call(t,t.media,"qualitychange",s=>{_e.updateSetting.call(t,"quality",null,s.detail.quality)}),ht.call(t,t.media,"ready qualitychange",()=>{_e.setDownloadUrl.call(t)});const r=t.config.events.concat(["keyup","keydown"]).join(" ");ht.call(t,t.media,r,s=>{let{detail:a={}}=s;s.type==="error"&&(a=t.media.error),We.call(t,i.container,s.type,!0,a)})}),Se(this,"proxy",(t,i,r)=>{const{player:s}=this,a=s.config.listeners[r];let o=!0;N.function(a)&&(o=a.call(s,t)),o!==!1&&N.function(i)&&i.call(s,t)}),Se(this,"bind",(t,i,r,s,a=!0)=>{const{player:o}=this,l=o.config.listeners[s],c=N.function(l);ht.call(o,t,i,d=>this.proxy(d,r,s),a&&!c)}),Se(this,"controls",()=>{const{player:t}=this,{elements:i}=t,r=li.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach(s=>{this.bind(s,"click",()=>{Qn(t.togglePlay())},"play")}),this.bind(i.buttons.restart,"click",t.restart,"restart"),this.bind(i.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(i.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(i.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(i.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(i.buttons.download,"click",()=>{We.call(t,t.media,"download")},"download"),this.bind(i.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(i.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(i.buttons.airplay,"click",t.airplay,"airplay"),this.bind(i.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),_e.toggleMenu.call(t,s)},null,!1),this.bind(i.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),_e.toggleMenu.call(t,s)):_e.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(i.settings.menu,"keydown",s=>{s.key==="Escape"&&_e.toggleMenu.call(t,s)}),this.bind(i.inputs.seek,"mousedown mousemove",s=>{const a=i.progress.getBoundingClientRect(),o=100/a.width*(s.pageX-a.left);s.currentTarget.setAttribute("seek-value",o)}),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const a=s.currentTarget,o="play-on-seeked";if(N.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;t.lastSeekTime=Date.now();const l=a.hasAttribute(o),c=["mouseup","touchend","keyup"].includes(s.type);l&&c?(a.removeAttribute(o),Qn(t.play())):!c&&t.playing&&(a.setAttribute(o,""),t.pause())}),li.isIos){const s=Sl.call(t,'input[type="range"]');Array.from(s).forEach(a=>this.bind(a,r,o=>gy(o.target)))}this.bind(i.inputs.seek,r,s=>{const a=s.currentTarget;let o=a.getAttribute("seek-value");N.empty(o)&&(o=a.value),a.removeAttribute("seek-value"),t.currentTime=o/a.max*t.duration},"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",s=>_e.updateSeekTooltip.call(t,s)),this.bind(i.progress,"mousemove touchmove",s=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.startMove(s)}),this.bind(i.progress,"mouseleave touchend click",()=>{const{previewThumbnails:s}=t;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(i.progress,"mousedown touchstart",s=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.startScrubbing(s)}),this.bind(i.progress,"mouseup touchend",s=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.endScrubbing(s)}),li.isWebKit&&Array.from(Sl.call(t,'input[type="range"]')).forEach(s=>{this.bind(s,"input",a=>_e.updateRangeFill.call(t,a.target))}),t.config.toggleInvert&&!N.element(i.display.duration)&&this.bind(i.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,_e.timeUpdate.call(t))}),this.bind(i.inputs.volume,r,s=>{t.volume=s.target.value},"volume"),this.bind(i.controls,"mouseenter mouseleave",s=>{i.controls.hover=!t.touch&&s.type==="mouseenter"}),i.fullscreen&&Array.from(i.fullscreen.children).filter(s=>!s.contains(i.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",a=>{i.controls&&(i.controls.hover=!t.touch&&a.type==="mouseenter")})}),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{i.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(i.controls,"focusin",()=>{const{config:s,timers:a}=t;vt(i.controls,s.classNames.noTransition,!0),wt.toggleControls.call(t,!0),setTimeout(()=>{vt(i.controls,s.classNames.noTransition,!1)},0);const o=this.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout(()=>wt.toggleControls.call(t,!1),o)}),this.bind(i.inputs.volume,"wheel",s=>{const a=s.webkitDirectionInvertedFromDevice,[o,l]=[s.deltaX,-s.deltaY].map(h=>a?-h:h),c=Math.sign(Math.abs(o)>Math.abs(l)?o:l);t.increaseVolume(c/50);const{volume:d}=t.media;(c===1&&d<1||c===-1&&d>0)&&s.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:i}=t,{key:r,type:s,altKey:a,ctrlKey:o,metaKey:l,shiftKey:c}=e,d=s==="keydown",h=d&&r===this.lastKey;if(!(a||o||l||c)&&r){if(d){const u=document.activeElement;if(N.element(u)){const{editable:m}=t.config.selectors,{seek:p}=i.inputs;if(u!==p&&Ks(u,m)||e.key===" "&&Ks(u,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(r)&&(e.preventDefault(),e.stopPropagation()),r){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":h||(f=parseInt(r,10),t.currentTime=t.duration/10*f);break;case" ":case"k":h||Qn(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":h||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":h||t.toggleCaptions();break;case"l":t.loop=!t.loop}r==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=r}else this.lastKey=null;var f}}toggleMenu(e){_e.toggleMenu.call(this.player,e)}}function OR(n,e){return n(e={exports:{}},e.exports),e.exports}var NR=OR(function(n,e){n.exports=function(){var t=function(){},i={},r={},s={};function a(f,u){f=f.push?f:[f];var m,p,g,v=[],y=f.length,_=y;for(m=function(w,x){x.length&&v.push(w),--_||u(v)};y--;)p=f[y],(g=r[p])?m(p,g):(s[p]=s[p]||[]).push(m)}function o(f,u){if(f){var m=s[f];if(r[f]=u,m)for(;m.length;)m[0](f,u),m.splice(0,1)}}function l(f,u){f.call&&(f={success:f}),u.length?(f.error||t)(u):(f.success||t)(f)}function c(f,u,m,p){var g,v,y=document,_=m.async,w=(m.numRetries||0)+1,x=m.before||t,S=f.replace(/[\?|#].*$/,""),T=f.replace(/^(css|img)!/,"");p=p||0,/(^css!|\.css$)/.test(S)?((v=y.createElement("link")).rel="stylesheet",v.href=T,(g="hideFocus"in v)&&v.relList&&(g=0,v.rel="preload",v.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(S)?(v=y.createElement("img")).src=T:((v=y.createElement("script")).src=f,v.async=_===void 0||_),v.onload=v.onerror=v.onbeforeload=function(E){var M=E.type[0];if(g)try{v.sheet.cssText.length||(M="e")}catch(b){b.code!=18&&(M="e")}if(M=="e"){if((p+=1)<w)return c(f,u,m,p)}else if(v.rel=="preload"&&v.as=="style")return v.rel="stylesheet";u(f,M,E.defaultPrevented)},x(f,v)!==!1&&y.head.appendChild(v)}function d(f,u,m){var p,g,v=(f=f.push?f:[f]).length,y=v,_=[];for(p=function(w,x,S){if(x=="e"&&_.push(w),x=="b"){if(!S)return;_.push(w)}--v||u(_)},g=0;g<y;g++)c(f[g],p,m)}function h(f,u,m){var p,g;if(u&&u.trim&&(p=u),g=(p?m:u)||{},p){if(p in i)throw"LoadJS";i[p]=!0}function v(y,_){d(f,function(w){l(g,w),y&&l({success:y,error:_},w),o(p,w)},g)}if(g.returnPromise)return new Promise(v);v()}return h.ready=function(f,u){return a(f,function(m){l(u,m)}),h},h.done=function(f){o(f,[])},h.reset=function(){i={},r={},s={}},h.isDefined=function(f){return f in i},h}()});function Qh(n){return new Promise((e,t)=>{NR(n,{success:e,error:t})})}function UR(n){return N.empty(n)?null:N.number(Number(n))?n:n.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:n}function kR(n){const e=n.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function Cl(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,We.call(this,this.media,n?"play":"pause"))}const Jh={setup(){const n=this;vt(n.elements.wrapper,n.config.classNames.embed,!0),n.options.speed=n.config.speed.options,ro.call(n),N.object(window.Vimeo)?Jh.ready.call(n):Qh(n.config.urls.vimeo.sdk).then(()=>{Jh.ready.call(n)}).catch(e=>{n.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const n=this,e=n.config.vimeo,{premium:t,referrerPolicy:i,...r}=e;let s=n.media.getAttribute("src"),a="";N.empty(s)?(s=n.media.getAttribute(n.config.attributes.embed.id),a=n.media.getAttribute(n.config.attributes.embed.hash)):a=kR(s);const o=a?{h:a}:{};t&&Object.assign(r,{controls:!1,sidedock:!1});const l=Ly({loop:n.config.loop.active,autoplay:n.autoplay,muted:n.muted,gesture:"media",playsinline:n.config.playsinline,...o,...r}),c=UR(s),d=Ge("iframe"),h=Yh(n.config.urls.vimeo.iframe,c,l);if(d.setAttribute("src",h),d.setAttribute("allowfullscreen",""),d.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),N.empty(i)||d.setAttribute("referrerPolicy",i),t||!e.customControls)d.setAttribute("data-poster",n.poster),n.media=Tu(d,n.media);else{const y=Ge("div",{class:n.config.classNames.embedContainer,"data-poster":n.poster});y.appendChild(d),n.media=Tu(y,n.media)}e.customControls||Al(Yh(n.config.urls.vimeo.api,h)).then(y=>{!N.empty(y)&&y.thumbnail_url&&wt.setPoster.call(n,y.thumbnail_url).catch(()=>{})}),n.embed=new window.Vimeo.Player(d,{autopause:n.config.autopause,muted:n.muted}),n.media.paused=!0,n.media.currentTime=0,n.supported.ui&&n.embed.disableTextTrack(),n.media.play=()=>(Cl.call(n,!0),n.embed.play()),n.media.pause=()=>(Cl.call(n,!1),n.embed.pause()),n.media.stop=()=>{n.pause(),n.currentTime=0};let{currentTime:f}=n.media;Object.defineProperty(n.media,"currentTime",{get:()=>f,set(y){const{embed:_,media:w,paused:x,volume:S}=n,T=x&&!_.hasPlayed;w.seeking=!0,We.call(n,w,"seeking"),Promise.resolve(T&&_.setVolume(0)).then(()=>_.setCurrentTime(y)).then(()=>T&&_.pause()).then(()=>T&&_.setVolume(S)).catch(()=>{})}});let u=n.config.speed.selected;Object.defineProperty(n.media,"playbackRate",{get:()=>u,set(y){n.embed.setPlaybackRate(y).then(()=>{u=y,We.call(n,n.media,"ratechange")}).catch(()=>{n.options.speed=[1]})}});let{volume:m}=n.config;Object.defineProperty(n.media,"volume",{get:()=>m,set(y){n.embed.setVolume(y).then(()=>{m=y,We.call(n,n.media,"volumechange")})}});let{muted:p}=n.config;Object.defineProperty(n.media,"muted",{get:()=>p,set(y){const _=!!N.boolean(y)&&y;n.embed.setMuted(!!_||n.config.muted).then(()=>{p=_,We.call(n,n.media,"volumechange")})}});let g,{loop:v}=n.config;Object.defineProperty(n.media,"loop",{get:()=>v,set(y){const _=N.boolean(y)?y:n.config.loop.active;n.embed.setLoop(_).then(()=>{v=_})}}),n.embed.getVideoUrl().then(y=>{g=y,_e.setDownloadUrl.call(n)}).catch(y=>{this.debug.warn(y)}),Object.defineProperty(n.media,"currentSrc",{get:()=>g}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration}),Promise.all([n.embed.getVideoWidth(),n.embed.getVideoHeight()]).then(y=>{const[_,w]=y;n.embed.ratio=Ty(_,w),ro.call(this)}),n.embed.setAutopause(n.config.autopause).then(y=>{n.config.autopause=y}),n.embed.getVideoTitle().then(y=>{n.config.title=y,wt.setTitle.call(this)}),n.embed.getCurrentTime().then(y=>{f=y,We.call(n,n.media,"timeupdate")}),n.embed.getDuration().then(y=>{n.media.duration=y,We.call(n,n.media,"durationchange")}),n.embed.getTextTracks().then(y=>{n.media.textTracks=y,mt.setup.call(n)}),n.embed.on("cuechange",({cues:y=[]})=>{const _=y.map(w=>AR(w.text));mt.updateCues.call(n,_)}),n.embed.on("loaded",()=>{n.embed.getPaused().then(y=>{Cl.call(n,!y),y||We.call(n,n.media,"playing")}),N.element(n.embed.element)&&n.supported.ui&&n.embed.element.setAttribute("tabindex",-1)}),n.embed.on("bufferstart",()=>{We.call(n,n.media,"waiting")}),n.embed.on("bufferend",()=>{We.call(n,n.media,"playing")}),n.embed.on("play",()=>{Cl.call(n,!0),We.call(n,n.media,"playing")}),n.embed.on("pause",()=>{Cl.call(n,!1)}),n.embed.on("timeupdate",y=>{n.media.seeking=!1,f=y.seconds,We.call(n,n.media,"timeupdate")}),n.embed.on("progress",y=>{n.media.buffered=y.percent,We.call(n,n.media,"progress"),parseInt(y.percent,10)===1&&We.call(n,n.media,"canplaythrough"),n.embed.getDuration().then(_=>{_!==n.media.duration&&(n.media.duration=_,We.call(n,n.media,"durationchange"))})}),n.embed.on("seeked",()=>{n.media.seeking=!1,We.call(n,n.media,"seeked")}),n.embed.on("ended",()=>{n.media.paused=!0,We.call(n,n.media,"ended")}),n.embed.on("error",y=>{n.media.error=y,We.call(n,n.media,"error")}),e.customControls&&setTimeout(()=>wt.build.call(n),0)}};function FR(n){return N.empty(n)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n}function Pl(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,We.call(this,this.media,n?"play":"pause"))}function BR(n){return n.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const Lu={setup(){if(vt(this.elements.wrapper,this.config.classNames.embed,!0),N.object(window.YT)&&N.function(window.YT.Player))Lu.ready.call(this);else{const n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{N.function(n)&&n(),Lu.ready.call(this)},Qh(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(n){Al(Yh(this.config.urls.youtube.api,n)).then(e=>{if(N.object(e)){const{title:t,height:i,width:r}=e;this.config.title=t,wt.setTitle.call(this),this.embed.ratio=Ty(r,i)}ro.call(this)}).catch(()=>{ro.call(this)})},ready(){const n=this,e=n.config.youtube,t=n.media&&n.media.getAttribute("id");if(!N.empty(t)&&t.startsWith("youtube-"))return;let i=n.media.getAttribute("src");N.empty(i)&&(i=n.media.getAttribute(this.config.attributes.embed.id));const r=FR(i),s=Ge("div",{id:SR(n.provider),"data-poster":e.customControls?n.poster:void 0});if(n.media=Tu(s,n.media),e.customControls){const a=o=>`https://i.ytimg.com/vi/${r}/${o}default.jpg`;Ru(a("maxres"),121).catch(()=>Ru(a("sd"),121)).catch(()=>Ru(a("hq"))).then(o=>wt.setPoster.call(n,o.src)).then(o=>{o.includes("maxres")||(n.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}n.embed=new window.YT.Player(n.media,{videoId:r,host:BR(e),playerVars:Ht({},{autoplay:n.config.autoplay?1:0,hl:n.config.hl,controls:n.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:n.config.playsinline&&!n.config.fullscreen.iosNative?1:0,cc_load_policy:n.captions.active?1:0,cc_lang_pref:n.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(a){if(!n.media.error){const o=a.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[o]||"An unknown error occurred";n.media.error={code:o,message:l},We.call(n,n.media,"error")}},onPlaybackRateChange(a){const o=a.target;n.media.playbackRate=o.getPlaybackRate(),We.call(n,n.media,"ratechange")},onReady(a){if(N.function(n.media.play))return;const o=a.target;Lu.getTitle.call(n,r),n.media.play=()=>{Pl.call(n,!0),o.playVideo()},n.media.pause=()=>{Pl.call(n,!1),o.pauseVideo()},n.media.stop=()=>{o.stopVideo()},n.media.duration=o.getDuration(),n.media.paused=!0,n.media.currentTime=0,Object.defineProperty(n.media,"currentTime",{get:()=>Number(o.getCurrentTime()),set(h){n.paused&&!n.embed.hasPlayed&&n.embed.mute(),n.media.seeking=!0,We.call(n,n.media,"seeking"),o.seekTo(h)}}),Object.defineProperty(n.media,"playbackRate",{get:()=>o.getPlaybackRate(),set(h){o.setPlaybackRate(h)}});let{volume:l}=n.config;Object.defineProperty(n.media,"volume",{get:()=>l,set(h){l=h,o.setVolume(100*l),We.call(n,n.media,"volumechange")}});let{muted:c}=n.config;Object.defineProperty(n.media,"muted",{get:()=>c,set(h){const f=N.boolean(h)?h:c;c=f,o[f?"mute":"unMute"](),o.setVolume(100*l),We.call(n,n.media,"volumechange")}}),Object.defineProperty(n.media,"currentSrc",{get:()=>o.getVideoUrl()}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration});const d=o.getAvailablePlaybackRates();n.options.speed=d.filter(h=>n.config.speed.options.includes(h)),n.supported.ui&&e.customControls&&n.media.setAttribute("tabindex",-1),We.call(n,n.media,"timeupdate"),We.call(n,n.media,"durationchange"),clearInterval(n.timers.buffering),n.timers.buffering=setInterval(()=>{n.media.buffered=o.getVideoLoadedFraction(),(n.media.lastBuffered===null||n.media.lastBuffered<n.media.buffered)&&We.call(n,n.media,"progress"),n.media.lastBuffered=n.media.buffered,n.media.buffered===1&&(clearInterval(n.timers.buffering),We.call(n,n.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>wt.build.call(n),50)},onStateChange(a){const o=a.target;switch(clearInterval(n.timers.playing),n.media.seeking&&[1,2].includes(a.data)&&(n.media.seeking=!1,We.call(n,n.media,"seeked")),a.data){case-1:We.call(n,n.media,"timeupdate"),n.media.buffered=o.getVideoLoadedFraction(),We.call(n,n.media,"progress");break;case 0:Pl.call(n,!1),n.media.loop?(o.stopVideo(),o.playVideo()):We.call(n,n.media,"ended");break;case 1:e.customControls&&!n.config.autoplay&&n.media.paused&&!n.embed.hasPlayed?n.media.pause():(Pl.call(n,!0),We.call(n,n.media,"playing"),n.timers.playing=setInterval(()=>{We.call(n,n.media,"timeupdate")},50),n.media.duration!==o.getDuration()&&(n.media.duration=o.getDuration(),We.call(n,n.media,"durationchange")));break;case 2:n.muted||n.embed.unMute(),Pl.call(n,!1);break;case 3:We.call(n,n.media,"waiting")}We.call(n,n.elements.container,"statechange",!1,{code:a.data})}}})}},Iy={setup(){this.media?(vt(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),vt(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&vt(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Ge("div",{class:this.config.classNames.video}),_y(this.media,this.elements.wrapper),this.elements.poster=Ge("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?ts.setup.call(this):this.isYouTube?Lu.setup.call(this):this.isVimeo&&Jh.setup.call(this)):this.debug.warn("No media element found!")}};class zR{constructor(e){Se(this,"load",()=>{this.enabled&&(N.object(window.google)&&N.object(window.google.ima)?this.ready():Qh(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Se(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Se(this,"setupIMA",()=>{this.elements.container=Ge("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),Se(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=t.offsetWidth,i.linearAdSlotHeight=t.offsetHeight,i.nonLinearAdSlotWidth=t.offsetWidth,i.nonLinearAdSlotHeight=t.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(i){this.onAdError(i)}}),Se(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const i=Pu(Math.max(this.manager.getRemainingTime(),0)),r=`${ci.get("advertisement",this.player.config)} - ${i}`;this.elements.container.setAttribute("data-badge-text",r)},100)}),Se(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=t.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r=>this.onAdError(r)),Object.keys(google.ima.AdEvent.Type).forEach(r=>{this.manager.addEventListener(google.ima.AdEvent.Type[r],s=>this.onAdEvent(s))}),this.trigger("loaded")}),Se(this,"addCuePoints",()=>{N.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const i=this.player.elements.progress;if(N.element(i)){const r=100/this.player.duration*t,s=Ge("span",{class:this.player.config.classNames.cues});s.style.left=`${r.toString()}%`,i.appendChild(s)}}})}),Se(this,"onAdEvent",t=>{const{container:i}=this.player.elements,r=t.getAd(),s=t.getAdData();switch((a=>{We.call(this.player,this.player.media,`ads${a.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=i.offsetWidth,r.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),Se(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),Se(this,"listeners",()=>{const{container:t}=this.player.elements;let i;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{i=this.player.currentTime}),this.player.on("seeked",()=>{const r=this.player.currentTime;N.empty(this.cuePoints)||this.cuePoints.forEach((s,a)=>{i<s&&s<r&&(this.manager.discardAdBreak(),this.cuePoints.splice(a,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),Se(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(i){this.onAdError(i)}}).catch(()=>{})}),Se(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,Qn(this.player.media.play())}),Se(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Se(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Se(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Se(this,"trigger",(t,...i)=>{const r=this.events[t];N.array(r)&&r.forEach(s=>{N.function(s)&&s.apply(this,i)})}),Se(this,"on",(t,i)=>(N.array(this.events[t])||(this.events[t]=[]),this.events[t].push(i),this)),Se(this,"startSafetyTimer",(t,i)=>{this.player.debug.log(`Safety timer invoked from: ${i}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),Se(this,"clearSafetyTimer",t=>{N.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,i)=>{this.on("loaded",t),this.on("error",i)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!N.empty(e.publisherId)||N.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return N.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${Ly({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function Oy(n=0,e=0,t=255){return Math.min(Math.max(n,e),t)}const VR=n=>{const e=[];return n.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const i={};t.split(/\r\n|\n|\r/).forEach(r=>{if(N.number(i.startTime)){if(!N.empty(r.trim())&&N.empty(i.text)){const s=r.trim().split("#xywh=");[i.text]=s,s[1]&&([i.x,i.y,i.w,i.h]=s[1].split(","))}}else{const s=r.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(i.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,i.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),i.text&&e.push(i)}),e},Ny=(n,e)=>{const t={};return n>e.width/e.height?(t.width=e.width,t.height=1/n*e.width):(t.height=e.height,t.width=n*e.height),t};class ep{constructor(e){Se(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Se(this,"getThumbnails",()=>new Promise(t=>{const{src:i}=this.player.config.previewThumbnails;if(N.empty(i))throw new Error("Missing previewThumbnails.src config attribute");const r=()=>{this.thumbnails.sort((s,a)=>s.height-a.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(N.function(i))i(s=>{this.thumbnails=s,r()});else{const s=(N.string(i)?[i]:i).map(a=>this.getThumbnail(a));Promise.all(s).then(r)}})),Se(this,"getThumbnail",t=>new Promise(i=>{Al(t).then(r=>{const s={frames:VR(r),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const a=new Image;a.onload=()=>{s.height=a.naturalHeight,s.width=a.naturalWidth,this.thumbnails.push(s),i()},a.src=s.urlPrefix+s.frames[0].text})})),Se(this,"startMove",t=>{if(this.loaded&&N.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var i,r;const s=this.player.elements.progress.getBoundingClientRect(),a=100/s.width*(t.pageX-s.left);this.seekTime=this.player.media.duration*(a/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=Pu(this.seekTime);const o=(i=this.player.config.markers)===null||i===void 0||(r=i.points)===null||r===void 0?void 0:r.find(({time:l})=>l===Math.round(this.seekTime));o&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${o.label}<br>`)}this.showImageAtCurrentTime()}}),Se(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Se(this,"startScrubbing",t=>{(N.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Se(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Xh.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Se(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Se(this,"render",()=>{this.elements.thumb.container=Ge("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=Ge("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=Ge("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=Ge("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),N.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=Ge("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Se(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Se(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),i=t>=0;let r=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((s,a)=>{this.loadedImages.includes(s.frames[t].text)&&(r=a)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(r)))}),Se(this,"loadImage",(t=0)=>{const i=this.showingThumb,r=this.thumbnails[t],{urlPrefix:s}=r,a=r.frames[i],o=r.frames[i].text,l=s+o;if(this.currentImageElement&&this.currentImageElement.dataset.filename===o)this.showImage(this.currentImageElement,a,t,i,o,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const c=new Image;c.src=l,c.dataset.index=i,c.dataset.filename=o,this.showingThumbFilename=o,this.player.debug.log(`Loading image: ${l}`),c.onload=()=>this.showImage(c,a,t,i,o,!0),this.loadingImage=c,this.removeOldImages(c)}}),Se(this,"showImage",(t,i,r,s,a,o=!0)=>{this.player.debug.log(`Showing thumb: ${a}. num: ${s}. qual: ${r}. newimg: ${o}`),this.setImageSizeAndOffset(t,i),o&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(r,t,i,a))}),Se(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(i=>{if(i.tagName.toLowerCase()!=="img")return;const r=this.usingSprites?500:1e3;if(i.dataset.index!==t.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(i),this.player.debug.log(`Removing thumb: ${i.dataset.filename}`)},r)}})}),Se(this,"preloadNearby",(t,i=!0)=>new Promise(r=>{setTimeout(()=>{const s=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===s){let a;a=i?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let o=!1;a.forEach(l=>{const c=l.text;if(c!==s&&!this.loadedImages.includes(c)){o=!0,this.player.debug.log(`Preloading thumb filename: ${c}`);const{urlPrefix:d}=this.thumbnails[0],h=d+c,f=new Image;f.src=h,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${c}`),this.loadedImages.includes(c)||this.loadedImages.push(c),r()}}}),o||r()}},300)})),Se(this,"getHigherQuality",(t,i,r,s)=>{if(t<this.thumbnails.length-1){let a=i.naturalHeight;this.usingSprites&&(a=r.h),a<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(t+1))},300)}}),Se(this,"toggleThumbContainer",(t=!1,i=!1)=>{const r=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(r,t),!t&&i&&(this.showingThumb=null,this.showingThumbFilename=null)}),Se(this,"toggleScrubbingContainer",(t=!1)=>{const i=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(i,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),Se(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Se(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const i=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${i}px`}else if(t.clientHeight<20&&t.clientWidth>20){const i=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${i}px`}}else{const i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${i}px`}this.setThumbContainerPos()}),Se(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),i=this.player.elements.container.getBoundingClientRect(),{container:r}=this.elements.thumb,s=i.left-t.left+10,a=i.right-t.left-r.clientWidth-10,o=this.mousePosX-t.left-r.clientWidth/2,l=Oy(o,s,a);r.style.left=`${l}px`,r.style.setProperty("--preview-arrow-offset",o-l+"px")}),Se(this,"setScrubbingContainerSize",()=>{const{width:t,height:i}=Ny(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${i}px`}),Se(this,"setImageSizeAndOffset",(t,i)=>{if(!this.usingSprites)return;const r=this.thumbContainerHeight/i.h;t.style.height=t.naturalHeight*r+"px",t.style.width=t.naturalWidth*r+"px",t.style.left=`-${i.x*r}px`,t.style.top=`-${i.y*r}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=Ny(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const tp={insertElements(n,e){N.string(e)?yy(n,this.media,{src:e}):N.array(e)&&e.forEach(t=>{yy(n,this.media,t)})},change(n){vy(n,"sources.length")?(ts.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],br(this.media),this.media=null,N.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:t}=n,[{provider:i=is.html5,src:r}]=e,s=i==="html5"?t:"div",a=i==="html5"?{}:{src:r};Object.assign(this,{provider:i,type:t,supported:Gt.check(t,i,this.config.playsinline),media:Ge(s,a)}),this.elements.container.appendChild(this.media),N.boolean(n.autoplay)&&(this.config.autoplay=n.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),N.empty(n.poster)||(this.poster=n.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),wt.addStyleHook.call(this),this.isHTML5&&tp.insertElements.call(this,"source",e),this.config.title=n.title,Iy.setup.call(this),this.isHTML5&&Object.keys(n).includes("tracks")&&tp.insertElements.call(this,"track",n.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&wt.build.call(this),this.isHTML5&&this.media.load(),N.empty(n.previewThumbnails)||(Object.assign(this.config.previewThumbnails,n.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ep(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Rl{constructor(e,t){if(Se(this,"play",()=>N.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>Qn(this.media.play())),this.media.play()):null),Se(this,"pause",()=>this.playing&&N.function(this.media.pause)?this.media.pause():null),Se(this,"togglePlay",o=>(N.boolean(o)?o:!this.playing)?this.play():this.pause()),Se(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):N.function(this.media.stop)&&this.media.stop()}),Se(this,"restart",()=>{this.currentTime=0}),Se(this,"rewind",o=>{this.currentTime-=N.number(o)?o:this.config.seekTime}),Se(this,"forward",o=>{this.currentTime+=N.number(o)?o:this.config.seekTime}),Se(this,"increaseVolume",o=>{const l=this.media.muted?0:this.volume;this.volume=l+(N.number(o)?o:0)}),Se(this,"decreaseVolume",o=>{this.increaseVolume(-o)}),Se(this,"airplay",()=>{Gt.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Se(this,"toggleControls",o=>{if(this.supported.ui&&!this.isAudio){const l=Eu(this.elements.container,this.config.classNames.hideControls),c=o===void 0?void 0:!o,d=vt(this.elements.container,this.config.classNames.hideControls,c);if(d&&N.array(this.config.controls)&&this.config.controls.includes("settings")&&!N.empty(this.config.settings)&&_e.toggleMenu.call(this,!1),d!==l){const h=d?"controlshidden":"controlsshown";We.call(this,this.media,h)}return!d}return!1}),Se(this,"on",(o,l)=>{ht.call(this,this.elements.container,o,l)}),Se(this,"once",(o,l)=>{Xh.call(this,this.elements.container,o,l)}),Se(this,"off",(o,l)=>{Au(this.elements.container,o,l)}),Se(this,"destroy",(o,l=!1)=>{if(!this.ready)return;const c=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(br(this.elements.buttons.play),br(this.elements.captions),br(this.elements.controls),br(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),N.function(o)&&o()):(xR.call(this),ts.cancelRequests.call(this),Tu(this.elements.original,this.elements.container),We.call(this,this.elements.original,"destroyed",!0),N.function(o)&&o.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(wt.toggleNativeControls.call(this,!0),c()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&N.function(this.embed.destroy)&&this.embed.destroy(),c()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(c),setTimeout(c,200))}),Se(this,"supports",o=>Gt.mime.call(this,o)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Gt.touch,this.media=e,N.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||N.nodeList(this.media)||N.array(this.media))&&(this.media=this.media[0]),this.config=Ht({},Dy,Rl.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new DR(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Gt),N.nullOrUndefined(this.media)||!N.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!Gt.check().api)return void this.debug.error("Setup failed: no support");const i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;const r=this.media.tagName.toLowerCase();let s=null,a=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),N.element(s)){if(a=Ry(s.getAttribute("src")),this.provider=LR(a.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",a.search.length){const o=["1","true"];o.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),o.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=o.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(N.empty(this.provider)||!Object.values(is).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Kh.video;break;case"video":case"audio":this.type=r,this.provider=is.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Gt.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new IR(this),this.storage=new El(this),this.media.plyr=this,N.element(this.elements.container)||(this.elements.container=Ge("div"),_y(this.media,this.elements.container)),wt.migrateStyles.call(this),wt.addStyleHook.call(this),Iy.setup.call(this),this.config.debug&&ht.call(this,this.elements.container,this.config.events.join(" "),o=>{this.debug.log(`event: ${o.type}`)}),this.fullscreen=new Dn(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&wt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new zR(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>Qn(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ep(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===is.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===is.youtube}get isVimeo(){return this.provider===is.vimeo}get isVideo(){return this.type===Kh.video}get isAudio(){return this.type===Kh.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const t=N.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return N.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=N.number(t)&&t!==1/0?t:0;return e||i}set volume(e){let t=e;N.string(t)&&(t=Number(t)),N.number(t)||(t=this.storage.get("volume")),N.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!N.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;N.boolean(t)||(t=this.storage.get("muted")),N.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;N.number(e)&&(t=e),N.number(t)||(t=this.storage.get("speed")),N.number(t)||(t=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:r}=this;t=Oy(t,i,r),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,i=this.options.quality;if(!i.length)return;let r=[!N.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(N.number),s=!0;if(!i.includes(r)){const a=by(i,r);this.debug.warn(`Unsupported quality option: ${r}, using ${a} instead`),r=a,s=!1}t.selected=r,this.media.quality=r,s&&this.storage.set({quality:r})}get quality(){return this.media.quality}set loop(e){const t=N.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(e){tp.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return N.url(e)?e:this.source}set download(e){N.url(e)&&(this.config.urls.download=e,_e.setDownloadUrl.call(this))}set poster(e){this.isVideo?wt.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Cu(qh.call(this));return N.array(e)?e.join(":"):e}set ratio(e){this.isVideo?N.string(e)&&My(e)?(this.config.ratio=Cu(e),ro.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=N.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){mt.toggle.call(this,e,!1)}set currentTrack(e){mt.set.call(this,e,!1),mt.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){mt.setLanguage.call(this,e,!1)}get language(){return(mt.getCurrentTrack.call(this)||{}).language}set pip(e){if(!Gt.pip)return;const t=N.boolean(e)?e:!this.pip;N.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?jh.active:jh.inactive),N.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return Gt.pip?N.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===jh.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ep(this))}static supported(e,t){return Gt.check(e,t)}static loadSprite(e,t){return Cy(e,t)}static setup(e,t={}){let i=null;return N.string(e)?i=Array.from(document.querySelectorAll(e)):N.nodeList(e)?i=Array.from(e):N.array(e)&&(i=e.filter(N.element)),N.empty(i)?null:i.map(r=>new Rl(r,t))}}Rl.defaults=gR(Dy);function HR(){document.querySelectorAll(".plyr_component").forEach(e=>{const t=e.querySelector(".plyr_video"),i=new Rl(t,{controls:["play","progress","current-time","mute","fullscreen"],resetOnEnd:!0});e.querySelector(".plyr_cover").addEventListener("click",()=>{i.play()}),i.on("ended",()=>{e.classList.remove("hide-cover")}),i.on("play",()=>{document.querySelectorAll(".plyr_component").forEach(o=>{o.classList.remove("hide-cover")}),e.classList.add("hide-cover");const a=document.querySelector(".plyr--playing:not(.plyr_component) .plyr_pause-trigger");a&&a.click()}),e.querySelector(".plyr_pause-trigger").addEventListener("click",()=>{i.pause()}),i.on("ended",()=>{i.fullscreen.active&&i.fullscreen.exit()}),i.on("enterfullscreen",()=>{e.classList.add("contain-video")}),i.on("exitfullscreen",()=>{e.classList.remove("contain-video")})})}function ip(){const n=`
    uniform vec2 uOffset;
    varying vec2 vUv;

    float M_PI = 3.141529;

    vec3 deformationCurve(vec3 position, vec2 uv, vec2 offset){
        position.x = position.x + (sin(uv.y * M_PI) * offset.x);
        position.y = position.y + (sin(uv.x * M_PI) * offset.y);
        return position;
    }

    void main(){
        vUv = uv;
        vec3 newPosition = deformationCurve(position, uv, uOffset);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
    }
  `,e=`
    uniform sampler2D uTexture;
    uniform float uAlpha;
    uniform float uPlaneAspect; 
    uniform float uImageAspect; 
    varying vec2 vUv;

    void main(){
        vec2 uv = vUv;
        float ratio = uImageAspect / uPlaneAspect;

        if(ratio > 1.0) {
            // image is wider than plane, scale Y
            uv.y = uv.y * ratio - (ratio - 1.0) * 0.5;
        } else {
            // image is taller than plane, scale X
            float invRatio = 1.0 / ratio;
            uv.x = uv.x * invRatio - (invRatio - 1.0) * 0.5;
        }

        vec3 color = texture2D(uTexture, uv).rgb;
        gl_FragColor = vec4(color, uAlpha);
    }
  `;function t(a,o,l){return a*(1-l)+o*l}let i=0,r=0;class s{constructor(){this.container=document.body,this.links=[...document.querySelectorAll('[glitch-hover="item"]')],this.scene=new v0,this.perspective=1e3,this.sizes=new ft(0,0),this.offset=new ft(0,0);const o=250,l=350,c=o/l;this.uniforms={uTexture:{value:null},uAlpha:{value:0},uOffset:{value:new ft(0,0)},uPlaneAspect:{value:c},uImageAspect:{value:1}},this.textures=this.links.map(d=>{const h=d.querySelector('[glitch-hover="img-wrap"] img');return h?new y0().load(h.src):(console.error("Image not found in link:",d),null)}).filter(d=>d),this.links.forEach((d,h)=>{if(!this.textures[h])return;const f=this.textures[h];d.addEventListener("mouseenter",()=>{const u=parseFloat(d.getAttribute("data-width"))||o,m=parseFloat(d.getAttribute("data-height"))||l;this.mesh.scale.set(u,m,1),this.uniforms.uPlaneAspect.value=u/m,this.uniforms.uTexture.value=f;const p=f.image.width,g=f.image.height;this.uniforms.uImageAspect.value=p/g,this.uniforms.uAlpha.value=1}),d.addEventListener("mouseleave",()=>{this.uniforms.uAlpha.value=0})}),this.addEventListeners(),this.setUpCamera(),this.createMesh(),this.render()}get viewport(){const o=window.innerWidth,l=window.innerHeight,c=o/l;return{width:o,height:l,aspectRatio:c}}addEventListeners(){window.addEventListener("resize",this.onWindowResize.bind(this)),window.addEventListener("mousemove",this.handleMouseMove.bind(this))}setUpCamera(){const o=180*(2*Math.atan(this.viewport.height/2/this.perspective))/Math.PI;this.camera=new rn(o,this.viewport.aspectRatio,.1,1e3),this.camera.position.set(0,0,this.perspective),this.renderer=new g0({antialias:!0,alpha:!0}),this.renderer.setSize(this.viewport.width,this.viewport.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.domElement.style.position="fixed",this.renderer.domElement.style.top="0",this.renderer.domElement.style.left="0",this.renderer.domElement.style.pointerEvents="none",this.container.appendChild(this.renderer.domElement)}createMesh(){this.geometry=new Ka(1,1,20,20),this.material=new Yn({uniforms:this.uniforms,vertexShader:n,fragmentShader:e,transparent:!0}),this.mesh=new Pn(this.geometry,this.material),this.mesh.scale.set(250,350,1),this.scene.add(this.mesh)}handleMouseMove(o){i=o.clientX,r=o.clientY}onWindowResize(){this.camera.aspect=this.viewport.aspectRatio,this.camera.fov=180*(2*Math.atan(this.viewport.height/2/this.perspective))/Math.PI,this.renderer.setSize(this.viewport.width,this.viewport.height),this.camera.updateProjectionMatrix()}render(){this.offset.x=t(this.offset.x,i,.1),this.offset.y=t(this.offset.y,r,.1),this.uniforms.uOffset.value.set((i-this.offset.x)*5e-4,-(r-this.offset.y)*5e-4),this.mesh.position.set(this.offset.x-this.viewport.width/2,this.viewport.height/2-this.offset.y,0),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))}}new s}const GR=()=>{const n=document.querySelector(".page_load_trigger"),e=()=>{document.querySelectorAll("[data-home-split]").forEach(r=>{Ad(r,"lines")})},t=()=>{Ee.set("[data-home-split='hero-text'] .line",{y:105}),Ee.set("[data-home-split='hero-pg'] .line",{y:100}),Ee.set("[data-home-load='hero-scroll']",{opacity:0,y:50}),Ee.set("[data-home-load='hero-vid']",{opacity:.8,y:"14%",scale:.9})},i=()=>{Ee.timeline().to("[data-home-split='hero-text'] .line",{y:0,duration:1.4,stagger:.1,ease:"expo.out"}).to("[data-home-split='hero-pg'] .line",{y:0,duration:1.4,stagger:.01,ease:"expo.out"},"-=1.4").to("[data-home-load='hero-scroll']",{opacity:1,y:0,duration:1,ease:"expo.out"},"-=0.9").to("[data-home-load='hero-vid']",{opacity:1,y:0,duration:1.2,scale:1,ease:"expo.out"},"-=1"),console.log("Home page load animation triggered")};e(),t(),n.addEventListener("click",()=>{i()})},WR=()=>{const n=document.querySelector(".page_load_trigger"),e=()=>{document.querySelectorAll("[data-about-split]").forEach(r=>{Ad(r,"lines")})},t=()=>{Ee.set("[data-about-split='hero-pg'] .line",{y:100}),Ee.set("[data-about-load='hero-toggle']",{y:"100%"}),Ee.set("[data-about-load='hero-canvas']",{opacity:0})},i=()=>{Ee.timeline().to("[data-about-split='hero-pg'] .line",{y:0,duration:1.6,stagger:.06,ease:"expo.out"},"-=0.2").to("[data-about-load='hero-toggle']",{y:"0%",duration:1.4,ease:"expo.out"},"-=1").to("[data-about-load='hero-canvas']",{opacity:1,duration:4,ease:"expo.out"},"-=1.2"),console.log("About page load animation triggered")};e(),t(),n.addEventListener("click",()=>{i()})};function XR(){const n=document.querySelector("[cursor]"),e=n.querySelector("p"),t=document.querySelectorAll("[data-cursor]"),i=6,r=80;let s=null,a="";Ee.set(n,{xPercent:i,yPercent:r});const o=Ee.quickTo(n,"x",{ease:"power3"}),l=Ee.quickTo(n,"y",{ease:"power3"}),c=()=>n.offsetWidth+16;window.addEventListener("mousemove",d=>{const h=window.innerWidth,f=window.innerHeight,u=window.scrollY,m=d.clientX,p=d.clientY+u;let g=i,v=r;const y=c();if(m>h-y&&(g=-100),p>u+f*.9&&(v=-120),s){const _=s.getAttribute("data-cursor");_!==a&&(e.innerHTML=_,a=_,c())}Ee.to(n,{xPercent:g,yPercent:v,duration:.9,ease:"power3"}),o(m),l(p-u)}),t.forEach(d=>{d.addEventListener("mouseenter",()=>{s=d;const h=d.getAttribute("data-cursor");h!==a&&(e.innerHTML=h,a=h)})})}const $R=()=>window.location.pathname==="/",qR=()=>window.location.pathname.startsWith("/work/"),YR=()=>window.location.pathname==="/about",jR=()=>window.location.pathname==="/contact";window.addEventListener("DOMContentLoaded",()=>{new Vm("data-a-split"),kP(),Bb(),Ew(),_v(),iC(),AP(),CP(),PP(),OP(),NP(),UP(),HR(),XR(),$R()&&(GR(),tw()),qR()&&ip(),YR()&&(WR(),IP(),J0(),ip()),jR()&&(J0(),ip()),UnicornStudio.init()}),console.log("Hello Balky!")});
