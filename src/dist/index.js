(function(ao){typeof define=="function"&&define.amd?define(ao):ao()})(function(){"use strict";var ao=document.createElement("style");ao.textContent=`body{margin:0;padding:0}@font-face{font-family:swiper-icons;src:url(data:application/font-woff;charset=utf-8;base64,\\ d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA);font-weight:400;font-style:normal}:root{--swiper-theme-color: #007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function, initial);box-sizing:content-box}.swiper-android .swiper-slide,.swiper-ios .swiper-slide,.swiper-wrapper{transform:translateZ(0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}.swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-slide,.swiper-3d .swiper-cube-shadow{transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper:before{content:"";flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper:before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper:before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top,.swiper-3d .swiper-slide-shadow-bottom{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-3d .swiper-slide-shadow{background:#00000026}.swiper-3d .swiper-slide-shadow-left{background-image:linear-gradient(to left,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-right{background-image:linear-gradient(to right,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-top{background-image:linear-gradient(to top,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(to bottom,#00000080,#0000)}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color, var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper:not(.swiper-watch-progress) .swiper-lazy-preloader,.swiper-watch-progress .swiper-slide-visible .swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear}.swiper-lazy-preloader-white{--swiper-preloader-color: #fff}.swiper-lazy-preloader-black{--swiper-preloader-color: #000}@keyframes swiper-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.swiper-virtual .swiper-slide{-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper:after{content:"";position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper:after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper:after{width:1px;height:var(--swiper-virtual-size)}:root{--swiper-navigation-size: 44px}.swiper-button-prev,.swiper-button-next{position:absolute;top:var(--swiper-navigation-top-offset, 50%);width:calc(var(--swiper-navigation-size) / 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size) / 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color, var(--swiper-theme-color))}.swiper-button-prev.swiper-button-disabled,.swiper-button-next.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-prev.swiper-button-hidden,.swiper-button-next.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-prev,.swiper-navigation-disabled .swiper-button-next{display:none!important}.swiper-button-prev svg,.swiper-button-next svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-prev svg,.swiper-rtl .swiper-button-next svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset, 10px);right:auto}.swiper-button-lock{display:none}.swiper-button-prev:after,.swiper-button-next:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);text-transform:none!important;letter-spacing:0;font-variant:initial;line-height:1}.swiper-button-prev:after,.swiper-rtl .swiper-button-next:after{content:"prev"}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset, 10px);left:auto}.swiper-button-next:after,.swiper-rtl .swiper-button-prev:after{content:"next"}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translateZ(0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-pagination-fraction,.swiper-pagination-custom,.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal{bottom:var(--swiper-pagination-bottom, 8px);top:var(--swiper-pagination-top, auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active,.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width, var(--swiper-pagination-bullet-size, 8px));height:var(--swiper-pagination-bullet-height, var(--swiper-pagination-bullet-size, 8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius, 50%);background:var(--swiper-pagination-bullet-inactive-color, #000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color, var(--swiper-theme-color))}.swiper-vertical>.swiper-pagination-bullets,.swiper-pagination-vertical.swiper-pagination-bullets{right:var(--swiper-pagination-right, 8px);left:var(--swiper-pagination-left, auto);top:50%;transform:translate3d(0,-50%,0)}.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap, 6px) 0;display:block}.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap, 4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translate(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color, inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color, rgba(0, 0, 0, .25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color, var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size, 4px);left:0;top:0}.swiper-vertical>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite{width:var(--swiper-pagination-progressbar-size, 4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius, 10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color, rgba(0, 0, 0, .1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset, 1%);bottom:var(--swiper-scrollbar-bottom, 4px);top:var(--swiper-scrollbar-top, auto);z-index:50;height:var(--swiper-scrollbar-size, 4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset, 1%))}.swiper-vertical>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-vertical{position:absolute;left:var(--swiper-scrollbar-left, auto);right:var(--swiper-scrollbar-right, 4px);top:var(--swiper-scrollbar-sides-offset, 1%);z-index:50;width:var(--swiper-scrollbar-size, 4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset, 1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color, rgba(0, 0, 0, .5));border-radius:var(--swiper-scrollbar-border-radius, 10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}.swiper-zoom-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}.swiper-zoom-container>img,.swiper-zoom-container>svg,.swiper-zoom-container>canvas{max-width:100%;max-height:100%;object-fit:contain}.swiper-slide-zoomed{cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode .swiper-slide{transition-timing-function:ease-out}.swiper-fade .swiper-slide{pointer-events:none;transition-property:opacity}.swiper-fade .swiper-slide .swiper-slide{pointer-events:none}.swiper-fade .swiper-slide-active,.swiper-fade .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-cube{overflow:visible}.swiper-cube .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube .swiper-slide .swiper-slide{pointer-events:none}.swiper-cube.swiper-rtl .swiper-slide{transform-origin:100% 0}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-next,.swiper-cube .swiper-slide-prev{pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:"";background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube .swiper-slide-next+.swiper-slide{pointer-events:auto;visibility:visible}.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-top,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-bottom,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-left,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-right{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-flip{overflow:visible}.swiper-flip .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip .swiper-slide .swiper-slide{pointer-events:none}.swiper-flip .swiper-slide-active,.swiper-flip .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-top,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-bottom,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-left,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-right{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-creative .swiper-slide{-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper-cards{overflow:visible}.swiper-cards .swiper-slide{transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}
`,document.head.appendChild(ao);function er(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fp(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Yi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Js={duration:.5,overwrite:!1,delay:0},Uu,hi,Dt,ln=1e8,Tt=1/ln,Fu=Math.PI*2,Xy=Fu/4,$y=0,hp=Math.sqrt,qy=Math.cos,Yy=Math.sin,ti=function(e){return typeof e=="string"},Bt=function(e){return typeof e=="function"},tr=function(e){return typeof e=="number"},Bu=function(e){return typeof e>"u"},On=function(e){return typeof e=="object"},Fi=function(e){return e!==!1},zu=function(){return typeof window<"u"},kl=function(e){return Bt(e)||ti(e)},pp=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},pi=Array.isArray,Vu=/(?:-?\.?\d|\.)+/gi,mp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ea=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Hu=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,gp=/[+-]=-?[.\d]+/,vp=/[^,'"\[\]\s]+/gi,jy=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Nt,Nn,Gu,Wu,ji={},Ul={},_p,yp=function(e){return(Ul=ls(e,ji))&&Vi},Xu=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},oo=function(e,t){return!t&&console.warn(e)},xp=function(e,t){return e&&(ji[e]=t)&&Ul&&(Ul[e]=t)||ji},lo=function(){return 0},Ky={suppressEvents:!0,isStart:!0,kill:!1},Fl={suppressEvents:!0,kill:!1},Zy={suppressEvents:!0},$u={},Sr=[],qu={},bp,Ki={},Yu={},wp=30,Bl=[],ju="",Ku=function(e){var t=e[0],i,r;if(On(t)||Bt(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=Bl.length;r--&&!Bl[r].targetTest(t););i=Bl[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Zp(e[r],i)))||e.splice(r,1);return e},os=function(e){return e._gsap||Ku(dn(e))[0]._gsap},Sp=function(e,t,i){return(i=e[t])&&Bt(i)?e[t]():Bu(i)&&e.getAttribute&&e.getAttribute(t)||i},Bi=function(e,t){return(e=e.split(",")).forEach(t)||e},zt=function(e){return Math.round(e*1e5)/1e5||0},ii=function(e){return Math.round(e*1e7)/1e7||0},ta=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},Qy=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},zl=function(){var e=Sr.length,t=Sr.slice(0),i,r;for(qu={},Sr.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Mp=function(e,t,i,r){Sr.length&&!hi&&zl(),e.render(t,i,r||hi&&t<0&&(e._initted||e._startAt)),Sr.length&&!hi&&zl()},Tp=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(vp).length<2?t:ti(e)?e.trim():e},Ep=function(e){return e},cn=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Jy=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},ls=function(e,t){for(var i in t)e[i]=t[i];return e},Ap=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=On(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Vl=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},co=function(e){var t=e.parent||Nt,i=e.keyframes?Jy(pi(e.keyframes)):cn;if(Fi(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},ex=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},Cp=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=e[r],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},Hl=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,a=t._next;s?s._next=a:e[i]===t&&(e[i]=a),a?a._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Mr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},cs=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},tx=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Zu=function(e,t,i,r){return e._startAt&&(hi?e._startAt.revert(Fl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},ix=function n(e){return!e||e._ts&&n(e.parent)},Pp=function(e){return e._repeat?ia(e._tTime,e=e.duration()+e._rDelay)*e:0},ia=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Gl=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Wl=function(e){return e._end=ii(e._start+(e._tDur/Math.abs(e._ts||e._rts||Tt)||0))},Xl=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=ii(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Wl(e),i._dirty||cs(i,e)),e},Rp=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Gl(e.rawTime(),t),(!t._dur||fo(0,t.totalDuration(),i)-t._tTime>Tt)&&t.render(i,!0)),cs(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Tt}},kn=function(e,t,i,r){return t.parent&&Mr(t),t._start=ii((tr(i)?i:i||e!==Nt?un(e,i,t):e._time)+t._delay),t._end=ii(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Cp(e,t,"_first","_last",e._sort?"_start":0),Qu(t)||(e._recent=t),r||Rp(e,t),e._ts<0&&Xl(e,e._tTime),e},Lp=function(e,t){return(ji.ScrollTrigger||Xu("scrollTrigger",t))&&ji.ScrollTrigger.create(t,e)},Dp=function(e,t,i,r,s){if(od(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!hi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&bp!==Qi.frame)return Sr.push(e),e._lazy=[s,r],1},nx=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},Qu=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},rx=function(e,t,i,r){var s=e.ratio,a=t<0||!t&&(!e._start&&nx(e)&&!(!e._initted&&Qu(e))||(e._ts<0||e._dp._ts<0)&&!Qu(e))?0:1,o=e._rDelay,l=0,c,d,h;if(o&&e._repeat&&(l=fo(0,e._tDur,t),d=ia(l,o),e._yoyo&&d&1&&(a=1-a),d!==ia(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||hi||r||e._zTime===Tt||!t&&e._zTime){if(!e._initted&&Dp(e,t,r,i,l))return;for(h=e._zTime,e._zTime=t||(i?Tt:0),i||(i=t&&!h),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&Zu(e,t,i,!0),e._onUpdate&&!i&&Zi(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Zi(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Mr(e,1),!i&&!hi&&(Zi(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},sx=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},na=function(e,t,i,r){var s=e._repeat,a=ii(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:ii(a*(s+1)+e._rDelay*s):a,o>0&&!r&&Xl(e,e._tTime=e._tDur*o),e.parent&&Wl(e),i||cs(e.parent,e),e},Ip=function(e){return e instanceof Ti?cs(e):na(e,e._dur)},ax={_start:0,endTime:lo,totalDuration:lo},un=function n(e,t,i){var r=e.labels,s=e._recent||ax,a=e.duration()>=ln?s.endTime(!1):e._dur,o,l,c;return ti(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?s:i).totalDuration()/100:1)):o<0?(t in r||(r[t]=a),r[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&i&&(l=l/100*(pi(i)?i[0]:i).totalDuration()),o>1?n(e,t.substr(0,o-1),i)+l:a+l)):t==null?a:+t},uo=function(e,t,i){var r=tr(t[1]),s=(r?2:1)+(e<2?0:1),a=t[s],o,l;if(r&&(a.duration=t[1]),a.parent=i,e){for(o=a,l=i;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=Fi(l.vars.inherit)&&l.parent;a.immediateRender=Fi(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Wt(t[0],a,t[s+1])},Tr=function(e,t){return e||e===0?t(e):t},fo=function(e,t,i){return i<e?e:i>t?t:i},mi=function(e,t){return!ti(e)||!(t=jy.exec(e))?"":t[1]},ox=function(e,t,i){return Tr(i,function(r){return fo(e,t,r)})},Ju=[].slice,Op=function(e,t){return e&&On(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&On(e[0]))&&!e.nodeType&&e!==Nn},lx=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return ti(r)&&!t||Op(r,1)?(s=i).push.apply(s,dn(r)):i.push(r)})||i},dn=function(e,t,i){return Dt&&!t&&Dt.selector?Dt.selector(e):ti(e)&&!i&&(Gu||!sa())?Ju.call((t||Wu).querySelectorAll(e),0):pi(e)?lx(e,i):Op(e)?Ju.call(e,0):e?[e]:[]},ed=function(e){return e=dn(e)[0]||oo("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return dn(t,i.querySelectorAll?i:i===e?oo("Invalid scope")||Wu.createElement("div"):e)}},Np=function(e){return e.sort(function(){return .5-Math.random()})},kp=function(e){if(Bt(e))return e;var t=On(e)?e:{each:e},i=us(t.ease),r=t.from||0,s=parseFloat(t.base)||0,a={},o=r>0&&r<1,l=isNaN(r)||o,c=t.axis,d=r,h=r;return ti(r)?d=h={center:.5,edges:.5,end:1}[r]||0:!o&&l&&(d=r[0],h=r[1]),function(f,u,m){var p=(m||t).length,v=a[p],g,y,_,b,w,M,T,E,S;if(!v){if(S=t.grid==="auto"?0:(t.grid||[1,ln])[1],!S){for(T=-ln;T<(T=m[S++].getBoundingClientRect().left)&&S<p;);S<p&&S--}for(v=a[p]=[],g=l?Math.min(S,p)*d-.5:r%S,y=S===ln?0:l?p*h/S-.5:r/S|0,T=0,E=ln,M=0;M<p;M++)_=M%S-g,b=y-(M/S|0),v[M]=w=c?Math.abs(c==="y"?b:_):hp(_*_+b*b),w>T&&(T=w),w<E&&(E=w);r==="random"&&Np(v),v.max=T-E,v.min=E,v.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(S>p?p-1:c?c==="y"?p/S:S:Math.max(S,p/S))||0)*(r==="edges"?-1:1),v.b=p<0?s-p:s,v.u=mi(t.amount||t.each)||0,i=i&&p<0?Yp(i):i}return p=(v[f]-v.min)/v.max||0,ii(v.b+(i?i(p):p)*v.v)+v.u}},td=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=ii(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(tr(i)?0:mi(i))}},Up=function(e,t){var i=pi(e),r,s;return!i&&On(e)&&(r=i=e.radius||ln,e.values?(e=dn(e.values),(s=!tr(e[0]))&&(r*=r)):e=td(e.increment)),Tr(t,i?Bt(e)?function(a){return s=e(a),Math.abs(s-a)<=r?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=ln,d=0,h=e.length,f,u;h--;)s?(f=e[h].x-o,u=e[h].y-l,f=f*f+u*u):f=Math.abs(e[h]-o),f<c&&(c=f,d=h);return d=!r||c<=r?e[d]:a,s||d===a||tr(a)?d:d+mi(a)}:td(e))},Fp=function(e,t,i,r){return Tr(pi(e)?!t:i===!0?!!(i=0):!r,function(){return pi(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},cx=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,a){return a(s)},r)}},ux=function(e,t){return function(i){return e(parseFloat(i))+(t||mi(i))}},dx=function(e,t,i){return zp(e,t,0,1,i)},Bp=function(e,t,i){return Tr(i,function(r){return e[~~t(r)]})},fx=function n(e,t,i){var r=t-e;return pi(e)?Bp(e,n(0,e.length),t):Tr(i,function(s){return(r+(s-e)%r)%r+e})},hx=function n(e,t,i){var r=t-e,s=r*2;return pi(e)?Bp(e,n(0,e.length-1),t):Tr(i,function(a){return a=(s+(a-e)%s)%s||0,e+(a>r?s-a:a)})},ho=function(e){for(var t=0,i="",r,s,a,o;~(r=e.indexOf("random(",t));)a=e.indexOf(")",r),o=e.charAt(r+7)==="[",s=e.substr(r+7,a-r-7).match(o?vp:Vu),i+=e.substr(t,r-t)+Fp(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},zp=function(e,t,i,r,s){var a=t-e,o=r-i;return Tr(s,function(l){return i+((l-e)/a*o||0)})},px=function n(e,t,i,r){var s=isNaN(e+t)?0:function(u){return(1-u)*e+u*t};if(!s){var a=ti(e),o={},l,c,d,h,f;if(i===!0&&(r=1)&&(i=null),a)e={p:e},t={p:t};else if(pi(e)&&!pi(t)){for(d=[],h=e.length,f=h-2,c=1;c<h;c++)d.push(n(e[c-1],e[c]));h--,s=function(m){m*=h;var p=Math.min(f,~~m);return d[p](m-p)},i=t}else r||(e=ls(pi(e)?[]:{},e));if(!d){for(l in t)sd.call(o,e,l,"get",t[l]);s=function(m){return ud(m,o)||(a?e.p:e)}}}return Tr(i,s)},Vp=function(e,t,i){var r=e.labels,s=ln,a,o,l;for(a in r)o=r[a]-t,o<0==!!i&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},Zi=function(e,t,i){var r=e.vars,s=r[t],a=Dt,o=e._ctx,l,c,d;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&Sr.length&&zl(),o&&(Dt=o),d=l?s.apply(c,l):s.call(c),Dt=a,d},po=function(e){return Mr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!hi),e.progress()<1&&Zi(e,"onInterrupt"),e},ra,Hp=[],Gp=function(e){if(e)if(e=!e.name&&e.default||e,zu()||e.headless){var t=e.name,i=Bt(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:lo,render:ud,add:sd,kill:Rx,modifier:Px,rawVars:0},a={targetTest:0,get:0,getSetter:cd,aliases:{},register:0};if(sa(),e!==r){if(Ki[t])return;cn(r,cn(Vl(e,s),a)),ls(r.prototype,ls(s,Vl(e,a))),Ki[r.prop=t]=r,e.targetTest&&(Bl.push(r),$u[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}xp(t,r),e.register&&e.register(Vi,r,zi)}else Hp.push(e)},Mt=255,mo={aqua:[0,Mt,Mt],lime:[0,Mt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Mt],navy:[0,0,128],white:[Mt,Mt,Mt],olive:[128,128,0],yellow:[Mt,Mt,0],orange:[Mt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Mt,0,0],pink:[Mt,192,203],cyan:[0,Mt,Mt],transparent:[Mt,Mt,Mt,0]},id=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Mt+.5|0},Wp=function(e,t,i){var r=e?tr(e)?[e>>16,e>>8&Mt,e&Mt]:0:mo.black,s,a,o,l,c,d,h,f,u,m;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),mo[e])r=mo[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Mt,r&Mt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Mt,e&Mt]}else if(e.substr(0,3)==="hsl"){if(r=m=e.match(Vu),!t)l=+r[0]%360/360,c=+r[1]/100,d=+r[2]/100,a=d<=.5?d*(c+1):d+c-d*c,s=d*2-a,r.length>3&&(r[3]*=1),r[0]=id(l+1/3,s,a),r[1]=id(l,s,a),r[2]=id(l-1/3,s,a);else if(~e.indexOf("="))return r=e.match(mp),i&&r.length<4&&(r[3]=1),r}else r=e.match(Vu)||mo.transparent;r=r.map(Number)}return t&&!m&&(s=r[0]/Mt,a=r[1]/Mt,o=r[2]/Mt,h=Math.max(s,a,o),f=Math.min(s,a,o),d=(h+f)/2,h===f?l=c=0:(u=h-f,c=d>.5?u/(2-h-f):u/(h+f),l=h===s?(a-o)/u+(a<o?6:0):h===a?(o-s)/u+2:(s-a)/u+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(d*100+.5)),i&&r.length<4&&(r[3]=1),r},Xp=function(e){var t=[],i=[],r=-1;return e.split(Er).forEach(function(s){var a=s.match(ea)||[];t.push.apply(t,a),i.push(r+=a.length+1)}),t.c=i,t},$p=function(e,t,i){var r="",s=(e+r).match(Er),a=t?"hsla(":"rgba(",o=0,l,c,d,h;if(!s)return e;if(s=s.map(function(f){return(f=Wp(f,t,1))&&a+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(d=Xp(e),l=i.c,l.join(r)!==d.c.join(r)))for(c=e.replace(Er,"1").split(ea),h=c.length-1;o<h;o++)r+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!c)for(c=e.split(Er),h=c.length-1;o<h;o++)r+=c[o]+s[o];return r+c[h]},Er=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in mo)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),mx=/hsl[a]?\(/,qp=function(e){var t=e.join(" "),i;if(Er.lastIndex=0,Er.test(t))return i=mx.test(t),e[1]=$p(e[1],i),e[0]=$p(e[0],i,Xp(e[1])),!0},go,Qi=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,a=s,o=[],l,c,d,h,f,u,m=function p(v){var g=n()-r,y=v===!0,_,b,w,M;if((g>e||g<0)&&(i+=g-t),r+=g,w=r-i,_=w-a,(_>0||y)&&(M=++h.frame,f=w-h.time*1e3,h.time=w=w/1e3,a+=_+(_>=s?4:s-_),b=1),y||(l=c(p)),b)for(u=0;u<o.length;u++)o[u](w,f,M,v)};return h={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(v){return f/(1e3/(v||60))},wake:function(){_p&&(!Gu&&zu()&&(Nn=Gu=window,Wu=Nn.document||{},ji.gsap=Vi,(Nn.gsapVersions||(Nn.gsapVersions=[])).push(Vi.version),yp(Ul||Nn.GreenSockGlobals||!Nn.gsap&&Nn||{}),Hp.forEach(Gp)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=d||function(v){return setTimeout(v,a-h.time*1e3+1|0)},go=1,m(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),go=0,c=lo},lagSmoothing:function(v,g){e=v||1/0,t=Math.min(g||33,e)},fps:function(v){s=1e3/(v||240),a=h.time*1e3+s},add:function(v,g,y){var _=g?function(b,w,M,T){v(b,w,M,T),h.remove(_)}:v;return h.remove(v),o[y?"unshift":"push"](_),sa(),_},remove:function(v,g){~(g=o.indexOf(v))&&o.splice(g,1)&&u>=g&&u--},_listeners:o},h}(),sa=function(){return!go&&Qi.wake()},lt={},gx=/^[\d.\-M][\d.\-,\s]/,vx=/["']/g,_x=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,a=i.length,o,l,c;s<a;s++)l=i[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[r]=isNaN(c)?c.replace(vx,"").trim():+c,r=l.substr(o+1).trim();return t},yx=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},xx=function(e){var t=(e+"").split("("),i=lt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[_x(t[1])]:yx(e).split(",").map(Tp)):lt._CE&&gx.test(e)?lt._CE("",e):i},Yp=function(e){return function(t){return 1-e(1-t)}},jp=function n(e,t){for(var i=e._first,r;i;)i instanceof Ti?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},us=function(e,t){return e&&(Bt(e)?e:lt[e]||xx(e))||t},ds=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},a;return Bi(e,function(o){lt[o]=ji[o]=s,lt[a=o.toLowerCase()]=i;for(var l in s)lt[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=lt[o+"."+l]=s[l]}),s},Kp=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},nd=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),a=s/Fu*(Math.asin(1/r)||0),o=function(d){return d===1?1:r*Math.pow(2,-10*d)*Yy((d-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:Kp(o);return s=Fu/s,l.config=function(c,d){return n(e,c,d)},l},rd=function n(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:Kp(i);return r.config=function(s){return n(e,s)},r};Bi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;ds(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})}),lt.Linear.easeNone=lt.none=lt.Linear.easeIn,ds("Elastic",nd("in"),nd("out"),nd()),function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(o){return o<t?n*o*o:o<i?n*Math.pow(o-1.5/e,2)+.75:o<r?n*(o-=2.25/e)*o+.9375:n*Math.pow(o-2.625/e,2)+.984375};ds("Bounce",function(a){return 1-s(1-a)},s)}(7.5625,2.75),ds("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),ds("Circ",function(n){return-(hp(1-n*n)-1)}),ds("Sine",function(n){return n===1?1:-qy(n*Xy)+1}),ds("Back",rd("in"),rd("out"),rd()),lt.SteppedEase=lt.steps=ji.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,a=1-Tt;return function(o){return((r*fo(0,a,o)|0)+s)*i}}},Js.ease=lt["quad.out"],Bi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return ju+=n+","+n+"Params,"});var Zp=function(e,t){this.id=$y++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Sp,this.set=t?t.getSetter:cd},vo=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,na(this,+t.duration,1,1),this.data=t.data,Dt&&(this._ctx=Dt,Dt.data.push(this)),go||Qi.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,na(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(sa(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Xl(this,i),!s._dp||s.parent||Rp(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&kn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Tt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Mp(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Pp(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Pp(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?ia(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Tt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Gl(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Tt?0:this._rts,this.totalTime(fo(-Math.abs(this._delay),this._tDur,s),r!==!1),Wl(this),tx(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(sa(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Tt&&(this._tTime-=Tt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&kn(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Fi(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Gl(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=Zy);var r=hi;return hi=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),hi=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Ip(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,Ip(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(un(this,i),Fi(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Fi(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Tt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Tt,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Tt)},e.eventCallback=function(i,r,s){var a=this.vars;return arguments.length>1?(r?(a[i]=r,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete a[i],this):a[i]},e.then=function(i){var r=this;return new Promise(function(s){var a=Bt(i)?i:Ep,o=function(){var c=r.then;r.then=null,Bt(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=c),s(a),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){po(this)},n}();cn(vo.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Tt,_prom:0,_ps:!1,_rts:1});var Ti=function(n){fp(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Fi(i.sortChildren),Nt&&kn(i.parent||Nt,er(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Lp(er(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,a){return uo(0,arguments,this),this},t.from=function(r,s,a){return uo(1,arguments,this),this},t.fromTo=function(r,s,a,o){return uo(2,arguments,this),this},t.set=function(r,s,a){return s.duration=0,s.parent=this,co(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Wt(r,s,un(this,a),1),this},t.call=function(r,s,a){return kn(this,Wt.delayedCall(0,r,s),a)},t.staggerTo=function(r,s,a,o,l,c,d){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=d,a.parent=this,new Wt(r,a,un(this,l)),this},t.staggerFrom=function(r,s,a,o,l,c,d){return a.runBackwards=1,co(a).immediateRender=Fi(a.immediateRender),this.staggerTo(r,s,a,o,l,c,d)},t.staggerFromTo=function(r,s,a,o,l,c,d,h){return o.startAt=a,co(o).immediateRender=Fi(o.immediateRender),this.staggerTo(r,s,o,l,c,d,h)},t.render=function(r,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=r<=0?0:ii(r),h=this._zTime<0!=r<0&&(this._initted||!c),f,u,m,p,v,g,y,_,b,w,M,T;if(this!==Nt&&d>l&&r>=0&&(d=l),d!==this._tTime||a||h){if(o!==this._time&&c&&(d+=this._time-o,r+=this._time-o),f=d,b=this._start,_=this._ts,g=!_,h&&(c||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(M=this._yoyo,v=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(v*100+r,s,a);if(f=ii(d%v),d===l?(p=this._repeat,f=c):(p=~~(d/v),p&&p===d/v&&(f=c,p--),f>c&&(f=c)),w=ia(this._tTime,v),!o&&this._tTime&&w!==p&&this._tTime-w*v-this._dur<=0&&(w=p),M&&p&1&&(f=c-f,T=1),p!==w&&!this._lock){var E=M&&w&1,S=E===(M&&p&1);if(p<w&&(E=!E),o=E?0:d%c?c:d,this._lock=1,this.render(o||(T?0:ii(p*v)),s,!c)._lock=0,this._tTime=d,!s&&this.parent&&Zi(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),o&&o!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,S&&(this._lock=2,o=E?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;jp(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=sx(this,ii(o),ii(f)),y&&(d-=f-(f=y._start))),this._tTime=d,this._time=f,this._act=!_,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&f&&!s&&!p&&(Zi(this,"onStart"),this._tTime!==d))return this;if(f>=o&&r>=0)for(u=this._first;u;){if(m=u._next,(u._act||f>=u._start)&&u._ts&&y!==u){if(u.parent!==this)return this.render(r,s,a);if(u.render(u._ts>0?(f-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(f-u._start)*u._ts,s,a),f!==this._time||!this._ts&&!g){y=0,m&&(d+=this._zTime=-Tt);break}}u=m}else{u=this._last;for(var x=r<0?r:f;u;){if(m=u._prev,(u._act||x<=u._end)&&u._ts&&y!==u){if(u.parent!==this)return this.render(r,s,a);if(u.render(u._ts>0?(x-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(x-u._start)*u._ts,s,a||hi&&(u._initted||u._startAt)),f!==this._time||!this._ts&&!g){y=0,m&&(d+=this._zTime=x?-Tt:Tt);break}}u=m}}if(y&&!s&&(this.pause(),y.render(f>=o?0:-Tt)._zTime=f>=o?1:-1,this._ts))return this._start=b,Wl(this),this.render(r,s,a);this._onUpdate&&!s&&Zi(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&o)&&(b===this._start||Math.abs(_)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(d===l&&this._ts>0||!d&&this._ts<0)&&Mr(this,1),!s&&!(r<0&&!o)&&(d||o||!l)&&(Zi(this,d===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var a=this;if(tr(s)||(s=un(this,s,r)),!(r instanceof vo)){if(pi(r))return r.forEach(function(o){return a.add(o,s)}),this;if(ti(r))return this.addLabel(r,s);if(Bt(r))r=Wt.delayedCall(0,r);else return this}return this!==r?kn(this,r,s):this},t.getChildren=function(r,s,a,o){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-ln);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof Wt?s&&l.push(c):(a&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},t.remove=function(r){return ti(r)?this.removeLabel(r):Bt(r)?this.killTweensOf(r):(Hl(this,r),r===this._recent&&(this._recent=this._last),cs(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ii(Qi.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=un(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,a){var o=Wt.delayedCall(0,s||lo,a);return o.data="isPause",this._hasPause=1,kn(this,o,un(this,r))},t.removePause=function(r){var s=this._first;for(r=un(this,r);s;)s._start===r&&s.data==="isPause"&&Mr(s),s=s._next},t.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),l=o.length;l--;)Ar!==o[l]&&o[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var a=[],o=dn(r),l=this._first,c=tr(s),d;l;)l instanceof Wt?Qy(l._targets,o)&&(c?(!Ar||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(d=l.getTweensOf(o,s)).length&&a.push.apply(a,d),l=l._next;return a},t.tweenTo=function(r,s){s=s||{};var a=this,o=un(a,r),l=s,c=l.startAt,d=l.onStart,h=l.onStartParams,f=l.immediateRender,u,m=Wt.to(a,cn({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||Tt,onStart:function(){if(a.pause(),!u){var v=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());m._dur!==v&&na(m,v,0,1).render(m._time,!0,!0),u=1}d&&d.apply(m,h||[])}},s));return f?m.render(0):m},t.tweenFromTo=function(r,s,a){return this.tweenTo(s,cn({startAt:{time:un(this,r)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Vp(this,un(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Vp(this,un(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Tt)},t.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=r);return cs(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),cs(this)},t.totalDuration=function(r){var s=0,a=this,o=a._last,l=ln,c,d,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(h=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,kn(a,o,d-o._delay,1)._lock=0):l=d,d<0&&o._ts&&(s-=d,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;na(a,a===Nt&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(r){if(Nt._ts&&(Mp(Nt,Gl(r,Nt)),bp=Qi.frame),Qi.frame>=wp){wp+=Yi.autoSleep||120;var s=Nt._first;if((!s||!s._ts)&&Yi.autoSleep&&Qi._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Qi.sleep()}}},e}(vo);cn(Ti.prototype,{_lock:0,_hasPause:0,_forcing:0});var bx=function(e,t,i,r,s,a,o){var l=new zi(this._pt,e,t,0,1,nm,null,s),c=0,d=0,h,f,u,m,p,v,g,y;for(l.b=i,l.e=r,i+="",r+="",(g=~r.indexOf("random("))&&(r=ho(r)),a&&(y=[i,r],a(y,e,t),i=y[0],r=y[1]),f=i.match(Hu)||[];h=Hu.exec(r);)m=h[0],p=r.substring(c,h.index),u?u=(u+1)%5:p.substr(-5)==="rgba("&&(u=1),m!==f[d++]&&(v=parseFloat(f[d-1])||0,l._pt={_next:l._pt,p:p||d===1?p:",",s:v,c:m.charAt(1)==="="?ta(v,m)-v:parseFloat(m)-v,m:u&&u<4?Math.round:0},c=Hu.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=o,(gp.test(r)||g)&&(l.e=0),this._pt=l,l},sd=function(e,t,i,r,s,a,o,l,c,d){Bt(r)&&(r=r(s||0,e,a));var h=e[t],f=i!=="get"?i:Bt(h)?c?e[t.indexOf("set")||!Bt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,u=Bt(h)?c?Ex:tm:ld,m;if(ti(r)&&(~r.indexOf("random(")&&(r=ho(r)),r.charAt(1)==="="&&(m=ta(f,r)+(mi(f)||0),(m||m===0)&&(r=m))),!d||f!==r||ad)return!isNaN(f*r)&&r!==""?(m=new zi(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?Cx:im,0,u),c&&(m.fp=c),o&&m.modifier(o,this,e),this._pt=m):(!h&&!(t in e)&&Xu(t,r),bx.call(this,e,t,f,r,u,l||Yi.stringFilter,c))},wx=function(e,t,i,r,s){if(Bt(e)&&(e=_o(e,s,t,i,r)),!On(e)||e.style&&e.nodeType||pi(e)||pp(e))return ti(e)?_o(e,s,t,i,r):e;var a={},o;for(o in e)a[o]=_o(e[o],s,t,i,r);return a},Qp=function(e,t,i,r,s,a){var o,l,c,d;if(Ki[e]&&(o=new Ki[e]).init(s,o.rawVars?t[e]:wx(t[e],r,s,a,i),i,r,a)!==!1&&(i._pt=l=new zi(i._pt,s,e,0,1,o.render,o,0,o.priority),i!==ra))for(c=i._ptLookup[i._targets.indexOf(s)],d=o._props.length;d--;)c[o._props[d]]=l;return o},Ar,ad,od=function n(e,t,i){var r=e.vars,s=r.ease,a=r.startAt,o=r.immediateRender,l=r.lazy,c=r.onUpdate,d=r.runBackwards,h=r.yoyoEase,f=r.keyframes,u=r.autoRevert,m=e._dur,p=e._startAt,v=e._targets,g=e.parent,y=g&&g.data==="nested"?g.vars.targets:v,_=e._overwrite==="auto"&&!Uu,b=e.timeline,w,M,T,E,S,x,C,A,P,R,L,U,B;if(b&&(!f||!s)&&(s="none"),e._ease=us(s,Js.ease),e._yEase=h?Yp(us(h===!0?s:h,Js.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!b&&!!r.runBackwards,!b||f&&!r.stagger){if(A=v[0]?os(v[0]).harness:0,U=A&&r[A.prop],w=Vl(r,$u),p&&(p._zTime<0&&p.progress(1),t<0&&d&&o&&!u?p.render(-1,!0):p.revert(d&&m?Fl:Ky),p._lazy=0),a){if(Mr(e._startAt=Wt.set(v,cn({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!p&&Fi(l),startAt:null,delay:0,onUpdate:c&&function(){return Zi(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(hi||!o&&!u)&&e._startAt.revert(Fl),o&&m&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&m&&!p){if(t&&(o=!1),T=cn({overwrite:!1,data:"isFromStart",lazy:o&&!p&&Fi(l),immediateRender:o,stagger:0,parent:g},w),U&&(T[A.prop]=U),Mr(e._startAt=Wt.set(v,T)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(hi?e._startAt.revert(Fl):e._startAt.render(-1,!0)),e._zTime=t,!o)n(e._startAt,Tt,Tt);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&Fi(l)||l&&!m,M=0;M<v.length;M++){if(S=v[M],C=S._gsap||Ku(v)[M]._gsap,e._ptLookup[M]=R={},qu[C.id]&&Sr.length&&zl(),L=y===v?M:y.indexOf(S),A&&(P=new A).init(S,U||w,e,L,y)!==!1&&(e._pt=E=new zi(e._pt,S,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(F){R[F]=E}),P.priority&&(x=1)),!A||U)for(T in w)Ki[T]&&(P=Qp(T,w,e,L,S,y))?P.priority&&(x=1):R[T]=E=sd.call(e,S,T,"get",w[T],L,y,0,r.stringFilter);e._op&&e._op[M]&&e.kill(S,e._op[M]),_&&e._pt&&(Ar=e,Nt.killTweensOf(S,R,e.globalTime(t)),B=!e.parent,Ar=0),e._pt&&l&&(qu[C.id]=1)}x&&rm(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!B,f&&t<=0&&b.render(ln,!0,!0)},Sx=function(e,t,i,r,s,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,h,f,u;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,u=e._targets.length;u--;){if(d=f[u][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return ad=1,e.vars[t]="+=0",od(e,o),ad=0,l?oo(t+" not eligible for reset"):1;c.push(d)}for(u=c.length;u--;)h=c[u],d=h._pt||h,d.s=(r||r===0)&&!s?r:d.s+(r||0)+a*d.c,d.c=i-d.s,h.e&&(h.e=zt(i)+mi(h.e)),h.b&&(h.b=d.s+mi(h.b))},Mx=function(e,t){var i=e[0]?os(e[0]).harness:0,r=i&&i.aliases,s,a,o,l;if(!r)return t;s=ls({},t);for(a in r)if(a in s)for(l=r[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},Tx=function(e,t,i,r){var s=t.ease||r||"power1.inOut",a,o;if(pi(t))o=i[e]||(i[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:s})});else for(a in t)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},_o=function(e,t,i,r,s){return Bt(e)?e.call(t,i,r,s):ti(e)&&~e.indexOf("random(")?ho(e):e},Jp=ju+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",em={};Bi(Jp+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return em[n]=1});var Wt=function(n){fp(e,n);function e(i,r,s,a){var o;typeof r=="number"&&(s.duration=r,r=s,s=null),o=n.call(this,a?r:co(r))||this;var l=o.vars,c=l.duration,d=l.delay,h=l.immediateRender,f=l.stagger,u=l.overwrite,m=l.keyframes,p=l.defaults,v=l.scrollTrigger,g=l.yoyoEase,y=r.parent||Nt,_=(pi(i)||pp(i)?tr(i[0]):"length"in r)?[i]:dn(i),b,w,M,T,E,S,x,C;if(o._targets=_.length?Ku(_):oo("GSAP target "+i+" not found. https://gsap.com",!Yi.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=u,m||f||kl(c)||kl(d)){if(r=o.vars,b=o.timeline=new Ti({data:"nested",defaults:p||{},targets:y&&y.data==="nested"?y.vars.targets:_}),b.kill(),b.parent=b._dp=er(o),b._start=0,f||kl(c)||kl(d)){if(T=_.length,x=f&&kp(f),On(f))for(E in f)~Jp.indexOf(E)&&(C||(C={}),C[E]=f[E]);for(w=0;w<T;w++)M=Vl(r,em),M.stagger=0,g&&(M.yoyoEase=g),C&&ls(M,C),S=_[w],M.duration=+_o(c,er(o),w,S,_),M.delay=(+_o(d,er(o),w,S,_)||0)-o._delay,!f&&T===1&&M.delay&&(o._delay=d=M.delay,o._start+=d,M.delay=0),b.to(S,M,x?x(w,S,_):0),b._ease=lt.none;b.duration()?c=d=0:o.timeline=0}else if(m){co(cn(b.vars.defaults,{ease:"none"})),b._ease=us(m.ease||r.ease||"none");var A=0,P,R,L;if(pi(m))m.forEach(function(U){return b.to(_,U,">")}),b.duration();else{M={};for(E in m)E==="ease"||E==="easeEach"||Tx(E,m[E],M,m.easeEach);for(E in M)for(P=M[E].sort(function(U,B){return U.t-B.t}),A=0,w=0;w<P.length;w++)R=P[w],L={ease:R.e,duration:(R.t-(w?P[w-1].t:0))/100*c},L[E]=R.v,b.to(_,L,A),A+=L.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||o.duration(c=b.duration())}else o.timeline=0;return u===!0&&!Uu&&(Ar=er(o),Nt.killTweensOf(_),Ar=0),kn(y,er(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(h||!c&&!m&&o._start===ii(y._time)&&Fi(h)&&ix(er(o))&&y.data!=="nested")&&(o._tTime=-Tt,o.render(Math.max(0,-d)||0)),v&&Lp(er(o),v),o}var t=e.prototype;return t.render=function(r,s,a){var o=this._time,l=this._tDur,c=this._dur,d=r<0,h=r>l-Tt&&!d?l:r<Tt?0:r,f,u,m,p,v,g,y,_,b;if(!c)rx(this,r,s,a);else if(h!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d){if(f=h,_=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(p*100+r,s,a);if(f=ii(h%p),h===l?(m=this._repeat,f=c):(m=~~(h/p),m&&m===ii(h/p)&&(f=c,m--),f>c&&(f=c)),g=this._yoyo&&m&1,g&&(b=this._yEase,f=c-f),v=ia(this._tTime,p),f===o&&!a&&this._initted&&m===v)return this._tTime=h,this;m!==v&&(_&&this._yEase&&jp(_,g),this.vars.repeatRefresh&&!g&&!this._lock&&this._time!==p&&this._initted&&(this._lock=a=1,this.render(ii(p*m),!0).invalidate()._lock=0))}if(!this._initted){if(Dp(this,d?r:f,a,s,h))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&m!==v))return this;if(c!==this._dur)return this.render(r,s,a)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(b||this._ease)(f/c),this._from&&(this.ratio=y=1-y),f&&!o&&!s&&!m&&(Zi(this,"onStart"),this._tTime!==h))return this;for(u=this._pt;u;)u.r(y,u.d),u=u._next;_&&_.render(r<0?r:_._dur*_._ease(f/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(d&&Zu(this,r,s,a),Zi(this,"onUpdate")),this._repeat&&m!==v&&this.vars.onRepeat&&!s&&this.parent&&Zi(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(d&&!this._onUpdate&&Zu(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Mr(this,1),!s&&!(d&&!o)&&(h||o||g)&&(Zi(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,a,o,l){go||Qi.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||od(this,c),d=this._ease(c/this._dur),Sx(this,r,s,a,o,d,c,l)?this.resetTo(r,s,a,o,1):(Xl(this,0),this.parent||Cp(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?po(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Ar&&Ar.vars.overwrite!==!0)._first||po(this),this.parent&&a!==this.timeline.totalDuration()&&na(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=r?dn(r):o,c=this._ptLookup,d=this._pt,h,f,u,m,p,v,g;if((!s||s==="all")&&ex(o,l))return s==="all"&&(this._pt=0),po(this);for(h=this._op=this._op||[],s!=="all"&&(ti(s)&&(p={},Bi(s,function(y){return p[y]=1}),s=p),s=Mx(o,s)),g=o.length;g--;)if(~l.indexOf(o[g])){f=c[g],s==="all"?(h[g]=s,m=f,u={}):(u=h[g]=h[g]||{},m=s);for(p in m)v=f&&f[p],v&&((!("kill"in v.d)||v.d.kill(p)===!0)&&Hl(this,v,"_pt"),delete f[p]),u!=="all"&&(u[p]=1)}return this._initted&&!this._pt&&d&&po(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return uo(1,arguments)},e.delayedCall=function(r,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(r,s,a){return uo(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,a){return Nt.killTweensOf(r,s,a)},e}(vo);cn(Wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Bi("staggerTo,staggerFrom,staggerFromTo",function(n){Wt[n]=function(){var e=new Ti,t=Ju.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var ld=function(e,t,i){return e[t]=i},tm=function(e,t,i){return e[t](i)},Ex=function(e,t,i,r){return e[t](r.fp,i)},Ax=function(e,t,i){return e.setAttribute(t,i)},cd=function(e,t){return Bt(e[t])?tm:Bu(e[t])&&e.setAttribute?Ax:ld},im=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Cx=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},nm=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},ud=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Px=function(e,t,i,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(e,t,i),s=a},Rx=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Hl(this,t,"_pt"):t.dep||(i=1),t=r;return!i},Lx=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},rm=function(e){for(var t=e._pt,i,r,s,a;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:a)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:a=t,t=i}e._pt=s},zi=function(){function n(t,i,r,s,a,o,l,c,d){this.t=i,this.s=s,this.c=a,this.p=r,this.r=o||im,this.d=l||this,this.set=c||ld,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=Lx,this.m=i,this.mt=s,this.tween=r},n}();Bi(ju+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return $u[n]=1}),ji.TweenMax=ji.TweenLite=Wt,ji.TimelineLite=ji.TimelineMax=Ti,Nt=new Ti({sortChildren:!1,defaults:Js,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Yi.stringFilter=qp;var fs=[],$l={},Dx=[],sm=0,Ix=0,dd=function(e){return($l[e]||Dx).map(function(t){return t()})},fd=function(){var e=Date.now(),t=[];e-sm>2&&(dd("matchMediaInit"),fs.forEach(function(i){var r=i.queries,s=i.conditions,a,o,l,c;for(o in r)a=Nn.matchMedia(r[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(i.revert(),l&&t.push(i))}),dd("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),sm=e,dd("matchMedia"))},am=function(){function n(t,i){this.selector=i&&ed(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Ix++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){Bt(i)&&(s=r,r=i,i=Bt);var a=this,o=function(){var c=Dt,d=a.selector,h;return c&&c!==a&&c.data.push(a),s&&(a.selector=ed(s)),Dt=a,h=r.apply(a,arguments),Bt(h)&&a._r.push(h),Dt=c,a.selector=d,a.isReverted=!1,h};return a.last=o,i===Bt?o(a,function(l){return a.add(null,l)}):i?a[i]=o:o},e.ignore=function(i){var r=Dt;Dt=null,i(this),Dt=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Wt&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var o=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return o.splice(o.indexOf(d),1)}));for(o.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,h){return h.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof Ti?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Wt)&&c.revert&&c.revert(i);s._r.forEach(function(d){return d(i,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),r)for(var a=fs.length;a--;)fs[a].id===this.id&&fs.splice(a,1)},e.revert=function(i){this.kill(i||{})},n}(),Ox=function(){function n(t){this.contexts=[],this.scope=t,Dt&&Dt.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){On(i)||(i={matches:i});var a=new am(0,s||this.scope),o=a.conditions={},l,c,d;Dt&&!a.selector&&(a.selector=Dt.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=i;for(c in i)c==="all"?d=1:(l=Nn.matchMedia(i[c]),l&&(fs.indexOf(a)<0&&fs.push(a),(o[c]=l.matches)&&(d=1),l.addListener?l.addListener(fd):l.addEventListener("change",fd)));return d&&r(a,function(h){return a.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),ql={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return Gp(r)})},timeline:function(e){return new Ti(e)},getTweensOf:function(e,t){return Nt.getTweensOf(e,t)},getProperty:function(e,t,i,r){ti(e)&&(e=dn(e)[0]);var s=os(e||{}).get,a=i?Ep:Tp;return i==="native"&&(i=""),e&&(t?a((Ki[t]&&Ki[t].get||s)(e,t,i,r)):function(o,l,c){return a((Ki[o]&&Ki[o].get||s)(e,o,l,c))})},quickSetter:function(e,t,i){if(e=dn(e),e.length>1){var r=e.map(function(d){return Vi.quickSetter(d,t,i)}),s=r.length;return function(d){for(var h=s;h--;)r[h](d)}}e=e[0]||{};var a=Ki[t],o=os(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(d){var h=new a;ra._pt=0,h.init(e,i?d+i:d,ra,0,[e]),h.render(1,h),ra._pt&&ud(1,ra)}:o.set(e,l);return a?c:function(d){return c(e,l,i?d+i:d,o,1)}},quickTo:function(e,t,i){var r,s=Vi.to(e,ls((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),a=function(l,c,d){return s.resetTo(t,l,c,d)};return a.tween=s,a},isTweening:function(e){return Nt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=us(e.ease,Js.ease)),Ap(Js,e||{})},config:function(e){return Ap(Yi,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!Ki[o]&&!ji[o]&&oo(t+" effect requires "+o+" plugin.")}),Yu[t]=function(o,l,c){return i(dn(o),cn(l||{},s),c)},a&&(Ti.prototype[t]=function(o,l,c){return this.add(Yu[t](o,On(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){lt[e]=us(t)},parseEase:function(e,t){return arguments.length?us(e,t):lt},getById:function(e){return Nt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Ti(e),r,s;for(i.smoothChildTiming=Fi(e.smoothChildTiming),Nt.remove(i),i._dp=0,i._time=i._tTime=Nt._time,r=Nt._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Wt&&r.vars.onComplete===r._targets[0]))&&kn(i,r,r._start-r._delay),r=s;return kn(Nt,i,0),i},context:function(e,t){return e?new am(e,t):Dt},matchMedia:function(e){return new Ox(e)},matchMediaRefresh:function(){return fs.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||fd()},addEventListener:function(e,t){var i=$l[e]||($l[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=$l[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:fx,wrapYoyo:hx,distribute:kp,random:Fp,snap:Up,normalize:dx,getUnit:mi,clamp:ox,splitColor:Wp,toArray:dn,selector:ed,mapRange:zp,pipe:cx,unitize:ux,interpolate:px,shuffle:Np},install:yp,effects:Yu,ticker:Qi,updateRoot:Ti.updateRoot,plugins:Ki,globalTimeline:Nt,core:{PropTween:zi,globals:xp,Tween:Wt,Timeline:Ti,Animation:vo,getCache:os,_removeLinkedListItem:Hl,reverting:function(){return hi},context:function(e){return e&&Dt&&(Dt.data.push(e),e._ctx=Dt),Dt},suppressOverwrites:function(e){return Uu=e}}};Bi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return ql[n]=Wt[n]}),Qi.add(Ti.updateRoot),ra=ql.to({},{duration:0});var Nx=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},kx=function(e,t){var i=e._targets,r,s,a;for(r in t)for(s=i.length;s--;)a=e._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=Nx(a,r)),a&&a.modifier&&a.modifier(t[r],e,i[s],r))},hd=function(e,t){return{name:e,rawVars:1,init:function(r,s,a){a._onInit=function(o){var l,c;if(ti(s)&&(l={},Bi(s,function(d){return l[d]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}kx(o,s)}}}},Vi=ql.registerPlugin({name:"attr",init:function(e,t,i,r,s){var a,o,l;this.tween=i;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],r,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)hi?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},hd("roundProps",td),hd("modifiers"),hd("snap",Up))||ql;Wt.version=Ti.version=Vi.version="3.12.5",_p=1,zu()&&sa(),lt.Power0,lt.Power1,lt.Power2,lt.Power3,lt.Power4,lt.Linear,lt.Quad,lt.Cubic,lt.Quart,lt.Quint,lt.Strong,lt.Elastic,lt.Back,lt.SteppedEase,lt.Bounce,lt.Sine,lt.Expo,lt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var om,Cr,aa,pd,hs,lm,md,Ux=function(){return typeof window<"u"},ir={},ps=180/Math.PI,oa=Math.PI/180,la=Math.atan2,cm=1e8,gd=/([A-Z])/g,Fx=/(left|right|width|margin|padding|x)/i,Bx=/[\s,\(]\S/,Un={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},vd=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},zx=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Vx=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Hx=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},um=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},dm=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Gx=function(e,t,i){return e.style[t]=i},Wx=function(e,t,i){return e.style.setProperty(t,i)},Xx=function(e,t,i){return e._gsap[t]=i},$x=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},qx=function(e,t,i,r,s){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},Yx=function(e,t,i,r,s){var a=e._gsap;a[t]=i,a.renderTransform(s,a)},kt="transform",Hi=kt+"Origin",jx=function n(e,t){var i=this,r=this.target,s=r.style,a=r._gsap;if(e in ir&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Un[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=nr(r,o)}):this.tfm[e]=a.x?a[e]:nr(r,e),e===Hi&&(this.tfm.zOrigin=a.zOrigin);else return Un.transform.split(",").forEach(function(o){return n.call(i,o,t)});if(this.props.indexOf(kt)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Hi,t,"")),e=kt}(s||t)&&this.props.push(e,t,s[e])},fm=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Kx=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(gd,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=md(),(!s||!s.isStart)&&!i[kt]&&(fm(i),r.zOrigin&&i[Hi]&&(i[Hi]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},hm=function(e,t){var i={target:e,props:[],revert:Kx,save:jx};return e._gsap||Vi.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},pm,_d=function(e,t){var i=Cr.createElementNS?Cr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Cr.createElement(e);return i&&i.style?i:Cr.createElement(e)},Fn=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(gd,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,ca(t)||t,1)||""},mm="O,Moz,ms,Ms,Webkit".split(","),ca=function(e,t,i){var r=t||hs,s=r.style,a=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(mm[a]+e in s););return a<0?null:(a===3?"ms":a>=0?mm[a]:"")+e},yd=function(){Ux()&&window.document&&(om=window,Cr=om.document,aa=Cr.documentElement,hs=_d("div")||{style:{}},_d("div"),kt=ca(kt),Hi=kt+"Origin",hs.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",pm=!!ca("perspective"),md=Vi.core.reverting,pd=1)},xd=function n(e){var t=_d("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,a;if(aa.appendChild(t),t.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(a=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),aa.removeChild(t),this.style.cssText=s,a},gm=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},vm=function(e){var t;try{t=e.getBBox()}catch{t=xd.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===xd||(t=xd.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+gm(e,["x","cx","x1"])||0,y:+gm(e,["y","cy","y1"])||0,width:0,height:0}:t},_m=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&vm(e))},ms=function(e,t){if(t){var i=e.style,r;t in ir&&t!==Hi&&(t=kt),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(gd,"-$1").toLowerCase())):i.removeAttribute(t)}},Pr=function(e,t,i,r,s,a){var o=new zi(e._pt,t,i,0,1,a?dm:um);return e._pt=o,o.b=r,o.e=s,e._props.push(i),o},ym={deg:1,rad:1,turn:1},Zx={grid:1,flex:1},Rr=function n(e,t,i,r){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=hs.style,l=Fx.test(t),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(l?"Width":"Height"),h=100,f=r==="px",u=r==="%",m,p,v,g;if(r===a||!s||ym[r]||ym[a])return s;if(a!=="px"&&!f&&(s=n(e,t,i,"px")),g=e.getCTM&&_m(e),(u||a==="%")&&(ir[t]||~t.indexOf("adius")))return m=g?e.getBBox()[l?"width":"height"]:e[d],zt(u?s/m*h:s/100*m);if(o[l?"width":"height"]=h+(f?a:r),p=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,g&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Cr||!p.appendChild)&&(p=Cr.body),v=p._gsap,v&&u&&v.width&&l&&v.time===Qi.time&&!v.uncache)return zt(s/v.width*h);if(u&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=h+r,m=e[d],y?e.style[t]=y:ms(e,t)}else(u||a==="%")&&!Zx[Fn(p,"display")]&&(o.position=Fn(e,"position")),p===e&&(o.position="static"),p.appendChild(hs),m=hs[d],p.removeChild(hs),o.position="absolute";return l&&u&&(v=os(p),v.time=Qi.time,v.width=p[d]),zt(f?m*s/h:m&&s?h/m*s:0)},nr=function(e,t,i,r){var s;return pd||yd(),t in Un&&t!=="transform"&&(t=Un[t],~t.indexOf(",")&&(t=t.split(",")[0])),ir[t]&&t!=="transform"?(s=xo(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:jl(Fn(e,Hi))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Yl[t]&&Yl[t](e,t,i)||Fn(e,t)||Sp(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Rr(e,t,s,i)+i:s},Qx=function(e,t,i,r){if(!i||i==="none"){var s=ca(t,e,1),a=s&&Fn(e,s,1);a&&a!==i?(t=s,i=a):t==="borderColor"&&(i=Fn(e,"borderTopColor"))}var o=new zi(this._pt,e.style,t,0,1,nm),l=0,c=0,d,h,f,u,m,p,v,g,y,_,b,w;if(o.b=i,o.e=r,i+="",r+="",r==="auto"&&(p=e.style[t],e.style[t]=r,r=Fn(e,t)||r,p?e.style[t]=p:ms(e,t)),d=[i,r],qp(d),i=d[0],r=d[1],f=i.match(ea)||[],w=r.match(ea)||[],w.length){for(;h=ea.exec(r);)v=h[0],y=r.substring(l,h.index),m?m=(m+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(m=1),v!==(p=f[c++]||"")&&(u=parseFloat(p)||0,b=p.substr((u+"").length),v.charAt(1)==="="&&(v=ta(u,v)+b),g=parseFloat(v),_=v.substr((g+"").length),l=ea.lastIndex-_.length,_||(_=_||Yi.units[t]||b,l===r.length&&(r+=_,o.e+=_)),b!==_&&(u=Rr(e,t,p,_)||0),o._pt={_next:o._pt,p:y||c===1?y:",",s:u,c:g-u,m:m&&m<4||t==="zIndex"?Math.round:0});o.c=l<r.length?r.substring(l,r.length):""}else o.r=t==="display"&&r==="none"?dm:um;return gp.test(r)&&(o.e=0),this._pt=o,o},xm={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Jx=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=xm[i]||i,t[1]=xm[r]||r,t.join(" ")},eb=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,a=i._gsap,o,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],ir[o]&&(l=1,o=o==="transformOrigin"?Hi:kt),ms(i,o);l&&(ms(i,kt),a&&(a.svg&&i.removeAttribute("transform"),xo(i,1),a.uncache=1,fm(r)))}},Yl={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var a=e._pt=new zi(e._pt,t,i,0,0,eb);return a.u=r,a.pr=-10,a.tween=s,e._props.push(i),1}}},yo=[1,0,0,1,0,0],bm={},wm=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Sm=function(e){var t=Fn(e,kt);return wm(t)?yo:t.substr(7).match(mp).map(zt)},bd=function(e,t){var i=e._gsap||os(e),r=e.style,s=Sm(e),a,o,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?yo:s):(s===yo&&!e.offsetParent&&e!==aa&&!i.svg&&(l=r.display,r.display="block",a=e.parentNode,(!a||!e.offsetParent)&&(c=1,o=e.nextElementSibling,aa.appendChild(e)),s=Sm(e),l?r.display=l:ms(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):aa.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},wd=function(e,t,i,r,s,a){var o=e._gsap,l=s||bd(e,!0),c=o.xOrigin||0,d=o.yOrigin||0,h=o.xOffset||0,f=o.yOffset||0,u=l[0],m=l[1],p=l[2],v=l[3],g=l[4],y=l[5],_=t.split(" "),b=parseFloat(_[0])||0,w=parseFloat(_[1])||0,M,T,E,S;i?l!==yo&&(T=u*v-m*p)&&(E=b*(v/T)+w*(-p/T)+(p*y-v*g)/T,S=b*(-m/T)+w*(u/T)-(u*y-m*g)/T,b=E,w=S):(M=vm(e),b=M.x+(~_[0].indexOf("%")?b/100*M.width:b),w=M.y+(~(_[1]||_[0]).indexOf("%")?w/100*M.height:w)),r||r!==!1&&o.smooth?(g=b-c,y=w-d,o.xOffset=h+(g*u+y*p)-g,o.yOffset=f+(g*m+y*v)-y):o.xOffset=o.yOffset=0,o.xOrigin=b,o.yOrigin=w,o.smooth=!!r,o.origin=t,o.originIsAbsolute=!!i,e.style[Hi]="0px 0px",a&&(Pr(a,o,"xOrigin",c,b),Pr(a,o,"yOrigin",d,w),Pr(a,o,"xOffset",h,o.xOffset),Pr(a,o,"yOffset",f,o.yOffset)),e.setAttribute("data-svg-origin",b+" "+w)},xo=function(e,t){var i=e._gsap||new Zp(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=Fn(e,Hi)||"0",d,h,f,u,m,p,v,g,y,_,b,w,M,T,E,S,x,C,A,P,R,L,U,B,F,G,O,ee,se,we,X,J;return d=h=f=p=v=g=y=_=b=0,u=m=1,i.svg=!!(e.getCTM&&_m(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[kt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[kt]!=="none"?l[kt]:"")),r.scale=r.rotate=r.translate="none"),T=bd(e,i.svg),i.svg&&(i.uncache?(F=e.getBBox(),c=i.xOrigin-F.x+"px "+(i.yOrigin-F.y)+"px",B=""):B=!t&&e.getAttribute("data-svg-origin"),wd(e,B||c,!!B||i.originIsAbsolute,i.smooth!==!1,T)),w=i.xOrigin||0,M=i.yOrigin||0,T!==yo&&(C=T[0],A=T[1],P=T[2],R=T[3],d=L=T[4],h=U=T[5],T.length===6?(u=Math.sqrt(C*C+A*A),m=Math.sqrt(R*R+P*P),p=C||A?la(A,C)*ps:0,y=P||R?la(P,R)*ps+p:0,y&&(m*=Math.abs(Math.cos(y*oa))),i.svg&&(d-=w-(w*C+M*P),h-=M-(w*A+M*R))):(J=T[6],we=T[7],O=T[8],ee=T[9],se=T[10],X=T[11],d=T[12],h=T[13],f=T[14],E=la(J,se),v=E*ps,E&&(S=Math.cos(-E),x=Math.sin(-E),B=L*S+O*x,F=U*S+ee*x,G=J*S+se*x,O=L*-x+O*S,ee=U*-x+ee*S,se=J*-x+se*S,X=we*-x+X*S,L=B,U=F,J=G),E=la(-P,se),g=E*ps,E&&(S=Math.cos(-E),x=Math.sin(-E),B=C*S-O*x,F=A*S-ee*x,G=P*S-se*x,X=R*x+X*S,C=B,A=F,P=G),E=la(A,C),p=E*ps,E&&(S=Math.cos(E),x=Math.sin(E),B=C*S+A*x,F=L*S+U*x,A=A*S-C*x,U=U*S-L*x,C=B,L=F),v&&Math.abs(v)+Math.abs(p)>359.9&&(v=p=0,g=180-g),u=zt(Math.sqrt(C*C+A*A+P*P)),m=zt(Math.sqrt(U*U+J*J)),E=la(L,U),y=Math.abs(E)>2e-4?E*ps:0,b=X?1/(X<0?-X:X):0),i.svg&&(B=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!wm(Fn(e,kt)),B&&e.setAttribute("transform",B))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(u*=-1,y+=p<=0?180:-180,p+=p<=0?180:-180):(m*=-1,y+=y<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=f+a,i.scaleX=zt(u),i.scaleY=zt(m),i.rotation=zt(p)+o,i.rotationX=zt(v)+o,i.rotationY=zt(g)+o,i.skewX=y+o,i.skewY=_+o,i.transformPerspective=b+a,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[Hi]=jl(c)),i.xOffset=i.yOffset=0,i.force3D=Yi.force3D,i.renderTransform=i.svg?ib:pm?Mm:tb,i.uncache=0,i},jl=function(e){return(e=e.split(" "))[0]+" "+e[1]},Sd=function(e,t,i){var r=mi(t);return zt(parseFloat(t)+parseFloat(Rr(e,"x",i+"px",r)))+r},tb=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Mm(e,t)},gs="0deg",bo="0px",vs=") ",Mm=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.z,c=i.rotation,d=i.rotationY,h=i.rotationX,f=i.skewX,u=i.skewY,m=i.scaleX,p=i.scaleY,v=i.transformPerspective,g=i.force3D,y=i.target,_=i.zOrigin,b="",w=g==="auto"&&e&&e!==1||g===!0;if(_&&(h!==gs||d!==gs)){var M=parseFloat(d)*oa,T=Math.sin(M),E=Math.cos(M),S;M=parseFloat(h)*oa,S=Math.cos(M),a=Sd(y,a,T*S*-_),o=Sd(y,o,-Math.sin(M)*-_),l=Sd(y,l,E*S*-_+_)}v!==bo&&(b+="perspective("+v+vs),(r||s)&&(b+="translate("+r+"%, "+s+"%) "),(w||a!==bo||o!==bo||l!==bo)&&(b+=l!==bo||w?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+vs),c!==gs&&(b+="rotate("+c+vs),d!==gs&&(b+="rotateY("+d+vs),h!==gs&&(b+="rotateX("+h+vs),(f!==gs||u!==gs)&&(b+="skew("+f+", "+u+vs),(m!==1||p!==1)&&(b+="scale("+m+", "+p+vs),y.style[kt]=b||"translate(0, 0)"},ib=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.rotation,c=i.skewX,d=i.skewY,h=i.scaleX,f=i.scaleY,u=i.target,m=i.xOrigin,p=i.yOrigin,v=i.xOffset,g=i.yOffset,y=i.forceCSS,_=parseFloat(a),b=parseFloat(o),w,M,T,E,S;l=parseFloat(l),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,l+=d),l||c?(l*=oa,c*=oa,w=Math.cos(l)*h,M=Math.sin(l)*h,T=Math.sin(l-c)*-f,E=Math.cos(l-c)*f,c&&(d*=oa,S=Math.tan(c-d),S=Math.sqrt(1+S*S),T*=S,E*=S,d&&(S=Math.tan(d),S=Math.sqrt(1+S*S),w*=S,M*=S)),w=zt(w),M=zt(M),T=zt(T),E=zt(E)):(w=h,E=f,M=T=0),(_&&!~(a+"").indexOf("px")||b&&!~(o+"").indexOf("px"))&&(_=Rr(u,"x",a,"px"),b=Rr(u,"y",o,"px")),(m||p||v||g)&&(_=zt(_+m-(m*w+p*T)+v),b=zt(b+p-(m*M+p*E)+g)),(r||s)&&(S=u.getBBox(),_=zt(_+r/100*S.width),b=zt(b+s/100*S.height)),S="matrix("+w+","+M+","+T+","+E+","+_+","+b+")",u.setAttribute("transform",S),y&&(u.style[kt]=S)},nb=function(e,t,i,r,s){var a=360,o=ti(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?ps:1),c=l-r,d=r+c+"deg",h,f;return o&&(h=s.split("_")[1],h==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),h==="cw"&&c<0?c=(c+a*cm)%a-~~(c/a)*a:h==="ccw"&&c>0&&(c=(c-a*cm)%a-~~(c/a)*a)),e._pt=f=new zi(e._pt,t,i,r,c,zx),f.e=d,f.u="deg",e._props.push(i),f},Tm=function(e,t){for(var i in t)e[i]=t[i];return e},rb=function(e,t,i){var r=Tm({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,l,c,d,h,f,u,m;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),a[kt]=t,o=xo(i,1),ms(i,kt),i.setAttribute("transform",c)):(c=getComputedStyle(i)[kt],a[kt]=t,o=xo(i,1),a[kt]=c);for(l in ir)c=r[l],d=o[l],c!==d&&s.indexOf(l)<0&&(u=mi(c),m=mi(d),h=u!==m?Rr(i,l,c,m):parseFloat(c),f=parseFloat(d),e._pt=new zi(e._pt,o,l,h,f-h,vd),e._pt.u=m||0,e._props.push(l));Tm(o,r)};Bi("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",a=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(o){return e<2?n+o:"border"+o+n});Yl[e>1?"border"+n:n]=function(o,l,c,d,h){var f,u;if(arguments.length<4)return f=a.map(function(m){return nr(o,m,c)}),u=f.join(" "),u.split(f[0]).length===5?f[0]:u;f=(d+"").split(" "),u={},a.forEach(function(m,p){return u[m]=f[p]=f[p]||f[(p-1)/2|0]}),o.init(l,u,h)}});var Em={name:"css",register:yd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var a=this._props,o=e.style,l=i.vars.startAt,c,d,h,f,u,m,p,v,g,y,_,b,w,M,T,E;pd||yd(),this.styles=this.styles||hm(e),E=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(d=t[p],!(Ki[p]&&Qp(p,t,i,r,e,s)))){if(u=typeof d,m=Yl[p],u==="function"&&(d=d.call(i,r,e,s),u=typeof d),u==="string"&&~d.indexOf("random(")&&(d=ho(d)),m)m(this,e,p,d,i)&&(T=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),d+="",Er.lastIndex=0,Er.test(c)||(v=mi(c),g=mi(d)),g?v!==g&&(c=Rr(e,p,c,g)+g):v&&(d+=v),this.add(o,"setProperty",c,d,r,s,0,0,p),a.push(p),E.push(p,0,o[p]);else if(u!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(i,r,e,s):l[p],ti(c)&&~c.indexOf("random(")&&(c=ho(c)),mi(c+"")||c==="auto"||(c+=Yi.units[p]||mi(nr(e,p))||""),(c+"").charAt(1)==="="&&(c=nr(e,p))):c=nr(e,p),f=parseFloat(c),y=u==="string"&&d.charAt(1)==="="&&d.substr(0,2),y&&(d=d.substr(2)),h=parseFloat(d),p in Un&&(p==="autoAlpha"&&(f===1&&nr(e,"visibility")==="hidden"&&h&&(f=0),E.push("visibility",0,o.visibility),Pr(this,o,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Un[p],~p.indexOf(",")&&(p=p.split(",")[0]))),_=p in ir,_){if(this.styles.save(p),b||(w=e._gsap,w.renderTransform&&!t.parseTransform||xo(e,t.parseTransform),M=t.smoothOrigin!==!1&&w.smooth,b=this._pt=new zi(this._pt,o,kt,0,1,w.renderTransform,w,0,-1),b.dep=1),p==="scale")this._pt=new zi(this._pt,w,"scaleY",w.scaleY,(y?ta(w.scaleY,y+h):h)-w.scaleY||0,vd),this._pt.u=0,a.push("scaleY",p),p+="X";else if(p==="transformOrigin"){E.push(Hi,0,o[Hi]),d=Jx(d),w.svg?wd(e,d,0,M,0,this):(g=parseFloat(d.split(" ")[2])||0,g!==w.zOrigin&&Pr(this,w,"zOrigin",w.zOrigin,g),Pr(this,o,p,jl(c),jl(d)));continue}else if(p==="svgOrigin"){wd(e,d,1,M,0,this);continue}else if(p in bm){nb(this,w,p,f,y?ta(f,y+d):d);continue}else if(p==="smoothOrigin"){Pr(this,w,"smooth",w.smooth,d);continue}else if(p==="force3D"){w[p]=d;continue}else if(p==="transform"){rb(this,d,e);continue}}else p in o||(p=ca(p)||p);if(_||(h||h===0)&&(f||f===0)&&!Bx.test(d)&&p in o)v=(c+"").substr((f+"").length),h||(h=0),g=mi(d)||(p in Yi.units?Yi.units[p]:v),v!==g&&(f=Rr(e,p,c,g)),this._pt=new zi(this._pt,_?w:o,p,f,(y?ta(f,y+h):h)-f,!_&&(g==="px"||p==="zIndex")&&t.autoRound!==!1?Hx:vd),this._pt.u=g||0,v!==g&&g!=="%"&&(this._pt.b=c,this._pt.r=Vx);else if(p in o)Qx.call(this,e,p,c,y?y+d:d);else if(p in e)this.add(e,p,c||e[p],y?y+d:d,r,s);else if(p!=="parseTransform"){Xu(p,d);continue}_||(p in o?E.push(p,0,o[p]):E.push(p,1,c||e[p])),a.push(p)}}T&&rm(this)},render:function(e,t){if(t.tween._time||!md())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:nr,aliases:Un,getSetter:function(e,t,i){var r=Un[t];return r&&r.indexOf(",")<0&&(t=r),t in ir&&t!==Hi&&(e._gsap.x||nr(e,"x"))?i&&lm===i?t==="scale"?$x:Xx:(lm=i||{})&&(t==="scale"?qx:Yx):e.style&&!Bu(e.style[t])?Gx:~t.indexOf("-")?Wx:cd(e,t)},core:{_removeProperty:ms,_getMatrix:bd}};Vi.utils.checkPrefix=ca,Vi.core.getStyleSaver=hm,function(n,e,t,i){var r=Bi(n+","+e+","+t,function(s){ir[s]=1});Bi(e,function(s){Yi.units[s]="deg",bm[s]=1}),Un[r[13]]=n+","+e,Bi(i,function(s){var a=s.split(":");Un[a[1]]=r[a[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Bi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Yi.units[n]="px"}),Vi.registerPlugin(Em);var Ce=Vi.registerPlugin(Em)||Vi;Ce.core.Tween,function(){function n(){for(var i=arguments.length,r=0;r<i;r++){var s=r<0||arguments.length<=r?void 0:arguments[r];s.nodeType===1||s.nodeType===11?this.appendChild(s):this.appendChild(document.createTextNode(String(s)))}}function e(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function t(){for(var i=this.parentNode,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=s.length;if(i)for(o||i.removeChild(this);o--;){var l=s[o];typeof l!="object"?l=this.ownerDocument.createTextNode(l):l.parentNode&&l.parentNode.removeChild(l),o?i.insertBefore(this.previousSibling,l):i.replaceChild(l,this)}}typeof Element<"u"&&(Element.prototype.append||(Element.prototype.append=n,DocumentFragment.prototype.append=n),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=e,DocumentFragment.prototype.replaceChildren=e),Element.prototype.replaceWith||(Element.prototype.replaceWith=t,DocumentFragment.prototype.replaceWith=t))}();function sb(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Am(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Cm(n,e,t){return e&&Am(n.prototype,e),t&&Am(n,t),n}function ab(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Rm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pm(Object(t),!0).forEach(function(i){ab(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pm(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Lm(n,e){return lb(n)||ub(n,e)||Dm(n,e)||fb()}function Ei(n){return ob(n)||cb(n)||Dm(n)||db()}function ob(n){if(Array.isArray(n))return Md(n)}function lb(n){if(Array.isArray(n))return n}function cb(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function ub(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],i=!0,r=!1,s=void 0;try{for(var a=n[Symbol.iterator](),o;!(i=(o=a.next()).done)&&(t.push(o.value),!(e&&t.length===e));i=!0);}catch(l){r=!0,s=l}finally{try{!i&&a.return!=null&&a.return()}finally{if(r)throw s}}return t}}function Dm(n,e){if(n){if(typeof n=="string")return Md(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Md(n,e)}}function Md(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function db(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(n,e){return Object.getOwnPropertyNames(Object(n)).reduce(function(t,i){var r=Object.getOwnPropertyDescriptor(Object(n),i),s=Object.getOwnPropertyDescriptor(Object(e),i);return Object.defineProperty(t,i,s||r)},{})}function wo(n){return typeof n=="string"}function Td(n){return Array.isArray(n)}function Kl(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=_s(n),t;return e.types!==void 0?t=e.types:e.split!==void 0&&(t=e.split),t!==void 0&&(e.types=(wo(t)||Td(t)?String(t):"").split(",").map(function(i){return String(i).trim()}).filter(function(i){return/((line)|(word)|(char))/i.test(i)})),(e.absolute||e.position)&&(e.absolute=e.absolute||/absolute/.test(n.position)),e}function Ed(n){var e=wo(n)||Td(n)?String(n):"";return{none:!e,lines:/line/i.test(e),words:/word/i.test(e),chars:/char/i.test(e)}}function Zl(n){return n!==null&&typeof n=="object"}function hb(n){return Zl(n)&&/^(1|3|11)$/.test(n.nodeType)}function pb(n){return typeof n=="number"&&n>-1&&n%1===0}function mb(n){return Zl(n)&&pb(n.length)}function ys(n){return Td(n)?n:n==null?[]:mb(n)?Array.prototype.slice.call(n):[n]}function Im(n){var e=n;return wo(n)&&(/^(#[a-z]\w+)$/.test(n.trim())?e=document.getElementById(n.trim().slice(1)):e=document.querySelectorAll(n)),ys(e).reduce(function(t,i){return[].concat(Ei(t),Ei(ys(i).filter(hb)))},[])}var gb=Object.entries,Ql="_splittype",wn={},vb=0;function Bn(n,e,t){if(!Zl(n))return console.warn("[data.set] owner is not an object"),null;var i=n[Ql]||(n[Ql]=++vb),r=wn[i]||(wn[i]={});return t===void 0?e&&Object.getPrototypeOf(e)===Object.prototype&&(wn[i]=Rm(Rm({},r),e)):e!==void 0&&(r[e]=t),t}function xs(n,e){var t=Zl(n)?n[Ql]:null,i=t&&wn[t]||{};return e===void 0?i:i[e]}function Om(n){var e=n&&n[Ql];e&&(delete n[e],delete wn[e])}function _b(){Object.keys(wn).forEach(function(n){delete wn[n]})}function yb(){gb(wn).forEach(function(n){var e=Lm(n,2),t=e[0],i=e[1],r=i.isRoot,s=i.isSplit;(!r||!s)&&(wn[t]=null,delete wn[t])})}function xb(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",t=n?String(n):"";return t.trim().replace(/\s+/g," ").split(e)}var Ad="\\ud800-\\udfff",Nm="\\u0300-\\u036f\\ufe20-\\ufe23",km="\\u20d0-\\u20f0",Um="\\ufe0e\\ufe0f",bb="[".concat(Ad,"]"),Cd="[".concat(Nm).concat(km,"]"),Pd="\\ud83c[\\udffb-\\udfff]",wb="(?:".concat(Cd,"|").concat(Pd,")"),Fm="[^".concat(Ad,"]"),Bm="(?:\\ud83c[\\udde6-\\uddff]){2}",zm="[\\ud800-\\udbff][\\udc00-\\udfff]",Vm="\\u200d",Hm="".concat(wb,"?"),Gm="[".concat(Um,"]?"),Sb="(?:"+Vm+"(?:"+[Fm,Bm,zm].join("|")+")"+Gm+Hm+")*",Mb=Gm+Hm+Sb,Tb="(?:".concat(["".concat(Fm).concat(Cd,"?"),Cd,Bm,zm,bb].join("|"),`
)`),Eb=RegExp("".concat(Pd,"(?=").concat(Pd,")|").concat(Tb).concat(Mb),"g"),Ab=[Vm,Ad,Nm,km,Um],Cb=RegExp("[".concat(Ab.join(""),"]"));function Pb(n){return n.split("")}function Wm(n){return Cb.test(n)}function Rb(n){return n.match(Eb)||[]}function Lb(n){return Wm(n)?Rb(n):Pb(n)}function Db(n){return n==null?"":String(n)}function Ib(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return n=Db(n),n&&wo(n)&&!e&&Wm(n)?Lb(n):n.split(e)}function Rd(n,e){var t=document.createElement(n);return e&&Object.keys(e).forEach(function(i){var r=e[i],s=wo(r)?r.trim():r;s===null||s===""||(i==="children"?t.append.apply(t,Ei(ys(s))):t.setAttribute(i,s))}),t}var Ld={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function Ob(n,e){e=_s(Ld,e);var t=Ed(e.types),i=e.tagName,r=n.nodeValue,s=document.createDocumentFragment(),a=[],o=[];return/^\s/.test(r)&&s.append(" "),a=xb(r).reduce(function(l,c,d,h){var f,u;return t.chars&&(u=Ib(c).map(function(m){var p=Rd(i,{class:"".concat(e.splitClass," ").concat(e.charClass),style:"display: inline-block;",children:m});return Bn(p,"isChar",!0),o=[].concat(Ei(o),[p]),p})),t.words||t.lines?(f=Rd(i,{class:"".concat(e.wordClass," ").concat(e.splitClass),style:"display: inline-block; ".concat(t.words&&e.absolute?"position: relative;":""),children:t.chars?u:c}),Bn(f,{isWord:!0,isWordStart:!0,isWordEnd:!0}),s.appendChild(f)):u.forEach(function(m){s.appendChild(m)}),d<h.length-1&&s.append(" "),t.words?l.concat(f):l},[]),/\s$/.test(r)&&s.append(" "),n.replaceWith(s),{words:a,chars:o}}function Xm(n,e){var t=n.nodeType,i={words:[],chars:[]};if(!/(1|3|11)/.test(t))return i;if(t===3&&/\S/.test(n.nodeValue))return Ob(n,e);var r=ys(n.childNodes);if(r.length&&(Bn(n,"isSplit",!0),!xs(n).isRoot)){n.style.display="inline-block",n.style.position="relative";var s=n.nextSibling,a=n.previousSibling,o=n.textContent||"",l=s?s.textContent:" ",c=a?a.textContent:" ";Bn(n,{isWordEnd:/\s$/.test(o)||/^\s/.test(l),isWordStart:/^\s/.test(o)||/\s$/.test(c)})}return r.reduce(function(d,h){var f=Xm(h,e),u=f.words,m=f.chars;return{words:[].concat(Ei(d.words),Ei(u)),chars:[].concat(Ei(d.chars),Ei(m))}},i)}function Nb(n,e,t,i){if(!t.absolute)return{top:e?n.offsetTop:null};var r=n.offsetParent,s=Lm(i,2),a=s[0],o=s[1],l=0,c=0;if(r&&r!==document.body){var d=r.getBoundingClientRect();l=d.x+a,c=d.y+o}var h=n.getBoundingClientRect(),f=h.width,u=h.height,m=h.x,p=h.y,v=p+o-c,g=m+a-l;return{width:f,height:u,top:v,left:g}}function $m(n){xs(n).isWord?(Om(n),n.replaceWith.apply(n,Ei(n.childNodes))):ys(n.children).forEach(function(e){return $m(e)})}var kb=function(){return document.createDocumentFragment()};function Ub(n,e,t){var i=Ed(e.types),r=e.tagName,s=n.getElementsByTagName("*"),a=[],o=[],l=null,c,d,h,f=[],u=n.parentElement,m=n.nextElementSibling,p=kb(),v=window.getComputedStyle(n),g=v.textAlign,y=parseFloat(v.fontSize),_=y*.2;return e.absolute&&(h={left:n.offsetLeft,top:n.offsetTop,width:n.offsetWidth},d=n.offsetWidth,c=n.offsetHeight,Bn(n,{cssWidth:n.style.width,cssHeight:n.style.height})),ys(s).forEach(function(b){var w=b.parentElement===n,M=Nb(b,w,e,t),T=M.width,E=M.height,S=M.top,x=M.left;/^br$/i.test(b.nodeName)||(i.lines&&w&&((l===null||S-l>=_)&&(l=S,a.push(o=[])),o.push(b)),e.absolute&&Bn(b,{top:S,left:x,width:T,height:E}))}),u&&u.removeChild(n),i.lines&&(f=a.map(function(b){var w=Rd(r,{class:"".concat(e.splitClass," ").concat(e.lineClass),style:"display: block; text-align: ".concat(g,"; width: 100%;")});Bn(w,"isLine",!0);var M={height:0,top:1e4};return p.appendChild(w),b.forEach(function(T,E,S){var x=xs(T),C=x.isWordEnd,A=x.top,P=x.height,R=S[E+1];M.height=Math.max(M.height,P),M.top=Math.min(M.top,A),w.appendChild(T),C&&xs(R).isWordStart&&w.append(" ")}),e.absolute&&Bn(w,{height:M.height,top:M.top}),w}),i.words||$m(p),n.replaceChildren(p)),e.absolute&&(n.style.width="".concat(n.style.width||d,"px"),n.style.height="".concat(c,"px"),ys(s).forEach(function(b){var w=xs(b),M=w.isLine,T=w.top,E=w.left,S=w.width,x=w.height,C=xs(b.parentElement),A=!M&&C.isLine;b.style.top="".concat(A?T-C.top:T,"px"),b.style.left=M?"".concat(h.left,"px"):"".concat(E-(A?h.left:0),"px"),b.style.height="".concat(x,"px"),b.style.width=M?"".concat(h.width,"px"):"".concat(S,"px"),b.style.position="absolute"})),u&&(m?u.insertBefore(n,m):u.appendChild(n)),f}var ua=_s(Ld,{}),So=function(){Cm(n,null,[{key:"clearData",value:function(){_b()}},{key:"setDefaults",value:function(t){return ua=_s(ua,Kl(t)),Ld}},{key:"revert",value:function(t){Im(t).forEach(function(i){var r=xs(i),s=r.isSplit,a=r.html,o=r.cssWidth,l=r.cssHeight;s&&(i.innerHTML=a,i.style.width=o||"",i.style.height=l||"",Om(i))})}},{key:"create",value:function(t,i){return new n(t,i)}},{key:"data",get:function(){return wn}},{key:"defaults",get:function(){return ua},set:function(t){ua=_s(ua,Kl(t))}}]);function n(e,t){sb(this,n),this.isSplit=!1,this.settings=_s(ua,Kl(t)),this.elements=Im(e),this.split()}return Cm(n,[{key:"split",value:function(t){var i=this;this.revert(),this.elements.forEach(function(a){Bn(a,"html",a.innerHTML)}),this.lines=[],this.words=[],this.chars=[];var r=[window.pageXOffset,window.pageYOffset];t!==void 0&&(this.settings=_s(this.settings,Kl(t)));var s=Ed(this.settings.types);s.none||(this.elements.forEach(function(a){Bn(a,"isRoot",!0);var o=Xm(a,i.settings),l=o.words,c=o.chars;i.words=[].concat(Ei(i.words),Ei(l)),i.chars=[].concat(Ei(i.chars),Ei(c))}),this.elements.forEach(function(a){if(s.lines||i.settings.absolute){var o=Ub(a,i.settings,r);i.lines=[].concat(Ei(i.lines),Ei(o))}}),this.isSplit=!0,window.scrollTo(r[0],r[1]),yb())}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),n.revert(this.elements)}}]),n}();function Jl(n,e="words"){const t=new So(n,{types:e});switch(e){case"chars":return Mo(t.words,"word"),Mo(t.chars,"char"),ec(n,e),t.chars;case"words":return Mo(t.words,"word"),ec(n,e),t.words;case"lines":return Mo(t.lines,"line"),ec(n,e),t.lines;default:return Mo(t.words,"word"),ec(n,e),t.words}}function Mo(n,e){n.forEach(t=>{const i=document.createElement("div");i.classList.add(e),i.style.display=e==="line"?"block":"inline-block",t.parentNode.insertBefore(i,t),i.appendChild(t)})}function ec(n,e){const t=document.createElement("style");let i="";e==="lines"?i=`
      [data-split-type="lines"] .line {
        overflow: hidden;
      }
    `:e==="words"?i=`
      [data-split-type="words"] .word {
        overflow: hidden;
      }
    `:e==="chars"&&(i=`
      [data-split-type="chars"] .char {
        overflow: hidden;
      }
    `),t.textContent=i,document.head.append(t)}function Fb(){document.querySelectorAll("[data-page-load-split]").forEach(e=>{const t=e.dataset.splitType||"words",i=Jl(e,t);Ce.from(i,{opacity:0,y:100,stagger:.05,duration:1,ease:"power3.out"})})}window.addEventListener("load",()=>{Fb()});class Bb{constructor({element:e,config:t}){this.element=e,this.config={root:null,margin:(t==null?void 0:t.margin)||"10px",threshold:(t==null?void 0:t.threshold)||0,once:t.once},this.init(),this.start()}init(){this.in=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&this.isIn()})},{rootMargin:this.config.margin,threshold:this.config.threshold}),this.out=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting||this.isOut()})},{rootMargin:"0px",threshold:0})}start(){this.in.observe(this.element),this.out.observe(this.element)}stop(){this.in.unobserve(this.element),this.out.unobserve(this.element)}isIn(){this.animateIn(),this.config.once&&this.stop()}isOut(){this.animateOut()}}class zb extends Bb{constructor(e){const t={margin:e.dataset.obsM||"10px",threshold:+e.dataset.obsT||0,once:e.dataset.obsOnce==="true",aSplit:e.dataset.aSplit||"word",aDuration:e.dataset.aDuration??1.9,aEach:e.dataset.aEach??.05,aDelay:e.dataset.aDelay??0,aEase:e.dataset.aEase??"expo.out",aFrom:e.dataset.aFrom??"start"};super({element:e,config:t}),this.config=t,this.item=e,this.animated=Hb(e),this.a={y:"120%",x:"0%"},Ce.set(this.animated,{y:this.a.y})}animateIn(){var e;(e=this.animation)==null||e.kill(),this.animation=Ce.to(this.animated,{y:"0%",delay:this.config.aDelay,duration:this.config.aDuration,stagger:{each:this.config.aEach,from:this.config.aFrom},ease:this.config.aEase})}animateOut(){var e;(e=this.animation)==null||e.kill(),this.animation=Ce.set(this.animated,{y:this.a.y})}}class Vb{constructor(e){this.selector=e,this.reference=[...document.querySelectorAll(`[${e}]`)],this.reference&&(this.injectCss(),this.init())}init(){this.animations=this.reference.map(e=>new zb(e))}injectCss(){const e=document.createElement("style"),t=`[${this.selector}] > div { overflow: hidden; }`;e.textContent=t,document.head.append(e)}}function Hb(n){switch(n.dataset.aSplit){case"char":return Gb(To(n));case"word":return To(To(n));case"line":return qm(qm(n));default:return To(To(n))}}function Gb(n){return new So(n,{types:"chars"}).chars}function To(n){return new So(n,{types:"words"}).words}function qm(n){return new So(n,{types:"lines"}).lines}const Wb=".nav_link_item",Ym=".nav_link_text_rel",jm=".nav_link_text_ab",Xb=n=>{const e=n.currentTarget.querySelector(Ym),t=n.currentTarget.querySelector(jm);Ce.to(e,{yPercent:-120,rotation:3,duration:.7,ease:"expo.out"}),Ce.fromTo(t,{yPercent:100,rotation:-3},{yPercent:0,rotation:0,duration:.7,ease:"expo.out"})},$b=n=>{const e=n.currentTarget.querySelector(Ym),t=n.currentTarget.querySelector(jm);Ce.fromTo(e,{yPercent:-120,rotation:3},{yPercent:0,rotation:0,duration:.7,ease:"expo.out"}),Ce.to(t,{yPercent:120,rotation:-3,duration:.7,ease:"expo.out"})},qb=()=>{document.querySelectorAll(Wb).forEach(n=>{n.addEventListener("mouseenter",Xb),n.addEventListener("mouseleave",$b)})};/*!
 * matrix 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var rr,bs,Dd,tc,Eo,ic,nc,Ao,Sn="transform",Id=Sn+"Origin",Km,Od=function(e){var t=e.ownerDocument||e;for(!(Sn in e.style)&&("msTransform"in e.style)&&(Sn="msTransform",Id=Sn+"Origin");t.parentNode&&(t=t.parentNode););if(bs=window,nc=new ws,t){rr=t,Dd=t.documentElement,tc=t.body,Ao=rr.createElementNS("http://www.w3.org/2000/svg","g"),Ao.style.transform="none";var i=t.createElement("div"),r=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(r),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Km=r.offsetParent!==i,s.removeChild(i))}return t},Yb=function(e){for(var t,i;e&&e!==tc;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},Zm=[],Qm=[],Nd=function(){return bs.pageYOffset||rr.scrollTop||Dd.scrollTop||tc.scrollTop||0},kd=function(){return bs.pageXOffset||rr.scrollLeft||Dd.scrollLeft||tc.scrollLeft||0},Ud=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},jb=function n(e){if(bs.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return n(e)},Fd=function n(e,t){if(e.parentNode&&(rr||Od(e))){var i=Ud(e),r=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?t?"rect":"g":"div",a=t!==2?0:100,o=t===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=rr.createElementNS?rr.createElementNS(r.replace(/^https/,"http"),s):rr.createElement(s);return t&&(i?(ic||(ic=n(e)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+a+","+o+")"),ic.appendChild(c)):(Eo||(Eo=n(e),Eo.style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+o+"px;left:"+a+"px",Eo.appendChild(c))),c}throw"Need document and parent."},Kb=function(e){for(var t=new ws,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},Jm=function(e){var t=e.getCTM(),i;return t||(i=e.style[Sn],e.style[Sn]="none",e.appendChild(Ao),t=Ao.getCTM(),e.removeChild(Ao),i?e.style[Sn]=i:e.style.removeProperty(Sn.replace(/([A-Z])/g,"-$1").toLowerCase())),t||nc.clone()},Zb=function(e,t){var i=Ud(e),r=e===i,s=i?Zm:Qm,a=e.parentNode,o,l,c,d,h,f;if(e===bs)return e;if(s.length||s.push(Fd(e,1),Fd(e,2),Fd(e,3)),o=i?ic:Eo,i)r?(c=Jm(e),d=-c.e/c.a,h=-c.f/c.d,l=nc):e.getBBox?(c=e.getBBox(),l=e.transform?e.transform.baseVal:{},l=l.numberOfItems?l.numberOfItems>1?Kb(l):l.getItem(0).matrix:nc,d=l.a*c.x+l.c*c.y,h=l.b*c.x+l.d*c.y):(l=new ws,d=h=0),t&&e.tagName.toLowerCase()==="g"&&(d=h=0),(r?i:a).appendChild(o),o.setAttribute("transform","matrix("+l.a+","+l.b+","+l.c+","+l.d+","+(l.e+d)+","+(l.f+h)+")");else{if(d=h=0,Km)for(l=e.offsetParent,c=e;c&&(c=c.parentNode)&&c!==l&&c.parentNode;)(bs.getComputedStyle(c)[Sn]+"").length>4&&(d=c.offsetLeft,h=c.offsetTop,c=0);if(f=bs.getComputedStyle(e),f.position!=="absolute"&&f.position!=="fixed")for(l=e.offsetParent;a&&a!==l;)d+=a.scrollLeft||0,h+=a.scrollTop||0,a=a.parentNode;c=o.style,c.top=e.offsetTop-h+"px",c.left=e.offsetLeft-d+"px",c[Sn]=f[Sn],c[Id]=f[Id],c.position=f.position==="fixed"?"fixed":"absolute",e.parentNode.appendChild(o)}return o},Bd=function(e,t,i,r,s,a,o){return e.a=t,e.b=i,e.c=r,e.d=s,e.e=a,e.f=o,e},ws=function(){function n(t,i,r,s,a,o){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),Bd(this,t,i,r,s,a,o)}var e=n.prototype;return e.inverse=function(){var i=this.a,r=this.b,s=this.c,a=this.d,o=this.e,l=this.f,c=i*a-r*s||1e-10;return Bd(this,a/c,-r/c,-s/c,i/c,(s*l-a*o)/c,-(i*l-r*o)/c)},e.multiply=function(i){var r=this.a,s=this.b,a=this.c,o=this.d,l=this.e,c=this.f,d=i.a,h=i.c,f=i.b,u=i.d,m=i.e,p=i.f;return Bd(this,d*r+f*a,d*s+f*o,h*r+u*a,h*s+u*o,l+m*r+p*a,c+m*s+p*o)},e.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var r=this.a,s=this.b,a=this.c,o=this.d,l=this.e,c=this.f;return r===i.a&&s===i.b&&a===i.c&&o===i.d&&l===i.e&&c===i.f},e.apply=function(i,r){r===void 0&&(r={});var s=i.x,a=i.y,o=this.a,l=this.b,c=this.c,d=this.d,h=this.e,f=this.f;return r.x=s*o+a*c+h||0,r.y=s*l+a*d+f||0,r},n}();function zn(n,e,t,i){if(!n||!n.parentNode||(rr||Od(n)).documentElement===n)return new ws;var r=Yb(n),s=Ud(n),a=s?Zm:Qm,o=Zb(n,t),l=a[0].getBoundingClientRect(),c=a[1].getBoundingClientRect(),d=a[2].getBoundingClientRect(),h=o.parentNode,f=!i&&jb(n),u=new ws((c.left-l.left)/100,(c.top-l.top)/100,(d.left-l.left)/100,(d.top-l.top)/100,l.left+(f?0:kd()),l.top+(f?0:Nd()));if(h.removeChild(o),r)for(l=r.length;l--;)c=r[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c);return e?u.inverse():u}/*!
 * Flip 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Qb=1,da,gi,Pt,Co,Lr,sr,zd,eg=function(e,t){return e.actions.forEach(function(i){return i.vars[t]&&i.vars[t](i)})},Vd={},tg=180/Math.PI,Jb=Math.PI/180,rc={},ig={},sc={},Hd=function(e){return typeof e=="string"?e.split(" ").join("").split(","):e},ew=Hd("onStart,onUpdate,onComplete,onReverseComplete,onInterrupt"),ac=Hd("transform,transformOrigin,width,height,position,top,left,opacity,zIndex,maxWidth,maxHeight,minWidth,minHeight"),Po=function(e){return da(e)[0]||console.warn("Element not found:",e)},fa=function(e){return Math.round(e*1e4)/1e4||0},Gd=function(e,t,i){return e.forEach(function(r){return r.classList[i](t)})},ng={zIndex:1,kill:1,simple:1,spin:1,clearProps:1,targets:1,toggleClass:1,onComplete:1,onUpdate:1,onInterrupt:1,onStart:1,delay:1,repeat:1,repeatDelay:1,yoyo:1,scale:1,fade:1,absolute:1,props:1,onEnter:1,onLeave:1,custom:1,paused:1,nested:1,prune:1,absoluteOnLeave:1},rg={zIndex:1,simple:1,clearProps:1,scale:1,absolute:1,fitChild:1,getVars:1,props:1},sg=function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},ha=function(e,t){var i={},r;for(r in e)t[r]||(i[r]=e[r]);return i},Wd={},ag=function(e){var t=Wd[e]=Hd(e);return sc[e]=t.concat(ac),t},tw=function(e){var t=e._gsap||gi.core.getCache(e);return t.gmCache===gi.ticker.frame?t.gMatrix:(t.gmCache=gi.ticker.frame,t.gMatrix=zn(e,!0,!1,!0))},iw=function n(e,t,i){i===void 0&&(i=0);for(var r=e.parentNode,s=1e3*Math.pow(10,i)*(t?-1:1),a=t?-s*900:0;e;)a+=s,e=e.previousSibling;return r?a+n(r,t,i+1):a},oc=function(e,t,i){return e.forEach(function(r){return r.d=iw(i?r.element:r.t,t)}),e.sort(function(r,s){return r.d-s.d}),e},Ro=function(e,t){for(var i=e.element.style,r=e.css=e.css||[],s=t.length,a,o;s--;)a=t[s],o=i[a]||i.getPropertyValue(a),r.push(o?a:ig[a]||(ig[a]=sg(a)),o);return i},lc=function(e){var t=e.css,i=e.element.style,r=0;for(e.cache.uncache=1;r<t.length;r+=2)t[r+1]?i[t[r]]=t[r+1]:i.removeProperty(t[r]);!t[t.indexOf("transform")+1]&&i.translate&&(i.removeProperty("translate"),i.removeProperty("scale"),i.removeProperty("rotate"))},og=function(e,t){e.forEach(function(i){return i.a.cache.uncache=1}),t||e.finalStates.forEach(lc)},Xd="paddingTop,paddingRight,paddingBottom,paddingLeft,gridArea,transition".split(","),$d=function(e,t,i){var r=e.element,s=e.width,a=e.height,o=e.uncache,l=e.getProp,c=r.style,d=4,h,f,u;if(typeof t!="object"&&(t=e),Pt&&i!==1)return Pt._abs.push({t:r,b:e,a:e,sd:0}),Pt._final.push(function(){return(e.cache.uncache=1)&&lc(e)}),r;for(f=l("display")==="none",(!e.isVisible||f)&&(f&&(Ro(e,["display"]).display=t.display),e.matrix=t.matrix,e.width=s=e.width||t.width,e.height=a=e.height||t.height),Ro(e,Xd),u=window.getComputedStyle(r);d--;)c[Xd[d]]=u[Xd[d]];if(c.gridArea="1 / 1 / 1 / 1",c.transition="none",c.position="absolute",c.width=s+"px",c.height=a+"px",c.top||(c.top="0px"),c.left||(c.left="0px"),o)h=new Ss(r);else if(h=ha(e,rc),h.position="absolute",e.simple){var m=r.getBoundingClientRect();h.matrix=new ws(1,0,0,1,m.left+kd(),m.top+Nd())}else h.matrix=zn(r,!1,!1,!0);return h=pa(h,e,!0),e.x=sr(h.x,.01),e.y=sr(h.y,.01),r},lg=function(e,t){return t!==!0&&(t=da(t),e=e.filter(function(i){if(t.indexOf((i.sd<0?i.b:i.a).element)!==-1)return!0;i.t._gsap.renderTransform(1),i.b.isVisible&&(i.t.style.width=i.b.width+"px",i.t.style.height=i.b.height+"px")})),e},cg=function(e){return oc(e,!0).forEach(function(t){return(t.a.isVisible||t.b.isVisible)&&$d(t.sd<0?t.b:t.a,t.b,1)})},nw=function(e,t){return t&&e.idLookup[qd(t).id]||e.elementStates[0]},qd=function(e,t,i,r){return e instanceof Ss?e:e instanceof Mn?nw(e,r):new Ss(typeof e=="string"?Po(e)||console.warn(e+" not found"):e,t,i)},rw=function(e,t){for(var i=gi.getProperty(e.element,null,"native"),r=e.props={},s=t.length;s--;)r[t[s]]=(i(t[s])+"").trim();return r.zIndex&&(r.zIndex=parseFloat(r.zIndex)||0),e},ug=function(e,t){var i=e.style||e,r;for(r in t)i[r]=t[r]},sw=function(e){var t=e.getAttribute("data-flip-id");return t||e.setAttribute("data-flip-id",t="auto-"+Qb++),t},dg=function(e){return e.map(function(t){return t.element})},fg=function(e,t,i){return e&&t.length&&i.add(e(dg(t),i,new Mn(t,0,!0)),0)},pa=function(e,t,i,r,s,a){var o=e.element,l=e.cache,c=e.parent,d=e.x,h=e.y,f=t.width,u=t.height,m=t.scaleX,p=t.scaleY,v=t.rotation,g=t.bounds,y=a&&zd&&zd(o,"transform"),_=e,b=t.matrix,w=b.e,M=b.f,T=e.bounds.width!==g.width||e.bounds.height!==g.height||e.scaleX!==m||e.scaleY!==p||e.rotation!==v,E=!T&&e.simple&&t.simple&&!s,S,x,C,A,P,R,L;return E||!c?(m=p=1,v=S=0):(P=tw(c),R=P.clone().multiply(t.ctm?t.matrix.clone().multiply(t.ctm):t.matrix),v=fa(Math.atan2(R.b,R.a)*tg),S=fa(Math.atan2(R.c,R.d)*tg+v)%360,m=Math.sqrt(Math.pow(R.a,2)+Math.pow(R.b,2)),p=Math.sqrt(Math.pow(R.c,2)+Math.pow(R.d,2))*Math.cos(S*Jb),s&&(s=da(s)[0],A=gi.getProperty(s),L=s.getBBox&&typeof s.getBBox=="function"&&s.getBBox(),_={scaleX:A("scaleX"),scaleY:A("scaleY"),width:L?L.width:Math.ceil(parseFloat(A("width","px"))),height:L?L.height:parseFloat(A("height","px"))}),l.rotation=v+"deg",l.skewX=S+"deg"),i?(m*=f===_.width||!_.width?1:f/_.width,p*=u===_.height||!_.height?1:u/_.height,l.scaleX=m,l.scaleY=p):(f=sr(f*m/_.scaleX,0),u=sr(u*p/_.scaleY,0),o.style.width=f+"px",o.style.height=u+"px"),r&&ug(o,t.props),E||!c?(d+=w-e.matrix.e,h+=M-e.matrix.f):T||c!==t.parent?(l.renderTransform(1,l),R=zn(s||o,!1,!1,!0),x=P.apply({x:R.e,y:R.f}),C=P.apply({x:w,y:M}),d+=C.x-x.x,h+=C.y-x.y):(P.e=P.f=0,C=P.apply({x:w-e.matrix.e,y:M-e.matrix.f}),d+=C.x,h+=C.y),d=sr(d,.02),h=sr(h,.02),a&&!(a instanceof Ss)?y&&y.revert():(l.x=d+"px",l.y=h+"px",l.renderTransform(1,l)),a&&(a.x=d,a.y=h,a.rotation=v,a.skewX=S,i?(a.scaleX=m,a.scaleY=p):(a.width=f,a.height=u)),a||l},Yd=function(e,t){return e instanceof Mn?e:new Mn(e,t)},hg=function(e,t,i){var r=e.idLookup[i],s=e.alt[i];return s.isVisible&&(!(t.getElementState(s.element)||s).isVisible||!r.isVisible)?s:r},jd=[],Kd="width,height,overflowX,overflowY".split(","),cc,pg=function(e){if(e!==cc){var t=Lr.style,i=Lr.clientWidth===window.outerWidth,r=Lr.clientHeight===window.outerHeight,s=4;if(e&&(i||r)){for(;s--;)jd[s]=t[Kd[s]];i&&(t.width=Lr.clientWidth+"px",t.overflowY="hidden"),r&&(t.height=Lr.clientHeight+"px",t.overflowX="hidden"),cc=e}else if(cc){for(;s--;)jd[s]?t[Kd[s]]=jd[s]:t.removeProperty(sg(Kd[s]));cc=e}}},Zd=function(e,t,i,r){e instanceof Mn&&t instanceof Mn||console.warn("Not a valid state object."),i=i||{};var s=i,a=s.clearProps,o=s.onEnter,l=s.onLeave,c=s.absolute,d=s.absoluteOnLeave,h=s.custom,f=s.delay,u=s.paused,m=s.repeat,p=s.repeatDelay,v=s.yoyo,g=s.toggleClass,y=s.nested,_=s.zIndex,b=s.scale,w=s.fade,M=s.stagger,T=s.spin,E=s.prune,S=("props"in i?i:e).props,x=ha(i,ng),C=gi.timeline({delay:f,paused:u,repeat:m,repeatDelay:p,yoyo:v,data:"isFlip"}),A=x,P=[],R=[],L=[],U=[],B=T===!0?1:T||0,F=typeof T=="function"?T:function(){return B},G=e.interrupted||t.interrupted,O=C[r!==1?"to":"from"],ee,se,we,X,J,ne,re,_e,Oe,V,ze,Pe,me,fe;for(se in t.idLookup)ze=t.alt[se]?hg(t,e,se):t.idLookup[se],J=ze.element,V=e.idLookup[se],e.alt[se]&&J===V.element&&(e.alt[se].isVisible||!ze.isVisible)&&(V=e.alt[se]),V?(ne={t:J,b:V,a:ze,sd:V.element===J?0:ze.isVisible?1:-1},L.push(ne),ne.sd&&(ne.sd<0&&(ne.b=ze,ne.a=V),G&&Ro(ne.b,S?sc[S]:ac),w&&L.push(ne.swap={t:V.element,b:ne.b,a:ne.a,sd:-ne.sd,swap:ne})),J._flip=V.element._flip=Pt?Pt.timeline:C):ze.isVisible&&(L.push({t:J,b:ha(ze,{isVisible:1}),a:ze,sd:0,entering:1}),J._flip=Pt?Pt.timeline:C);if(S&&(Wd[S]||ag(S)).forEach(function($){return x[$]=function(Ye){return L[Ye].a.props[$]}}),L.finalStates=Oe=[],Pe=function(){for(oc(L),pg(!0),X=0;X<L.length;X++)ne=L[X],me=ne.a,fe=ne.b,E&&!me.isDifferent(fe)&&!ne.entering?L.splice(X--,1):(J=ne.t,y&&!(ne.sd<0)&&X&&(me.matrix=zn(J,!1,!1,!0)),fe.isVisible&&me.isVisible?(ne.sd<0?(re=new Ss(J,S,e.simple),pa(re,me,b,0,0,re),re.matrix=zn(J,!1,!1,!0),re.css=ne.b.css,ne.a=me=re,w&&(J.style.opacity=G?fe.opacity:me.opacity),M&&U.push(J)):ne.sd>0&&w&&(J.style.opacity=G?me.opacity-fe.opacity:"0"),pa(me,fe,b,S)):fe.isVisible!==me.isVisible&&(fe.isVisible?me.isVisible||(fe.css=me.css,R.push(fe),L.splice(X--,1),c&&y&&pa(me,fe,b,S)):(me.isVisible&&P.push(me),L.splice(X--,1))),b||(J.style.maxWidth=Math.max(me.width,fe.width)+"px",J.style.maxHeight=Math.max(me.height,fe.height)+"px",J.style.minWidth=Math.min(me.width,fe.width)+"px",J.style.minHeight=Math.min(me.height,fe.height)+"px"),y&&g&&J.classList.add(g)),Oe.push(me);var Ye;if(g&&(Ye=Oe.map(function(z){return z.element}),y&&Ye.forEach(function(z){return z.classList.remove(g)})),pg(!1),b?(x.scaleX=function(z){return L[z].a.scaleX},x.scaleY=function(z){return L[z].a.scaleY}):(x.width=function(z){return L[z].a.width+"px"},x.height=function(z){return L[z].a.height+"px"},x.autoRound=i.autoRound||!1),x.x=function(z){return L[z].a.x+"px"},x.y=function(z){return L[z].a.y+"px"},x.rotation=function(z){return L[z].a.rotation+(T?F(z,_e[z],_e)*360:0)},x.skewX=function(z){return L[z].a.skewX},_e=L.map(function(z){return z.t}),(_||_===0)&&(x.modifiers={zIndex:function(){return _}},x.zIndex=_,x.immediateRender=i.immediateRender!==!1),w&&(x.opacity=function(z){return L[z].sd<0?0:L[z].sd>0?L[z].a.opacity:"+=0"}),U.length){M=gi.utils.distribute(M);var k=_e.slice(U.length);x.stagger=function(z,te){return M(~U.indexOf(te)?_e.indexOf(L[z].swap.t):z,te,k)}}if(ew.forEach(function(z){return i[z]&&C.eventCallback(z,i[z],i[z+"Params"])}),h&&_e.length){A=ha(x,ng),"scale"in h&&(h.scaleX=h.scaleY=h.scale,delete h.scale);for(se in h)ee=ha(h[se],rg),ee[se]=x[se],!("duration"in ee)&&"duration"in x&&(ee.duration=x.duration),ee.stagger=x.stagger,O.call(C,_e,ee,0),delete A[se]}(_e.length||R.length||P.length)&&(g&&C.add(function(){return Gd(Ye,g,C._zTime<0?"remove":"add")},0)&&!u&&Gd(Ye,g,"add"),_e.length&&O.call(C,_e,A,0)),fg(o,P,C),fg(l,R,C);var D=Pt&&Pt.timeline;D&&(D.add(C,0),Pt._final.push(function(){return og(L,!a)})),we=C.duration(),C.call(function(){var z=C.time()>=we;z&&!D&&og(L,!a),g&&Gd(Ye,g,z?"remove":"add")})},d&&(c=L.filter(function($){return!$.sd&&!$.a.isVisible&&$.b.isVisible}).map(function($){return $.a.element})),Pt){var De;c&&(De=Pt._abs).push.apply(De,lg(L,c)),Pt._run.push(Pe)}else c&&cg(lg(L,c)),Pe();var Ne=Pt?Pt.timeline:C;return Ne.revert=function(){return Qd(Ne,1,1)},Ne},aw=function n(e){e.vars.onInterrupt&&e.vars.onInterrupt.apply(e,e.vars.onInterruptParams||[]),e.getChildren(!0,!1,!0).forEach(n)},Qd=function(e,t,i){if(e&&e.progress()<1&&(!e.paused()||i))return t&&(aw(e),t<2&&e.progress(1),e.kill()),!0},uc=function(e){for(var t=e.idLookup={},i=e.alt={},r=e.elementStates,s=r.length,a;s--;)a=r[s],t[a.id]?i[a.id]=a:t[a.id]=a},Mn=function(){function n(t,i,r){if(this.props=i&&i.props,this.simple=!!(i&&i.simple),r)this.targets=dg(t),this.elementStates=t,uc(this);else{this.targets=da(t);var s=i&&(i.kill===!1||i.batch&&!i.kill);Pt&&!s&&Pt._kill.push(this),this.update(s||!!Pt)}}var e=n.prototype;return e.update=function(i){var r=this;return this.elementStates=this.targets.map(function(s){return new Ss(s,r.props,r.simple)}),uc(this),this.interrupt(i),this.recordInlineStyles(),this},e.clear=function(){return this.targets.length=this.elementStates.length=0,uc(this),this},e.fit=function(i,r,s){for(var a=oc(this.elementStates.slice(0),!1,!0),o=(i||this).idLookup,l=0,c,d;l<a.length;l++)c=a[l],s&&(c.matrix=zn(c.element,!1,!1,!0)),d=o[c.id],d&&pa(c,d,r,!0,0,c),c.matrix=zn(c.element,!1,!1,!0);return this},e.getProperty=function(i,r){var s=this.getElementState(i)||rc;return(r in s?s:s.props||rc)[r]},e.add=function(i){for(var r=i.targets.length,s=this.idLookup,a=this.alt,o,l,c;r--;)l=i.elementStates[r],c=s[l.id],c&&(l.element===c.element||a[l.id]&&a[l.id].element===l.element)?(o=this.elementStates.indexOf(l.element===c.element?c:a[l.id]),this.targets.splice(o,1,i.targets[r]),this.elementStates.splice(o,1,l)):(this.targets.push(i.targets[r]),this.elementStates.push(l));return i.interrupted&&(this.interrupted=!0),i.simple||(this.simple=!1),uc(this),this},e.compare=function(i){var r=i.idLookup,s=this.idLookup,a=[],o=[],l=[],c=[],d=[],h=i.alt,f=this.alt,u=function(E,S,x){return(E.isVisible!==S.isVisible?E.isVisible?l:c:E.isVisible?o:a).push(x)&&d.push(x)},m=function(E,S,x){return d.indexOf(x)<0&&u(E,S,x)},p,v,g,y,_,b,w,M;for(g in r)_=h[g],b=f[g],p=_?hg(i,this,g):r[g],y=p.element,v=s[g],b?(M=v.isVisible||!b.isVisible&&y===v.element?v:b,w=_&&!p.isVisible&&!_.isVisible&&M.element===_.element?_:p,w.isVisible&&M.isVisible&&w.element!==M.element?((w.isDifferent(M)?o:a).push(w.element,M.element),d.push(w.element,M.element)):u(w,M,w.element),_&&w.element===_.element&&(_=r[g]),m(w.element!==v.element&&_?_:w,v,v.element),m(_&&_.element===b.element?_:w,b,b.element),_&&m(_,b.element===_.element?b:v,_.element)):(v?v.isDifferent(p)?u(p,v,y):a.push(y):l.push(y),_&&m(_,v,_.element));for(g in s)r[g]||(c.push(s[g].element),f[g]&&c.push(f[g].element));return{changed:o,unchanged:a,enter:l,leave:c}},e.recordInlineStyles=function(){for(var i=sc[this.props]||ac,r=this.elementStates.length;r--;)Ro(this.elementStates[r],i)},e.interrupt=function(i){var r=this,s=[];this.targets.forEach(function(a){var o=a._flip,l=Qd(o,i?0:1);i&&l&&s.indexOf(o)<0&&o.add(function(){return r.updateVisibility()}),l&&s.push(o)}),!i&&s.length&&this.updateVisibility(),this.interrupted||(this.interrupted=!!s.length)},e.updateVisibility=function(){this.elementStates.forEach(function(i){var r=i.element.getBoundingClientRect();i.isVisible=!!(r.width||r.height||r.top||r.left),i.uncache=1})},e.getElementState=function(i){return this.elementStates[this.targets.indexOf(Po(i))]},e.makeAbsolute=function(){return oc(this.elementStates.slice(0),!0,!0).map($d)},n}(),Ss=function(){function n(t,i,r){this.element=t,this.update(i,r)}var e=n.prototype;return e.isDifferent=function(i){var r=this.bounds,s=i.bounds;return r.top!==s.top||r.left!==s.left||r.width!==s.width||r.height!==s.height||!this.matrix.equals(i.matrix)||this.opacity!==i.opacity||this.props&&i.props&&JSON.stringify(this.props)!==JSON.stringify(i.props)},e.update=function(i,r){var s=this,a=s.element,o=gi.getProperty(a),l=gi.core.getCache(a),c=a.getBoundingClientRect(),d=a.getBBox&&typeof a.getBBox=="function"&&a.nodeName.toLowerCase()!=="svg"&&a.getBBox(),h=r?new ws(1,0,0,1,c.left+kd(),c.top+Nd()):zn(a,!1,!1,!0);s.getProp=o,s.element=a,s.id=sw(a),s.matrix=h,s.cache=l,s.bounds=c,s.isVisible=!!(c.width||c.height||c.left||c.top),s.display=o("display"),s.position=o("position"),s.parent=a.parentNode,s.x=o("x"),s.y=o("y"),s.scaleX=l.scaleX,s.scaleY=l.scaleY,s.rotation=o("rotation"),s.skewX=o("skewX"),s.opacity=o("opacity"),s.width=d?d.width:sr(o("width","px"),.04),s.height=d?d.height:sr(o("height","px"),.04),i&&rw(s,Wd[i]||ag(i)),s.ctm=a.getCTM&&a.nodeName.toLowerCase()==="svg"&&Jm(a).inverse(),s.simple=r||fa(h.a)===1&&!fa(h.b)&&!fa(h.c)&&fa(h.d)===1,s.uncache=0},n}(),ow=function(){function n(t,i){this.vars=t,this.batch=i,this.states=[],this.timeline=i.timeline}var e=n.prototype;return e.getStateById=function(i){for(var r=this.states.length;r--;)if(this.states[r].idLookup[i])return this.states[r]},e.kill=function(){this.batch.remove(this)},n}(),lw=function(){function n(t){this.id=t,this.actions=[],this._kill=[],this._final=[],this._abs=[],this._run=[],this.data={},this.state=new Mn,this.timeline=gi.timeline()}var e=n.prototype;return e.add=function(i){var r=this.actions.filter(function(s){return s.vars===i});return r.length?r[0]:(r=new ow(typeof i=="function"?{animate:i}:i,this),this.actions.push(r),r)},e.remove=function(i){var r=this.actions.indexOf(i);return r>=0&&this.actions.splice(r,1),this},e.getState=function(i){var r=this,s=Pt,a=Co;return Pt=this,this.state.clear(),this._kill.length=0,this.actions.forEach(function(o){o.vars.getState&&(o.states.length=0,Co=o,o.state=o.vars.getState(o)),i&&o.states.forEach(function(l){return r.state.add(l)})}),Co=a,Pt=s,this.killConflicts(),this},e.animate=function(){var i=this,r=Pt,s=this.timeline,a=this.actions.length,o,l;for(Pt=this,s.clear(),this._abs.length=this._final.length=this._run.length=0,this.actions.forEach(function(c){c.vars.animate&&c.vars.animate(c);var d=c.vars.onEnter,h=c.vars.onLeave,f=c.targets,u,m;f&&f.length&&(d||h)&&(u=new Mn,c.states.forEach(function(p){return u.add(p)}),m=u.compare(fn.getState(f)),m.enter.length&&d&&d(m.enter),m.leave.length&&h&&h(m.leave))}),cg(this._abs),this._run.forEach(function(c){return c()}),l=s.duration(),o=this._final.slice(0),s.add(function(){l<=s.time()&&(o.forEach(function(c){return c()}),eg(i,"onComplete"))}),Pt=r;a--;)this.actions[a].vars.once&&this.actions[a].kill();return eg(this,"onStart"),s.restart(),this},e.loadState=function(i){i||(i=function(){return 0});var r=[];return this.actions.forEach(function(s){if(s.vars.loadState){var a,o=function l(c){c&&(s.targets=c),a=r.indexOf(l),~a&&(r.splice(a,1),r.length||i())};r.push(o),s.vars.loadState(o)}}),r.length||i(),this},e.setState=function(){return this.actions.forEach(function(i){return i.targets=i.vars.setState&&i.vars.setState(i)}),this},e.killConflicts=function(i){return this.state.interrupt(i),this._kill.forEach(function(r){return r.interrupt(i)}),this},e.run=function(i,r){var s=this;return this!==Pt&&(i||this.getState(r),this.loadState(function(){s._killed||(s.setState(),s.animate())})),this},e.clear=function(i){this.state.clear(),i||(this.actions.length=0)},e.getStateById=function(i){for(var r=this.actions.length,s;r--;)if(s=this.actions[r].getStateById(i),s)return s;return this.state.idLookup[i]&&this.state},e.kill=function(){this._killed=1,this.clear(),delete Vd[this.id]},n}(),fn=function(){function n(){}return n.getState=function(t,i){var r=Yd(t,i);return Co&&Co.states.push(r),i&&i.batch&&n.batch(i.batch).state.add(r),r},n.from=function(t,i){return i=i||{},"clearProps"in i||(i.clearProps=!0),Zd(t,Yd(i.targets||t.targets,{props:i.props||t.props,simple:i.simple,kill:!!i.kill}),i,-1)},n.to=function(t,i){return Zd(t,Yd(i.targets||t.targets,{props:i.props||t.props,simple:i.simple,kill:!!i.kill}),i,1)},n.fromTo=function(t,i,r){return Zd(t,i,r)},n.fit=function(t,i,r){var s=r?ha(r,rg):{},a=r||s,o=a.absolute,l=a.scale,c=a.getVars,d=a.props,h=a.runBackwards,f=a.onComplete,u=a.simple,m=r&&r.fitChild&&Po(r.fitChild),p=qd(i,d,u,t),v=qd(t,0,u,p),g=d?sc[d]:ac,y=gi.context();return d&&ug(s,p.props),Ro(v,g),h&&("immediateRender"in s||(s.immediateRender=!0),s.onComplete=function(){lc(v),f&&f.apply(this,arguments)}),o&&$d(v,p),s=pa(v,p,l||m,d,m,s.duration||c?s:0),y&&!c&&y.add(function(){return function(){return lc(v)}}),c?s:s.duration?gi.to(v.element,s):null},n.makeAbsolute=function(t,i){return(t instanceof Mn?t:new Mn(t,i)).makeAbsolute()},n.batch=function(t){return t||(t="default"),Vd[t]||(Vd[t]=new lw(t))},n.killFlipsOf=function(t,i){(t instanceof Mn?t.targets:da(t)).forEach(function(r){return r&&Qd(r._flip,i!==!1?1:2)})},n.isFlipping=function(t){var i=n.getByTarget(t);return!!i&&i.isActive()},n.getByTarget=function(t){return(Po(t)||rc)._flip},n.getElementState=function(t,i){return new Ss(Po(t),i)},n.convertCoordinates=function(t,i,r){var s=zn(i,!0,!0).multiply(zn(t));return r?s.apply(r):s},n.register=function(t){if(Lr=typeof document<"u"&&document.body,Lr){gi=t,Od(Lr),da=gi.utils.toArray,zd=gi.core.getStyleSaver;var i=gi.utils.snap(.1);sr=function(s,a){return i(parseFloat(s)+a)}}},n}();fn.version="3.12.5",typeof window<"u"&&window.gsap&&window.gsap.registerPlugin(fn),Ce.registerPlugin(fn);const di={zIndex:10,returnDelay:500,imgScaleUp:1.2,imgScaleDown:1,imgScaleDuration:.4,mainAnimationDuration:.9,ease:"power2.inOut",blackAndWhiteDuration:.5};let ar=null,Lo=null,Do=!1;function cw(){const n=document.querySelectorAll('[data-scale-img="main"]');n.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const i=document.querySelector('[data-scale-img="target"]');if(!i){console.error("Target element not found");return}if(ar===e){Jd(ar),ar=null;return}ar&&(Lo=ar,Jd(Lo,!0)),ar=e;const r=e.querySelector('[data-scale-img="img"]');if(!r){console.error("Image element not found inside main element");return}Ce.set(e,{zIndex:di.zIndex+1}),Lo&&Lo!==e&&Ce.set(Lo,{zIndex:di.zIndex});const s=fn.getState(e);Do=!0,Ce.timeline().to(r,{scale:di.imgScaleUp,duration:di.imgScaleDuration,ease:di.ease}).to(r,{scale:di.imgScaleDown,duration:di.imgScaleDuration,ease:di.ease}),fn.fit(e,i,{scale:!0}),fn.from(s,{duration:di.mainAnimationDuration,ease:di.ease,scale:!0,onComplete:()=>{Do=!1,Ce.set(r,{scale:di.imgScaleDown})}}),Ce.to(n,{filter:"grayscale(0%)",duration:di.blackAndWhiteDuration,ease:di.ease,onComplete:()=>{Ce.to(e,{filter:"none"})}})})}),document.addEventListener("click",()=>{ar&&!Do&&(Jd(ar),ar=null)})}function Jd(n,e=!1){const t=fn.getState(n),i=n.querySelector('[data-scale-img="img"]');Do=!0,Ce.set(n,{clearProps:"all"}),i&&Ce.set(i,{scale:di.imgScaleDown}),fn.from(t,{duration:di.mainAnimationDuration,ease:di.ease,scale:!0,onComplete:()=>{Do=!1,e?setTimeout(()=>{Ce.set(n,{zIndex:""})},di.mainAnimationDuration*1e3):Ce.set(n,{zIndex:""})}})}/*!
 * paths 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var uw=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,dw=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,fw=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,hw=/(^[#\.][a-z]|[a-y][a-z])/i,pw=Math.PI/180,dc=Math.sin,fc=Math.cos,Io=Math.abs,Oo=Math.sqrt,mg=function(e){return typeof e=="string"},gg=function(e){return typeof e=="number"},vg=1e5,Dr=function(e){return Math.round(e*vg)/vg||0};function mw(n){n=mg(n)&&hw.test(n)&&document.querySelector(n)||n;var e=n.getAttribute?n:0,t;return e&&(n=n.getAttribute("d"))?(e._gsPath||(e._gsPath={}),t=e._gsPath[n],t&&!t._dirty?t:e._gsPath[n]=Ir(n)):n?mg(n)?Ir(n):gg(n[0])?[n]:n:console.warn("Expecting a <path> element or an SVG path data string")}function No(n){var e=0,t;for(n.reverse();e<n.length;e+=2)t=n[e],n[e]=n[e+1],n[e+1]=t;n.reversed=!n.reversed}var gw=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),r=[].slice.call(e.attributes),s=r.length,a;for(t=","+t+",";--s>-1;)a=r[s].nodeName.toLowerCase(),t.indexOf(","+a+",")<0&&i.setAttributeNS(null,a,r[s].nodeValue);return i},vw={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},_w=function(e,t){for(var i=t?t.split(","):[],r={},s=i.length;--s>-1;)r[i[s]]=+e.getAttribute(i[s])||0;return r};function _g(n,e){var t=n.tagName.toLowerCase(),i=.552284749831,r,s,a,o,l,c,d,h,f,u,m,p,v,g,y,_,b,w,M,T,E,S;return t==="path"||!n.getBBox?n:(c=gw(n,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),S=_w(n,vw[t]),t==="rect"?(o=S.rx,l=S.ry||o,s=S.x,a=S.y,u=S.width-o*2,m=S.height-l*2,o||l?(p=s+o*(1-i),v=s+o,g=v+u,y=g+o*i,_=g+o,b=a+l*(1-i),w=a+l,M=w+m,T=M+l*i,E=M+l,r="M"+_+","+w+" V"+M+" C"+[_,T,y,E,g,E,g-(g-v)/3,E,v+(g-v)/3,E,v,E,p,E,s,T,s,M,s,M-(M-w)/3,s,w+(M-w)/3,s,w,s,b,p,a,v,a,v+(g-v)/3,a,g-(g-v)/3,a,g,a,y,a,_,b,_,w].join(",")+"z"):r="M"+(s+u)+","+a+" v"+m+" h"+-u+" v"+-m+" h"+u+"z"):t==="circle"||t==="ellipse"?(t==="circle"?(o=l=S.r,h=o*i):(o=S.rx,l=S.ry,h=l*i),s=S.cx,a=S.cy,d=o*i,r="M"+(s+o)+","+a+" C"+[s+o,a+h,s+d,a+l,s,a+l,s-d,a+l,s-o,a+h,s-o,a,s-o,a-h,s-d,a-l,s,a-l,s+d,a-l,s+o,a-h,s+o,a].join(",")+"z"):t==="line"?r="M"+S.x1+","+S.y1+" L"+S.x2+","+S.y2:(t==="polyline"||t==="polygon")&&(f=(n.getAttribute("points")+"").match(dw)||[],s=f.shift(),a=f.shift(),r="M"+s+","+a+" L"+f.join(","),t==="polygon"&&(r+=","+s+","+a+"z")),c.setAttribute("d",ma(c._gsRawPath=Ir(r))),e&&n.parentNode&&(n.parentNode.insertBefore(c,n),n.parentNode.removeChild(n)),c)}function yw(n,e,t,i,r,s,a,o,l){if(!(n===o&&e===l)){t=Io(t),i=Io(i);var c=r%360*pw,d=fc(c),h=dc(c),f=Math.PI,u=f*2,m=(n-o)/2,p=(e-l)/2,v=d*m+h*p,g=-h*m+d*p,y=v*v,_=g*g,b=y/(t*t)+_/(i*i);b>1&&(t=Oo(b)*t,i=Oo(b)*i);var w=t*t,M=i*i,T=(w*M-w*_-M*y)/(w*_+M*y);T<0&&(T=0);var E=(s===a?-1:1)*Oo(T),S=E*(t*g/i),x=E*-(i*v/t),C=(n+o)/2,A=(e+l)/2,P=C+(d*S-h*x),R=A+(h*S+d*x),L=(v-S)/t,U=(g-x)/i,B=(-v-S)/t,F=(-g-x)/i,G=L*L+U*U,O=(U<0?-1:1)*Math.acos(L/Oo(G)),ee=(L*F-U*B<0?-1:1)*Math.acos((L*B+U*F)/Oo(G*(B*B+F*F)));isNaN(ee)&&(ee=f),!a&&ee>0?ee-=u:a&&ee<0&&(ee+=u),O%=u,ee%=u;var se=Math.ceil(Io(ee)/(u/4)),we=[],X=ee/se,J=4/3*dc(X/2)/(1+fc(X/2)),ne=d*t,re=h*t,_e=h*-i,Oe=d*i,V;for(V=0;V<se;V++)r=O+V*X,v=fc(r),g=dc(r),L=fc(r+=X),U=dc(r),we.push(v-J*g,g+J*v,L+J*U,U-J*L,L,U);for(V=0;V<we.length;V+=2)v=we[V],g=we[V+1],we[V]=v*ne+g*_e+P,we[V+1]=v*re+g*Oe+R;return we[V-2]=o,we[V-1]=l,we}}function Ir(n){var e=(n+"").replace(fw,function(S){var x=+S;return x<1e-4&&x>-1e-4?0:x}).match(uw)||[],t=[],i=0,r=0,s=2/3,a=e.length,o=0,l="ERROR: malformed path: "+n,c,d,h,f,u,m,p,v,g,y,_,b,w,M,T,E=function(x,C,A,P){y=(A-x)/3,_=(P-C)/3,p.push(x+y,C+_,A-y,P-_,A,P)};if(!n||!isNaN(e[0])||isNaN(e[1]))return console.log(l),t;for(c=0;c<a;c++)if(w=u,isNaN(e[c])?(u=e[c].toUpperCase(),m=u!==e[c]):c--,h=+e[c+1],f=+e[c+2],m&&(h+=i,f+=r),c||(v=h,g=f),u==="M")p&&(p.length<8?t.length-=1:o+=p.length),i=v=h,r=g=f,p=[h,f],t.push(p),c+=2,u="L";else if(u==="C")p||(p=[0,0]),m||(i=r=0),p.push(h,f,i+e[c+3]*1,r+e[c+4]*1,i+=e[c+5]*1,r+=e[c+6]*1),c+=6;else if(u==="S")y=i,_=r,(w==="C"||w==="S")&&(y+=i-p[p.length-4],_+=r-p[p.length-3]),m||(i=r=0),p.push(y,_,h,f,i+=e[c+3]*1,r+=e[c+4]*1),c+=4;else if(u==="Q")y=i+(h-i)*s,_=r+(f-r)*s,m||(i=r=0),i+=e[c+3]*1,r+=e[c+4]*1,p.push(y,_,i+(h-i)*s,r+(f-r)*s,i,r),c+=4;else if(u==="T")y=i-p[p.length-4],_=r-p[p.length-3],p.push(i+y,r+_,h+(i+y*1.5-h)*s,f+(r+_*1.5-f)*s,i=h,r=f),c+=2;else if(u==="H")E(i,r,i=h,r),c+=1;else if(u==="V")E(i,r,i,r=h+(m?r-i:0)),c+=1;else if(u==="L"||u==="Z")u==="Z"&&(h=v,f=g,p.closed=!0),(u==="L"||Io(i-h)>.5||Io(r-f)>.5)&&(E(i,r,h,f),u==="L"&&(c+=2)),i=h,r=f;else if(u==="A"){if(M=e[c+4],T=e[c+5],y=e[c+6],_=e[c+7],d=7,M.length>1&&(M.length<3?(_=y,y=T,d--):(_=T,y=M.substr(2),d-=2),T=M.charAt(1),M=M.charAt(0)),b=yw(i,r,+e[c+1],+e[c+2],+e[c+3],+M,+T,(m?i:0)+y*1,(m?r:0)+_*1),c+=d,b)for(d=0;d<b.length;d++)p.push(b[d]);i=p[p.length-2],r=p[p.length-1]}else console.log(l);return c=p.length,c<6?(t.pop(),c=0):p[0]===p[c-2]&&p[1]===p[c-1]&&(p.closed=!0),t.totalPoints=o+c,t}function ma(n){gg(n[0])&&(n=[n]);var e="",t=n.length,i,r,s,a;for(r=0;r<t;r++){for(a=n[r],e+="M"+Dr(a[0])+","+Dr(a[1])+" C",i=a.length,s=2;s<i;s++)e+=Dr(a[s++])+","+Dr(a[s++])+" "+Dr(a[s++])+","+Dr(a[s++])+" "+Dr(a[s++])+","+Dr(a[s])+" ";a.closed&&(e+="z")}return e}/*!
 * MorphSVGPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Tn,ef,ko,yg,Uo,xg=function(){return Tn||typeof window<"u"&&(Tn=window.gsap)&&Tn.registerPlugin&&Tn},tf=function(e){return typeof e=="function"},Ms=Math.atan2,bg=Math.cos,wg=Math.sin,or=Math.sqrt,hc=Math.PI,Sg=hc*2,xw=hc*.3,bw=hc*.7,Mg=1e20,Fo=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,ww=/(^[#\.][a-z]|[a-y][a-z])/i,Sw=/[achlmqstvz]/i,Or=function(e){return console&&console.warn(e)},Mw=1,Tg=function(e){var t=e.length,i=0,r=0,s;for(s=0;s<t;s++)i+=e[s++],r+=e[s];return[i/(t/2),r/(t/2)]},ga=function(e){var t=e.length,i=e[0],r=i,s=e[1],a=s,o,l,c;for(c=6;c<t;c+=6)o=e[c],l=e[c+1],o>i?i=o:o<r&&(r=o),l>s?s=l:l<a&&(a=l);return e.centerX=(i+r)/2,e.centerY=(s+a)/2,e.size=(i-r)*(s-a)},Bo=function(e,t){t===void 0&&(t=3);for(var i=e.length,r=e[0][0],s=r,a=e[0][1],o=a,l=1/t,c,d,h,f,u,m,p,v,g,y,_,b,w,M,T,E;--i>-1;)for(u=e[i],c=u.length,f=6;f<c;f+=6)for(g=u[f],y=u[f+1],_=u[f+2]-g,M=u[f+3]-y,b=u[f+4]-g,T=u[f+5]-y,w=u[f+6]-g,E=u[f+7]-y,m=t;--m>-1;)p=l*m,v=1-p,d=(p*p*w+3*v*(p*b+v*_))*p+g,h=(p*p*E+3*v*(p*T+v*M))*p+y,d>r?r=d:d<s&&(s=d),h>a?a=h:h<o&&(o=h);return e.centerX=(r+s)/2,e.centerY=(a+o)/2,e.left=s,e.width=r-s,e.top=o,e.height=a-o,e.size=(r-s)*(a-o)},Tw=function(e,t){return t.length-e.length},Eg=function(e,t){var i=e.size||ga(e),r=t.size||ga(t);return Math.abs(r-i)<(i+r)/20?t.centerX-e.centerX||t.centerY-e.centerY:r-i},Ag=function(e,t){var i=e.slice(0),r=e.length,s=r-2,a,o;for(t=t|0,a=0;a<r;a++)o=(a+t)%s,e[a++]=i[o],e[a]=i[o+1]},nf=function(e,t,i,r,s){var a=e.length,o=0,l=a-2,c,d,h,f;for(i*=6,d=0;d<a;d+=6)c=(d+i)%l,f=e[c]-(t[d]-r),h=e[c+1]-(t[d+1]-s),o+=or(h*h+f*f);return o},Ew=function(e,t,i){var r=e.length,s=Tg(e),a=Tg(t),o=a[0]-s[0],l=a[1]-s[1],c=nf(e,t,0,o,l),d=0,h,f,u;for(u=6;u<r;u+=6)f=nf(e,t,u/6,o,l),f<c&&(c=f,d=u);if(i)for(h=e.slice(0),No(h),u=6;u<r;u+=6)f=nf(h,t,u/6,o,l),f<c&&(c=f,d=-u);return d/6},Aw=function(e,t,i){for(var r=e.length,s=Mg,a=0,o=0,l,c,d,h,f,u;--r>-1;)for(l=e[r],u=l.length,f=0;f<u;f+=6)c=l[f]-t,d=l[f+1]-i,h=or(c*c+d*d),h<s&&(s=h,a=l[f],o=l[f+1]);return[a,o]},Cw=function(e,t,i,r,s,a){var o=t.length,l=0,c=Math.min(e.size||ga(e),t[i].size||ga(t[i]))*r,d=Mg,h=e.centerX+s,f=e.centerY+a,u,m,p,v,g;for(m=i;m<o&&(u=t[m].size||ga(t[m]),!(u<c));m++)p=t[m].centerX-h,v=t[m].centerY-f,g=or(p*p+v*v),g<d&&(l=m,d=g);return g=t[l],t.splice(l,1),g},rf=function(e,t){var i=0,r=.999999,s=e.length,a=t/((s-2)/6),o,l,c,d,h,f,u,m,p,v,g,y,_,b;for(_=2;_<s;_+=6)for(i+=a;i>r;)o=e[_-2],l=e[_-1],c=e[_],d=e[_+1],h=e[_+2],f=e[_+3],u=e[_+4],m=e[_+5],b=1/((Math.floor(i)||1)+1),p=o+(c-o)*b,g=c+(h-c)*b,p+=(g-p)*b,g+=(h+(u-h)*b-g)*b,v=l+(d-l)*b,y=d+(f-d)*b,v+=(y-v)*b,y+=(f+(m-f)*b-y)*b,e.splice(_,4,o+(c-o)*b,l+(d-l)*b,p,v,p+(g-p)*b,v+(y-v)*b,g,y,h+(u-h)*b,f+(m-f)*b),_+=6,s+=6,i--;return e},sf=function(e,t,i,r,s){var a=t.length-e.length,o=a>0?t:e,l=a>0?e:t,c=0,d=r==="complexity"?Tw:Eg,h=r==="position"?0:typeof r=="number"?r:.8,f=l.length,u=typeof i=="object"&&i.push?i.slice(0):[i],m=u[0]==="reverse"||u[0]<0,p=i==="log",v,g,y,_,b,w,M;if(l[0]){if(o.length>1&&(e.sort(d),t.sort(d),w=o.size||Bo(o),w=l.size||Bo(l),w=o.centerX-l.centerX,M=o.centerY-l.centerY,d===Eg))for(f=0;f<l.length;f++)o.splice(f,0,Cw(l[f],o,f,h,w,M));if(a)for(a<0&&(a=-a),o[0].length>l[0].length&&rf(l[0],(o[0].length-l[0].length)/6|0),f=l.length;c<a;)_=o[f].size||ga(o[f]),y=Aw(l,o[f].centerX,o[f].centerY),_=y[0],b=y[1],l[f++]=[_,b,_,b,_,b,_,b],l.totalPoints+=8,c++;for(f=0;f<e.length;f++)v=t[f],g=e[f],a=v.length-g.length,a<0?rf(v,-a/6|0):a>0&&rf(g,a/6|0),m&&s!==!1&&!g.reversed&&No(g),i=u[f]||u[f]===0?u[f]:"auto",i&&(g.closed||Math.abs(g[0]-g[g.length-2])<.5&&Math.abs(g[1]-g[g.length-1])<.5?i==="auto"||i==="log"?(u[f]=i=Ew(g,v,!f||s===!1),i<0&&(m=!0,No(g),i=-i),Ag(g,i*6)):i!=="reverse"&&(f&&i<0&&No(g),Ag(g,(i<0?-i:i)*6)):!m&&(i==="auto"&&Math.abs(v[0]-g[0])+Math.abs(v[1]-g[1])+Math.abs(v[v.length-2]-g[g.length-2])+Math.abs(v[v.length-1]-g[g.length-1])>Math.abs(v[0]-g[g.length-2])+Math.abs(v[1]-g[g.length-1])+Math.abs(v[v.length-2]-g[0])+Math.abs(v[v.length-1]-g[1])||i%2)?(No(g),u[f]=-1,m=!0):i==="auto"?u[f]=0:i==="reverse"&&(u[f]=-1),g.closed!==v.closed&&(g.closed=v.closed=!1));return p&&Or("shapeIndex:["+u.join(",")+"]"),e.shapeIndex=u,u}},Cg=function(e,t,i,r,s){var a=Ir(e[0]),o=Ir(e[1]);sf(a,o,t||t===0?t:"auto",i,s)&&(e[0]=ma(a),e[1]=ma(o),(r==="log"||r===!0)&&Or('precompile:["'+e[0]+'","'+e[1]+'"]'))},Pw=function(e,t){if(!t)return e;var i=e.match(Fo)||[],r=i.length,s="",a,o,l;for(t==="reverse"?(o=r-1,a=-2):(o=((parseInt(t,10)||0)*2+1+r*100)%r,a=2),l=0;l<r;l+=2)s+=i[o-1]+","+i[o]+" ",o=(o+a)%r;return s},Pg=function(e,t){var i=0,r=parseFloat(e[0]),s=parseFloat(e[1]),a=r+","+s+" ",o=.999999,l,c,d,h,f,u,m;for(d=e.length,l=t*.5/(d*.5-1),c=0;c<d-2;c+=2){if(i+=l,u=parseFloat(e[c+2]),m=parseFloat(e[c+3]),i>o)for(f=1/(Math.floor(i)+1),h=1;i>o;)a+=(r+(u-r)*f*h).toFixed(2)+","+(s+(m-s)*f*h).toFixed(2)+" ",i--,h++;a+=u+","+m+" ",r=u,s=m}return a},af=function(e){var t=e[0].match(Fo)||[],i=e[1].match(Fo)||[],r=i.length-t.length;r>0?e[0]=Pg(t,r):e[1]=Pg(i,-r)},Rw=function(e){return isNaN(e)?af:function(t){af(t),t[1]=Pw(t[1],parseInt(e,10))}},Lw=function(e,t,i){var r=typeof e=="string",s,a;return(!r||ww.test(e)||(e.match(Fo)||[]).length<3)&&(s=ef(e)[0],s?(a=(s.nodeName+"").toUpperCase(),t&&a!=="PATH"&&(s=_g(s,!1),a="PATH"),e=s.getAttribute(a==="PATH"?"d":"points")||"",s===i&&(e=s.getAttributeNS(null,"data-original")||e)):(Or("WARNING: invalid morph to: "+e),e=!1)),e},Rg=function(e,t){for(var i=e.length,r=.2*(t||1),s,a,o,l,c,d,h,f,u,m,p,v;--i>-1;){for(a=e[i],p=a.isSmooth=a.isSmooth||[0,0,0,0],v=a.smoothData=a.smoothData||[0,0,0,0],p.length=4,f=a.length-2,h=6;h<f;h+=6)o=a[h]-a[h-2],l=a[h+1]-a[h-1],c=a[h+2]-a[h],d=a[h+3]-a[h+1],u=Ms(l,o),m=Ms(d,c),s=Math.abs(u-m)<r,s&&(v[h-2]=u,v[h+2]=m,v[h-1]=or(o*o+l*l),v[h+3]=or(c*c+d*d)),p.push(s,s,0,0,s,s);a[f]===a[0]&&a[f+1]===a[1]&&(o=a[0]-a[f-2],l=a[1]-a[f-1],c=a[2]-a[0],d=a[3]-a[1],u=Ms(l,o),m=Ms(d,c),Math.abs(u-m)<r&&(v[f-2]=u,v[2]=m,v[f-1]=or(o*o+l*l),v[3]=or(c*c+d*d),p[f-2]=p[f-1]=!0))}return e},Lg=function(e){var t=e.trim().split(" "),i=~e.indexOf("left")?0:~e.indexOf("right")?100:isNaN(parseFloat(t[0]))?50:parseFloat(t[0]),r=~e.indexOf("top")?0:~e.indexOf("bottom")?100:isNaN(parseFloat(t[1]))?50:parseFloat(t[1]);return{x:i/100,y:r/100}},Dw=function(e){return e!==e%hc?e+(e<0?Sg:-Sg):e},Dg="Use MorphSVGPlugin.convertToPath() to convert to a path before morphing.",Iw=function(e,t,i,r){var s=this._origin,a=this._eOrigin,o=e[i]-s.x,l=e[i+1]-s.y,c=or(o*o+l*l),d=Ms(l,o),h,f;return o=t[i]-a.x,l=t[i+1]-a.y,h=Ms(l,o)-d,f=Dw(h),!r&&ko&&Math.abs(f+ko.ca)<xw&&(r=ko),this._anchorPT=ko={_next:this._anchorPT,t:e,sa:d,ca:r&&f*r.ca<0&&Math.abs(f)>bw?h:f,sl:c,cl:or(o*o+l*l)-c,i}},Ig=function(e){Tn=xg(),Uo=Uo||Tn&&Tn.plugins.morphSVG,Tn&&Uo?(ef=Tn.utils.toArray,Uo.prototype._tweenRotation=Iw,yg=1):e&&Or("Please gsap.registerPlugin(MorphSVGPlugin)")},va={version:"3.12.5",name:"morphSVG",rawVars:1,register:function(e,t){Tn=e,Uo=t,Ig()},init:function(e,t,i,r,s){if(yg||Ig(1),!t)return Or("invalid shape"),!1;tf(t)&&(t=t.call(i,r,e,s));var a,o,l,c,d,h,f,u,m,p,v,g,y,_,b,w,M,T,E,S,x,C;if(typeof t=="string"||t.getBBox||t[0])t={shape:t};else if(typeof t=="object"){a={};for(o in t)a[o]=tf(t[o])&&o!=="render"?t[o].call(i,r,e,s):t[o];t=a}var A=e.nodeType?window.getComputedStyle(e):{},P=A.fill+"",R=!(P==="none"||(P.match(Fo)||[])[3]==="0"||A.fillRule==="evenodd"),L=(t.origin||"50 50").split(",");if(a=(e.nodeName+"").toUpperCase(),d=a==="POLYLINE"||a==="POLYGON",a!=="PATH"&&!d&&!t.prop)return Or("Cannot morph a <"+a+"> element. "+Dg),!1;if(o=a==="PATH"?"d":"points",!t.prop&&!tf(e.setAttribute))return!1;if(c=Lw(t.shape||t.d||t.points||"",o==="d",e),d&&Sw.test(c))return Or("A <"+a+"> cannot accept path data. "+Dg),!1;if(h=t.shapeIndex||t.shapeIndex===0?t.shapeIndex:"auto",f=t.map||va.defaultMap,this._prop=t.prop,this._render=t.render||va.defaultRender,this._apply="updateTarget"in t?t.updateTarget:va.defaultUpdateTarget,this._rnd=Math.pow(10,isNaN(t.precision)?2:+t.precision),this._tween=i,c){if(this._target=e,M=typeof t.precompile=="object",p=this._prop?e[this._prop]:e.getAttribute(o),!this._prop&&!e.getAttributeNS(null,"data-original")&&e.setAttributeNS(null,"data-original",p),o==="d"||this._prop){if(p=Ir(M?t.precompile[0]:p),v=Ir(M?t.precompile[1]:c),!M&&!sf(p,v,h,f,R))return!1;for((t.precompile==="log"||t.precompile===!0)&&Or('precompile:["'+ma(p)+'","'+ma(v)+'"]'),x=(t.type||va.defaultType)!=="linear",x&&(p=Rg(p,t.smoothTolerance),v=Rg(v,t.smoothTolerance),p.size||Bo(p),v.size||Bo(v),S=Lg(L[0]),this._origin=p.origin={x:p.left+S.x*p.width,y:p.top+S.y*p.height},L[1]&&(S=Lg(L[1])),this._eOrigin={x:v.left+S.x*v.width,y:v.top+S.y*v.height}),this._rawPath=e._gsRawPath=p,y=p.length;--y>-1;)for(b=p[y],w=v[y],u=b.isSmooth||[],m=w.isSmooth||[],_=b.length,ko=0,g=0;g<_;g+=2)(w[g]!==b[g]||w[g+1]!==b[g+1])&&(x?u[g]&&m[g]?(T=b.smoothData,E=w.smoothData,C=g+(g===_-4?7-_:5),this._controlPT={_next:this._controlPT,i:g,j:y,l1s:T[g+1],l1c:E[g+1]-T[g+1],l2s:T[C],l2c:E[C]-T[C]},l=this._tweenRotation(b,w,g+2),this._tweenRotation(b,w,g,l),this._tweenRotation(b,w,C-1,l),g+=4):this._tweenRotation(b,w,g):(l=this.add(b,g,b[g],w[g],0,0,0,0,0,1),l=this.add(b,g+1,b[g+1],w[g+1],0,0,0,0,0,1)||l))}else l=this.add(e,"setAttribute",e.getAttribute(o)+"",c+"",r,s,0,Rw(h),o);x&&(this.add(this._origin,"x",this._origin.x,this._eOrigin.x,0,0,0,0,0,1),l=this.add(this._origin,"y",this._origin.y,this._eOrigin.y,0,0,0,0,0,1)),l&&(this._props.push("morphSVG"),l.end=c,l.endProp=o)}return Mw},render:function(e,t){for(var i=t._rawPath,r=t._controlPT,s=t._anchorPT,a=t._rnd,o=t._target,l=t._pt,c,d,h,f,u,m,p,v,g,y,_,b,w;l;)l.r(e,l.d),l=l._next;if(e===1&&t._apply)for(l=t._pt;l;)l.end&&(t._prop?o[t._prop]=l.end:o.setAttribute(l.endProp,l.end)),l=l._next;else if(i){for(;s;)m=s.sa+e*s.ca,u=s.sl+e*s.cl,s.t[s.i]=t._origin.x+bg(m)*u,s.t[s.i+1]=t._origin.y+wg(m)*u,s=s._next;for(h=e<.5?2*e*e:(4-2*e)*e-1;r;)p=r.i,f=i[r.j],w=p+(p===f.length-4?7-f.length:5),m=Ms(f[w]-f[p+1],f[w-1]-f[p]),_=wg(m),b=bg(m),g=f[p+2],y=f[p+3],u=r.l1s+h*r.l1c,f[p]=g-b*u,f[p+1]=y-_*u,u=r.l2s+h*r.l2c,f[w-1]=g+b*u,f[w]=y+_*u,r=r._next;if(o._gsRawPath=i,t._apply){for(c="",d=" ",v=0;v<i.length;v++)for(f=i[v],u=f.length,c+="M"+(f[0]*a|0)/a+d+(f[1]*a|0)/a+" C",p=2;p<u;p++)c+=(f[p]*a|0)/a+d;t._prop?o[t._prop]=c:o.setAttribute("d",c)}}t._render&&i&&t._render.call(t._tween,i,o)},kill:function(e){this._pt=this._rawPath=0},getRawPath:mw,stringToRawPath:Ir,rawPathToString:ma,normalizeStrings:function(e,t,i){var r=i.shapeIndex,s=i.map,a=[e,t];return Cg(a,r,s),a},pathFilter:Cg,pointsFilter:af,getTotalSize:Bo,equalizeSegmentQuantity:sf,convertToPath:function(e,t){return ef(e).map(function(i){return _g(i,t!==!1)})},defaultType:"linear",defaultUpdateTarget:!0,defaultMap:"size"};xg()&&Tn.registerPlugin(va),Ce.registerPlugin(va);function Ow(){const n=document.querySelector("#client-logo-default");document.querySelectorAll("[data-client-name]").forEach(a=>{a.addEventListener("mouseenter",()=>e(a)),a.addEventListener("mouseleave",()=>t())});function e(a){i(a),s(a.getAttribute("data-client-name"))}function t(){r(),s("default")}function i(a){const o=a.getBoundingClientRect(),l=document.querySelector(".client_component_wrap").getBoundingClientRect();Ce.to("[data-logo-box]",{duration:.5,y:o.top-l.top})}function r(){Ce.to("[data-logo-box]",{duration:.5,y:0})}function s(a){const o=document.querySelector(`[data-client-logo="${a}"]`),l=o?o.querySelector("path").getAttribute("d"):n.querySelector("path").getAttribute("d");n.querySelector("path").getAttribute("d"),Ce.to(n.querySelector("path"),{duration:.5,morphSVG:l})}}function Og(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Nw(n,e,t){return e&&Og(n.prototype,e),t&&Og(n,t),n}/*!
 * Observer 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var fi,pc,Ji,Nr,kr,_a,Ng,Ts,zo,kg,lr,En,Ug,Fg=function(){return fi||typeof window<"u"&&(fi=window.gsap)&&fi.registerPlugin&&fi},Bg=1,ya=[],ot=[],Vn=[],Vo=Date.now,of=function(e,t){return t},kw=function(){var e=zo.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,ot),r.push.apply(r,Vn),ot=i,Vn=r,of=function(a,o){return t[a](o)}},Ur=function(e,t){return~Vn.indexOf(e)&&Vn[Vn.indexOf(e)+1][t]},Ho=function(e){return!!~kg.indexOf(e)},Ai=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},Ci=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},mc="scrollLeft",gc="scrollTop",lf=function(){return lr&&lr.isPressed||ot.cache++},vc=function(e,t){var i=function r(s){if(s||s===0){Bg&&(Ji.history.scrollRestoration="manual");var a=lr&&lr.isPressed;s=r.v=Math.round(s)||(lr&&lr.iOS?1:0),e(s),r.cacheID=ot.cache,a&&of("ss",s)}else(t||ot.cache!==r.cacheID||of("ref"))&&(r.cacheID=ot.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},Pi={s:mc,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:vc(function(n){return arguments.length?Ji.scrollTo(n,Yt.sc()):Ji.pageXOffset||Nr[mc]||kr[mc]||_a[mc]||0})},Yt={s:gc,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Pi,sc:vc(function(n){return arguments.length?Ji.scrollTo(Pi.sc(),n):Ji.pageYOffset||Nr[gc]||kr[gc]||_a[gc]||0})},Gi=function(e,t){return(t&&t._ctx&&t._ctx.selector||fi.utils.toArray)(e)[0]||(typeof e=="string"&&fi.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Fr=function(e,t){var i=t.s,r=t.sc;Ho(e)&&(e=Nr.scrollingElement||kr);var s=ot.indexOf(e),a=r===Yt.sc?1:2;!~s&&(s=ot.push(e)-1),ot[s+a]||Ai(e,"scroll",lf);var o=ot[s+a],l=o||(ot[s+a]=vc(Ur(e,i),!0)||(Ho(e)?r:vc(function(c){return arguments.length?e[i]=c:e[i]})));return l.target=e,o||(l.smooth=fi.getProperty(e,"scrollBehavior")==="smooth"),l},cf=function(e,t,i){var r=e,s=e,a=Vo(),o=a,l=t||50,c=Math.max(500,l*3),d=function(m,p){var v=Vo();p||v-a>l?(s=r,r=m,o=a,a=v):i?r+=m:r=s+(m-s)/(v-o)*(a-o)},h=function(){s=r=i?0:r,o=a=0},f=function(m){var p=o,v=s,g=Vo();return(m||m===0)&&m!==r&&d(m),a===o||g-o>c?0:(r+(i?v:-v))/((i?g:a)-p)*1e3};return{update:d,reset:h,getVelocity:f}},Go=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},zg=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},Vg=function(){zo=fi.core.globals().ScrollTrigger,zo&&zo.core&&kw()},Hg=function(e){return fi=e||Fg(),!pc&&fi&&typeof document<"u"&&document.body&&(Ji=window,Nr=document,kr=Nr.documentElement,_a=Nr.body,kg=[Ji,Nr,kr,_a],fi.utils.clamp,Ug=fi.core.context||function(){},Ts="onpointerenter"in _a?"pointer":"mouse",Ng=Vt.isTouch=Ji.matchMedia&&Ji.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ji||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,En=Vt.eventTypes=("ontouchstart"in kr?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in kr?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Bg=0},500),Vg(),pc=1),pc};Pi.op=Yt,ot.cache=0;var Vt=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){pc||Hg(fi)||console.warn("Please gsap.registerPlugin(Observer)"),zo||Vg();var r=i.tolerance,s=i.dragMinimum,a=i.type,o=i.target,l=i.lineHeight,c=i.debounce,d=i.preventDefault,h=i.onStop,f=i.onStopDelay,u=i.ignore,m=i.wheelSpeed,p=i.event,v=i.onDragStart,g=i.onDragEnd,y=i.onDrag,_=i.onPress,b=i.onRelease,w=i.onRight,M=i.onLeft,T=i.onUp,E=i.onDown,S=i.onChangeX,x=i.onChangeY,C=i.onChange,A=i.onToggleX,P=i.onToggleY,R=i.onHover,L=i.onHoverEnd,U=i.onMove,B=i.ignoreCheck,F=i.isNormalizer,G=i.onGestureStart,O=i.onGestureEnd,ee=i.onWheel,se=i.onEnable,we=i.onDisable,X=i.onClick,J=i.scrollSpeed,ne=i.capture,re=i.allowClicks,_e=i.lockAxis,Oe=i.onLockAxis;this.target=o=Gi(o)||kr,this.vars=i,u&&(u=fi.utils.toArray(u)),r=r||1e-9,s=s||0,m=m||1,J=J||1,a=a||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(Ji.getComputedStyle(_a).lineHeight)||22);var V,ze,Pe,me,fe,De,Ne,$=this,Ye=0,k=0,D=i.passive||!d,z=Fr(o,Pi),te=Fr(o,Yt),oe=z(),le=te(),Se=~a.indexOf("touch")&&!~a.indexOf("pointer")&&En[0]==="pointerdown",he=Ho(o),ce=o.ownerDocument||Nr,He=[0,0,0],ue=[0,0,0],Ie=0,rt=function(){return Ie=Vo()},Ee=function(Le,dt){return($.event=Le)&&u&&~u.indexOf(Le.target)||dt&&Se&&Le.pointerType!=="touch"||B&&B(Le,dt)},Ae=function(){$._vx.reset(),$._vy.reset(),ze.pause(),h&&h($)},Xe=function(){var Le=$.deltaX=zg(He),dt=$.deltaY=zg(ue),ye=Math.abs(Le)>=r,Ze=Math.abs(dt)>=r;C&&(ye||Ze)&&C($,Le,dt,He,ue),ye&&(w&&$.deltaX>0&&w($),M&&$.deltaX<0&&M($),S&&S($),A&&$.deltaX<0!=Ye<0&&A($),Ye=$.deltaX,He[0]=He[1]=He[2]=0),Ze&&(E&&$.deltaY>0&&E($),T&&$.deltaY<0&&T($),x&&x($),P&&$.deltaY<0!=k<0&&P($),k=$.deltaY,ue[0]=ue[1]=ue[2]=0),(me||Pe)&&(U&&U($),Pe&&(y($),Pe=!1),me=!1),De&&!(De=!1)&&Oe&&Oe($),fe&&(ee($),fe=!1),V=0},Je=function(Le,dt,ye){He[ye]+=Le,ue[ye]+=dt,$._vx.update(Le),$._vy.update(dt),c?V||(V=requestAnimationFrame(Xe)):Xe()},St=function(Le,dt){_e&&!Ne&&($.axis=Ne=Math.abs(Le)>Math.abs(dt)?"x":"y",De=!0),Ne!=="y"&&(He[2]+=Le,$._vx.update(Le,!0)),Ne!=="x"&&(ue[2]+=dt,$._vy.update(dt,!0)),c?V||(V=requestAnimationFrame(Xe)):Xe()},$e=function(Le){if(!Ee(Le,1)){Le=Go(Le,d);var dt=Le.clientX,ye=Le.clientY,Ze=dt-$.x,Fe=ye-$.y,Ke=$.isDragging;$.x=dt,$.y=ye,(Ke||Math.abs($.startX-dt)>=s||Math.abs($.startY-ye)>=s)&&(y&&(Pe=!0),Ke||($.isDragging=!0),St(Ze,Fe),Ke||v&&v($))}},H=$.onPress=function(Ve){Ee(Ve,1)||Ve&&Ve.button||($.axis=Ne=null,ze.pause(),$.isPressed=!0,Ve=Go(Ve),Ye=k=0,$.startX=$.x=Ve.clientX,$.startY=$.y=Ve.clientY,$._vx.reset(),$._vy.reset(),Ai(F?o:ce,En[1],$e,D,!0),$.deltaX=$.deltaY=0,_&&_($))},Q=$.onRelease=function(Ve){if(!Ee(Ve,1)){Ci(F?o:ce,En[1],$e,!0);var Le=!isNaN($.y-$.startY),dt=$.isDragging,ye=dt&&(Math.abs($.x-$.startX)>3||Math.abs($.y-$.startY)>3),Ze=Go(Ve);!ye&&Le&&($._vx.reset(),$._vy.reset(),d&&re&&fi.delayedCall(.08,function(){if(Vo()-Ie>300&&!Ve.defaultPrevented){if(Ve.target.click)Ve.target.click();else if(ce.createEvent){var Fe=ce.createEvent("MouseEvents");Fe.initMouseEvent("click",!0,!0,Ji,1,Ze.screenX,Ze.screenY,Ze.clientX,Ze.clientY,!1,!1,!1,!1,0,null),Ve.target.dispatchEvent(Fe)}}})),$.isDragging=$.isGesturing=$.isPressed=!1,h&&dt&&!F&&ze.restart(!0),g&&dt&&g($),b&&b($,ye)}},ie=function(Le){return Le.touches&&Le.touches.length>1&&($.isGesturing=!0)&&G(Le,$.isDragging)},pe=function(){return($.isGesturing=!1)||O($)},ge=function(Le){if(!Ee(Le)){var dt=z(),ye=te();Je((dt-oe)*J,(ye-le)*J,1),oe=dt,le=ye,h&&ze.restart(!0)}},Qe=function(Le){if(!Ee(Le)){Le=Go(Le,d),ee&&(fe=!0);var dt=(Le.deltaMode===1?l:Le.deltaMode===2?Ji.innerHeight:1)*m;Je(Le.deltaX*dt,Le.deltaY*dt,0),h&&!F&&ze.restart(!0)}},ht=function(Le){if(!Ee(Le)){var dt=Le.clientX,ye=Le.clientY,Ze=dt-$.x,Fe=ye-$.y;$.x=dt,$.y=ye,me=!0,h&&ze.restart(!0),(Ze||Fe)&&St(Ze,Fe)}},xt=function(Le){$.event=Le,R($)},At=function(Le){$.event=Le,L($)},ut=function(Le){return Ee(Le)||Go(Le,d)&&X($)};ze=$._dc=fi.delayedCall(f||.25,Ae).pause(),$.deltaX=$.deltaY=0,$._vx=cf(0,50,!0),$._vy=cf(0,50,!0),$.scrollX=z,$.scrollY=te,$.isDragging=$.isGesturing=$.isPressed=!1,Ug(this),$.enable=function(Ve){return $.isEnabled||(Ai(he?ce:o,"scroll",lf),a.indexOf("scroll")>=0&&Ai(he?ce:o,"scroll",ge,D,ne),a.indexOf("wheel")>=0&&Ai(o,"wheel",Qe,D,ne),(a.indexOf("touch")>=0&&Ng||a.indexOf("pointer")>=0)&&(Ai(o,En[0],H,D,ne),Ai(ce,En[2],Q),Ai(ce,En[3],Q),re&&Ai(o,"click",rt,!0,!0),X&&Ai(o,"click",ut),G&&Ai(ce,"gesturestart",ie),O&&Ai(ce,"gestureend",pe),R&&Ai(o,Ts+"enter",xt),L&&Ai(o,Ts+"leave",At),U&&Ai(o,Ts+"move",ht)),$.isEnabled=!0,Ve&&Ve.type&&H(Ve),se&&se($)),$},$.disable=function(){$.isEnabled&&(ya.filter(function(Ve){return Ve!==$&&Ho(Ve.target)}).length||Ci(he?ce:o,"scroll",lf),$.isPressed&&($._vx.reset(),$._vy.reset(),Ci(F?o:ce,En[1],$e,!0)),Ci(he?ce:o,"scroll",ge,ne),Ci(o,"wheel",Qe,ne),Ci(o,En[0],H,ne),Ci(ce,En[2],Q),Ci(ce,En[3],Q),Ci(o,"click",rt,!0),Ci(o,"click",ut),Ci(ce,"gesturestart",ie),Ci(ce,"gestureend",pe),Ci(o,Ts+"enter",xt),Ci(o,Ts+"leave",At),Ci(o,Ts+"move",ht),$.isEnabled=$.isPressed=$.isDragging=!1,we&&we($))},$.kill=$.revert=function(){$.disable();var Ve=ya.indexOf($);Ve>=0&&ya.splice(Ve,1),lr===$&&(lr=0)},ya.push($),F&&Ho(o)&&(lr=$),$.enable(p)},Nw(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Vt.version="3.12.5",Vt.create=function(n){return new Vt(n)},Vt.register=Hg,Vt.getAll=function(){return ya.slice()},Vt.getById=function(n){return ya.filter(function(e){return e.vars.id===n})[0]},Fg()&&fi.registerPlugin(Vt);/*!
 * ScrollTrigger 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Re,xa,ct,Ut,An,Rt,Gg,_c,Wo,Xo,$o,yc,vi,xc,uf,Ri,Wg,Xg,ba,$g,df,qg,Li,ff,Yg,jg,Br,hf,pf,wa,mf,bc,gf,vf,wc=1,_i=Date.now,_f=_i(),hn=0,qo=0,Kg=function(e,t,i){var r=en(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},Zg=function(e,t){return t&&(!en(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Uw=function n(){return qo&&requestAnimationFrame(n)},Qg=function(){return xc=1},Jg=function(){return xc=0},Hn=function(e){return e},Yo=function(e){return Math.round(e*1e5)/1e5||0},ev=function(){return typeof window<"u"},tv=function(){return Re||ev()&&(Re=window.gsap)&&Re.registerPlugin&&Re},Es=function(e){return!!~Gg.indexOf(e)},iv=function(e){return(e==="Height"?mf:ct["inner"+e])||An["client"+e]||Rt["client"+e]},nv=function(e){return Ur(e,"getBoundingClientRect")||(Es(e)?function(){return Nc.width=ct.innerWidth,Nc.height=mf,Nc}:function(){return cr(e)})},Fw=function(e,t,i){var r=i.d,s=i.d2,a=i.a;return(a=Ur(e,"getBoundingClientRect"))?function(){return a()[r]}:function(){return(t?iv(s):e["client"+s])||0}},Bw=function(e,t){return!t||~Vn.indexOf(e)?nv(e):function(){return Nc}},Gn=function(e,t){var i=t.s,r=t.d2,s=t.d,a=t.a;return Math.max(0,(i="scroll"+r)&&(a=Ur(e,i))?a()-nv(e)()[s]:Es(e)?(An[i]||Rt[i])-iv(r):e[i]-e["offset"+r])},Sc=function(e,t){for(var i=0;i<ba.length;i+=3)(!t||~t.indexOf(ba[i+1]))&&e(ba[i],ba[i+1],ba[i+2])},en=function(e){return typeof e=="string"},Di=function(e){return typeof e=="function"},jo=function(e){return typeof e=="number"},As=function(e){return typeof e=="object"},Ko=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},yf=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Sa=Math.abs,rv="left",sv="top",xf="right",bf="bottom",Cs="width",Ps="height",Zo="Right",Qo="Left",Jo="Top",el="Bottom",Xt="padding",pn="margin",Ma="Width",wf="Height",jt="px",mn=function(e){return ct.getComputedStyle(e)},zw=function(e){var t=mn(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},av=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},cr=function(e,t){var i=t&&mn(e)[uf]!=="matrix(1, 0, 0, 1, 0, 0)"&&Re.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},Mc=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},ov=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},Vw=function(e){return function(t){return Re.utils.snap(ov(e),t)}},Sf=function(e){var t=Re.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,a){a===void 0&&(a=.001);var o;if(!s)return t(r);if(s>0){for(r-=a,o=0;o<i.length;o++)if(i[o]>=r)return i[o];return i[o-1]}else for(o=i.length,r+=a;o--;)if(i[o]<=r)return i[o];return i[0]}:function(r,s,a){a===void 0&&(a=.001);var o=t(r);return!s||Math.abs(o-r)<a||o-r<0==s<0?o:t(s<0?r-e:r+e)}},Hw=function(e){return function(t,i){return Sf(ov(e))(t,i.direction)}},Tc=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},ni=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},ri=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},Ec=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},lv={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Ac={toggleActions:"play",anticipatePin:0},Cc={top:0,left:0,center:.5,bottom:1,right:1},Pc=function(e,t){if(en(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in Cc?Cc[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Rc=function(e,t,i,r,s,a,o,l){var c=s.startColor,d=s.endColor,h=s.fontSize,f=s.indent,u=s.fontWeight,m=Ut.createElement("div"),p=Es(i)||Ur(i,"pinType")==="fixed",v=e.indexOf("scroller")!==-1,g=p?Rt:i,y=e.indexOf("start")!==-1,_=y?c:d,b="border-color:"+_+";font-size:"+h+";color:"+_+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((v||l)&&p?"fixed;":"absolute;"),(v||l||!p)&&(b+=(r===Yt?xf:bf)+":"+(a+parseFloat(f))+"px;"),o&&(b+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),m._isStart=y,m.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),m.style.cssText=b,m.innerText=t||t===0?e+"-"+t:e,g.children[0]?g.insertBefore(m,g.children[0]):g.appendChild(m),m._offset=m["offset"+r.op.d2],Lc(m,0,r,y),m},Lc=function(e,t,i,r){var s={display:"block"},a=i[r?"os2":"p2"],o=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+a+Ma]=1,s["border"+o+Ma]=0,s[i.p]=t+"px",Re.set(e,s)},st=[],Mf={},tl,cv=function(){return _i()-hn>34&&(tl||(tl=requestAnimationFrame(ur)))},Ta=function(){(!Li||!Li.isPressed||Li.startX>Rt.clientWidth)&&(ot.cache++,Li?tl||(tl=requestAnimationFrame(ur)):ur(),hn||Ls("scrollStart"),hn=_i())},Tf=function(){jg=ct.innerWidth,Yg=ct.innerHeight},il=function(){ot.cache++,!vi&&!qg&&!Ut.fullscreenElement&&!Ut.webkitFullscreenElement&&(!ff||jg!==ct.innerWidth||Math.abs(ct.innerHeight-Yg)>ct.innerHeight*.25)&&_c.restart(!0)},Rs={},Gw=[],uv=function n(){return ri(et,"scrollEnd",n)||Is(!0)},Ls=function(e){return Rs[e]&&Rs[e].map(function(t){return t()})||Gw},tn=[],dv=function(e){for(var t=0;t<tn.length;t+=5)(!e||tn[t+4]&&tn[t+4].query===e)&&(tn[t].style.cssText=tn[t+1],tn[t].getBBox&&tn[t].setAttribute("transform",tn[t+2]||""),tn[t+3].uncache=1)},Ef=function(e,t){var i;for(Ri=0;Ri<st.length;Ri++)i=st[Ri],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));bc=!0,t&&dv(t),t||Ls("revert")},fv=function(e,t){ot.cache++,(t||!Ii)&&ot.forEach(function(i){return Di(i)&&i.cacheID++&&(i.rec=0)}),en(e)&&(ct.history.scrollRestoration=pf=e)},Ii,Ds=0,hv,Ww=function(){if(hv!==Ds){var e=hv=Ds;requestAnimationFrame(function(){return e===Ds&&Is(!0)})}},pv=function(){Rt.appendChild(wa),mf=!Li&&wa.offsetHeight||ct.innerHeight,Rt.removeChild(wa)},mv=function(e){return Wo(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Is=function(e,t){if(hn&&!e&&!bc){ni(et,"scrollEnd",uv);return}pv(),Ii=et.isRefreshing=!0,ot.forEach(function(r){return Di(r)&&++r.cacheID&&(r.rec=r())});var i=Ls("refreshInit");$g&&et.sort(),t||Ef(),ot.forEach(function(r){Di(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),st.slice(0).forEach(function(r){return r.refresh()}),bc=!1,st.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",a=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-a),r.refresh()}}),gf=1,mv(!0),st.forEach(function(r){var s=Gn(r.scroller,r._dir),a=r.vars.end==="max"||r._endClamp&&r.end>s,o=r._startClamp&&r.start>=s;(a||o)&&r.setPositions(o?s-1:r.start,a?Math.max(o?s:r.start+1,s):r.end,!0)}),mv(!1),gf=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),ot.forEach(function(r){Di(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),fv(pf,1),_c.pause(),Ds++,Ii=2,ur(2),st.forEach(function(r){return Di(r.vars.onRefresh)&&r.vars.onRefresh(r)}),Ii=et.isRefreshing=!1,Ls("refresh")},Af=0,Dc=1,nl,ur=function(e){if(e===2||!Ii&&!bc){et.isUpdating=!0,nl&&nl.update(0);var t=st.length,i=_i(),r=i-_f>=50,s=t&&st[0].scroll();if(Dc=Af>s?-1:1,Ii||(Af=s),r&&(hn&&!xc&&i-hn>200&&(hn=0,Ls("scrollEnd")),$o=_f,_f=i),Dc<0){for(Ri=t;Ri-- >0;)st[Ri]&&st[Ri].update(0,r);Dc=1}else for(Ri=0;Ri<t;Ri++)st[Ri]&&st[Ri].update(0,r);et.isUpdating=!1}tl=0},Cf=[rv,sv,bf,xf,pn+el,pn+Zo,pn+Jo,pn+Qo,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Ic=Cf.concat([Cs,Ps,"boxSizing","max"+Ma,"max"+wf,"position",pn,Xt,Xt+Jo,Xt+Zo,Xt+el,Xt+Qo]),Xw=function(e,t,i){Ea(i);var r=e._gsap;if(r.spacerIsNative)Ea(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},Pf=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=Cf.length,a=t.style,o=e.style,l;s--;)l=Cf[s],a[l]=i[l];a.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(a.display="inline-block"),o[bf]=o[xf]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[Cs]=Mc(e,Pi)+jt,a[Ps]=Mc(e,Yt)+jt,a[Xt]=o[pn]=o[sv]=o[rv]="0",Ea(r),o[Cs]=o["max"+Ma]=i[Cs],o[Ps]=o["max"+wf]=i[Ps],o[Xt]=i[Xt],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},$w=/([A-Z])/g,Ea=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,a;for((e.t._gsap||Re.core.getCache(e.t)).uncache=1;r<i;r+=2)a=e[r+1],s=e[r],a?t[s]=a:t[s]&&t.removeProperty(s.replace($w,"-$1").toLowerCase())}},Oc=function(e){for(var t=Ic.length,i=e.style,r=[],s=0;s<t;s++)r.push(Ic[s],i[Ic[s]]);return r.t=e,r},qw=function(e,t,i){for(var r=[],s=e.length,a=i?8:0,o;a<s;a+=2)o=e[a],r.push(o,o in t?t[o]:e[a+1]);return r.t=e.t,r},Nc={left:0,top:0},gv=function(e,t,i,r,s,a,o,l,c,d,h,f,u,m){Di(e)&&(e=e(l)),en(e)&&e.substr(0,3)==="max"&&(e=f+(e.charAt(4)==="="?Pc("0"+e.substr(3),i):0));var p=u?u.time():0,v,g,y;if(u&&u.seek(0),isNaN(e)||(e=+e),jo(e))u&&(e=Re.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,f,e)),o&&Lc(o,i,r,!0);else{Di(t)&&(t=t(l));var _=(e||"0").split(" "),b,w,M,T;y=Gi(t,l)||Rt,b=cr(y)||{},(!b||!b.left&&!b.top)&&mn(y).display==="none"&&(T=y.style.display,y.style.display="block",b=cr(y),T?y.style.display=T:y.style.removeProperty("display")),w=Pc(_[0],b[r.d]),M=Pc(_[1]||"0",i),e=b[r.p]-c[r.p]-d+w+s-M,o&&Lc(o,M,r,i-M<20||o._isStart&&M>20),i-=i-M}if(m&&(l[m]=e||-.001,e<0&&(e=0)),a){var E=e+i,S=a._isStart;v="scroll"+r.d2,Lc(a,E,r,S&&E>20||!S&&(h?Math.max(Rt[v],An[v]):a.parentNode[v])<=E+1),h&&(c=cr(o),h&&(a.style[r.op.p]=c[r.op.p]-r.op.m-a._offset+jt))}return u&&y&&(v=cr(y),u.seek(f),g=cr(y),u._caScrollDist=v[r.p]-g[r.p],e=e/u._caScrollDist*f),u&&u.seek(p),u?e:Math.round(e)},Yw=/(webkit|moz|length|cssText|inset)/i,vv=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,a,o;if(t===Rt){e._stOrig=s.cssText,o=mn(e);for(a in o)!+a&&!Yw.test(a)&&o[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=o[a]);s.top=i,s.left=r}else s.cssText=e._stOrig;Re.core.getCache(e).uncache=1,t.appendChild(e)}},_v=function(e,t,i){var r=t,s=r;return function(a){var o=Math.round(e());return o!==r&&o!==s&&Math.abs(o-r)>3&&Math.abs(o-s)>3&&(a=o,i&&i()),s=r,r=a,a}},kc=function(e,t,i){var r={};r[t.p]="+="+i,Re.set(e,r)},yv=function(e,t){var i=Fr(e,t),r="_scroll"+t.p2,s=function a(o,l,c,d,h){var f=a.tween,u=l.onComplete,m={};c=c||i();var p=_v(i,c,function(){f.kill(),a.tween=0});return h=d&&h||0,d=d||o-c,f&&f.kill(),l[r]=o,l.inherit=!1,l.modifiers=m,m[r]=function(){return p(c+d*f.ratio+h*f.ratio*f.ratio)},l.onUpdate=function(){ot.cache++,a.tween&&ur()},l.onComplete=function(){a.tween=0,u&&u.call(f)},f=a.tween=Re.to(e,l),f};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},ni(e,"wheel",i.wheelHandler),et.isTouch&&ni(e,"touchmove",i.wheelHandler),s},et=function(){function n(t,i){xa||n.register(Re)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),hf(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!qo){this.update=this.refresh=this.kill=Hn;return}i=av(en(i)||jo(i)||i.nodeType?{trigger:i}:i,Ac);var s=i,a=s.onUpdate,o=s.toggleClass,l=s.id,c=s.onToggle,d=s.onRefresh,h=s.scrub,f=s.trigger,u=s.pin,m=s.pinSpacing,p=s.invalidateOnRefresh,v=s.anticipatePin,g=s.onScrubComplete,y=s.onSnapComplete,_=s.once,b=s.snap,w=s.pinReparent,M=s.pinSpacer,T=s.containerAnimation,E=s.fastScrollEnd,S=s.preventOverlaps,x=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Pi:Yt,C=!h&&h!==0,A=Gi(i.scroller||ct),P=Re.core.getCache(A),R=Es(A),L=("pinType"in i?i.pinType:Ur(A,"pinType")||R&&"fixed")==="fixed",U=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],B=C&&i.toggleActions.split(" "),F="markers"in i?i.markers:Ac.markers,G=R?0:parseFloat(mn(A)["border"+x.p2+Ma])||0,O=this,ee=i.onRefreshInit&&function(){return i.onRefreshInit(O)},se=Fw(A,R,x),we=Bw(A,R),X=0,J=0,ne=0,re=Fr(A,x),_e,Oe,V,ze,Pe,me,fe,De,Ne,$,Ye,k,D,z,te,oe,le,Se,he,ce,He,ue,Ie,rt,Ee,Ae,Xe,Je,St,$e,H,Q,ie,pe,ge,Qe,ht,xt,At;if(O._startClamp=O._endClamp=!1,O._dir=x,v*=45,O.scroller=A,O.scroll=T?T.time.bind(T):re,ze=re(),O.vars=i,r=r||i.animation,"refreshPriority"in i&&($g=1,i.refreshPriority===-9999&&(nl=O)),P.tweenScroll=P.tweenScroll||{top:yv(A,Yt),left:yv(A,Pi)},O.tweenTo=_e=P.tweenScroll[x.p],O.scrubDuration=function(ye){ie=jo(ye)&&ye,ie?Q?Q.duration(ye):Q=Re.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ie,paused:!0,onComplete:function(){return g&&g(O)}}):(Q&&Q.progress(1).kill(),Q=0)},r&&(r.vars.lazy=!1,r._initted&&!O.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),O.animation=r.pause(),r.scrollTrigger=O,O.scrubDuration(h),$e=0,l||(l=r.vars.id)),b&&((!As(b)||b.push)&&(b={snapTo:b}),"scrollBehavior"in Rt.style&&Re.set(R?[Rt,An]:A,{scrollBehavior:"auto"}),ot.forEach(function(ye){return Di(ye)&&ye.target===(R?Ut.scrollingElement||An:A)&&(ye.smooth=!1)}),V=Di(b.snapTo)?b.snapTo:b.snapTo==="labels"?Vw(r):b.snapTo==="labelsDirectional"?Hw(r):b.directional!==!1?function(ye,Ze){return Sf(b.snapTo)(ye,_i()-J<500?0:Ze.direction)}:Re.utils.snap(b.snapTo),pe=b.duration||{min:.1,max:2},pe=As(pe)?Xo(pe.min,pe.max):Xo(pe,pe),ge=Re.delayedCall(b.delay||ie/2||.1,function(){var ye=re(),Ze=_i()-J<500,Fe=_e.tween;if((Ze||Math.abs(O.getVelocity())<10)&&!Fe&&!xc&&X!==ye){var Ke=(ye-me)/z,Ft=r&&!C?r.totalProgress():Ke,at=Ze?0:(Ft-H)/(_i()-$o)*1e3||0,It=Re.utils.clamp(-Ke,1-Ke,Sa(at/2)*at/.185),ui=Ke+(b.inertia===!1?0:It),Ot,Ct,I=b,W=I.onStart,q=I.onInterrupt,Y=I.onComplete;if(Ot=V(ui,O),jo(Ot)||(Ot=ui),Ct=Math.round(me+Ot*z),ye<=fe&&ye>=me&&Ct!==ye){if(Fe&&!Fe._initted&&Fe.data<=Sa(Ct-ye))return;b.inertia===!1&&(It=Ot-Ke),_e(Ct,{duration:pe(Sa(Math.max(Sa(ui-Ft),Sa(Ot-Ft))*.185/at/.05||0)),ease:b.ease||"power3",data:Sa(Ct-ye),onInterrupt:function(){return ge.restart(!0)&&q&&q(O)},onComplete:function(){O.update(),X=re(),r&&(Q?Q.resetTo("totalProgress",Ot,r._tTime/r._tDur):r.progress(Ot)),$e=H=r&&!C?r.totalProgress():O.progress,y&&y(O),Y&&Y(O)}},ye,It*z,Ct-ye-It*z),W&&W(O,_e.tween)}}else O.isActive&&X!==ye&&ge.restart(!0)}).pause()),l&&(Mf[l]=O),f=O.trigger=Gi(f||u!==!0&&u),At=f&&f._gsap&&f._gsap.stRevert,At&&(At=At(O)),u=u===!0?f:Gi(u),en(o)&&(o={targets:f,className:o}),u&&(m===!1||m===pn||(m=!m&&u.parentNode&&u.parentNode.style&&mn(u.parentNode).display==="flex"?!1:Xt),O.pin=u,Oe=Re.core.getCache(u),Oe.spacer?te=Oe.pinState:(M&&(M=Gi(M),M&&!M.nodeType&&(M=M.current||M.nativeElement),Oe.spacerIsNative=!!M,M&&(Oe.spacerState=Oc(M))),Oe.spacer=Se=M||Ut.createElement("div"),Se.classList.add("pin-spacer"),l&&Se.classList.add("pin-spacer-"+l),Oe.pinState=te=Oc(u)),i.force3D!==!1&&Re.set(u,{force3D:!0}),O.spacer=Se=Oe.spacer,St=mn(u),rt=St[m+x.os2],ce=Re.getProperty(u),He=Re.quickSetter(u,x.a,jt),Pf(u,Se,St),le=Oc(u)),F){k=As(F)?av(F,lv):lv,$=Rc("scroller-start",l,A,x,k,0),Ye=Rc("scroller-end",l,A,x,k,0,$),he=$["offset"+x.op.d2];var ut=Gi(Ur(A,"content")||A);De=this.markerStart=Rc("start",l,ut,x,k,he,0,T),Ne=this.markerEnd=Rc("end",l,ut,x,k,he,0,T),T&&(xt=Re.quickSetter([De,Ne],x.a,jt)),!L&&!(Vn.length&&Ur(A,"fixedMarkers")===!0)&&(zw(R?Rt:A),Re.set([$,Ye],{force3D:!0}),Ae=Re.quickSetter($,x.a,jt),Je=Re.quickSetter(Ye,x.a,jt))}if(T){var Ve=T.vars.onUpdate,Le=T.vars.onUpdateParams;T.eventCallback("onUpdate",function(){O.update(0,0,1),Ve&&Ve.apply(T,Le||[])})}if(O.previous=function(){return st[st.indexOf(O)-1]},O.next=function(){return st[st.indexOf(O)+1]},O.revert=function(ye,Ze){if(!Ze)return O.kill(!0);var Fe=ye!==!1||!O.enabled,Ke=vi;Fe!==O.isReverted&&(Fe&&(Qe=Math.max(re(),O.scroll.rec||0),ne=O.progress,ht=r&&r.progress()),De&&[De,Ne,$,Ye].forEach(function(Ft){return Ft.style.display=Fe?"none":"block"}),Fe&&(vi=O,O.update(Fe)),u&&(!w||!O.isActive)&&(Fe?Xw(u,Se,te):Pf(u,Se,mn(u),Ee)),Fe||O.update(Fe),vi=Ke,O.isReverted=Fe)},O.refresh=function(ye,Ze,Fe,Ke){if(!((vi||!O.enabled)&&!Ze)){if(u&&ye&&hn){ni(n,"scrollEnd",uv);return}!Ii&&ee&&ee(O),vi=O,_e.tween&&!Fe&&(_e.tween.kill(),_e.tween=0),Q&&Q.pause(),p&&r&&r.revert({kill:!1}).invalidate(),O.isReverted||O.revert(!0,!0),O._subPinOffset=!1;var Ft=se(),at=we(),It=T?T.duration():Gn(A,x),ui=z<=.01,Ot=0,Ct=Ke||0,I=As(Fe)?Fe.end:i.end,W=i.endTrigger||f,q=As(Fe)?Fe.start:i.start||(i.start===0||!f?0:u?"0 0":"0 100%"),Y=O.pinnedContainer=i.pinnedContainer&&Gi(i.pinnedContainer,O),j=f&&Math.max(0,st.indexOf(O))||0,de=j,xe,Te,Be,je,Ue,ke,mt,qt,Si,Ui,tt,qe,Jn;for(F&&As(Fe)&&(qe=Re.getProperty($,x.p),Jn=Re.getProperty(Ye,x.p));de--;)ke=st[de],ke.end||ke.refresh(0,1)||(vi=O),mt=ke.pin,mt&&(mt===f||mt===u||mt===Y)&&!ke.isReverted&&(Ui||(Ui=[]),Ui.unshift(ke),ke.revert(!0,!0)),ke!==st[de]&&(j--,de--);for(Di(q)&&(q=q(O)),q=Kg(q,"start",O),me=gv(q,f,Ft,x,re(),De,$,O,at,G,L,It,T,O._startClamp&&"_startClamp")||(u?-.001:0),Di(I)&&(I=I(O)),en(I)&&!I.indexOf("+=")&&(~I.indexOf(" ")?I=(en(q)?q.split(" ")[0]:"")+I:(Ot=Pc(I.substr(2),Ft),I=en(q)?q:(T?Re.utils.mapRange(0,T.duration(),T.scrollTrigger.start,T.scrollTrigger.end,me):me)+Ot,W=f)),I=Kg(I,"end",O),fe=Math.max(me,gv(I||(W?"100% 0":It),W,Ft,x,re()+Ot,Ne,Ye,O,at,G,L,It,T,O._endClamp&&"_endClamp"))||-.001,Ot=0,de=j;de--;)ke=st[de],mt=ke.pin,mt&&ke.start-ke._pinPush<=me&&!T&&ke.end>0&&(xe=ke.end-(O._startClamp?Math.max(0,ke.start):ke.start),(mt===f&&ke.start-ke._pinPush<me||mt===Y)&&isNaN(q)&&(Ot+=xe*(1-ke.progress)),mt===u&&(Ct+=xe));if(me+=Ot,fe+=Ot,O._startClamp&&(O._startClamp+=Ot),O._endClamp&&!Ii&&(O._endClamp=fe||-.001,fe=Math.min(fe,Gn(A,x))),z=fe-me||(me-=.01)&&.001,ui&&(ne=Re.utils.clamp(0,1,Re.utils.normalize(me,fe,Qe))),O._pinPush=Ct,De&&Ot&&(xe={},xe[x.a]="+="+Ot,Y&&(xe[x.p]="-="+re()),Re.set([De,Ne],xe)),u&&!(gf&&O.end>=Gn(A,x)))xe=mn(u),je=x===Yt,Be=re(),ue=parseFloat(ce(x.a))+Ct,!It&&fe>1&&(tt=(R?Ut.scrollingElement||An:A).style,tt={style:tt,value:tt["overflow"+x.a.toUpperCase()]},R&&mn(Rt)["overflow"+x.a.toUpperCase()]!=="scroll"&&(tt.style["overflow"+x.a.toUpperCase()]="scroll")),Pf(u,Se,xe),le=Oc(u),Te=cr(u,!0),qt=L&&Fr(A,je?Pi:Yt)(),m?(Ee=[m+x.os2,z+Ct+jt],Ee.t=Se,de=m===Xt?Mc(u,x)+z+Ct:0,de&&(Ee.push(x.d,de+jt),Se.style.flexBasis!=="auto"&&(Se.style.flexBasis=de+jt)),Ea(Ee),Y&&st.forEach(function(_t){_t.pin===Y&&_t.vars.pinSpacing!==!1&&(_t._subPinOffset=!0)}),L&&re(Qe)):(de=Mc(u,x),de&&Se.style.flexBasis!=="auto"&&(Se.style.flexBasis=de+jt)),L&&(Ue={top:Te.top+(je?Be-me:qt)+jt,left:Te.left+(je?qt:Be-me)+jt,boxSizing:"border-box",position:"fixed"},Ue[Cs]=Ue["max"+Ma]=Math.ceil(Te.width)+jt,Ue[Ps]=Ue["max"+wf]=Math.ceil(Te.height)+jt,Ue[pn]=Ue[pn+Jo]=Ue[pn+Zo]=Ue[pn+el]=Ue[pn+Qo]="0",Ue[Xt]=xe[Xt],Ue[Xt+Jo]=xe[Xt+Jo],Ue[Xt+Zo]=xe[Xt+Zo],Ue[Xt+el]=xe[Xt+el],Ue[Xt+Qo]=xe[Xt+Qo],oe=qw(te,Ue,w),Ii&&re(0)),r?(Si=r._initted,df(1),r.render(r.duration(),!0,!0),Ie=ce(x.a)-ue+z+Ct,Xe=Math.abs(z-Ie)>1,L&&Xe&&oe.splice(oe.length-2,2),r.render(0,!0,!0),Si||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),df(0)):Ie=z,tt&&(tt.value?tt.style["overflow"+x.a.toUpperCase()]=tt.value:tt.style.removeProperty("overflow-"+x.a));else if(f&&re()&&!T)for(Te=f.parentNode;Te&&Te!==Rt;)Te._pinOffset&&(me-=Te._pinOffset,fe-=Te._pinOffset),Te=Te.parentNode;Ui&&Ui.forEach(function(_t){return _t.revert(!1,!0)}),O.start=me,O.end=fe,ze=Pe=Ii?Qe:re(),!T&&!Ii&&(ze<Qe&&re(Qe),O.scroll.rec=0),O.revert(!1,!0),J=_i(),ge&&(X=-1,ge.restart(!0)),vi=0,r&&C&&(r._initted||ht)&&r.progress()!==ht&&r.progress(ht||0,!0).render(r.time(),!0,!0),(ui||ne!==O.progress||T||p)&&(r&&!C&&r.totalProgress(T&&me<-.001&&!ne?Re.utils.normalize(me,fe,0):ne,!0),O.progress=ui||(ze-me)/z===ne?0:ne),u&&m&&(Se._pinOffset=Math.round(O.progress*Ie)),Q&&Q.invalidate(),isNaN(qe)||(qe-=Re.getProperty($,x.p),Jn-=Re.getProperty(Ye,x.p),kc($,x,qe),kc(De,x,qe-(Ke||0)),kc(Ye,x,Jn),kc(Ne,x,Jn-(Ke||0))),ui&&!Ii&&O.update(),d&&!Ii&&!D&&(D=!0,d(O),D=!1)}},O.getVelocity=function(){return(re()-Pe)/(_i()-$o)*1e3||0},O.endAnimation=function(){Ko(O.callbackAnimation),r&&(Q?Q.progress(1):r.paused()?C||Ko(r,O.direction<0,1):Ko(r,r.reversed()))},O.labelToScroll=function(ye){return r&&r.labels&&(me||O.refresh()||me)+r.labels[ye]/r.duration()*z||0},O.getTrailing=function(ye){var Ze=st.indexOf(O),Fe=O.direction>0?st.slice(0,Ze).reverse():st.slice(Ze+1);return(en(ye)?Fe.filter(function(Ke){return Ke.vars.preventOverlaps===ye}):Fe).filter(function(Ke){return O.direction>0?Ke.end<=me:Ke.start>=fe})},O.update=function(ye,Ze,Fe){if(!(T&&!Fe&&!ye)){var Ke=Ii===!0?Qe:O.scroll(),Ft=ye?0:(Ke-me)/z,at=Ft<0?0:Ft>1?1:Ft||0,It=O.progress,ui,Ot,Ct,I,W,q,Y,j;if(Ze&&(Pe=ze,ze=T?re():Ke,b&&(H=$e,$e=r&&!C?r.totalProgress():at)),v&&u&&!vi&&!wc&&hn&&(!at&&me<Ke+(Ke-Pe)/(_i()-$o)*v?at=1e-4:at===1&&fe>Ke+(Ke-Pe)/(_i()-$o)*v&&(at=.9999)),at!==It&&O.enabled){if(ui=O.isActive=!!at&&at<1,Ot=!!It&&It<1,q=ui!==Ot,W=q||!!at!=!!It,O.direction=at>It?1:-1,O.progress=at,W&&!vi&&(Ct=at&&!It?0:at===1?1:It===1?2:3,C&&(I=!q&&B[Ct+1]!=="none"&&B[Ct+1]||B[Ct],j=r&&(I==="complete"||I==="reset"||I in r))),S&&(q||j)&&(j||h||!r)&&(Di(S)?S(O):O.getTrailing(S).forEach(function(Be){return Be.endAnimation()})),C||(Q&&!vi&&!wc?(Q._dp._time-Q._start!==Q._time&&Q.render(Q._dp._time-Q._start),Q.resetTo?Q.resetTo("totalProgress",at,r._tTime/r._tDur):(Q.vars.totalProgress=at,Q.invalidate().restart())):r&&r.totalProgress(at,!!(vi&&(J||ye)))),u){if(ye&&m&&(Se.style[m+x.os2]=rt),!L)He(Yo(ue+Ie*at));else if(W){if(Y=!ye&&at>It&&fe+1>Ke&&Ke+1>=Gn(A,x),w)if(!ye&&(ui||Y)){var de=cr(u,!0),xe=Ke-me;vv(u,Rt,de.top+(x===Yt?xe:0)+jt,de.left+(x===Yt?0:xe)+jt)}else vv(u,Se);Ea(ui||Y?oe:le),Xe&&at<1&&ui||He(ue+(at===1&&!Y?Ie:0))}}b&&!_e.tween&&!vi&&!wc&&ge.restart(!0),o&&(q||_&&at&&(at<1||!vf))&&Wo(o.targets).forEach(function(Be){return Be.classList[ui||_?"add":"remove"](o.className)}),a&&!C&&!ye&&a(O),W&&!vi?(C&&(j&&(I==="complete"?r.pause().totalProgress(1):I==="reset"?r.restart(!0).pause():I==="restart"?r.restart(!0):r[I]()),a&&a(O)),(q||!vf)&&(c&&q&&yf(O,c),U[Ct]&&yf(O,U[Ct]),_&&(at===1?O.kill(!1,1):U[Ct]=0),q||(Ct=at===1?1:3,U[Ct]&&yf(O,U[Ct]))),E&&!ui&&Math.abs(O.getVelocity())>(jo(E)?E:2500)&&(Ko(O.callbackAnimation),Q?Q.progress(1):Ko(r,I==="reverse"?1:!at,1))):C&&a&&!vi&&a(O)}if(Je){var Te=T?Ke/T.duration()*(T._caScrollDist||0):Ke;Ae(Te+($._isFlipped?1:0)),Je(Te)}xt&&xt(-Ke/T.duration()*(T._caScrollDist||0))}},O.enable=function(ye,Ze){O.enabled||(O.enabled=!0,ni(A,"resize",il),R||ni(A,"scroll",Ta),ee&&ni(n,"refreshInit",ee),ye!==!1&&(O.progress=ne=0,ze=Pe=X=re()),Ze!==!1&&O.refresh())},O.getTween=function(ye){return ye&&_e?_e.tween:Q},O.setPositions=function(ye,Ze,Fe,Ke){if(T){var Ft=T.scrollTrigger,at=T.duration(),It=Ft.end-Ft.start;ye=Ft.start+It*ye/at,Ze=Ft.start+It*Ze/at}O.refresh(!1,!1,{start:Zg(ye,Fe&&!!O._startClamp),end:Zg(Ze,Fe&&!!O._endClamp)},Ke),O.update()},O.adjustPinSpacing=function(ye){if(Ee&&ye){var Ze=Ee.indexOf(x.d)+1;Ee[Ze]=parseFloat(Ee[Ze])+ye+jt,Ee[1]=parseFloat(Ee[1])+ye+jt,Ea(Ee)}},O.disable=function(ye,Ze){if(O.enabled&&(ye!==!1&&O.revert(!0,!0),O.enabled=O.isActive=!1,Ze||Q&&Q.pause(),Qe=0,Oe&&(Oe.uncache=1),ee&&ri(n,"refreshInit",ee),ge&&(ge.pause(),_e.tween&&_e.tween.kill()&&(_e.tween=0)),!R)){for(var Fe=st.length;Fe--;)if(st[Fe].scroller===A&&st[Fe]!==O)return;ri(A,"resize",il),R||ri(A,"scroll",Ta)}},O.kill=function(ye,Ze){O.disable(ye,Ze),Q&&!Ze&&Q.kill(),l&&delete Mf[l];var Fe=st.indexOf(O);Fe>=0&&st.splice(Fe,1),Fe===Ri&&Dc>0&&Ri--,Fe=0,st.forEach(function(Ke){return Ke.scroller===O.scroller&&(Fe=1)}),Fe||Ii||(O.scroll.rec=0),r&&(r.scrollTrigger=null,ye&&r.revert({kill:!1}),Ze||r.kill()),De&&[De,Ne,$,Ye].forEach(function(Ke){return Ke.parentNode&&Ke.parentNode.removeChild(Ke)}),nl===O&&(nl=0),u&&(Oe&&(Oe.uncache=1),Fe=0,st.forEach(function(Ke){return Ke.pin===u&&Fe++}),Fe||(Oe.spacer=0)),i.onKill&&i.onKill(O)},st.push(O),O.enable(!1,!1),At&&At(O),r&&r.add&&!z){var dt=O.update;O.update=function(){O.update=dt,me||fe||O.refresh()},Re.delayedCall(.01,O.update),z=.01,me=fe=0}else O.refresh();u&&Ww()},n.register=function(i){return xa||(Re=i||tv(),ev()&&window.document&&n.enable(),xa=qo),xa},n.defaults=function(i){if(i)for(var r in i)Ac[r]=i[r];return Ac},n.disable=function(i,r){qo=0,st.forEach(function(a){return a[r?"kill":"disable"](i)}),ri(ct,"wheel",Ta),ri(Ut,"scroll",Ta),clearInterval(yc),ri(Ut,"touchcancel",Hn),ri(Rt,"touchstart",Hn),Tc(ri,Ut,"pointerdown,touchstart,mousedown",Qg),Tc(ri,Ut,"pointerup,touchend,mouseup",Jg),_c.kill(),Sc(ri);for(var s=0;s<ot.length;s+=3)Ec(ri,ot[s],ot[s+1]),Ec(ri,ot[s],ot[s+2])},n.enable=function(){if(ct=window,Ut=document,An=Ut.documentElement,Rt=Ut.body,Re&&(Wo=Re.utils.toArray,Xo=Re.utils.clamp,hf=Re.core.context||Hn,df=Re.core.suppressOverwrites||Hn,pf=ct.history.scrollRestoration||"auto",Af=ct.pageYOffset,Re.core.globals("ScrollTrigger",n),Rt)){qo=1,wa=document.createElement("div"),wa.style.height="100vh",wa.style.position="absolute",pv(),Uw(),Vt.register(Re),n.isTouch=Vt.isTouch,Br=Vt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),ff=Vt.isTouch===1,ni(ct,"wheel",Ta),Gg=[ct,Ut,An,Rt],Re.matchMedia?(n.matchMedia=function(l){var c=Re.matchMedia(),d;for(d in l)c.add(d,l[d]);return c},Re.addEventListener("matchMediaInit",function(){return Ef()}),Re.addEventListener("matchMediaRevert",function(){return dv()}),Re.addEventListener("matchMedia",function(){Is(0,1),Ls("matchMedia")}),Re.matchMedia("(orientation: portrait)",function(){return Tf(),Tf})):console.warn("Requires GSAP 3.11.0 or later"),Tf(),ni(Ut,"scroll",Ta);var i=Rt.style,r=i.borderTopStyle,s=Re.core.Animation.prototype,a,o;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",a=cr(Rt),Yt.m=Math.round(a.top+Yt.sc())||0,Pi.m=Math.round(a.left+Pi.sc())||0,r?i.borderTopStyle=r:i.removeProperty("border-top-style"),yc=setInterval(cv,250),Re.delayedCall(.5,function(){return wc=0}),ni(Ut,"touchcancel",Hn),ni(Rt,"touchstart",Hn),Tc(ni,Ut,"pointerdown,touchstart,mousedown",Qg),Tc(ni,Ut,"pointerup,touchend,mouseup",Jg),uf=Re.utils.checkPrefix("transform"),Ic.push(uf),xa=_i(),_c=Re.delayedCall(.2,Is).pause(),ba=[Ut,"visibilitychange",function(){var l=ct.innerWidth,c=ct.innerHeight;Ut.hidden?(Wg=l,Xg=c):(Wg!==l||Xg!==c)&&il()},Ut,"DOMContentLoaded",Is,ct,"load",Is,ct,"resize",il],Sc(ni),st.forEach(function(l){return l.enable(0,1)}),o=0;o<ot.length;o+=3)Ec(ri,ot[o],ot[o+1]),Ec(ri,ot[o],ot[o+2])}},n.config=function(i){"limitCallbacks"in i&&(vf=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(yc)||(yc=r)&&setInterval(cv,r),"ignoreMobileResize"in i&&(ff=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(Sc(ri)||Sc(ni,i.autoRefreshEvents||"none"),qg=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=Gi(i),a=ot.indexOf(s),o=Es(s);~a&&ot.splice(a,o?6:2),r&&(o?Vn.unshift(ct,r,Rt,r,An,r):Vn.unshift(s,r))},n.clearMatchMedia=function(i){st.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var a=(en(i)?Gi(i):i).getBoundingClientRect(),o=a[s?Cs:Ps]*r||0;return s?a.right-o>0&&a.left+o<ct.innerWidth:a.bottom-o>0&&a.top+o<ct.innerHeight},n.positionInViewport=function(i,r,s){en(i)&&(i=Gi(i));var a=i.getBoundingClientRect(),o=a[s?Cs:Ps],l=r==null?o/2:r in Cc?Cc[r]*o:~r.indexOf("%")?parseFloat(r)*o/100:parseFloat(r)||0;return s?(a.left+l)/ct.innerWidth:(a.top+l)/ct.innerHeight},n.killAll=function(i){if(st.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=Rs.killAll||[];Rs={},r.forEach(function(s){return s()})}},n}();et.version="3.12.5",et.saveStyles=function(n){return n?Wo(n).forEach(function(e){if(e&&e.style){var t=tn.indexOf(e);t>=0&&tn.splice(t,5),tn.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Re.core.getCache(e),hf())}}):tn},et.revert=function(n,e){return Ef(!n,e)},et.create=function(n,e){return new et(n,e)},et.refresh=function(n){return n?il():(xa||et.register())&&Is(!0)},et.update=function(n){return++ot.cache&&ur(n===!0?2:0)},et.clearScrollMemory=fv,et.maxScroll=function(n,e){return Gn(n,e?Pi:Yt)},et.getScrollFunc=function(n,e){return Fr(Gi(n),e?Pi:Yt)},et.getById=function(n){return Mf[n]},et.getAll=function(){return st.filter(function(n){return n.vars.id!=="ScrollSmoother"})},et.isScrolling=function(){return!!hn},et.snapDirectional=Sf,et.addEventListener=function(n,e){var t=Rs[n]||(Rs[n]=[]);~t.indexOf(e)||t.push(e)},et.removeEventListener=function(n,e){var t=Rs[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)},et.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,a=function(c,d){var h=[],f=[],u=Re.delayedCall(r,function(){d(h,f),h=[],f=[]}).pause();return function(m){h.length||u.restart(!0),h.push(m.trigger),f.push(m),s<=h.length&&u.progress(1)}},o;for(o in e)i[o]=o.substr(0,2)==="on"&&Di(e[o])&&o!=="onRefreshInit"?a(o,e[o]):e[o];return Di(s)&&(s=s(),ni(et,"refresh",function(){return s=e.batchMax()})),Wo(n).forEach(function(l){var c={};for(o in i)c[o]=i[o];c.trigger=l,t.push(et.create(c))}),t};var xv=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},Rf=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Vt.isTouch?" pinch-zoom":""):"none",e===An&&n(Rt,t)},Uc={auto:1,scroll:1},jw=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,a=s._gsap||Re.core.getCache(s),o=_i(),l;if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==Rt&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Uc[(l=mn(s)).overflowY]||Uc[l.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==i&&!Es(s)&&(Uc[(l=mn(s)).overflowY]||Uc[l.overflowX]),a._isScrollT=o}(a._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},bv=function(e,t,i,r){return Vt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&jw,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&ni(Ut,Vt.eventTypes[0],Sv,!1,!0)},onDisable:function(){return ri(Ut,Vt.eventTypes[0],Sv,!0)}})},Kw=/(input|label|select|textarea)/i,wv,Sv=function(e){var t=Kw.test(e.target.tagName);(t||wv)&&(e._gsapAllow=!0,wv=t)},Zw=function(e){As(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,a=t.onRelease,o,l,c=Gi(e.target)||An,d=Re.core.globals().ScrollSmoother,h=d&&d.get(),f=Br&&(e.content&&Gi(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),u=Fr(c,Yt),m=Fr(c,Pi),p=1,v=(Vt.isTouch&&ct.visualViewport?ct.visualViewport.scale*ct.visualViewport.width:ct.outerWidth)/ct.innerWidth,g=0,y=Di(r)?function(){return r(o)}:function(){return r||2.8},_,b,w=bv(c,e.type,!0,s),M=function(){return b=!1},T=Hn,E=Hn,S=function(){l=Gn(c,Yt),E=Xo(Br?1:0,l),i&&(T=Xo(0,Gn(c,Pi))),_=Ds},x=function(){f._gsap.y=Yo(parseFloat(f._gsap.y)+u.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",u.offset=u.cacheID=0},C=function(){if(b){requestAnimationFrame(M);var F=Yo(o.deltaY/2),G=E(u.v-F);if(f&&G!==u.v+u.offset){u.offset=G-u.v;var O=Yo((parseFloat(f&&f._gsap.y)||0)-u.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+O+", 0, 1)",f._gsap.y=O+"px",u.cacheID=ot.cache,ur()}return!0}u.offset&&x(),b=!0},A,P,R,L,U=function(){S(),A.isActive()&&A.vars.scrollY>l&&(u()>l?A.progress(1)&&u(l):A.resetTo("scrollY",l))};return f&&Re.set(f,{y:"+=0"}),e.ignoreCheck=function(B){return Br&&B.type==="touchmove"&&C()||p>1.05&&B.type!=="touchstart"||o.isGesturing||B.touches&&B.touches.length>1},e.onPress=function(){b=!1;var B=p;p=Yo((ct.visualViewport&&ct.visualViewport.scale||1)/v),A.pause(),B!==p&&Rf(c,p>1.01?!0:i?!1:"x"),P=m(),R=u(),S(),_=Ds},e.onRelease=e.onGestureStart=function(B,F){if(u.offset&&x(),!F)L.restart(!0);else{ot.cache++;var G=y(),O,ee;i&&(O=m(),ee=O+G*.05*-B.velocityX/.227,G*=xv(m,O,ee,Gn(c,Pi)),A.vars.scrollX=T(ee)),O=u(),ee=O+G*.05*-B.velocityY/.227,G*=xv(u,O,ee,Gn(c,Yt)),A.vars.scrollY=E(ee),A.invalidate().duration(G).play(.01),(Br&&A.vars.scrollY>=l||O>=l-1)&&Re.to({},{onUpdate:U,duration:G})}a&&a(B)},e.onWheel=function(){A._ts&&A.pause(),_i()-g>1e3&&(_=0,g=_i())},e.onChange=function(B,F,G,O,ee){if(Ds!==_&&S(),F&&i&&m(T(O[2]===F?P+(B.startX-B.x):m()+F-O[1])),G){u.offset&&x();var se=ee[2]===G,we=se?R+B.startY-B.y:u()+G-ee[1],X=E(we);se&&we!==X&&(R+=X-we),u(X)}(G||F)&&ur()},e.onEnable=function(){Rf(c,i?!1:"x"),et.addEventListener("refresh",U),ni(ct,"resize",U),u.smooth&&(u.target.style.scrollBehavior="auto",u.smooth=m.smooth=!1),w.enable()},e.onDisable=function(){Rf(c,!0),ri(ct,"resize",U),et.removeEventListener("refresh",U),w.kill()},e.lockAxis=e.lockAxis!==!1,o=new Vt(e),o.iOS=Br,Br&&!u()&&u(1),Br&&Re.ticker.add(Hn),L=o._dc,A=Re.to(o,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:_v(u,u(),function(){return A.pause()})},onUpdate:ur,onComplete:L.vars.onComplete}),o};et.sort=function(n){return st.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})},et.observe=function(n){return new Vt(n)},et.normalizeScroll=function(n){if(typeof n>"u")return Li;if(n===!0&&Li)return Li.enable();if(n===!1){Li&&Li.kill(),Li=n;return}var e=n instanceof Vt?n:Zw(n);return Li&&Li.target===e.target&&Li.kill(),Es(e.target)&&(Li=e),e},et.core={_getVelocityProp:cf,_inputObserver:bv,_scrollers:ot,_proxies:Vn,bridge:{ss:function(){hn||Ls("scrollStart"),hn=_i()},ref:function(){return vi}}},tv()&&Re.registerPlugin(et),Ce.registerPlugin(et);function Mv(){function n(e,t){const i=typeof e;return typeof t!="string"||t.trim()===""?e:t==="true"&&i==="boolean"?!0:t==="false"&&i==="boolean"?!1:isNaN(t)&&i==="string"?t:!isNaN(t)&&i==="number"?+t:e}document.querySelectorAll("[tr-marquee-element='component']").forEach(e=>{const t=e.querySelectorAll("[tr-marquee-element='panel']"),i=e.querySelector("[tr-marquee-element='triggerhover']"),r=e.querySelector("[tr-marquee-element='triggerclick']");let s=n(100,e.getAttribute("tr-marquee-speed")),a=n(!1,e.getAttribute("tr-marquee-vertical")),o=n(!1,e.getAttribute("tr-marquee-reverse")),l=n(!1,e.getAttribute("tr-marquee-scrolldirection")),c=n(!1,e.getAttribute("tr-marquee-scrollscrub")),d=-100,h=1,f=!1;o&&(d=100);let u=Ce.timeline({repeat:-1,onReverseComplete:()=>u.progress(1)});a?(s=t[0].offsetHeight/s,u.fromTo(t,{yPercent:0},{yPercent:d,ease:"none",duration:s})):(s=t[0].offsetWidth/s,u.fromTo(t,{xPercent:0},{xPercent:d,ease:"none",duration:s}));let m={value:1};et.create({trigger:"body",start:"top top",end:"bottom bottom",onUpdate:v=>{if(!f&&(l&&h!==v.direction&&(h=v.direction,u.timeScale(v.direction)),c)){let g=v.getVelocity()*.006;g=Ce.utils.clamp(-60,60,g),Ce.timeline({onUpdate:()=>u.timeScale(m.value)}).fromTo(m,{value:g},{value:h,duration:.5})}}});function p(v){f=v;let g={value:1},y=Ce.timeline({onUpdate:()=>u.timeScale(g.value)});v?(y.fromTo(g,{value:h},{value:0,duration:.5}),r==null||r.classList.add("is-paused")):(y.fromTo(g,{value:0},{value:h,duration:.5}),r==null||r.classList.remove("is-paused"))}window.matchMedia("(pointer: fine)").matches&&(i==null||i.addEventListener("mouseenter",()=>p(!0)),i==null||i.addEventListener("mouseleave",()=>p(!1))),r==null||r.addEventListener("click",function(){r.classList.contains("is-paused")?p(!1):p(!0)})})}window.addEventListener("DOMContentLoaded",()=>{Mv()});/**
* @license
* Copyright 2010-2024 Three.js Authors
* SPDX-License-Identifier: MIT
*/const Lf="164",Qw=0,Tv=1,Jw=2,Ev=1,eS=2,dr=3,zr=0,Wi=1,Wn=2,Vr=0,Aa=1,Av=2,Cv=3,Pv=4,tS=5,Os=100,iS=101,nS=102,rS=103,sS=104,aS=200,oS=201,lS=202,cS=203,Df=204,If=205,uS=206,dS=207,fS=208,hS=209,pS=210,mS=211,gS=212,vS=213,_S=214,yS=0,xS=1,bS=2,Fc=3,wS=4,SS=5,MS=6,TS=7,Rv=0,ES=1,AS=2,Hr=0,CS=1,PS=2,RS=3,LS=4,DS=5,IS=6,OS=7,Lv=300,Ca=301,Pa=302,Of=303,Nf=304,Bc=306,kf=1e3,Ns=1001,Uf=1002,Oi=1003,NS=1004,zc=1005,nn=1006,Ff=1007,ks=1008,Gr=1009,kS=1010,US=1011,Dv=1012,Iv=1013,Ra=1014,fr=1015,Vc=1016,Ov=1017,Nv=1018,rl=1020,FS=35902,BS=1021,zS=1022,gn=1023,VS=1024,HS=1025,La=1026,sl=1027,GS=1028,kv=1029,WS=1030,Uv=1031,Fv=1033,Bf=33776,zf=33777,Vf=33778,Hf=33779,Bv=35840,zv=35841,Vv=35842,Hv=35843,Gv=36196,Wv=37492,Xv=37496,$v=37808,qv=37809,Yv=37810,jv=37811,Kv=37812,Zv=37813,Qv=37814,Jv=37815,e0=37816,t0=37817,i0=37818,n0=37819,r0=37820,s0=37821,Gf=36492,a0=36494,o0=36495,XS=36283,l0=36284,c0=36285,u0=36286,$S=3200,qS=3201,YS=0,jS=1,Wr="",Xn="srgb",Xr="srgb-linear",Wf="display-p3",Hc="display-p3-linear",Gc="linear",Lt="srgb",Wc="rec709",Xc="p3",Da=7680,d0=519,KS=512,ZS=513,QS=514,f0=515,JS=516,eM=517,tM=518,iM=519,h0=35044,p0="300 es",hr=2e3,$c=2001;class Ia{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const yi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Xf=Math.PI/180,$f=180/Math.PI;function al(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(yi[n&255]+yi[n>>8&255]+yi[n>>16&255]+yi[n>>24&255]+"-"+yi[e&255]+yi[e>>8&255]+"-"+yi[e>>16&15|64]+yi[e>>24&255]+"-"+yi[t&63|128]+yi[t>>8&255]+"-"+yi[t>>16&255]+yi[t>>24&255]+yi[i&255]+yi[i>>8&255]+yi[i>>16&255]+yi[i>>24&255]).toLowerCase()}function Xi(n,e,t){return Math.max(e,Math.min(t,n))}function nM(n,e){return(n%e+e)%e}function qf(n,e,t){return(1-t)*n+t*e}function ol(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function $i(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}class gt{constructor(e=0,t=0){gt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class it{constructor(e,t,i,r,s,a,o,l,c){it.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c)}set(e,t,i,r,s,a,o,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=a,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],d=i[4],h=i[7],f=i[2],u=i[5],m=i[8],p=r[0],v=r[3],g=r[6],y=r[1],_=r[4],b=r[7],w=r[2],M=r[5],T=r[8];return s[0]=a*p+o*y+l*w,s[3]=a*v+o*_+l*M,s[6]=a*g+o*b+l*T,s[1]=c*p+d*y+h*w,s[4]=c*v+d*_+h*M,s[7]=c*g+d*b+h*T,s[2]=f*p+u*y+m*w,s[5]=f*v+u*_+m*M,s[8]=f*g+u*b+m*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8];return t*a*d-t*o*c-i*s*d+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=d*a-o*c,f=o*l-d*s,u=c*s-a*l,m=t*h+i*f+r*u;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return e[0]=h*p,e[1]=(r*c-d*i)*p,e[2]=(o*i-r*a)*p,e[3]=f*p,e[4]=(d*t-r*l)*p,e[5]=(r*s-o*t)*p,e[6]=u*p,e[7]=(i*l-c*t)*p,e[8]=(a*t-i*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Yf.makeScale(e,t)),this}rotate(e){return this.premultiply(Yf.makeRotation(-e)),this}translate(e,t){return this.premultiply(Yf.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Yf=new it;function m0(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function ll(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function rM(){const n=ll("canvas");return n.style.display="block",n}const g0={};function sM(n){n in g0||(g0[n]=!0,console.warn(n))}const v0=new it().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),_0=new it().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),qc={[Xr]:{transfer:Gc,primaries:Wc,toReference:n=>n,fromReference:n=>n},[Xn]:{transfer:Lt,primaries:Wc,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Hc]:{transfer:Gc,primaries:Xc,toReference:n=>n.applyMatrix3(_0),fromReference:n=>n.applyMatrix3(v0)},[Wf]:{transfer:Lt,primaries:Xc,toReference:n=>n.convertSRGBToLinear().applyMatrix3(_0),fromReference:n=>n.applyMatrix3(v0).convertLinearToSRGB()}},aM=new Set([Xr,Hc]),bt={enabled:!0,_workingColorSpace:Xr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!aM.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=qc[e].toReference,r=qc[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return qc[n].primaries},getTransfer:function(n){return n===Wr?Gc:qc[n].transfer}};function Oa(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function jf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Na;class oM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Na===void 0&&(Na=ll("canvas")),Na.width=e.width,Na.height=e.height;const i=Na.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Na}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ll("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Oa(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Oa(t[i]/255)*255):t[i]=Oa(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let lM=0;class y0{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lM++}),this.uuid=al(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(Kf(r[a].image)):s.push(Kf(r[a]))}else s=Kf(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Kf(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?oM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let cM=0;class xi extends Ia{constructor(e=xi.DEFAULT_IMAGE,t=xi.DEFAULT_MAPPING,i=Ns,r=Ns,s=nn,a=ks,o=gn,l=Gr,c=xi.DEFAULT_ANISOTROPY,d=Wr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cM++}),this.uuid=al(),this.name="",this.source=new y0(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new it,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Lv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case kf:e.x=e.x-Math.floor(e.x);break;case Ns:e.x=e.x<0?0:1;break;case Uf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case kf:e.y=e.y-Math.floor(e.y);break;case Ns:e.y=e.y<0?0:1;break;case Uf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}xi.DEFAULT_IMAGE=null,xi.DEFAULT_MAPPING=Lv,xi.DEFAULT_ANISOTROPY=1;class si{constructor(e=0,t=0,i=0,r=1){si.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],d=l[4],h=l[8],f=l[1],u=l[5],m=l[9],p=l[2],v=l[6],g=l[10];if(Math.abs(d-f)<.01&&Math.abs(h-p)<.01&&Math.abs(m-v)<.01){if(Math.abs(d+f)<.1&&Math.abs(h+p)<.1&&Math.abs(m+v)<.1&&Math.abs(c+u+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,b=(u+1)/2,w=(g+1)/2,M=(d+f)/4,T=(h+p)/4,E=(m+v)/4;return _>b&&_>w?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=M/i,s=T/i):b>w?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=M/r,s=E/r):w<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(w),i=T/s,r=E/s),this.set(i,r,s,t),this}let y=Math.sqrt((v-m)*(v-m)+(h-p)*(h-p)+(f-d)*(f-d));return Math.abs(y)<.001&&(y=1),this.x=(v-m)/y,this.y=(h-p)/y,this.z=(f-d)/y,this.w=Math.acos((c+u+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class uM extends Ia{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new si(0,0,e,t),this.scissorTest=!1,this.viewport=new si(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new xi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new y0(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Us extends uM{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class x0 extends xi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=Ns,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dM extends xi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=Ns,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cl{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],d=i[r+2],h=i[r+3];const f=s[a+0],u=s[a+1],m=s[a+2],p=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h;return}if(o===1){e[t+0]=f,e[t+1]=u,e[t+2]=m,e[t+3]=p;return}if(h!==p||l!==f||c!==u||d!==m){let v=1-o;const g=l*f+c*u+d*m+h*p,y=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const w=Math.sqrt(_),M=Math.atan2(w,g*y);v=Math.sin(v*M)/w,o=Math.sin(o*M)/w}const b=o*y;if(l=l*v+f*b,c=c*v+u*b,d=d*v+m*b,h=h*v+p*b,v===1-o){const w=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=w,c*=w,d*=w,h*=w}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],d=i[r+3],h=s[a],f=s[a+1],u=s[a+2],m=s[a+3];return e[t]=o*m+d*h+l*u-c*f,e[t+1]=l*m+d*f+c*h-o*u,e[t+2]=c*m+d*u+o*f-l*h,e[t+3]=d*m-o*h-l*f-c*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),d=o(r/2),h=o(s/2),f=l(i/2),u=l(r/2),m=l(s/2);switch(a){case"XYZ":this._x=f*d*h+c*u*m,this._y=c*u*h-f*d*m,this._z=c*d*m+f*u*h,this._w=c*d*h-f*u*m;break;case"YXZ":this._x=f*d*h+c*u*m,this._y=c*u*h-f*d*m,this._z=c*d*m-f*u*h,this._w=c*d*h+f*u*m;break;case"ZXY":this._x=f*d*h-c*u*m,this._y=c*u*h+f*d*m,this._z=c*d*m+f*u*h,this._w=c*d*h-f*u*m;break;case"ZYX":this._x=f*d*h-c*u*m,this._y=c*u*h+f*d*m,this._z=c*d*m-f*u*h,this._w=c*d*h+f*u*m;break;case"YZX":this._x=f*d*h+c*u*m,this._y=c*u*h+f*d*m,this._z=c*d*m-f*u*h,this._w=c*d*h-f*u*m;break;case"XZY":this._x=f*d*h-c*u*m,this._y=c*u*h-f*d*m,this._z=c*d*m+f*u*h,this._w=c*d*h+f*u*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],d=t[6],h=t[10],f=i+o+h;if(f>0){const u=.5/Math.sqrt(f+1);this._w=.25/u,this._x=(d-l)*u,this._y=(s-c)*u,this._z=(a-r)*u}else if(i>o&&i>h){const u=2*Math.sqrt(1+i-o-h);this._w=(d-l)/u,this._x=.25*u,this._y=(r+a)/u,this._z=(s+c)/u}else if(o>h){const u=2*Math.sqrt(1+o-i-h);this._w=(s-c)/u,this._x=(r+a)/u,this._y=.25*u,this._z=(l+d)/u}else{const u=2*Math.sqrt(1+h-i-o);this._w=(a-r)/u,this._x=(s+c)/u,this._y=(l+d)/u,this._z=.25*u}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+a*o+r*c-s*l,this._y=r*d+a*l+s*o-i*c,this._z=s*d+a*c+i*l-r*o,this._w=a*d-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const u=1-t;return this._w=u*a+t*this._w,this._x=u*i+t*this._x,this._y=u*r+t*this._y,this._z=u*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,o),h=Math.sin((1-t)*d)/c,f=Math.sin(t*d)/c;return this._w=a*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,i=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(b0.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(b0.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),d=2*(o*t-s*r),h=2*(s*i-a*t);return this.x=t+l*c+a*h-o*d,this.y=i+l*d+o*c-s*h,this.z=r+l*h+s*d-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Zf.copy(this).projectOnVector(e),this.sub(Zf)}reflect(e){return this.sub(Zf.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Zf=new Z,b0=new cl;class ul{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Cn.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Cn.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Cn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Cn):Cn.fromBufferAttribute(s,a),Cn.applyMatrix4(e.matrixWorld),this.expandByPoint(Cn);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Yc.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Yc.copy(i.boundingBox)),Yc.applyMatrix4(e.matrixWorld),this.union(Yc)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Cn),Cn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dl),jc.subVectors(this.max,dl),ka.subVectors(e.a,dl),Ua.subVectors(e.b,dl),Fa.subVectors(e.c,dl),$r.subVectors(Ua,ka),qr.subVectors(Fa,Ua),Fs.subVectors(ka,Fa);let t=[0,-$r.z,$r.y,0,-qr.z,qr.y,0,-Fs.z,Fs.y,$r.z,0,-$r.x,qr.z,0,-qr.x,Fs.z,0,-Fs.x,-$r.y,$r.x,0,-qr.y,qr.x,0,-Fs.y,Fs.x,0];return!Qf(t,ka,Ua,Fa,jc)||(t=[1,0,0,0,1,0,0,0,1],!Qf(t,ka,Ua,Fa,jc))?!1:(Kc.crossVectors($r,qr),t=[Kc.x,Kc.y,Kc.z],Qf(t,ka,Ua,Fa,jc))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Cn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Cn).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(pr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),pr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),pr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),pr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),pr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),pr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),pr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),pr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(pr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const pr=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],Cn=new Z,Yc=new ul,ka=new Z,Ua=new Z,Fa=new Z,$r=new Z,qr=new Z,Fs=new Z,dl=new Z,jc=new Z,Kc=new Z,Bs=new Z;function Qf(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Bs.fromArray(n,s);const o=r.x*Math.abs(Bs.x)+r.y*Math.abs(Bs.y)+r.z*Math.abs(Bs.z),l=e.dot(Bs),c=t.dot(Bs),d=i.dot(Bs);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>o)return!1}return!0}const fM=new ul,fl=new Z,Jf=new Z;class eh{constructor(e=new Z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):fM.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fl.subVectors(e,this.center);const t=fl.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(fl,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jf.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fl.copy(e.center).add(Jf)),this.expandByPoint(fl.copy(e.center).sub(Jf))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const mr=new Z,th=new Z,Zc=new Z,Yr=new Z,ih=new Z,Qc=new Z,nh=new Z;class hM{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=mr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(mr.copy(this.origin).addScaledVector(this.direction,t),mr.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){th.copy(e).add(t).multiplyScalar(.5),Zc.copy(t).sub(e).normalize(),Yr.copy(this.origin).sub(th);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Zc),o=Yr.dot(this.direction),l=-Yr.dot(Zc),c=Yr.lengthSq(),d=Math.abs(1-a*a);let h,f,u,m;if(d>0)if(h=a*l-o,f=a*o-l,m=s*d,h>=0)if(f>=-m)if(f<=m){const p=1/d;h*=p,f*=p,u=h*(h+a*f+2*o)+f*(a*h+f+2*l)+c}else f=s,h=Math.max(0,-(a*f+o)),u=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(a*f+o)),u=-h*h+f*(f+2*l)+c;else f<=-m?(h=Math.max(0,-(-a*s+o)),f=h>0?-s:Math.min(Math.max(-s,-l),s),u=-h*h+f*(f+2*l)+c):f<=m?(h=0,f=Math.min(Math.max(-s,-l),s),u=f*(f+2*l)+c):(h=Math.max(0,-(a*s+o)),f=h>0?s:Math.min(Math.max(-s,-l),s),u=-h*h+f*(f+2*l)+c);else f=a>0?-s:s,h=Math.max(0,-(a*f+o)),u=-h*h+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(th).addScaledVector(Zc,f),u}intersectSphere(e,t){mr.subVectors(e.center,this.origin);const i=mr.dot(this.direction),r=mr.dot(mr)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),d>=0?(s=(e.min.y-f.y)*d,a=(e.max.y-f.y)*d):(s=(e.max.y-f.y)*d,a=(e.min.y-f.y)*d),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(o=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,mr)!==null}intersectTriangle(e,t,i,r,s){ih.subVectors(t,e),Qc.subVectors(i,e),nh.crossVectors(ih,Qc);let a=this.direction.dot(nh),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Yr.subVectors(this.origin,e);const l=o*this.direction.dot(Qc.crossVectors(Yr,Qc));if(l<0)return null;const c=o*this.direction.dot(ih.cross(Yr));if(c<0||l+c>a)return null;const d=-o*Yr.dot(nh);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Kt{constructor(e,t,i,r,s,a,o,l,c,d,h,f,u,m,p,v){Kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c,d,h,f,u,m,p,v)}set(e,t,i,r,s,a,o,l,c,d,h,f,u,m,p,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=d,g[10]=h,g[14]=f,g[3]=u,g[7]=m,g[11]=p,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Kt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ba.setFromMatrixColumn(e,0).length(),s=1/Ba.setFromMatrixColumn(e,1).length(),a=1/Ba.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=a*d,u=a*h,m=o*d,p=o*h;t[0]=l*d,t[4]=-l*h,t[8]=c,t[1]=u+m*c,t[5]=f-p*c,t[9]=-o*l,t[2]=p-f*c,t[6]=m+u*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*d,u=l*h,m=c*d,p=c*h;t[0]=f+p*o,t[4]=m*o-u,t[8]=a*c,t[1]=a*h,t[5]=a*d,t[9]=-o,t[2]=u*o-m,t[6]=p+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*d,u=l*h,m=c*d,p=c*h;t[0]=f-p*o,t[4]=-a*h,t[8]=m+u*o,t[1]=u+m*o,t[5]=a*d,t[9]=p-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*d,u=a*h,m=o*d,p=o*h;t[0]=l*d,t[4]=m*c-u,t[8]=f*c+p,t[1]=l*h,t[5]=p*c+f,t[9]=u*c-m,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,u=a*c,m=o*l,p=o*c;t[0]=l*d,t[4]=p-f*h,t[8]=m*h+u,t[1]=h,t[5]=a*d,t[9]=-o*d,t[2]=-c*d,t[6]=u*h+m,t[10]=f-p*h}else if(e.order==="XZY"){const f=a*l,u=a*c,m=o*l,p=o*c;t[0]=l*d,t[4]=-h,t[8]=c*d,t[1]=f*h+p,t[5]=a*d,t[9]=u*h-m,t[2]=m*h-u,t[6]=o*d,t[10]=p*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pM,e,mM)}lookAt(e,t,i){const r=this.elements;return rn.subVectors(e,t),rn.lengthSq()===0&&(rn.z=1),rn.normalize(),jr.crossVectors(i,rn),jr.lengthSq()===0&&(Math.abs(i.z)===1?rn.x+=1e-4:rn.z+=1e-4,rn.normalize(),jr.crossVectors(i,rn)),jr.normalize(),Jc.crossVectors(rn,jr),r[0]=jr.x,r[4]=Jc.x,r[8]=rn.x,r[1]=jr.y,r[5]=Jc.y,r[9]=rn.y,r[2]=jr.z,r[6]=Jc.z,r[10]=rn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],d=i[1],h=i[5],f=i[9],u=i[13],m=i[2],p=i[6],v=i[10],g=i[14],y=i[3],_=i[7],b=i[11],w=i[15],M=r[0],T=r[4],E=r[8],S=r[12],x=r[1],C=r[5],A=r[9],P=r[13],R=r[2],L=r[6],U=r[10],B=r[14],F=r[3],G=r[7],O=r[11],ee=r[15];return s[0]=a*M+o*x+l*R+c*F,s[4]=a*T+o*C+l*L+c*G,s[8]=a*E+o*A+l*U+c*O,s[12]=a*S+o*P+l*B+c*ee,s[1]=d*M+h*x+f*R+u*F,s[5]=d*T+h*C+f*L+u*G,s[9]=d*E+h*A+f*U+u*O,s[13]=d*S+h*P+f*B+u*ee,s[2]=m*M+p*x+v*R+g*F,s[6]=m*T+p*C+v*L+g*G,s[10]=m*E+p*A+v*U+g*O,s[14]=m*S+p*P+v*B+g*ee,s[3]=y*M+_*x+b*R+w*F,s[7]=y*T+_*C+b*L+w*G,s[11]=y*E+_*A+b*U+w*O,s[15]=y*S+_*P+b*B+w*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],d=e[2],h=e[6],f=e[10],u=e[14],m=e[3],p=e[7],v=e[11],g=e[15];return m*(+s*l*h-r*c*h-s*o*f+i*c*f+r*o*u-i*l*u)+p*(+t*l*u-t*c*f+s*a*f-r*a*u+r*c*d-s*l*d)+v*(+t*c*h-t*o*u-s*a*h+i*a*u+s*o*d-i*c*d)+g*(-r*o*d-t*l*h+t*o*f+r*a*h-i*a*f+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],u=e[11],m=e[12],p=e[13],v=e[14],g=e[15],y=h*v*c-p*f*c+p*l*u-o*v*u-h*l*g+o*f*g,_=m*f*c-d*v*c-m*l*u+a*v*u+d*l*g-a*f*g,b=d*p*c-m*h*c+m*o*u-a*p*u-d*o*g+a*h*g,w=m*h*l-d*p*l-m*o*f+a*p*f+d*o*v-a*h*v,M=t*y+i*_+r*b+s*w;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/M;return e[0]=y*T,e[1]=(p*f*s-h*v*s-p*r*u+i*v*u+h*r*g-i*f*g)*T,e[2]=(o*v*s-p*l*s+p*r*c-i*v*c-o*r*g+i*l*g)*T,e[3]=(h*l*s-o*f*s-h*r*c+i*f*c+o*r*u-i*l*u)*T,e[4]=_*T,e[5]=(d*v*s-m*f*s+m*r*u-t*v*u-d*r*g+t*f*g)*T,e[6]=(m*l*s-a*v*s-m*r*c+t*v*c+a*r*g-t*l*g)*T,e[7]=(a*f*s-d*l*s+d*r*c-t*f*c-a*r*u+t*l*u)*T,e[8]=b*T,e[9]=(m*h*s-d*p*s-m*i*u+t*p*u+d*i*g-t*h*g)*T,e[10]=(a*p*s-m*o*s+m*i*c-t*p*c-a*i*g+t*o*g)*T,e[11]=(d*o*s-a*h*s-d*i*c+t*h*c+a*i*u-t*o*u)*T,e[12]=w*T,e[13]=(d*p*r-m*h*r+m*i*f-t*p*f-d*i*v+t*h*v)*T,e[14]=(m*o*r-a*p*r-m*i*l+t*p*l+a*i*v-t*o*v)*T,e[15]=(a*h*r-d*o*r+d*i*l-t*h*l-a*i*f+t*o*f)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,d=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,d*o+i,d*l-r*a,0,c*l-r*o,d*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,d=a+a,h=o+o,f=s*c,u=s*d,m=s*h,p=a*d,v=a*h,g=o*h,y=l*c,_=l*d,b=l*h,w=i.x,M=i.y,T=i.z;return r[0]=(1-(p+g))*w,r[1]=(u+b)*w,r[2]=(m-_)*w,r[3]=0,r[4]=(u-b)*M,r[5]=(1-(f+g))*M,r[6]=(v+y)*M,r[7]=0,r[8]=(m+_)*T,r[9]=(v-y)*T,r[10]=(1-(f+p))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ba.set(r[0],r[1],r[2]).length();const a=Ba.set(r[4],r[5],r[6]).length(),o=Ba.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Pn.copy(this);const c=1/s,d=1/a,h=1/o;return Pn.elements[0]*=c,Pn.elements[1]*=c,Pn.elements[2]*=c,Pn.elements[4]*=d,Pn.elements[5]*=d,Pn.elements[6]*=d,Pn.elements[8]*=h,Pn.elements[9]*=h,Pn.elements[10]*=h,t.setFromRotationMatrix(Pn),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=hr){const l=this.elements,c=2*s/(t-e),d=2*s/(i-r),h=(t+e)/(t-e),f=(i+r)/(i-r);let u,m;if(o===hr)u=-(a+s)/(a-s),m=-2*a*s/(a-s);else if(o===$c)u=-a/(a-s),m=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=u,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=hr){const l=this.elements,c=1/(t-e),d=1/(i-r),h=1/(a-s),f=(t+e)*c,u=(i+r)*d;let m,p;if(o===hr)m=(a+s)*h,p=-2*h;else if(o===$c)m=s*h,p=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-u,l[2]=0,l[6]=0,l[10]=p,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ba=new Z,Pn=new Kt,pM=new Z(0,0,0),mM=new Z(1,1,1),jr=new Z,Jc=new Z,rn=new Z,w0=new Kt,S0=new cl;class gr{constructor(e=0,t=0,i=0,r=gr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],d=r[9],h=r[2],f=r[6],u=r[10];switch(t){case"XYZ":this._y=Math.asin(Xi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,u),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Xi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,u),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Xi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,u),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Xi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,u),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Xi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,u));break;case"XZY":this._z=Math.asin(-Xi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-d,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return w0.makeRotationFromQuaternion(e),this.setFromRotationMatrix(w0,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return S0.setFromEuler(this),this.setFromQuaternion(S0,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gr.DEFAULT_ORDER="XYZ";class M0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let gM=0;const T0=new Z,za=new cl,vr=new Kt,eu=new Z,hl=new Z,vM=new Z,_M=new cl,E0=new Z(1,0,0),A0=new Z(0,1,0),C0=new Z(0,0,1),P0={type:"added"},yM={type:"removed"},Va={type:"childadded",child:null},rh={type:"childremoved",child:null};class sn extends Ia{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gM++}),this.uuid=al(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=sn.DEFAULT_UP.clone();const e=new Z,t=new gr,i=new cl,r=new Z(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Kt},normalMatrix:{value:new it}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=sn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new M0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return za.setFromAxisAngle(e,t),this.quaternion.multiply(za),this}rotateOnWorldAxis(e,t){return za.setFromAxisAngle(e,t),this.quaternion.premultiply(za),this}rotateX(e){return this.rotateOnAxis(E0,e)}rotateY(e){return this.rotateOnAxis(A0,e)}rotateZ(e){return this.rotateOnAxis(C0,e)}translateOnAxis(e,t){return T0.copy(e).applyQuaternion(this.quaternion),this.position.add(T0.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(E0,e)}translateY(e){return this.translateOnAxis(A0,e)}translateZ(e){return this.translateOnAxis(C0,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(vr.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?eu.copy(e):eu.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),hl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vr.lookAt(hl,eu,this.up):vr.lookAt(eu,hl,this.up),this.quaternion.setFromRotationMatrix(vr),r&&(vr.extractRotation(r.matrixWorld),za.setFromRotationMatrix(vr),this.quaternion.premultiply(za.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(P0),Va.child=e,this.dispatchEvent(Va),Va.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(yM),rh.child=e,this.dispatchEvent(rh),rh.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),vr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),vr.multiply(e.parent.matrixWorld)),e.applyMatrix4(vr),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(P0),Va.child=e,this.dispatchEvent(Va),Va.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hl,e,vM),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hl,_M,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),d=a(e.images),h=a(e.shapes),f=a(e.skeletons),u=a(e.animations),m=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),u.length>0&&(i.animations=u),m.length>0&&(i.nodes=m)}return i.object=r,i;function a(o){const l=[];for(const c in o){const d=o[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}sn.DEFAULT_UP=new Z(0,1,0),sn.DEFAULT_MATRIX_AUTO_UPDATE=!0,sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Rn=new Z,_r=new Z,sh=new Z,yr=new Z,Ha=new Z,Ga=new Z,R0=new Z,ah=new Z,oh=new Z,lh=new Z;class $n{constructor(e=new Z,t=new Z,i=new Z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Rn.subVectors(e,t),r.cross(Rn);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Rn.subVectors(r,t),_r.subVectors(i,t),sh.subVectors(e,t);const a=Rn.dot(Rn),o=Rn.dot(_r),l=Rn.dot(sh),c=_r.dot(_r),d=_r.dot(sh),h=a*c-o*o;if(h===0)return s.set(0,0,0),null;const f=1/h,u=(c*l-o*d)*f,m=(a*d-o*l)*f;return s.set(1-u-m,m,u)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,yr)===null?!1:yr.x>=0&&yr.y>=0&&yr.x+yr.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,yr)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,yr.x),l.addScaledVector(a,yr.y),l.addScaledVector(o,yr.z),l)}static isFrontFacing(e,t,i,r){return Rn.subVectors(i,t),_r.subVectors(e,t),Rn.cross(_r).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Rn.subVectors(this.c,this.b),_r.subVectors(this.a,this.b),Rn.cross(_r).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return $n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return $n.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return $n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Ha.subVectors(r,i),Ga.subVectors(s,i),ah.subVectors(e,i);const l=Ha.dot(ah),c=Ga.dot(ah);if(l<=0&&c<=0)return t.copy(i);oh.subVectors(e,r);const d=Ha.dot(oh),h=Ga.dot(oh);if(d>=0&&h<=d)return t.copy(r);const f=l*h-d*c;if(f<=0&&l>=0&&d<=0)return a=l/(l-d),t.copy(i).addScaledVector(Ha,a);lh.subVectors(e,s);const u=Ha.dot(lh),m=Ga.dot(lh);if(m>=0&&u<=m)return t.copy(s);const p=u*c-l*m;if(p<=0&&c>=0&&m<=0)return o=c/(c-m),t.copy(i).addScaledVector(Ga,o);const v=d*m-u*h;if(v<=0&&h-d>=0&&u-m>=0)return R0.subVectors(s,r),o=(h-d)/(h-d+(u-m)),t.copy(r).addScaledVector(R0,o);const g=1/(v+p+f);return a=p*g,o=f*g,t.copy(i).addScaledVector(Ha,a).addScaledVector(Ga,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const L0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kr={h:0,s:0,l:0},tu={h:0,s:0,l:0};function ch(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let yt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=bt.workingColorSpace){return this.r=e,this.g=t,this.b=i,bt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=bt.workingColorSpace){if(e=nM(e,1),t=Xi(t,0,1),i=Xi(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=ch(a,s,e+1/3),this.g=ch(a,s,e),this.b=ch(a,s,e-1/3)}return bt.toWorkingColorSpace(this,r),this}setStyle(e,t=Xn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xn){const i=L0[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Oa(e.r),this.g=Oa(e.g),this.b=Oa(e.b),this}copyLinearToSRGB(e){return this.r=jf(e.r),this.g=jf(e.g),this.b=jf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xn){return bt.fromWorkingColorSpace(bi.copy(this),e),Math.round(Xi(bi.r*255,0,255))*65536+Math.round(Xi(bi.g*255,0,255))*256+Math.round(Xi(bi.b*255,0,255))}getHexString(e=Xn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=bt.workingColorSpace){bt.fromWorkingColorSpace(bi.copy(this),t);const i=bi.r,r=bi.g,s=bi.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const d=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=d<=.5?h/(a+o):h/(2-a-o),a){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=bt.workingColorSpace){return bt.fromWorkingColorSpace(bi.copy(this),t),e.r=bi.r,e.g=bi.g,e.b=bi.b,e}getStyle(e=Xn){bt.fromWorkingColorSpace(bi.copy(this),e);const t=bi.r,i=bi.g,r=bi.b;return e!==Xn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Kr),this.setHSL(Kr.h+e,Kr.s+t,Kr.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Kr),e.getHSL(tu);const i=qf(Kr.h,tu.h,t),r=qf(Kr.s,tu.s,t),s=qf(Kr.l,tu.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const bi=new yt;yt.NAMES=L0;let xM=0;class iu extends Ia{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:xM++}),this.uuid=al(),this.name="",this.type="Material",this.blending=Aa,this.side=zr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Df,this.blendDst=If,this.blendEquation=Os,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new yt(0,0,0),this.blendAlpha=0,this.depthFunc=Fc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=d0,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Da,this.stencilZFail=Da,this.stencilZPass=Da,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Aa&&(i.blending=this.blending),this.side!==zr&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Df&&(i.blendSrc=this.blendSrc),this.blendDst!==If&&(i.blendDst=this.blendDst),this.blendEquation!==Os&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Fc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==d0&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Da&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Da&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Da&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class D0 extends iu{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gr,this.combine=Rv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $t=new Z,nu=new gt;class qn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=h0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=fr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return sM("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)nu.fromBufferAttribute(this,t),nu.applyMatrix3(e),this.setXY(t,nu.x,nu.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.applyMatrix3(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.applyMatrix4(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.applyNormalMatrix(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)$t.fromBufferAttribute(this,t),$t.transformDirection(e),this.setXYZ(t,$t.x,$t.y,$t.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ol(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=$i(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ol(t,this.array)),t}setX(e,t){return this.normalized&&(t=$i(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ol(t,this.array)),t}setY(e,t){return this.normalized&&(t=$i(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ol(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$i(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ol(t,this.array)),t}setW(e,t){return this.normalized&&(t=$i(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=$i(t,this.array),i=$i(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=$i(t,this.array),i=$i(i,this.array),r=$i(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=$i(t,this.array),i=$i(i,this.array),r=$i(r,this.array),s=$i(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==h0&&(e.usage=this.usage),e}}class I0 extends qn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class O0 extends qn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class zs extends qn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let bM=0;const vn=new Kt,uh=new sn,Wa=new Z,an=new ul,pl=new ul,ai=new Z;class Vs extends Ia{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:bM++}),this.uuid=al(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(m0(e)?O0:I0)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new it().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vn.makeRotationFromQuaternion(e),this.applyMatrix4(vn),this}rotateX(e){return vn.makeRotationX(e),this.applyMatrix4(vn),this}rotateY(e){return vn.makeRotationY(e),this.applyMatrix4(vn),this}rotateZ(e){return vn.makeRotationZ(e),this.applyMatrix4(vn),this}translate(e,t,i){return vn.makeTranslation(e,t,i),this.applyMatrix4(vn),this}scale(e,t,i){return vn.makeScale(e,t,i),this.applyMatrix4(vn),this}lookAt(e){return uh.lookAt(e),uh.updateMatrix(),this.applyMatrix4(uh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wa).negate(),this.translate(Wa.x,Wa.y,Wa.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new zs(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ul);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];an.setFromBufferAttribute(s),this.morphTargetsRelative?(ai.addVectors(this.boundingBox.min,an.min),this.boundingBox.expandByPoint(ai),ai.addVectors(this.boundingBox.max,an.max),this.boundingBox.expandByPoint(ai)):(this.boundingBox.expandByPoint(an.min),this.boundingBox.expandByPoint(an.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new eh);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Z,1/0);return}if(e){const i=this.boundingSphere.center;if(an.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];pl.setFromBufferAttribute(o),this.morphTargetsRelative?(ai.addVectors(an.min,pl.min),an.expandByPoint(ai),ai.addVectors(an.max,pl.max),an.expandByPoint(ai)):(an.expandByPoint(pl.min),an.expandByPoint(pl.max))}an.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)ai.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ai));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,d=o.count;c<d;c++)ai.fromBufferAttribute(o,c),l&&(Wa.fromBufferAttribute(e,c),ai.add(Wa)),r=Math.max(r,i.distanceToSquared(ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qn(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let E=0;E<i.count;E++)o[E]=new Z,l[E]=new Z;const c=new Z,d=new Z,h=new Z,f=new gt,u=new gt,m=new gt,p=new Z,v=new Z;function g(E,S,x){c.fromBufferAttribute(i,E),d.fromBufferAttribute(i,S),h.fromBufferAttribute(i,x),f.fromBufferAttribute(s,E),u.fromBufferAttribute(s,S),m.fromBufferAttribute(s,x),d.sub(c),h.sub(c),u.sub(f),m.sub(f);const C=1/(u.x*m.y-m.x*u.y);isFinite(C)&&(p.copy(d).multiplyScalar(m.y).addScaledVector(h,-u.y).multiplyScalar(C),v.copy(h).multiplyScalar(u.x).addScaledVector(d,-m.x).multiplyScalar(C),o[E].add(p),o[S].add(p),o[x].add(p),l[E].add(v),l[S].add(v),l[x].add(v))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let E=0,S=y.length;E<S;++E){const x=y[E],C=x.start,A=x.count;for(let P=C,R=C+A;P<R;P+=3)g(e.getX(P+0),e.getX(P+1),e.getX(P+2))}const _=new Z,b=new Z,w=new Z,M=new Z;function T(E){w.fromBufferAttribute(r,E),M.copy(w);const S=o[E];_.copy(S),_.sub(w.multiplyScalar(w.dot(S))).normalize(),b.crossVectors(M,S);const C=b.dot(l[E])<0?-1:1;a.setXYZW(E,_.x,_.y,_.z,C)}for(let E=0,S=y.length;E<S;++E){const x=y[E],C=x.start,A=x.count;for(let P=C,R=C+A;P<R;P+=3)T(e.getX(P+0)),T(e.getX(P+1)),T(e.getX(P+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new qn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,u=i.count;f<u;f++)i.setXYZ(f,0,0,0);const r=new Z,s=new Z,a=new Z,o=new Z,l=new Z,c=new Z,d=new Z,h=new Z;if(e)for(let f=0,u=e.count;f<u;f+=3){const m=e.getX(f+0),p=e.getX(f+1),v=e.getX(f+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,p),a.fromBufferAttribute(t,v),d.subVectors(a,s),h.subVectors(r,s),d.cross(h),o.fromBufferAttribute(i,m),l.fromBufferAttribute(i,p),c.fromBufferAttribute(i,v),o.add(d),l.add(d),c.add(d),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(p,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let f=0,u=t.count;f<u;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),d.subVectors(a,s),h.subVectors(r,s),d.cross(h),i.setXYZ(f+0,d.x,d.y,d.z),i.setXYZ(f+1,d.x,d.y,d.z),i.setXYZ(f+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ai.fromBufferAttribute(e,t),ai.normalize(),e.setXYZ(t,ai.x,ai.y,ai.z)}toNonIndexed(){function e(o,l){const c=o.array,d=o.itemSize,h=o.normalized,f=new c.constructor(l.length*d);let u=0,m=0;for(let p=0,v=l.length;p<v;p++){o.isInterleavedBufferAttribute?u=l[p]*o.data.stride+o.offset:u=l[p]*d;for(let g=0;g<d;g++)f[m++]=c[u++]}return new qn(f,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Vs,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let d=0,h=c.length;d<h;d++){const f=c[d],u=e(f,i);l.push(u)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,f=c.length;h<f;h++){const u=c[h];d.push(u.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],h=s[c];for(let f=0,u=h.length;f<u;f++)d.push(h[f].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,d=a.length;c<d;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const N0=new Kt,Hs=new hM,ru=new eh,k0=new Z,Xa=new Z,$a=new Z,qa=new Z,dh=new Z,su=new Z,au=new gt,ou=new gt,lu=new gt,U0=new Z,F0=new Z,B0=new Z,cu=new Z,uu=new Z;class Yn extends sn{constructor(e=new Vs,t=new D0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){su.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=o[l],h=s[l];d!==0&&(dh.fromBufferAttribute(h,e),a?su.addScaledVector(dh,d):su.addScaledVector(dh.sub(t),d))}t.add(su)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),ru.copy(i.boundingSphere),ru.applyMatrix4(s),Hs.copy(e.ray).recast(e.near),!(ru.containsPoint(Hs.origin)===!1&&(Hs.intersectSphere(ru,k0)===null||Hs.origin.distanceToSquared(k0)>(e.far-e.near)**2))&&(N0.copy(s).invert(),Hs.copy(e.ray).applyMatrix4(N0),!(i.boundingBox!==null&&Hs.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Hs)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,h=s.attributes.normal,f=s.groups,u=s.drawRange;if(o!==null)if(Array.isArray(a))for(let m=0,p=f.length;m<p;m++){const v=f[m],g=a[v.materialIndex],y=Math.max(v.start,u.start),_=Math.min(o.count,Math.min(v.start+v.count,u.start+u.count));for(let b=y,w=_;b<w;b+=3){const M=o.getX(b),T=o.getX(b+1),E=o.getX(b+2);r=du(this,g,e,i,c,d,h,M,T,E),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const m=Math.max(0,u.start),p=Math.min(o.count,u.start+u.count);for(let v=m,g=p;v<g;v+=3){const y=o.getX(v),_=o.getX(v+1),b=o.getX(v+2);r=du(this,a,e,i,c,d,h,y,_,b),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,p=f.length;m<p;m++){const v=f[m],g=a[v.materialIndex],y=Math.max(v.start,u.start),_=Math.min(l.count,Math.min(v.start+v.count,u.start+u.count));for(let b=y,w=_;b<w;b+=3){const M=b,T=b+1,E=b+2;r=du(this,g,e,i,c,d,h,M,T,E),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const m=Math.max(0,u.start),p=Math.min(l.count,u.start+u.count);for(let v=m,g=p;v<g;v+=3){const y=v,_=v+1,b=v+2;r=du(this,a,e,i,c,d,h,y,_,b),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}}}function wM(n,e,t,i,r,s,a,o){let l;if(e.side===Wi?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===zr,o),l===null)return null;uu.copy(o),uu.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(uu);return c<t.near||c>t.far?null:{distance:c,point:uu.clone(),object:n}}function du(n,e,t,i,r,s,a,o,l,c){n.getVertexPosition(o,Xa),n.getVertexPosition(l,$a),n.getVertexPosition(c,qa);const d=wM(n,e,t,i,Xa,$a,qa,cu);if(d){r&&(au.fromBufferAttribute(r,o),ou.fromBufferAttribute(r,l),lu.fromBufferAttribute(r,c),d.uv=$n.getInterpolation(cu,Xa,$a,qa,au,ou,lu,new gt)),s&&(au.fromBufferAttribute(s,o),ou.fromBufferAttribute(s,l),lu.fromBufferAttribute(s,c),d.uv1=$n.getInterpolation(cu,Xa,$a,qa,au,ou,lu,new gt)),a&&(U0.fromBufferAttribute(a,o),F0.fromBufferAttribute(a,l),B0.fromBufferAttribute(a,c),d.normal=$n.getInterpolation(cu,Xa,$a,qa,U0,F0,B0,new Z),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new Z,materialIndex:0};$n.getNormal(Xa,$a,qa,h.normal),d.face=h}return d}class ml extends Vs{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],d=[],h=[];let f=0,u=0;m("z","y","x",-1,-1,i,t,e,a,s,0),m("z","y","x",1,-1,i,t,-e,a,s,1),m("x","z","y",1,1,e,i,t,r,a,2),m("x","z","y",1,-1,e,i,-t,r,a,3),m("x","y","z",1,-1,e,t,i,r,s,4),m("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new zs(c,3)),this.setAttribute("normal",new zs(d,3)),this.setAttribute("uv",new zs(h,2));function m(p,v,g,y,_,b,w,M,T,E,S){const x=b/T,C=w/E,A=b/2,P=w/2,R=M/2,L=T+1,U=E+1;let B=0,F=0;const G=new Z;for(let O=0;O<U;O++){const ee=O*C-P;for(let se=0;se<L;se++){const we=se*x-A;G[p]=we*y,G[v]=ee*_,G[g]=R,c.push(G.x,G.y,G.z),G[p]=0,G[v]=0,G[g]=M>0?1:-1,d.push(G.x,G.y,G.z),h.push(se/T),h.push(1-O/E),B+=1}}for(let O=0;O<E;O++)for(let ee=0;ee<T;ee++){const se=f+ee+L*O,we=f+ee+L*(O+1),X=f+(ee+1)+L*(O+1),J=f+(ee+1)+L*O;l.push(se,we,J),l.push(we,X,J),F+=6}o.addGroup(u,F,S),u+=F,f+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ml(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ya(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ni(n){const e={};for(let t=0;t<n.length;t++){const i=Ya(n[t]);for(const r in i)e[r]=i[r]}return e}function SM(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function z0(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:bt.workingColorSpace}const MM={clone:Ya,merge:Ni};var TM=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,EM=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class xr extends iu{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=TM,this.fragmentShader=EM,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ya(e.uniforms),this.uniformsGroups=SM(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class V0 extends sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt,this.coordinateSystem=hr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Zr=new Z,H0=new gt,G0=new gt;class _n extends V0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$f*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Xf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $f*2*Math.atan(Math.tan(Xf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Zr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Zr.x,Zr.y).multiplyScalar(-e/Zr.z),Zr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Zr.x,Zr.y).multiplyScalar(-e/Zr.z)}getViewSize(e,t){return this.getViewBounds(e,H0,G0),t.subVectors(G0,H0)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Xf*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ja=-90,Ka=1;class AM extends sn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new _n(ja,Ka,e,t);r.layers=this.layers,this.add(r);const s=new _n(ja,Ka,e,t);s.layers=this.layers,this.add(s);const a=new _n(ja,Ka,e,t);a.layers=this.layers,this.add(a);const o=new _n(ja,Ka,e,t);o.layers=this.layers,this.add(o);const l=new _n(ja,Ka,e,t);l.layers=this.layers,this.add(l);const c=new _n(ja,Ka,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===hr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===$c)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,d]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=p,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(h,f,u),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class W0 extends xi{constructor(e,t,i,r,s,a,o,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:Ca,super(e,t,i,r,s,a,o,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class CM extends Us{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new W0(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:nn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ml(5,5,5),s=new xr({name:"CubemapFromEquirect",uniforms:Ya(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Wi,blending:Vr});s.uniforms.tEquirect.value=t;const a=new Yn(r,s),o=t.minFilter;return t.minFilter===ks&&(t.minFilter=nn),new AM(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}const fh=new Z,PM=new Z,RM=new it;class Gs{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=fh.subVectors(i,t).cross(PM.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(fh),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||RM.getNormalMatrix(e),r=this.coplanarPoint(fh).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ws=new eh,fu=new Z;class X0{constructor(e=new Gs,t=new Gs,i=new Gs,r=new Gs,s=new Gs,a=new Gs){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=hr){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],d=r[5],h=r[6],f=r[7],u=r[8],m=r[9],p=r[10],v=r[11],g=r[12],y=r[13],_=r[14],b=r[15];if(i[0].setComponents(l-s,f-c,v-u,b-g).normalize(),i[1].setComponents(l+s,f+c,v+u,b+g).normalize(),i[2].setComponents(l+a,f+d,v+m,b+y).normalize(),i[3].setComponents(l-a,f-d,v-m,b-y).normalize(),i[4].setComponents(l-o,f-h,v-p,b-_).normalize(),t===hr)i[5].setComponents(l+o,f+h,v+p,b+_).normalize();else if(t===$c)i[5].setComponents(o,h,p,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ws.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ws.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ws)}intersectsSprite(e){return Ws.center.set(0,0,0),Ws.radius=.7071067811865476,Ws.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ws)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(fu.x=r.normal.x>0?e.max.x:e.min.x,fu.y=r.normal.y>0?e.max.y:e.min.y,fu.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function $0(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function LM(n){const e=new WeakMap;function t(o,l){const c=o.array,d=o.usage,h=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,d),o.onUploadCallback();let u;if(c instanceof Float32Array)u=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?u=n.HALF_FLOAT:u=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)u=n.SHORT;else if(c instanceof Uint32Array)u=n.UNSIGNED_INT;else if(c instanceof Int32Array)u=n.INT;else if(c instanceof Int8Array)u=n.BYTE;else if(c instanceof Uint8Array)u=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)u=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:u,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:h}}function i(o,l,c){const d=l.array,h=l._updateRange,f=l.updateRanges;if(n.bindBuffer(c,o),h.count===-1&&f.length===0&&n.bufferSubData(c,0,d),f.length!==0){for(let u=0,m=f.length;u<m;u++){const p=f[u];n.bufferSubData(c,p.start*d.BYTES_PER_ELEMENT,d,p.start,p.count)}l.clearUpdateRanges()}h.count!==-1&&(n.bufferSubData(c,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count),h.count=-1),l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}class gl extends Vs{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,d=l+1,h=e/o,f=t/l,u=[],m=[],p=[],v=[];for(let g=0;g<d;g++){const y=g*f-a;for(let _=0;_<c;_++){const b=_*h-s;m.push(b,-y,0),p.push(0,0,1),v.push(_/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let y=0;y<o;y++){const _=y+c*g,b=y+c*(g+1),w=y+1+c*(g+1),M=y+1+c*g;u.push(_,b,M),u.push(b,w,M)}this.setIndex(u),this.setAttribute("position",new zs(m,3)),this.setAttribute("normal",new zs(p,3)),this.setAttribute("uv",new zs(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gl(e.width,e.height,e.widthSegments,e.heightSegments)}}var DM=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,IM=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,OM=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,NM=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kM=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,UM=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,FM=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,BM=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zM=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,VM=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,HM=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,GM=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,WM=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,XM=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,$M=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,qM=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,YM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,jM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,KM=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ZM=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,QM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,JM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,eT=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,tT=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,iT=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nT=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,rT=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sT=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,aT=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,oT=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lT="gl_FragColor = linearToOutputTexel( gl_FragColor );",cT=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,uT=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,dT=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fT=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,hT=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pT=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mT=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gT=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vT=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_T=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yT=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,xT=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bT=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wT=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ST=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,MT=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,TT=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,ET=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,AT=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,CT=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,PT=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,RT=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,LT=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,DT=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,IT=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,OT=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,NT=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kT=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,UT=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,FT=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,BT=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,zT=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,VT=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,HT=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,GT=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,WT=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,XT=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$T=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,qT=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,YT=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,jT=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,KT=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ZT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,JT=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,eE=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,tE=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,iE=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,nE=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,rE=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sE=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,aE=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,oE=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lE=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cE=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,uE=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,dE=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fE=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,hE=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,pE=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mE=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,gE=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,vE=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_E=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,yE=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,xE=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bE=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,wE=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,SE=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ME=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,TE=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,EE=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,AE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,PE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,RE=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const nt={alphahash_fragment:DM,alphahash_pars_fragment:IM,alphamap_fragment:OM,alphamap_pars_fragment:NM,alphatest_fragment:kM,alphatest_pars_fragment:UM,aomap_fragment:FM,aomap_pars_fragment:BM,batching_pars_vertex:zM,batching_vertex:VM,begin_vertex:HM,beginnormal_vertex:GM,bsdfs:WM,iridescence_fragment:XM,bumpmap_pars_fragment:$M,clipping_planes_fragment:qM,clipping_planes_pars_fragment:YM,clipping_planes_pars_vertex:jM,clipping_planes_vertex:KM,color_fragment:ZM,color_pars_fragment:QM,color_pars_vertex:JM,color_vertex:eT,common:tT,cube_uv_reflection_fragment:iT,defaultnormal_vertex:nT,displacementmap_pars_vertex:rT,displacementmap_vertex:sT,emissivemap_fragment:aT,emissivemap_pars_fragment:oT,colorspace_fragment:lT,colorspace_pars_fragment:cT,envmap_fragment:uT,envmap_common_pars_fragment:dT,envmap_pars_fragment:fT,envmap_pars_vertex:hT,envmap_physical_pars_fragment:MT,envmap_vertex:pT,fog_vertex:mT,fog_pars_vertex:gT,fog_fragment:vT,fog_pars_fragment:_T,gradientmap_pars_fragment:yT,lightmap_pars_fragment:xT,lights_lambert_fragment:bT,lights_lambert_pars_fragment:wT,lights_pars_begin:ST,lights_toon_fragment:TT,lights_toon_pars_fragment:ET,lights_phong_fragment:AT,lights_phong_pars_fragment:CT,lights_physical_fragment:PT,lights_physical_pars_fragment:RT,lights_fragment_begin:LT,lights_fragment_maps:DT,lights_fragment_end:IT,logdepthbuf_fragment:OT,logdepthbuf_pars_fragment:NT,logdepthbuf_pars_vertex:kT,logdepthbuf_vertex:UT,map_fragment:FT,map_pars_fragment:BT,map_particle_fragment:zT,map_particle_pars_fragment:VT,metalnessmap_fragment:HT,metalnessmap_pars_fragment:GT,morphinstance_vertex:WT,morphcolor_vertex:XT,morphnormal_vertex:$T,morphtarget_pars_vertex:qT,morphtarget_vertex:YT,normal_fragment_begin:jT,normal_fragment_maps:KT,normal_pars_fragment:ZT,normal_pars_vertex:QT,normal_vertex:JT,normalmap_pars_fragment:eE,clearcoat_normal_fragment_begin:tE,clearcoat_normal_fragment_maps:iE,clearcoat_pars_fragment:nE,iridescence_pars_fragment:rE,opaque_fragment:sE,packing:aE,premultiplied_alpha_fragment:oE,project_vertex:lE,dithering_fragment:cE,dithering_pars_fragment:uE,roughnessmap_fragment:dE,roughnessmap_pars_fragment:fE,shadowmap_pars_fragment:hE,shadowmap_pars_vertex:pE,shadowmap_vertex:mE,shadowmask_pars_fragment:gE,skinbase_vertex:vE,skinning_pars_vertex:_E,skinning_vertex:yE,skinnormal_vertex:xE,specularmap_fragment:bE,specularmap_pars_fragment:wE,tonemapping_fragment:SE,tonemapping_pars_fragment:ME,transmission_fragment:TE,transmission_pars_fragment:EE,uv_pars_fragment:AE,uv_pars_vertex:CE,uv_vertex:PE,worldpos_vertex:RE,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},be={common:{diffuse:{value:new yt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new it},alphaMap:{value:null},alphaMapTransform:{value:new it},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new it}},envmap:{envMap:{value:null},envMapRotation:{value:new it},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new it}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new it}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new it},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new it},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new it},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new it}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new it}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new it}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new it},alphaTest:{value:0},uvTransform:{value:new it}},sprite:{diffuse:{value:new yt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new it},alphaMap:{value:null},alphaMapTransform:{value:new it},alphaTest:{value:0}}},jn={basic:{uniforms:Ni([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.fog]),vertexShader:nt.meshbasic_vert,fragmentShader:nt.meshbasic_frag},lambert:{uniforms:Ni([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new yt(0)}}]),vertexShader:nt.meshlambert_vert,fragmentShader:nt.meshlambert_frag},phong:{uniforms:Ni([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new yt(0)},specular:{value:new yt(1118481)},shininess:{value:30}}]),vertexShader:nt.meshphong_vert,fragmentShader:nt.meshphong_frag},standard:{uniforms:Ni([be.common,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.roughnessmap,be.metalnessmap,be.fog,be.lights,{emissive:{value:new yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nt.meshphysical_vert,fragmentShader:nt.meshphysical_frag},toon:{uniforms:Ni([be.common,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.gradientmap,be.fog,be.lights,{emissive:{value:new yt(0)}}]),vertexShader:nt.meshtoon_vert,fragmentShader:nt.meshtoon_frag},matcap:{uniforms:Ni([be.common,be.bumpmap,be.normalmap,be.displacementmap,be.fog,{matcap:{value:null}}]),vertexShader:nt.meshmatcap_vert,fragmentShader:nt.meshmatcap_frag},points:{uniforms:Ni([be.points,be.fog]),vertexShader:nt.points_vert,fragmentShader:nt.points_frag},dashed:{uniforms:Ni([be.common,be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nt.linedashed_vert,fragmentShader:nt.linedashed_frag},depth:{uniforms:Ni([be.common,be.displacementmap]),vertexShader:nt.depth_vert,fragmentShader:nt.depth_frag},normal:{uniforms:Ni([be.common,be.bumpmap,be.normalmap,be.displacementmap,{opacity:{value:1}}]),vertexShader:nt.meshnormal_vert,fragmentShader:nt.meshnormal_frag},sprite:{uniforms:Ni([be.sprite,be.fog]),vertexShader:nt.sprite_vert,fragmentShader:nt.sprite_frag},background:{uniforms:{uvTransform:{value:new it},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nt.background_vert,fragmentShader:nt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new it}},vertexShader:nt.backgroundCube_vert,fragmentShader:nt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nt.cube_vert,fragmentShader:nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nt.equirect_vert,fragmentShader:nt.equirect_frag},distanceRGBA:{uniforms:Ni([be.common,be.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nt.distanceRGBA_vert,fragmentShader:nt.distanceRGBA_frag},shadow:{uniforms:Ni([be.lights,be.fog,{color:{value:new yt(0)},opacity:{value:1}}]),vertexShader:nt.shadow_vert,fragmentShader:nt.shadow_frag}};jn.physical={uniforms:Ni([jn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new it},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new it},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new it},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new it},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new it},sheen:{value:0},sheenColor:{value:new yt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new it},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new it},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new it},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new it},attenuationDistance:{value:0},attenuationColor:{value:new yt(0)},specularColor:{value:new yt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new it},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new it},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new it}}]),vertexShader:nt.meshphysical_vert,fragmentShader:nt.meshphysical_frag};const hu={r:0,b:0,g:0},Xs=new gr,LE=new Kt;function DE(n,e,t,i,r,s,a){const o=new yt(0);let l=s===!0?0:1,c,d,h=null,f=0,u=null;function m(y){let _=y.isScene===!0?y.background:null;return _&&_.isTexture&&(_=(y.backgroundBlurriness>0?t:e).get(_)),_}function p(y){let _=!1;const b=m(y);b===null?g(o,l):b&&b.isColor&&(g(b,1),_=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?i.buffers.color.setClear(0,0,0,1,a):w==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil)}function v(y,_){const b=m(_);b&&(b.isCubeTexture||b.mapping===Bc)?(d===void 0&&(d=new Yn(new ml(1,1,1),new xr({name:"BackgroundCubeMaterial",uniforms:Ya(jn.backgroundCube.uniforms),vertexShader:jn.backgroundCube.vertexShader,fragmentShader:jn.backgroundCube.fragmentShader,side:Wi,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(w,M,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Xs.copy(_.backgroundRotation),Xs.x*=-1,Xs.y*=-1,Xs.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Xs.y*=-1,Xs.z*=-1),d.material.uniforms.envMap.value=b,d.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(LE.makeRotationFromEuler(Xs)),d.material.toneMapped=bt.getTransfer(b.colorSpace)!==Lt,(h!==b||f!==b.version||u!==n.toneMapping)&&(d.material.needsUpdate=!0,h=b,f=b.version,u=n.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new Yn(new gl(2,2),new xr({name:"BackgroundMaterial",uniforms:Ya(jn.background.uniforms),vertexShader:jn.background.vertexShader,fragmentShader:jn.background.fragmentShader,side:zr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=bt.getTransfer(b.colorSpace)!==Lt,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(h!==b||f!==b.version||u!==n.toneMapping)&&(c.material.needsUpdate=!0,h=b,f=b.version,u=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function g(y,_){y.getRGB(hu,z0(n)),i.buffers.color.setClear(hu.r,hu.g,hu.b,_,a)}return{getClearColor:function(){return o},setClearColor:function(y,_=1){o.set(y),l=_,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,g(o,l)},render:p,addToRenderList:v}}function IE(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,a=!1;function o(x,C,A,P,R){let L=!1;const U=h(P,A,C);s!==U&&(s=U,c(s.object)),L=u(x,P,A,R),L&&m(x,P,A,R),R!==null&&e.update(R,n.ELEMENT_ARRAY_BUFFER),(L||a)&&(a=!1,b(x,C,A,P),R!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(R).buffer))}function l(){return n.createVertexArray()}function c(x){return n.bindVertexArray(x)}function d(x){return n.deleteVertexArray(x)}function h(x,C,A){const P=A.wireframe===!0;let R=i[x.id];R===void 0&&(R={},i[x.id]=R);let L=R[C.id];L===void 0&&(L={},R[C.id]=L);let U=L[P];return U===void 0&&(U=f(l()),L[P]=U),U}function f(x){const C=[],A=[],P=[];for(let R=0;R<t;R++)C[R]=0,A[R]=0,P[R]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:C,enabledAttributes:A,attributeDivisors:P,object:x,attributes:{},index:null}}function u(x,C,A,P){const R=s.attributes,L=C.attributes;let U=0;const B=A.getAttributes();for(const F in B)if(B[F].location>=0){const O=R[F];let ee=L[F];if(ee===void 0&&(F==="instanceMatrix"&&x.instanceMatrix&&(ee=x.instanceMatrix),F==="instanceColor"&&x.instanceColor&&(ee=x.instanceColor)),O===void 0||O.attribute!==ee||ee&&O.data!==ee.data)return!0;U++}return s.attributesNum!==U||s.index!==P}function m(x,C,A,P){const R={},L=C.attributes;let U=0;const B=A.getAttributes();for(const F in B)if(B[F].location>=0){let O=L[F];O===void 0&&(F==="instanceMatrix"&&x.instanceMatrix&&(O=x.instanceMatrix),F==="instanceColor"&&x.instanceColor&&(O=x.instanceColor));const ee={};ee.attribute=O,O&&O.data&&(ee.data=O.data),R[F]=ee,U++}s.attributes=R,s.attributesNum=U,s.index=P}function p(){const x=s.newAttributes;for(let C=0,A=x.length;C<A;C++)x[C]=0}function v(x){g(x,0)}function g(x,C){const A=s.newAttributes,P=s.enabledAttributes,R=s.attributeDivisors;A[x]=1,P[x]===0&&(n.enableVertexAttribArray(x),P[x]=1),R[x]!==C&&(n.vertexAttribDivisor(x,C),R[x]=C)}function y(){const x=s.newAttributes,C=s.enabledAttributes;for(let A=0,P=C.length;A<P;A++)C[A]!==x[A]&&(n.disableVertexAttribArray(A),C[A]=0)}function _(x,C,A,P,R,L,U){U===!0?n.vertexAttribIPointer(x,C,A,R,L):n.vertexAttribPointer(x,C,A,P,R,L)}function b(x,C,A,P){p();const R=P.attributes,L=A.getAttributes(),U=C.defaultAttributeValues;for(const B in L){const F=L[B];if(F.location>=0){let G=R[B];if(G===void 0&&(B==="instanceMatrix"&&x.instanceMatrix&&(G=x.instanceMatrix),B==="instanceColor"&&x.instanceColor&&(G=x.instanceColor)),G!==void 0){const O=G.normalized,ee=G.itemSize,se=e.get(G);if(se===void 0)continue;const we=se.buffer,X=se.type,J=se.bytesPerElement,ne=X===n.INT||X===n.UNSIGNED_INT||G.gpuType===Iv;if(G.isInterleavedBufferAttribute){const re=G.data,_e=re.stride,Oe=G.offset;if(re.isInstancedInterleavedBuffer){for(let V=0;V<F.locationSize;V++)g(F.location+V,re.meshPerAttribute);x.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let V=0;V<F.locationSize;V++)v(F.location+V);n.bindBuffer(n.ARRAY_BUFFER,we);for(let V=0;V<F.locationSize;V++)_(F.location+V,ee/F.locationSize,X,O,_e*J,(Oe+ee/F.locationSize*V)*J,ne)}else{if(G.isInstancedBufferAttribute){for(let re=0;re<F.locationSize;re++)g(F.location+re,G.meshPerAttribute);x.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let re=0;re<F.locationSize;re++)v(F.location+re);n.bindBuffer(n.ARRAY_BUFFER,we);for(let re=0;re<F.locationSize;re++)_(F.location+re,ee/F.locationSize,X,O,ee*J,ee/F.locationSize*re*J,ne)}}else if(U!==void 0){const O=U[B];if(O!==void 0)switch(O.length){case 2:n.vertexAttrib2fv(F.location,O);break;case 3:n.vertexAttrib3fv(F.location,O);break;case 4:n.vertexAttrib4fv(F.location,O);break;default:n.vertexAttrib1fv(F.location,O)}}}}y()}function w(){E();for(const x in i){const C=i[x];for(const A in C){const P=C[A];for(const R in P)d(P[R].object),delete P[R];delete C[A]}delete i[x]}}function M(x){if(i[x.id]===void 0)return;const C=i[x.id];for(const A in C){const P=C[A];for(const R in P)d(P[R].object),delete P[R];delete C[A]}delete i[x.id]}function T(x){for(const C in i){const A=i[C];if(A[x.id]===void 0)continue;const P=A[x.id];for(const R in P)d(P[R].object),delete P[R];delete A[x.id]}}function E(){S(),a=!0,s!==r&&(s=r,c(s.object))}function S(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:E,resetDefaultState:S,dispose:w,releaseStatesOfGeometry:M,releaseStatesOfProgram:T,initAttributes:p,enableAttribute:v,disableUnusedAttributes:y}}function OE(n,e,t){let i;function r(c){i=c}function s(c,d){n.drawArrays(i,c,d),t.update(d,i,1)}function a(c,d,h){h!==0&&(n.drawArraysInstanced(i,c,d,h),t.update(d,i,h))}function o(c,d,h){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let u=0;u<h;u++)this.render(c[u],d[u]);else{f.multiDrawArraysWEBGL(i,c,0,d,0,h);let u=0;for(let m=0;m<h;m++)u+=d[m];t.update(u,i,1)}}function l(c,d,h,f){if(h===0)return;const u=e.get("WEBGL_multi_draw");if(u===null)for(let m=0;m<c.length;m++)a(c[m],d[m],f[m]);else{u.multiDrawArraysInstancedWEBGL(i,c,0,d,0,f,0,h);let m=0;for(let p=0;p<h;p++)m+=d[p];for(let p=0;p<f.length;p++)t.update(m,i,f[p])}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function NE(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(M){return!(M!==gn&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(M){const T=M===Vc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==Gr&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==fr&&!T)}function l(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const h=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),u=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=u>0,w=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:h,maxTextures:f,maxVertexTextures:u,maxTextureSize:m,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:g,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:b,maxSamples:w}}function kE(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Gs,o=new it,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const u=h.length!==0||f||i!==0||r;return r=f,i=h.length,u},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=d(h,f,0)},this.setState=function(h,f,u){const m=h.clippingPlanes,p=h.clipIntersection,v=h.clipShadows,g=n.get(h);if(!r||m===null||m.length===0||s&&!v)s?d(null):c();else{const y=s?0:i,_=y*4;let b=g.clippingState||null;l.value=b,b=d(m,f,_,u);for(let w=0;w!==_;++w)b[w]=t[w];g.clippingState=b,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(h,f,u,m){const p=h!==null?h.length:0;let v=null;if(p!==0){if(v=l.value,m!==!0||v===null){const g=u+p*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(v===null||v.length<g)&&(v=new Float32Array(g));for(let _=0,b=u;_!==p;++_,b+=4)a.copy(h[_]).applyMatrix4(y,o),a.normal.toArray(v,b),v[b+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,v}}function UE(n){let e=new WeakMap;function t(a,o){return o===Of?a.mapping=Ca:o===Nf&&(a.mapping=Pa),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===Of||o===Nf)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new CM(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class q0 extends V0{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=d*this.view.offsetY,l=o-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Za=4,Y0=[.125,.215,.35,.446,.526,.582],$s=20,hh=new q0,j0=new yt;let ph=null,mh=0,gh=0,vh=!1;const qs=(1+Math.sqrt(5))/2,Qa=1/qs,K0=[new Z(-qs,Qa,0),new Z(qs,Qa,0),new Z(-Qa,0,qs),new Z(Qa,0,qs),new Z(0,qs,-Qa),new Z(0,qs,Qa),new Z(-1,1,-1),new Z(1,1,-1),new Z(-1,1,1),new Z(1,1,1)];class Z0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){ph=this._renderer.getRenderTarget(),mh=this._renderer.getActiveCubeFace(),gh=this._renderer.getActiveMipmapLevel(),vh=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=e_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=J0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ph,mh,gh),this._renderer.xr.enabled=vh,e.scissorTest=!1,pu(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ca||e.mapping===Pa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ph=this._renderer.getRenderTarget(),mh=this._renderer.getActiveCubeFace(),gh=this._renderer.getActiveMipmapLevel(),vh=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:nn,minFilter:nn,generateMipmaps:!1,type:Vc,format:gn,colorSpace:Xr,depthBuffer:!1},r=Q0(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Q0(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=FE(s)),this._blurMaterial=BE(s,e,t)}return r}_compileMaterial(e){const t=new Yn(this._lodPlanes[0],e);this._renderer.compile(t,hh)}_sceneToCubeUV(e,t,i,r){const o=new _n(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(j0),d.toneMapping=Hr,d.autoClear=!1;const u=new D0({name:"PMREM.Background",side:Wi,depthWrite:!1,depthTest:!1}),m=new Yn(new ml,u);let p=!1;const v=e.background;v?v.isColor&&(u.color.copy(v),e.background=null,p=!0):(u.color.copy(j0),p=!0);for(let g=0;g<6;g++){const y=g%3;y===0?(o.up.set(0,l[g],0),o.lookAt(c[g],0,0)):y===1?(o.up.set(0,0,l[g]),o.lookAt(0,c[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,c[g]));const _=this._cubeSize;pu(r,y*_,g>2?_:0,_,_),d.setRenderTarget(r),p&&d.render(m,o),d.render(e,o)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ca||e.mapping===Pa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=e_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=J0());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Yn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;pu(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,hh)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=K0[(r-s-1)%K0.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Yn(this._lodPlanes[r],c),f=c.uniforms,u=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*u):2*Math.PI/(2*$s-1),p=s/m,v=isFinite(s)?1+Math.floor(d*p):$s;v>$s&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${$s}`);const g=[];let y=0;for(let T=0;T<$s;++T){const E=T/p,S=Math.exp(-E*E/2);g.push(S),T===0?y+=S:T<v&&(y+=2*S)}for(let T=0;T<g.length;T++)g[T]=g[T]/y;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:_}=this;f.dTheta.value=m,f.mipInt.value=_-i;const b=this._sizeLods[r],w=3*b*(r>_-Za?r-_+Za:0),M=4*(this._cubeSize-b);pu(t,w,M,3*b,2*b),l.setRenderTarget(t),l.render(h,hh)}}function FE(n){const e=[],t=[],i=[];let r=n;const s=n-Za+1+Y0.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Za?l=Y0[a-n+Za-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),d=-c,h=1+c,f=[d,d,h,d,h,h,d,d,h,h,d,h],u=6,m=6,p=3,v=2,g=1,y=new Float32Array(p*m*u),_=new Float32Array(v*m*u),b=new Float32Array(g*m*u);for(let M=0;M<u;M++){const T=M%3*2/3-1,E=M>2?0:-1,S=[T,E,0,T+2/3,E,0,T+2/3,E+1,0,T,E,0,T+2/3,E+1,0,T,E+1,0];y.set(S,p*m*M),_.set(f,v*m*M);const x=[M,M,M,M,M,M];b.set(x,g*m*M)}const w=new Vs;w.setAttribute("position",new qn(y,p)),w.setAttribute("uv",new qn(_,v)),w.setAttribute("faceIndex",new qn(b,g)),e.push(w),r>Za&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Q0(n,e,t){const i=new Us(n,e,t);return i.texture.mapping=Bc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function pu(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function BE(n,e,t){const i=new Float32Array($s),r=new Z(0,1,0);return new xr({name:"SphericalGaussianBlur",defines:{n:$s,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:_h(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vr,depthTest:!1,depthWrite:!1})}function J0(){return new xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_h(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vr,depthTest:!1,depthWrite:!1})}function e_(){return new xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_h(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vr,depthTest:!1,depthWrite:!1})}function _h(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zE(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===Of||l===Nf,d=l===Ca||l===Pa;if(c||d){let h=e.get(o);const f=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new Z0(n)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const u=o.image;return c&&u&&u.height>0||d&&u&&r(u)?(t===null&&(t=new Z0(n)),h=c?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",s),h.texture):null}}}return o}function r(o){let l=0;const c=6;for(let d=0;d<c;d++)o[d]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function VE(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function HE(n,e,t,i){const r={},s=new WeakMap;function a(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);for(const m in f.morphAttributes){const p=f.morphAttributes[m];for(let v=0,g=p.length;v<g;v++)e.remove(p[v])}f.removeEventListener("dispose",a),delete r[f.id];const u=s.get(f);u&&(e.remove(u),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(h,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const m in f)e.update(f[m],n.ARRAY_BUFFER);const u=h.morphAttributes;for(const m in u){const p=u[m];for(let v=0,g=p.length;v<g;v++)e.update(p[v],n.ARRAY_BUFFER)}}function c(h){const f=[],u=h.index,m=h.attributes.position;let p=0;if(u!==null){const y=u.array;p=u.version;for(let _=0,b=y.length;_<b;_+=3){const w=y[_+0],M=y[_+1],T=y[_+2];f.push(w,M,M,T,T,w)}}else if(m!==void 0){const y=m.array;p=m.version;for(let _=0,b=y.length/3-1;_<b;_+=3){const w=_+0,M=_+1,T=_+2;f.push(w,M,M,T,T,w)}}else return;const v=new(m0(f)?O0:I0)(f,1);v.version=p;const g=s.get(h);g&&e.remove(g),s.set(h,v)}function d(h){const f=s.get(h);if(f){const u=h.index;u!==null&&f.version<u.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:d}}function GE(n,e,t){let i;function r(f){i=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,u){n.drawElements(i,u,s,f*a),t.update(u,i,1)}function c(f,u,m){m!==0&&(n.drawElementsInstanced(i,u,s,f*a,m),t.update(u,i,m))}function d(f,u,m){if(m===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<m;v++)this.render(f[v]/a,u[v]);else{p.multiDrawElementsWEBGL(i,u,0,s,f,0,m);let v=0;for(let g=0;g<m;g++)v+=u[g];t.update(v,i,1)}}function h(f,u,m,p){if(m===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<f.length;g++)c(f[g]/a,u[g],p[g]);else{v.multiDrawElementsInstancedWEBGL(i,u,0,s,f,0,p,0,m);let g=0;for(let y=0;y<m;y++)g+=u[y];for(let y=0;y<p.length;y++)t.update(g,i,p[y])}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=h}function WE(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function XE(n,e,t){const i=new WeakMap,r=new si;function s(a,o,l){const c=a.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=d!==void 0?d.length:0;let f=i.get(o);if(f===void 0||f.count!==h){let S=function(){T.dispose(),i.delete(o),o.removeEventListener("dispose",S)};f!==void 0&&f.texture.dispose();const u=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,p=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],g=o.morphAttributes.normal||[],y=o.morphAttributes.color||[];let _=0;u===!0&&(_=1),m===!0&&(_=2),p===!0&&(_=3);let b=o.attributes.position.count*_,w=1;b>e.maxTextureSize&&(w=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const M=new Float32Array(b*w*4*h),T=new x0(M,b,w,h);T.type=fr,T.needsUpdate=!0;const E=_*4;for(let x=0;x<h;x++){const C=v[x],A=g[x],P=y[x],R=b*w*4*x;for(let L=0;L<C.count;L++){const U=L*E;u===!0&&(r.fromBufferAttribute(C,L),M[R+U+0]=r.x,M[R+U+1]=r.y,M[R+U+2]=r.z,M[R+U+3]=0),m===!0&&(r.fromBufferAttribute(A,L),M[R+U+4]=r.x,M[R+U+5]=r.y,M[R+U+6]=r.z,M[R+U+7]=0),p===!0&&(r.fromBufferAttribute(P,L),M[R+U+8]=r.x,M[R+U+9]=r.y,M[R+U+10]=r.z,M[R+U+11]=P.itemSize===4?r.w:1)}}f={count:h,texture:T,size:new gt(b,w)},i.set(o,f),o.addEventListener("dispose",S)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let u=0;for(let p=0;p<c.length;p++)u+=c[p];const m=o.morphTargetsRelative?1:1-u;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function $E(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,d=l.geometry,h=e.get(l,d);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return h}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}class t_ extends xi{constructor(e,t,i,r,s,a,o,l,c,d){if(d=d!==void 0?d:La,d!==La&&d!==sl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===La&&(i=Ra),i===void 0&&d===sl&&(i=rl),super(null,r,s,a,o,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Oi,this.minFilter=l!==void 0?l:Oi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const i_=new xi,n_=new t_(1,1);n_.compareFunction=f0;const r_=new x0,s_=new dM,a_=new W0,o_=[],l_=[],c_=new Float32Array(16),u_=new Float32Array(9),d_=new Float32Array(4);function Ja(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=o_[r];if(s===void 0&&(s=new Float32Array(r),o_[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Zt(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Qt(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function mu(n,e){let t=l_[e];t===void 0&&(t=new Int32Array(e),l_[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function qE(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function YE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zt(t,e))return;n.uniform2fv(this.addr,e),Qt(t,e)}}function jE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zt(t,e))return;n.uniform3fv(this.addr,e),Qt(t,e)}}function KE(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zt(t,e))return;n.uniform4fv(this.addr,e),Qt(t,e)}}function ZE(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zt(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qt(t,e)}else{if(Zt(t,i))return;d_.set(i),n.uniformMatrix2fv(this.addr,!1,d_),Qt(t,i)}}function QE(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zt(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qt(t,e)}else{if(Zt(t,i))return;u_.set(i),n.uniformMatrix3fv(this.addr,!1,u_),Qt(t,i)}}function JE(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zt(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qt(t,e)}else{if(Zt(t,i))return;c_.set(i),n.uniformMatrix4fv(this.addr,!1,c_),Qt(t,i)}}function e1(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function t1(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zt(t,e))return;n.uniform2iv(this.addr,e),Qt(t,e)}}function i1(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zt(t,e))return;n.uniform3iv(this.addr,e),Qt(t,e)}}function n1(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zt(t,e))return;n.uniform4iv(this.addr,e),Qt(t,e)}}function r1(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function s1(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zt(t,e))return;n.uniform2uiv(this.addr,e),Qt(t,e)}}function a1(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zt(t,e))return;n.uniform3uiv(this.addr,e),Qt(t,e)}}function o1(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zt(t,e))return;n.uniform4uiv(this.addr,e),Qt(t,e)}}function l1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?n_:i_;t.setTexture2D(e||s,r)}function c1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||s_,r)}function u1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||a_,r)}function d1(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||r_,r)}function f1(n){switch(n){case 5126:return qE;case 35664:return YE;case 35665:return jE;case 35666:return KE;case 35674:return ZE;case 35675:return QE;case 35676:return JE;case 5124:case 35670:return e1;case 35667:case 35671:return t1;case 35668:case 35672:return i1;case 35669:case 35673:return n1;case 5125:return r1;case 36294:return s1;case 36295:return a1;case 36296:return o1;case 35678:case 36198:case 36298:case 36306:case 35682:return l1;case 35679:case 36299:case 36307:return c1;case 35680:case 36300:case 36308:case 36293:return u1;case 36289:case 36303:case 36311:case 36292:return d1}}function h1(n,e){n.uniform1fv(this.addr,e)}function p1(n,e){const t=Ja(e,this.size,2);n.uniform2fv(this.addr,t)}function m1(n,e){const t=Ja(e,this.size,3);n.uniform3fv(this.addr,t)}function g1(n,e){const t=Ja(e,this.size,4);n.uniform4fv(this.addr,t)}function v1(n,e){const t=Ja(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function _1(n,e){const t=Ja(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function y1(n,e){const t=Ja(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function x1(n,e){n.uniform1iv(this.addr,e)}function b1(n,e){n.uniform2iv(this.addr,e)}function w1(n,e){n.uniform3iv(this.addr,e)}function S1(n,e){n.uniform4iv(this.addr,e)}function M1(n,e){n.uniform1uiv(this.addr,e)}function T1(n,e){n.uniform2uiv(this.addr,e)}function E1(n,e){n.uniform3uiv(this.addr,e)}function A1(n,e){n.uniform4uiv(this.addr,e)}function C1(n,e,t){const i=this.cache,r=e.length,s=mu(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||i_,s[a])}function P1(n,e,t){const i=this.cache,r=e.length,s=mu(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||s_,s[a])}function R1(n,e,t){const i=this.cache,r=e.length,s=mu(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||a_,s[a])}function L1(n,e,t){const i=this.cache,r=e.length,s=mu(t,r);Zt(i,s)||(n.uniform1iv(this.addr,s),Qt(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||r_,s[a])}function D1(n){switch(n){case 5126:return h1;case 35664:return p1;case 35665:return m1;case 35666:return g1;case 35674:return v1;case 35675:return _1;case 35676:return y1;case 5124:case 35670:return x1;case 35667:case 35671:return b1;case 35668:case 35672:return w1;case 35669:case 35673:return S1;case 5125:return M1;case 36294:return T1;case 36295:return E1;case 36296:return A1;case 35678:case 36198:case 36298:case 36306:case 35682:return C1;case 35679:case 36299:case 36307:return P1;case 35680:case 36300:case 36308:case 36293:return R1;case 36289:case 36303:case 36311:case 36292:return L1}}class I1{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=f1(t.type)}}class O1{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=D1(t.type)}}class N1{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const yh=/(\w+)(\])?(\[|\.)?/g;function f_(n,e){n.seq.push(e),n.map[e.id]=e}function k1(n,e,t){const i=n.name,r=i.length;for(yh.lastIndex=0;;){const s=yh.exec(i),a=yh.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){f_(t,c===void 0?new I1(o,n,e):new O1(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new N1(o),f_(t,h)),t=h}}}class gu{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);k1(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function h_(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const U1=37297;let F1=0;function B1(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function z1(n){const e=bt.getPrimaries(bt.workingColorSpace),t=bt.getPrimaries(n);let i;switch(e===t?i="":e===Xc&&t===Wc?i="LinearDisplayP3ToLinearSRGB":e===Wc&&t===Xc&&(i="LinearSRGBToLinearDisplayP3"),n){case Xr:case Hc:return[i,"LinearTransferOETF"];case Xn:case Wf:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function p_(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+B1(n.getShaderSource(e),a)}else return r}function V1(n,e){const t=z1(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function H1(n,e){let t;switch(e){case CS:t="Linear";break;case PS:t="Reinhard";break;case RS:t="OptimizedCineon";break;case LS:t="ACESFilmic";break;case IS:t="AgX";break;case OS:t="Neutral";break;case DS:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function G1(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(vl).join(`
`)}function W1(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function X1(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function vl(n){return n!==""}function m_(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function g_(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $1=/^[ \t]*#include +<([\w\d./]+)>/gm;function xh(n){return n.replace($1,Y1)}const q1=new Map;function Y1(n,e){let t=nt[e];if(t===void 0){const i=q1.get(e);if(i!==void 0)t=nt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return xh(t)}const j1=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function v_(n){return n.replace(j1,K1)}function K1(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function __(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Z1(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Ev?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===eS?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===dr&&(e="SHADOWMAP_TYPE_VSM"),e}function Q1(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ca:case Pa:e="ENVMAP_TYPE_CUBE";break;case Bc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function J1(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Pa:e="ENVMAP_MODE_REFRACTION";break}return e}function eA(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Rv:e="ENVMAP_BLENDING_MULTIPLY";break;case ES:e="ENVMAP_BLENDING_MIX";break;case AS:e="ENVMAP_BLENDING_ADD";break}return e}function tA(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function iA(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Z1(t),c=Q1(t),d=J1(t),h=eA(t),f=tA(t),u=G1(t),m=W1(s),p=r.createProgram();let v,g,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(vl).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(vl).join(`
`),g.length>0&&(g+=`
`)):(v=[__(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vl).join(`
`),g=[__(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Hr?"#define TONE_MAPPING":"",t.toneMapping!==Hr?nt.tonemapping_pars_fragment:"",t.toneMapping!==Hr?H1("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nt.colorspace_pars_fragment,V1("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(vl).join(`
`)),a=xh(a),a=m_(a,t),a=g_(a,t),o=xh(o),o=m_(o,t),o=g_(o,t),a=v_(a),o=v_(o),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=[u,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===p0?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===p0?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=y+v+a,b=y+g+o,w=h_(r,r.VERTEX_SHADER,_),M=h_(r,r.FRAGMENT_SHADER,b);r.attachShader(p,w),r.attachShader(p,M),t.index0AttributeName!==void 0?r.bindAttribLocation(p,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(p,0,"position"),r.linkProgram(p);function T(C){if(n.debug.checkShaderErrors){const A=r.getProgramInfoLog(p).trim(),P=r.getShaderInfoLog(w).trim(),R=r.getShaderInfoLog(M).trim();let L=!0,U=!0;if(r.getProgramParameter(p,r.LINK_STATUS)===!1)if(L=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,p,w,M);else{const B=p_(r,w,"vertex"),F=p_(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(p,r.VALIDATE_STATUS)+`

Material Name: `+C.name+`
Material Type: `+C.type+`

Program Info Log: `+A+`
`+B+`
`+F)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(P===""||R==="")&&(U=!1);U&&(C.diagnostics={runnable:L,programLog:A,vertexShader:{log:P,prefix:v},fragmentShader:{log:R,prefix:g}})}r.deleteShader(w),r.deleteShader(M),E=new gu(r,p),S=X1(r,p)}let E;this.getUniforms=function(){return E===void 0&&T(this),E};let S;this.getAttributes=function(){return S===void 0&&T(this),S};let x=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(p,U1)),x},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(p),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=F1++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=w,this.fragmentShader=M,this}let nA=0;class rA{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new sA(e),t.set(e,i)),i}}class sA{constructor(e){this.id=nA++,this.code=e,this.usedTimes=0}}function aA(n,e,t,i,r,s,a){const o=new M0,l=new rA,c=new Set,d=[],h=r.logarithmicDepthBuffer,f=r.vertexTextures;let u=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(S){return c.add(S),S===0?"uv":`uv${S}`}function v(S,x,C,A,P){const R=A.fog,L=P.geometry,U=S.isMeshStandardMaterial?A.environment:null,B=(S.isMeshStandardMaterial?t:e).get(S.envMap||U),F=B&&B.mapping===Bc?B.image.height:null,G=m[S.type];S.precision!==null&&(u=r.getMaxPrecision(S.precision),u!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",u,"instead."));const O=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,ee=O!==void 0?O.length:0;let se=0;L.morphAttributes.position!==void 0&&(se=1),L.morphAttributes.normal!==void 0&&(se=2),L.morphAttributes.color!==void 0&&(se=3);let we,X,J,ne;if(G){const ut=jn[G];we=ut.vertexShader,X=ut.fragmentShader}else we=S.vertexShader,X=S.fragmentShader,l.update(S),J=l.getVertexShaderID(S),ne=l.getFragmentShaderID(S);const re=n.getRenderTarget(),_e=P.isInstancedMesh===!0,Oe=P.isBatchedMesh===!0,V=!!S.map,ze=!!S.matcap,Pe=!!B,me=!!S.aoMap,fe=!!S.lightMap,De=!!S.bumpMap,Ne=!!S.normalMap,$=!!S.displacementMap,Ye=!!S.emissiveMap,k=!!S.metalnessMap,D=!!S.roughnessMap,z=S.anisotropy>0,te=S.clearcoat>0,oe=S.dispersion>0,le=S.iridescence>0,Se=S.sheen>0,he=S.transmission>0,ce=z&&!!S.anisotropyMap,He=te&&!!S.clearcoatMap,ue=te&&!!S.clearcoatNormalMap,Ie=te&&!!S.clearcoatRoughnessMap,rt=le&&!!S.iridescenceMap,Ee=le&&!!S.iridescenceThicknessMap,Ae=Se&&!!S.sheenColorMap,Xe=Se&&!!S.sheenRoughnessMap,Je=!!S.specularMap,St=!!S.specularColorMap,$e=!!S.specularIntensityMap,H=he&&!!S.transmissionMap,Q=he&&!!S.thicknessMap,ie=!!S.gradientMap,pe=!!S.alphaMap,ge=S.alphaTest>0,Qe=!!S.alphaHash,ht=!!S.extensions;let xt=Hr;S.toneMapped&&(re===null||re.isXRRenderTarget===!0)&&(xt=n.toneMapping);const At={shaderID:G,shaderType:S.type,shaderName:S.name,vertexShader:we,fragmentShader:X,defines:S.defines,customVertexShaderID:J,customFragmentShaderID:ne,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:u,batching:Oe,instancing:_e,instancingColor:_e&&P.instanceColor!==null,instancingMorph:_e&&P.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:re===null?n.outputColorSpace:re.isXRRenderTarget===!0?re.texture.colorSpace:Xr,alphaToCoverage:!!S.alphaToCoverage,map:V,matcap:ze,envMap:Pe,envMapMode:Pe&&B.mapping,envMapCubeUVHeight:F,aoMap:me,lightMap:fe,bumpMap:De,normalMap:Ne,displacementMap:f&&$,emissiveMap:Ye,normalMapObjectSpace:Ne&&S.normalMapType===jS,normalMapTangentSpace:Ne&&S.normalMapType===YS,metalnessMap:k,roughnessMap:D,anisotropy:z,anisotropyMap:ce,clearcoat:te,clearcoatMap:He,clearcoatNormalMap:ue,clearcoatRoughnessMap:Ie,dispersion:oe,iridescence:le,iridescenceMap:rt,iridescenceThicknessMap:Ee,sheen:Se,sheenColorMap:Ae,sheenRoughnessMap:Xe,specularMap:Je,specularColorMap:St,specularIntensityMap:$e,transmission:he,transmissionMap:H,thicknessMap:Q,gradientMap:ie,opaque:S.transparent===!1&&S.blending===Aa&&S.alphaToCoverage===!1,alphaMap:pe,alphaTest:ge,alphaHash:Qe,combine:S.combine,mapUv:V&&p(S.map.channel),aoMapUv:me&&p(S.aoMap.channel),lightMapUv:fe&&p(S.lightMap.channel),bumpMapUv:De&&p(S.bumpMap.channel),normalMapUv:Ne&&p(S.normalMap.channel),displacementMapUv:$&&p(S.displacementMap.channel),emissiveMapUv:Ye&&p(S.emissiveMap.channel),metalnessMapUv:k&&p(S.metalnessMap.channel),roughnessMapUv:D&&p(S.roughnessMap.channel),anisotropyMapUv:ce&&p(S.anisotropyMap.channel),clearcoatMapUv:He&&p(S.clearcoatMap.channel),clearcoatNormalMapUv:ue&&p(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&p(S.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&p(S.iridescenceMap.channel),iridescenceThicknessMapUv:Ee&&p(S.iridescenceThicknessMap.channel),sheenColorMapUv:Ae&&p(S.sheenColorMap.channel),sheenRoughnessMapUv:Xe&&p(S.sheenRoughnessMap.channel),specularMapUv:Je&&p(S.specularMap.channel),specularColorMapUv:St&&p(S.specularColorMap.channel),specularIntensityMapUv:$e&&p(S.specularIntensityMap.channel),transmissionMapUv:H&&p(S.transmissionMap.channel),thicknessMapUv:Q&&p(S.thicknessMap.channel),alphaMapUv:pe&&p(S.alphaMap.channel),vertexTangents:!!L.attributes.tangent&&(Ne||z),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,pointsUvs:P.isPoints===!0&&!!L.attributes.uv&&(V||pe),fog:!!R,useFog:S.fog===!0,fogExp2:!!R&&R.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:P.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:se,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&C.length>0,shadowMapType:n.shadowMap.type,toneMapping:xt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:V&&S.map.isVideoTexture===!0&&bt.getTransfer(S.map.colorSpace)===Lt,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Wn,flipSided:S.side===Wi,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:ht&&S.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ht&&S.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return At.vertexUv1s=c.has(1),At.vertexUv2s=c.has(2),At.vertexUv3s=c.has(3),c.clear(),At}function g(S){const x=[];if(S.shaderID?x.push(S.shaderID):(x.push(S.customVertexShaderID),x.push(S.customFragmentShaderID)),S.defines!==void 0)for(const C in S.defines)x.push(C),x.push(S.defines[C]);return S.isRawShaderMaterial===!1&&(y(x,S),_(x,S),x.push(n.outputColorSpace)),x.push(S.customProgramCacheKey),x.join()}function y(S,x){S.push(x.precision),S.push(x.outputColorSpace),S.push(x.envMapMode),S.push(x.envMapCubeUVHeight),S.push(x.mapUv),S.push(x.alphaMapUv),S.push(x.lightMapUv),S.push(x.aoMapUv),S.push(x.bumpMapUv),S.push(x.normalMapUv),S.push(x.displacementMapUv),S.push(x.emissiveMapUv),S.push(x.metalnessMapUv),S.push(x.roughnessMapUv),S.push(x.anisotropyMapUv),S.push(x.clearcoatMapUv),S.push(x.clearcoatNormalMapUv),S.push(x.clearcoatRoughnessMapUv),S.push(x.iridescenceMapUv),S.push(x.iridescenceThicknessMapUv),S.push(x.sheenColorMapUv),S.push(x.sheenRoughnessMapUv),S.push(x.specularMapUv),S.push(x.specularColorMapUv),S.push(x.specularIntensityMapUv),S.push(x.transmissionMapUv),S.push(x.thicknessMapUv),S.push(x.combine),S.push(x.fogExp2),S.push(x.sizeAttenuation),S.push(x.morphTargetsCount),S.push(x.morphAttributeCount),S.push(x.numDirLights),S.push(x.numPointLights),S.push(x.numSpotLights),S.push(x.numSpotLightMaps),S.push(x.numHemiLights),S.push(x.numRectAreaLights),S.push(x.numDirLightShadows),S.push(x.numPointLightShadows),S.push(x.numSpotLightShadows),S.push(x.numSpotLightShadowsWithMaps),S.push(x.numLightProbes),S.push(x.shadowMapType),S.push(x.toneMapping),S.push(x.numClippingPlanes),S.push(x.numClipIntersection),S.push(x.depthPacking)}function _(S,x){o.disableAll(),x.supportsVertexTextures&&o.enable(0),x.instancing&&o.enable(1),x.instancingColor&&o.enable(2),x.instancingMorph&&o.enable(3),x.matcap&&o.enable(4),x.envMap&&o.enable(5),x.normalMapObjectSpace&&o.enable(6),x.normalMapTangentSpace&&o.enable(7),x.clearcoat&&o.enable(8),x.iridescence&&o.enable(9),x.alphaTest&&o.enable(10),x.vertexColors&&o.enable(11),x.vertexAlphas&&o.enable(12),x.vertexUv1s&&o.enable(13),x.vertexUv2s&&o.enable(14),x.vertexUv3s&&o.enable(15),x.vertexTangents&&o.enable(16),x.anisotropy&&o.enable(17),x.alphaHash&&o.enable(18),x.batching&&o.enable(19),x.dispersion&&o.enable(20),S.push(o.mask),o.disableAll(),x.fog&&o.enable(0),x.useFog&&o.enable(1),x.flatShading&&o.enable(2),x.logarithmicDepthBuffer&&o.enable(3),x.skinning&&o.enable(4),x.morphTargets&&o.enable(5),x.morphNormals&&o.enable(6),x.morphColors&&o.enable(7),x.premultipliedAlpha&&o.enable(8),x.shadowMapEnabled&&o.enable(9),x.useLegacyLights&&o.enable(10),x.doubleSided&&o.enable(11),x.flipSided&&o.enable(12),x.useDepthPacking&&o.enable(13),x.dithering&&o.enable(14),x.transmission&&o.enable(15),x.sheen&&o.enable(16),x.opaque&&o.enable(17),x.pointsUvs&&o.enable(18),x.decodeVideoTexture&&o.enable(19),x.alphaToCoverage&&o.enable(20),S.push(o.mask)}function b(S){const x=m[S.type];let C;if(x){const A=jn[x];C=MM.clone(A.uniforms)}else C=S.uniforms;return C}function w(S,x){let C;for(let A=0,P=d.length;A<P;A++){const R=d[A];if(R.cacheKey===x){C=R,++C.usedTimes;break}}return C===void 0&&(C=new iA(n,x,S,s),d.push(C)),C}function M(S){if(--S.usedTimes===0){const x=d.indexOf(S);d[x]=d[d.length-1],d.pop(),S.destroy()}}function T(S){l.remove(S)}function E(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:b,acquireProgram:w,releaseProgram:M,releaseShaderCache:T,programs:d,dispose:E}}function oA(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function lA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function y_(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function x_(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(h,f,u,m,p,v){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:f,material:u,groupOrder:m,renderOrder:h.renderOrder,z:p,group:v},n[e]=g):(g.id=h.id,g.object=h,g.geometry=f,g.material=u,g.groupOrder=m,g.renderOrder=h.renderOrder,g.z=p,g.group=v),e++,g}function o(h,f,u,m,p,v){const g=a(h,f,u,m,p,v);u.transmission>0?i.push(g):u.transparent===!0?r.push(g):t.push(g)}function l(h,f,u,m,p,v){const g=a(h,f,u,m,p,v);u.transmission>0?i.unshift(g):u.transparent===!0?r.unshift(g):t.unshift(g)}function c(h,f){t.length>1&&t.sort(h||lA),i.length>1&&i.sort(f||y_),r.length>1&&r.sort(f||y_)}function d(){for(let h=e,f=n.length;h<f;h++){const u=n[h];if(u.id===null)break;u.id=null,u.object=null,u.geometry=null,u.material=null,u.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:d,sort:c}}function cA(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new x_,n.set(i,[a])):r>=s.length?(a=new x_,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function uA(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new yt};break;case"SpotLight":t={position:new Z,direction:new Z,color:new yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new yt,groundColor:new yt};break;case"RectAreaLight":t={color:new yt,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return n[e.id]=t,t}}}function dA(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let fA=0;function hA(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function pA(n){const e=new uA,t=dA(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new Z);const r=new Z,s=new Kt,a=new Kt;function o(c,d){let h=0,f=0,u=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let m=0,p=0,v=0,g=0,y=0,_=0,b=0,w=0,M=0,T=0,E=0;c.sort(hA);const S=d===!0?Math.PI:1;for(let C=0,A=c.length;C<A;C++){const P=c[C],R=P.color,L=P.intensity,U=P.distance,B=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)h+=R.r*L*S,f+=R.g*L*S,u+=R.b*L*S;else if(P.isLightProbe){for(let F=0;F<9;F++)i.probe[F].addScaledVector(P.sh.coefficients[F],L);E++}else if(P.isDirectionalLight){const F=e.get(P);if(F.color.copy(P.color).multiplyScalar(P.intensity*S),P.castShadow){const G=P.shadow,O=t.get(P);O.shadowBias=G.bias,O.shadowNormalBias=G.normalBias,O.shadowRadius=G.radius,O.shadowMapSize=G.mapSize,i.directionalShadow[m]=O,i.directionalShadowMap[m]=B,i.directionalShadowMatrix[m]=P.shadow.matrix,_++}i.directional[m]=F,m++}else if(P.isSpotLight){const F=e.get(P);F.position.setFromMatrixPosition(P.matrixWorld),F.color.copy(R).multiplyScalar(L*S),F.distance=U,F.coneCos=Math.cos(P.angle),F.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),F.decay=P.decay,i.spot[v]=F;const G=P.shadow;if(P.map&&(i.spotLightMap[M]=P.map,M++,G.updateMatrices(P),P.castShadow&&T++),i.spotLightMatrix[v]=G.matrix,P.castShadow){const O=t.get(P);O.shadowBias=G.bias,O.shadowNormalBias=G.normalBias,O.shadowRadius=G.radius,O.shadowMapSize=G.mapSize,i.spotShadow[v]=O,i.spotShadowMap[v]=B,w++}v++}else if(P.isRectAreaLight){const F=e.get(P);F.color.copy(R).multiplyScalar(L),F.halfWidth.set(P.width*.5,0,0),F.halfHeight.set(0,P.height*.5,0),i.rectArea[g]=F,g++}else if(P.isPointLight){const F=e.get(P);if(F.color.copy(P.color).multiplyScalar(P.intensity*S),F.distance=P.distance,F.decay=P.decay,P.castShadow){const G=P.shadow,O=t.get(P);O.shadowBias=G.bias,O.shadowNormalBias=G.normalBias,O.shadowRadius=G.radius,O.shadowMapSize=G.mapSize,O.shadowCameraNear=G.camera.near,O.shadowCameraFar=G.camera.far,i.pointShadow[p]=O,i.pointShadowMap[p]=B,i.pointShadowMatrix[p]=P.shadow.matrix,b++}i.point[p]=F,p++}else if(P.isHemisphereLight){const F=e.get(P);F.skyColor.copy(P.color).multiplyScalar(L*S),F.groundColor.copy(P.groundColor).multiplyScalar(L*S),i.hemi[y]=F,y++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=be.LTC_FLOAT_1,i.rectAreaLTC2=be.LTC_FLOAT_2):(i.rectAreaLTC1=be.LTC_HALF_1,i.rectAreaLTC2=be.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=u;const x=i.hash;(x.directionalLength!==m||x.pointLength!==p||x.spotLength!==v||x.rectAreaLength!==g||x.hemiLength!==y||x.numDirectionalShadows!==_||x.numPointShadows!==b||x.numSpotShadows!==w||x.numSpotMaps!==M||x.numLightProbes!==E)&&(i.directional.length=m,i.spot.length=v,i.rectArea.length=g,i.point.length=p,i.hemi.length=y,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=w+M-T,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=E,x.directionalLength=m,x.pointLength=p,x.spotLength=v,x.rectAreaLength=g,x.hemiLength=y,x.numDirectionalShadows=_,x.numPointShadows=b,x.numSpotShadows=w,x.numSpotMaps=M,x.numLightProbes=E,i.version=fA++)}function l(c,d){let h=0,f=0,u=0,m=0,p=0;const v=d.matrixWorldInverse;for(let g=0,y=c.length;g<y;g++){const _=c[g];if(_.isDirectionalLight){const b=i.directional[h];b.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(v),h++}else if(_.isSpotLight){const b=i.spot[u];b.position.setFromMatrixPosition(_.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(v),u++}else if(_.isRectAreaLight){const b=i.rectArea[m];b.position.setFromMatrixPosition(_.matrixWorld),b.position.applyMatrix4(v),a.identity(),s.copy(_.matrixWorld),s.premultiply(v),a.extractRotation(s),b.halfWidth.set(_.width*.5,0,0),b.halfHeight.set(0,_.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),m++}else if(_.isPointLight){const b=i.point[f];b.position.setFromMatrixPosition(_.matrixWorld),b.position.applyMatrix4(v),f++}else if(_.isHemisphereLight){const b=i.hemi[p];b.direction.setFromMatrixPosition(_.matrixWorld),b.direction.transformDirection(v),p++}}}return{setup:o,setupView:l,state:i}}function b_(n){const e=new pA(n),t=[],i=[];function r(d){c.camera=d,t.length=0,i.length=0}function s(d){t.push(d)}function a(d){i.push(d)}function o(d){e.setup(t,d)}function l(d){e.setupView(t,d)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function mA(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new b_(n),e.set(r,[o])):s>=a.length?(o=new b_(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}class gA extends iu{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=$S,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class vA extends iu{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const _A=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yA=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function xA(n,e,t){let i=new X0;const r=new gt,s=new gt,a=new si,o=new gA({depthPacking:qS}),l=new vA,c={},d=t.maxTextureSize,h={[zr]:Wi,[Wi]:zr,[Wn]:Wn},f=new xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:_A,fragmentShader:yA}),u=f.clone();u.defines.HORIZONTAL_PASS=1;const m=new Vs;m.setAttribute("position",new qn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Yn(m,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ev;let g=this.type;this.render=function(M,T,E){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||M.length===0)return;const S=n.getRenderTarget(),x=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),A=n.state;A.setBlending(Vr),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);const P=g!==dr&&this.type===dr,R=g===dr&&this.type!==dr;for(let L=0,U=M.length;L<U;L++){const B=M[L],F=B.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;r.copy(F.mapSize);const G=F.getFrameExtents();if(r.multiply(G),s.copy(F.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/G.x),r.x=s.x*G.x,F.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/G.y),r.y=s.y*G.y,F.mapSize.y=s.y)),F.map===null||P===!0||R===!0){const ee=this.type!==dr?{minFilter:Oi,magFilter:Oi}:{};F.map!==null&&F.map.dispose(),F.map=new Us(r.x,r.y,ee),F.map.texture.name=B.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const O=F.getViewportCount();for(let ee=0;ee<O;ee++){const se=F.getViewport(ee);a.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),A.viewport(a),F.updateMatrices(B,ee),i=F.getFrustum(),b(T,E,F.camera,B,this.type)}F.isPointLightShadow!==!0&&this.type===dr&&y(F,E),F.needsUpdate=!1}g=this.type,v.needsUpdate=!1,n.setRenderTarget(S,x,C)};function y(M,T){const E=e.update(p);f.defines.VSM_SAMPLES!==M.blurSamples&&(f.defines.VSM_SAMPLES=M.blurSamples,u.defines.VSM_SAMPLES=M.blurSamples,f.needsUpdate=!0,u.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Us(r.x,r.y)),f.uniforms.shadow_pass.value=M.map.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(T,null,E,f,p,null),u.uniforms.shadow_pass.value=M.mapPass.texture,u.uniforms.resolution.value=M.mapSize,u.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(T,null,E,u,p,null)}function _(M,T,E,S){let x=null;const C=E.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(C!==void 0)x=C;else if(x=E.isPointLight===!0?l:o,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const A=x.uuid,P=T.uuid;let R=c[A];R===void 0&&(R={},c[A]=R);let L=R[P];L===void 0&&(L=x.clone(),R[P]=L,T.addEventListener("dispose",w)),x=L}if(x.visible=T.visible,x.wireframe=T.wireframe,S===dr?x.side=T.shadowSide!==null?T.shadowSide:T.side:x.side=T.shadowSide!==null?T.shadowSide:h[T.side],x.alphaMap=T.alphaMap,x.alphaTest=T.alphaTest,x.map=T.map,x.clipShadows=T.clipShadows,x.clippingPlanes=T.clippingPlanes,x.clipIntersection=T.clipIntersection,x.displacementMap=T.displacementMap,x.displacementScale=T.displacementScale,x.displacementBias=T.displacementBias,x.wireframeLinewidth=T.wireframeLinewidth,x.linewidth=T.linewidth,E.isPointLight===!0&&x.isMeshDistanceMaterial===!0){const A=n.properties.get(x);A.light=E}return x}function b(M,T,E,S,x){if(M.visible===!1)return;if(M.layers.test(T.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&x===dr)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,M.matrixWorld);const P=e.update(M),R=M.material;if(Array.isArray(R)){const L=P.groups;for(let U=0,B=L.length;U<B;U++){const F=L[U],G=R[F.materialIndex];if(G&&G.visible){const O=_(M,G,S,x);M.onBeforeShadow(n,M,T,E,P,O,F),n.renderBufferDirect(E,null,P,O,M,F),M.onAfterShadow(n,M,T,E,P,O,F)}}}else if(R.visible){const L=_(M,R,S,x);M.onBeforeShadow(n,M,T,E,P,L,null),n.renderBufferDirect(E,null,P,L,M,null),M.onAfterShadow(n,M,T,E,P,L,null)}}const A=M.children;for(let P=0,R=A.length;P<R;P++)b(A[P],T,E,S,x)}function w(M){M.target.removeEventListener("dispose",w);for(const E in c){const S=c[E],x=M.target.uuid;x in S&&(S[x].dispose(),delete S[x])}}}function bA(n){function e(){let H=!1;const Q=new si;let ie=null;const pe=new si(0,0,0,0);return{setMask:function(ge){ie!==ge&&!H&&(n.colorMask(ge,ge,ge,ge),ie=ge)},setLocked:function(ge){H=ge},setClear:function(ge,Qe,ht,xt,At){At===!0&&(ge*=xt,Qe*=xt,ht*=xt),Q.set(ge,Qe,ht,xt),pe.equals(Q)===!1&&(n.clearColor(ge,Qe,ht,xt),pe.copy(Q))},reset:function(){H=!1,ie=null,pe.set(-1,0,0,0)}}}function t(){let H=!1,Q=null,ie=null,pe=null;return{setTest:function(ge){ge?ne(n.DEPTH_TEST):re(n.DEPTH_TEST)},setMask:function(ge){Q!==ge&&!H&&(n.depthMask(ge),Q=ge)},setFunc:function(ge){if(ie!==ge){switch(ge){case yS:n.depthFunc(n.NEVER);break;case xS:n.depthFunc(n.ALWAYS);break;case bS:n.depthFunc(n.LESS);break;case Fc:n.depthFunc(n.LEQUAL);break;case wS:n.depthFunc(n.EQUAL);break;case SS:n.depthFunc(n.GEQUAL);break;case MS:n.depthFunc(n.GREATER);break;case TS:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ie=ge}},setLocked:function(ge){H=ge},setClear:function(ge){pe!==ge&&(n.clearDepth(ge),pe=ge)},reset:function(){H=!1,Q=null,ie=null,pe=null}}}function i(){let H=!1,Q=null,ie=null,pe=null,ge=null,Qe=null,ht=null,xt=null,At=null;return{setTest:function(ut){H||(ut?ne(n.STENCIL_TEST):re(n.STENCIL_TEST))},setMask:function(ut){Q!==ut&&!H&&(n.stencilMask(ut),Q=ut)},setFunc:function(ut,Ve,Le){(ie!==ut||pe!==Ve||ge!==Le)&&(n.stencilFunc(ut,Ve,Le),ie=ut,pe=Ve,ge=Le)},setOp:function(ut,Ve,Le){(Qe!==ut||ht!==Ve||xt!==Le)&&(n.stencilOp(ut,Ve,Le),Qe=ut,ht=Ve,xt=Le)},setLocked:function(ut){H=ut},setClear:function(ut){At!==ut&&(n.clearStencil(ut),At=ut)},reset:function(){H=!1,Q=null,ie=null,pe=null,ge=null,Qe=null,ht=null,xt=null,At=null}}}const r=new e,s=new t,a=new i,o=new WeakMap,l=new WeakMap;let c={},d={},h=new WeakMap,f=[],u=null,m=!1,p=null,v=null,g=null,y=null,_=null,b=null,w=null,M=new yt(0,0,0),T=0,E=!1,S=null,x=null,C=null,A=null,P=null;const R=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,U=0;const B=n.getParameter(n.VERSION);B.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(B)[1]),L=U>=1):B.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),L=U>=2);let F=null,G={};const O=n.getParameter(n.SCISSOR_BOX),ee=n.getParameter(n.VIEWPORT),se=new si().fromArray(O),we=new si().fromArray(ee);function X(H,Q,ie,pe){const ge=new Uint8Array(4),Qe=n.createTexture();n.bindTexture(H,Qe),n.texParameteri(H,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(H,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ht=0;ht<ie;ht++)H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY?n.texImage3D(Q,0,n.RGBA,1,1,pe,0,n.RGBA,n.UNSIGNED_BYTE,ge):n.texImage2D(Q+ht,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ge);return Qe}const J={};J[n.TEXTURE_2D]=X(n.TEXTURE_2D,n.TEXTURE_2D,1),J[n.TEXTURE_CUBE_MAP]=X(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),J[n.TEXTURE_2D_ARRAY]=X(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),J[n.TEXTURE_3D]=X(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ne(n.DEPTH_TEST),s.setFunc(Fc),De(!1),Ne(Tv),ne(n.CULL_FACE),me(Vr);function ne(H){c[H]!==!0&&(n.enable(H),c[H]=!0)}function re(H){c[H]!==!1&&(n.disable(H),c[H]=!1)}function _e(H,Q){return d[H]!==Q?(n.bindFramebuffer(H,Q),d[H]=Q,H===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Q),H===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Q),!0):!1}function Oe(H,Q){let ie=f,pe=!1;if(H){ie=h.get(Q),ie===void 0&&(ie=[],h.set(Q,ie));const ge=H.textures;if(ie.length!==ge.length||ie[0]!==n.COLOR_ATTACHMENT0){for(let Qe=0,ht=ge.length;Qe<ht;Qe++)ie[Qe]=n.COLOR_ATTACHMENT0+Qe;ie.length=ge.length,pe=!0}}else ie[0]!==n.BACK&&(ie[0]=n.BACK,pe=!0);pe&&n.drawBuffers(ie)}function V(H){return u!==H?(n.useProgram(H),u=H,!0):!1}const ze={[Os]:n.FUNC_ADD,[iS]:n.FUNC_SUBTRACT,[nS]:n.FUNC_REVERSE_SUBTRACT};ze[rS]=n.MIN,ze[sS]=n.MAX;const Pe={[aS]:n.ZERO,[oS]:n.ONE,[lS]:n.SRC_COLOR,[Df]:n.SRC_ALPHA,[pS]:n.SRC_ALPHA_SATURATE,[fS]:n.DST_COLOR,[uS]:n.DST_ALPHA,[cS]:n.ONE_MINUS_SRC_COLOR,[If]:n.ONE_MINUS_SRC_ALPHA,[hS]:n.ONE_MINUS_DST_COLOR,[dS]:n.ONE_MINUS_DST_ALPHA,[mS]:n.CONSTANT_COLOR,[gS]:n.ONE_MINUS_CONSTANT_COLOR,[vS]:n.CONSTANT_ALPHA,[_S]:n.ONE_MINUS_CONSTANT_ALPHA};function me(H,Q,ie,pe,ge,Qe,ht,xt,At,ut){if(H===Vr){m===!0&&(re(n.BLEND),m=!1);return}if(m===!1&&(ne(n.BLEND),m=!0),H!==tS){if(H!==p||ut!==E){if((v!==Os||_!==Os)&&(n.blendEquation(n.FUNC_ADD),v=Os,_=Os),ut)switch(H){case Aa:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Av:n.blendFunc(n.ONE,n.ONE);break;case Cv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Pv:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case Aa:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Av:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Cv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Pv:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}g=null,y=null,b=null,w=null,M.set(0,0,0),T=0,p=H,E=ut}return}ge=ge||Q,Qe=Qe||ie,ht=ht||pe,(Q!==v||ge!==_)&&(n.blendEquationSeparate(ze[Q],ze[ge]),v=Q,_=ge),(ie!==g||pe!==y||Qe!==b||ht!==w)&&(n.blendFuncSeparate(Pe[ie],Pe[pe],Pe[Qe],Pe[ht]),g=ie,y=pe,b=Qe,w=ht),(xt.equals(M)===!1||At!==T)&&(n.blendColor(xt.r,xt.g,xt.b,At),M.copy(xt),T=At),p=H,E=!1}function fe(H,Q){H.side===Wn?re(n.CULL_FACE):ne(n.CULL_FACE);let ie=H.side===Wi;Q&&(ie=!ie),De(ie),H.blending===Aa&&H.transparent===!1?me(Vr):me(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.blendColor,H.blendAlpha,H.premultipliedAlpha),s.setFunc(H.depthFunc),s.setTest(H.depthTest),s.setMask(H.depthWrite),r.setMask(H.colorWrite);const pe=H.stencilWrite;a.setTest(pe),pe&&(a.setMask(H.stencilWriteMask),a.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),a.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),Ye(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),H.alphaToCoverage===!0?ne(n.SAMPLE_ALPHA_TO_COVERAGE):re(n.SAMPLE_ALPHA_TO_COVERAGE)}function De(H){S!==H&&(H?n.frontFace(n.CW):n.frontFace(n.CCW),S=H)}function Ne(H){H!==Qw?(ne(n.CULL_FACE),H!==x&&(H===Tv?n.cullFace(n.BACK):H===Jw?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):re(n.CULL_FACE),x=H}function $(H){H!==C&&(L&&n.lineWidth(H),C=H)}function Ye(H,Q,ie){H?(ne(n.POLYGON_OFFSET_FILL),(A!==Q||P!==ie)&&(n.polygonOffset(Q,ie),A=Q,P=ie)):re(n.POLYGON_OFFSET_FILL)}function k(H){H?ne(n.SCISSOR_TEST):re(n.SCISSOR_TEST)}function D(H){H===void 0&&(H=n.TEXTURE0+R-1),F!==H&&(n.activeTexture(H),F=H)}function z(H,Q,ie){ie===void 0&&(F===null?ie=n.TEXTURE0+R-1:ie=F);let pe=G[ie];pe===void 0&&(pe={type:void 0,texture:void 0},G[ie]=pe),(pe.type!==H||pe.texture!==Q)&&(F!==ie&&(n.activeTexture(ie),F=ie),n.bindTexture(H,Q||J[H]),pe.type=H,pe.texture=Q)}function te(){const H=G[F];H!==void 0&&H.type!==void 0&&(n.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Se(){try{n.texSubImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function he(){try{n.texSubImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ce(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function He(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ue(){try{n.texStorage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ie(){try{n.texStorage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function rt(){try{n.texImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ee(){try{n.texImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ae(H){se.equals(H)===!1&&(n.scissor(H.x,H.y,H.z,H.w),se.copy(H))}function Xe(H){we.equals(H)===!1&&(n.viewport(H.x,H.y,H.z,H.w),we.copy(H))}function Je(H,Q){let ie=l.get(Q);ie===void 0&&(ie=new WeakMap,l.set(Q,ie));let pe=ie.get(H);pe===void 0&&(pe=n.getUniformBlockIndex(Q,H.name),ie.set(H,pe))}function St(H,Q){const pe=l.get(Q).get(H);o.get(Q)!==pe&&(n.uniformBlockBinding(Q,pe,H.__bindingPointIndex),o.set(Q,pe))}function $e(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},F=null,G={},d={},h=new WeakMap,f=[],u=null,m=!1,p=null,v=null,g=null,y=null,_=null,b=null,w=null,M=new yt(0,0,0),T=0,E=!1,S=null,x=null,C=null,A=null,P=null,se.set(0,0,n.canvas.width,n.canvas.height),we.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),a.reset()}return{buffers:{color:r,depth:s,stencil:a},enable:ne,disable:re,bindFramebuffer:_e,drawBuffers:Oe,useProgram:V,setBlending:me,setMaterial:fe,setFlipSided:De,setCullFace:Ne,setLineWidth:$,setPolygonOffset:Ye,setScissorTest:k,activeTexture:D,bindTexture:z,unbindTexture:te,compressedTexImage2D:oe,compressedTexImage3D:le,texImage2D:rt,texImage3D:Ee,updateUBOMapping:Je,uniformBlockBinding:St,texStorage2D:ue,texStorage3D:Ie,texSubImage2D:Se,texSubImage3D:he,compressedTexSubImage2D:ce,compressedTexSubImage3D:He,scissor:Ae,viewport:Xe,reset:$e}}function wA(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new gt,d=new WeakMap;let h;const f=new WeakMap;let u=!1;try{u=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(k,D){return u?new OffscreenCanvas(k,D):ll("canvas")}function p(k,D,z){let te=1;const oe=Ye(k);if((oe.width>z||oe.height>z)&&(te=z/Math.max(oe.width,oe.height)),te<1)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap||typeof VideoFrame<"u"&&k instanceof VideoFrame){const le=Math.floor(te*oe.width),Se=Math.floor(te*oe.height);h===void 0&&(h=m(le,Se));const he=D?m(le,Se):h;return he.width=le,he.height=Se,he.getContext("2d").drawImage(k,0,0,le,Se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+oe.width+"x"+oe.height+") to ("+le+"x"+Se+")."),he}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+oe.width+"x"+oe.height+")."),k;return k}function v(k){return k.generateMipmaps&&k.minFilter!==Oi&&k.minFilter!==nn}function g(k){n.generateMipmap(k)}function y(k,D,z,te,oe=!1){if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let le=D;if(D===n.RED&&(z===n.FLOAT&&(le=n.R32F),z===n.HALF_FLOAT&&(le=n.R16F),z===n.UNSIGNED_BYTE&&(le=n.R8)),D===n.RED_INTEGER&&(z===n.UNSIGNED_BYTE&&(le=n.R8UI),z===n.UNSIGNED_SHORT&&(le=n.R16UI),z===n.UNSIGNED_INT&&(le=n.R32UI),z===n.BYTE&&(le=n.R8I),z===n.SHORT&&(le=n.R16I),z===n.INT&&(le=n.R32I)),D===n.RG&&(z===n.FLOAT&&(le=n.RG32F),z===n.HALF_FLOAT&&(le=n.RG16F),z===n.UNSIGNED_BYTE&&(le=n.RG8)),D===n.RG_INTEGER&&(z===n.UNSIGNED_BYTE&&(le=n.RG8UI),z===n.UNSIGNED_SHORT&&(le=n.RG16UI),z===n.UNSIGNED_INT&&(le=n.RG32UI),z===n.BYTE&&(le=n.RG8I),z===n.SHORT&&(le=n.RG16I),z===n.INT&&(le=n.RG32I)),D===n.RGB&&z===n.UNSIGNED_INT_5_9_9_9_REV&&(le=n.RGB9_E5),D===n.RGBA){const Se=oe?Gc:bt.getTransfer(te);z===n.FLOAT&&(le=n.RGBA32F),z===n.HALF_FLOAT&&(le=n.RGBA16F),z===n.UNSIGNED_BYTE&&(le=Se===Lt?n.SRGB8_ALPHA8:n.RGBA8),z===n.UNSIGNED_SHORT_4_4_4_4&&(le=n.RGBA4),z===n.UNSIGNED_SHORT_5_5_5_1&&(le=n.RGB5_A1)}return(le===n.R16F||le===n.R32F||le===n.RG16F||le===n.RG32F||le===n.RGBA16F||le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),le}function _(k,D){return v(k)===!0||k.isFramebufferTexture&&k.minFilter!==Oi&&k.minFilter!==nn?Math.log2(Math.max(D.width,D.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?D.mipmaps.length:1}function b(k){const D=k.target;D.removeEventListener("dispose",b),M(D),D.isVideoTexture&&d.delete(D)}function w(k){const D=k.target;D.removeEventListener("dispose",w),E(D)}function M(k){const D=i.get(k);if(D.__webglInit===void 0)return;const z=k.source,te=f.get(z);if(te){const oe=te[D.__cacheKey];oe.usedTimes--,oe.usedTimes===0&&T(k),Object.keys(te).length===0&&f.delete(z)}i.remove(k)}function T(k){const D=i.get(k);n.deleteTexture(D.__webglTexture);const z=k.source,te=f.get(z);delete te[D.__cacheKey],a.memory.textures--}function E(k){const D=i.get(k);if(k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let te=0;te<6;te++){if(Array.isArray(D.__webglFramebuffer[te]))for(let oe=0;oe<D.__webglFramebuffer[te].length;oe++)n.deleteFramebuffer(D.__webglFramebuffer[te][oe]);else n.deleteFramebuffer(D.__webglFramebuffer[te]);D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer[te])}else{if(Array.isArray(D.__webglFramebuffer))for(let te=0;te<D.__webglFramebuffer.length;te++)n.deleteFramebuffer(D.__webglFramebuffer[te]);else n.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&n.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let te=0;te<D.__webglColorRenderbuffer.length;te++)D.__webglColorRenderbuffer[te]&&n.deleteRenderbuffer(D.__webglColorRenderbuffer[te]);D.__webglDepthRenderbuffer&&n.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const z=k.textures;for(let te=0,oe=z.length;te<oe;te++){const le=i.get(z[te]);le.__webglTexture&&(n.deleteTexture(le.__webglTexture),a.memory.textures--),i.remove(z[te])}i.remove(k)}let S=0;function x(){S=0}function C(){const k=S;return k>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+r.maxTextures),S+=1,k}function A(k){const D=[];return D.push(k.wrapS),D.push(k.wrapT),D.push(k.wrapR||0),D.push(k.magFilter),D.push(k.minFilter),D.push(k.anisotropy),D.push(k.internalFormat),D.push(k.format),D.push(k.type),D.push(k.generateMipmaps),D.push(k.premultiplyAlpha),D.push(k.flipY),D.push(k.unpackAlignment),D.push(k.colorSpace),D.join()}function P(k,D){const z=i.get(k);if(k.isVideoTexture&&Ne(k),k.isRenderTargetTexture===!1&&k.version>0&&z.__version!==k.version){const te=k.image;if(te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(z,k,D);return}}t.bindTexture(n.TEXTURE_2D,z.__webglTexture,n.TEXTURE0+D)}function R(k,D){const z=i.get(k);if(k.version>0&&z.__version!==k.version){se(z,k,D);return}t.bindTexture(n.TEXTURE_2D_ARRAY,z.__webglTexture,n.TEXTURE0+D)}function L(k,D){const z=i.get(k);if(k.version>0&&z.__version!==k.version){se(z,k,D);return}t.bindTexture(n.TEXTURE_3D,z.__webglTexture,n.TEXTURE0+D)}function U(k,D){const z=i.get(k);if(k.version>0&&z.__version!==k.version){we(z,k,D);return}t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+D)}const B={[kf]:n.REPEAT,[Ns]:n.CLAMP_TO_EDGE,[Uf]:n.MIRRORED_REPEAT},F={[Oi]:n.NEAREST,[NS]:n.NEAREST_MIPMAP_NEAREST,[zc]:n.NEAREST_MIPMAP_LINEAR,[nn]:n.LINEAR,[Ff]:n.LINEAR_MIPMAP_NEAREST,[ks]:n.LINEAR_MIPMAP_LINEAR},G={[KS]:n.NEVER,[iM]:n.ALWAYS,[ZS]:n.LESS,[f0]:n.LEQUAL,[QS]:n.EQUAL,[tM]:n.GEQUAL,[JS]:n.GREATER,[eM]:n.NOTEQUAL};function O(k,D){if(D.type===fr&&e.has("OES_texture_float_linear")===!1&&(D.magFilter===nn||D.magFilter===Ff||D.magFilter===zc||D.magFilter===ks||D.minFilter===nn||D.minFilter===Ff||D.minFilter===zc||D.minFilter===ks)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(k,n.TEXTURE_WRAP_S,B[D.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,B[D.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,B[D.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,F[D.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,F[D.minFilter]),D.compareFunction&&(n.texParameteri(k,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(k,n.TEXTURE_COMPARE_FUNC,G[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(D.magFilter===Oi||D.minFilter!==zc&&D.minFilter!==ks||D.type===fr&&e.has("OES_texture_float_linear")===!1)return;if(D.anisotropy>1||i.get(D).__currentAnisotropy){const z=e.get("EXT_texture_filter_anisotropic");n.texParameterf(k,z.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy}}}function ee(k,D){let z=!1;k.__webglInit===void 0&&(k.__webglInit=!0,D.addEventListener("dispose",b));const te=D.source;let oe=f.get(te);oe===void 0&&(oe={},f.set(te,oe));const le=A(D);if(le!==k.__cacheKey){oe[le]===void 0&&(oe[le]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,z=!0),oe[le].usedTimes++;const Se=oe[k.__cacheKey];Se!==void 0&&(oe[k.__cacheKey].usedTimes--,Se.usedTimes===0&&T(D)),k.__cacheKey=le,k.__webglTexture=oe[le].texture}return z}function se(k,D,z){let te=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(te=n.TEXTURE_2D_ARRAY),D.isData3DTexture&&(te=n.TEXTURE_3D);const oe=ee(k,D),le=D.source;t.bindTexture(te,k.__webglTexture,n.TEXTURE0+z);const Se=i.get(le);if(le.version!==Se.__version||oe===!0){t.activeTexture(n.TEXTURE0+z);const he=bt.getPrimaries(bt.workingColorSpace),ce=D.colorSpace===Wr?null:bt.getPrimaries(D.colorSpace),He=D.colorSpace===Wr||he===ce?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);let ue=p(D.image,!1,r.maxTextureSize);ue=$(D,ue);const Ie=s.convert(D.format,D.colorSpace),rt=s.convert(D.type);let Ee=y(D.internalFormat,Ie,rt,D.colorSpace,D.isVideoTexture);O(te,D);let Ae;const Xe=D.mipmaps,Je=D.isVideoTexture!==!0,St=Se.__version===void 0||oe===!0,$e=le.dataReady,H=_(D,ue);if(D.isDepthTexture)Ee=n.DEPTH_COMPONENT16,D.type===fr?Ee=n.DEPTH_COMPONENT32F:D.type===Ra?Ee=n.DEPTH_COMPONENT24:D.type===rl&&(Ee=n.DEPTH24_STENCIL8),St&&(Je?t.texStorage2D(n.TEXTURE_2D,1,Ee,ue.width,ue.height):t.texImage2D(n.TEXTURE_2D,0,Ee,ue.width,ue.height,0,Ie,rt,null));else if(D.isDataTexture)if(Xe.length>0){Je&&St&&t.texStorage2D(n.TEXTURE_2D,H,Ee,Xe[0].width,Xe[0].height);for(let Q=0,ie=Xe.length;Q<ie;Q++)Ae=Xe[Q],Je?$e&&t.texSubImage2D(n.TEXTURE_2D,Q,0,0,Ae.width,Ae.height,Ie,rt,Ae.data):t.texImage2D(n.TEXTURE_2D,Q,Ee,Ae.width,Ae.height,0,Ie,rt,Ae.data);D.generateMipmaps=!1}else Je?(St&&t.texStorage2D(n.TEXTURE_2D,H,Ee,ue.width,ue.height),$e&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ue.width,ue.height,Ie,rt,ue.data)):t.texImage2D(n.TEXTURE_2D,0,Ee,ue.width,ue.height,0,Ie,rt,ue.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){Je&&St&&t.texStorage3D(n.TEXTURE_2D_ARRAY,H,Ee,Xe[0].width,Xe[0].height,ue.depth);for(let Q=0,ie=Xe.length;Q<ie;Q++)Ae=Xe[Q],D.format!==gn?Ie!==null?Je?$e&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Q,0,0,0,Ae.width,Ae.height,ue.depth,Ie,Ae.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Q,Ee,Ae.width,Ae.height,ue.depth,0,Ae.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?$e&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Q,0,0,0,Ae.width,Ae.height,ue.depth,Ie,rt,Ae.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Q,Ee,Ae.width,Ae.height,ue.depth,0,Ie,rt,Ae.data)}else{Je&&St&&t.texStorage2D(n.TEXTURE_2D,H,Ee,Xe[0].width,Xe[0].height);for(let Q=0,ie=Xe.length;Q<ie;Q++)Ae=Xe[Q],D.format!==gn?Ie!==null?Je?$e&&t.compressedTexSubImage2D(n.TEXTURE_2D,Q,0,0,Ae.width,Ae.height,Ie,Ae.data):t.compressedTexImage2D(n.TEXTURE_2D,Q,Ee,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?$e&&t.texSubImage2D(n.TEXTURE_2D,Q,0,0,Ae.width,Ae.height,Ie,rt,Ae.data):t.texImage2D(n.TEXTURE_2D,Q,Ee,Ae.width,Ae.height,0,Ie,rt,Ae.data)}else if(D.isDataArrayTexture)Je?(St&&t.texStorage3D(n.TEXTURE_2D_ARRAY,H,Ee,ue.width,ue.height,ue.depth),$e&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ue.width,ue.height,ue.depth,Ie,rt,ue.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ee,ue.width,ue.height,ue.depth,0,Ie,rt,ue.data);else if(D.isData3DTexture)Je?(St&&t.texStorage3D(n.TEXTURE_3D,H,Ee,ue.width,ue.height,ue.depth),$e&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ue.width,ue.height,ue.depth,Ie,rt,ue.data)):t.texImage3D(n.TEXTURE_3D,0,Ee,ue.width,ue.height,ue.depth,0,Ie,rt,ue.data);else if(D.isFramebufferTexture){if(St)if(Je)t.texStorage2D(n.TEXTURE_2D,H,Ee,ue.width,ue.height);else{let Q=ue.width,ie=ue.height;for(let pe=0;pe<H;pe++)t.texImage2D(n.TEXTURE_2D,pe,Ee,Q,ie,0,Ie,rt,null),Q>>=1,ie>>=1}}else if(Xe.length>0){if(Je&&St){const Q=Ye(Xe[0]);t.texStorage2D(n.TEXTURE_2D,H,Ee,Q.width,Q.height)}for(let Q=0,ie=Xe.length;Q<ie;Q++)Ae=Xe[Q],Je?$e&&t.texSubImage2D(n.TEXTURE_2D,Q,0,0,Ie,rt,Ae):t.texImage2D(n.TEXTURE_2D,Q,Ee,Ie,rt,Ae);D.generateMipmaps=!1}else if(Je){if(St){const Q=Ye(ue);t.texStorage2D(n.TEXTURE_2D,H,Ee,Q.width,Q.height)}$e&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie,rt,ue)}else t.texImage2D(n.TEXTURE_2D,0,Ee,Ie,rt,ue);v(D)&&g(te),Se.__version=le.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}function we(k,D,z){if(D.image.length!==6)return;const te=ee(k,D),oe=D.source;t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+z);const le=i.get(oe);if(oe.version!==le.__version||te===!0){t.activeTexture(n.TEXTURE0+z);const Se=bt.getPrimaries(bt.workingColorSpace),he=D.colorSpace===Wr?null:bt.getPrimaries(D.colorSpace),ce=D.colorSpace===Wr||Se===he?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ce);const He=D.isCompressedTexture||D.image[0].isCompressedTexture,ue=D.image[0]&&D.image[0].isDataTexture,Ie=[];for(let ie=0;ie<6;ie++)!He&&!ue?Ie[ie]=p(D.image[ie],!0,r.maxCubemapSize):Ie[ie]=ue?D.image[ie].image:D.image[ie],Ie[ie]=$(D,Ie[ie]);const rt=Ie[0],Ee=s.convert(D.format,D.colorSpace),Ae=s.convert(D.type),Xe=y(D.internalFormat,Ee,Ae,D.colorSpace),Je=D.isVideoTexture!==!0,St=le.__version===void 0||te===!0,$e=oe.dataReady;let H=_(D,rt);O(n.TEXTURE_CUBE_MAP,D);let Q;if(He){Je&&St&&t.texStorage2D(n.TEXTURE_CUBE_MAP,H,Xe,rt.width,rt.height);for(let ie=0;ie<6;ie++){Q=Ie[ie].mipmaps;for(let pe=0;pe<Q.length;pe++){const ge=Q[pe];D.format!==gn?Ee!==null?Je?$e&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe,0,0,ge.width,ge.height,Ee,ge.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe,Xe,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe,0,0,ge.width,ge.height,Ee,Ae,ge.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe,Xe,ge.width,ge.height,0,Ee,Ae,ge.data)}}}else{if(Q=D.mipmaps,Je&&St){Q.length>0&&H++;const ie=Ye(Ie[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,H,Xe,ie.width,ie.height)}for(let ie=0;ie<6;ie++)if(ue){Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,Ie[ie].width,Ie[ie].height,Ee,Ae,Ie[ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Xe,Ie[ie].width,Ie[ie].height,0,Ee,Ae,Ie[ie].data);for(let pe=0;pe<Q.length;pe++){const Qe=Q[pe].image[ie].image;Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe+1,0,0,Qe.width,Qe.height,Ee,Ae,Qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe+1,Xe,Qe.width,Qe.height,0,Ee,Ae,Qe.data)}}else{Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,Ee,Ae,Ie[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Xe,Ee,Ae,Ie[ie]);for(let pe=0;pe<Q.length;pe++){const ge=Q[pe];Je?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe+1,0,0,Ee,Ae,ge.image[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,pe+1,Xe,Ee,Ae,ge.image[ie])}}}v(D)&&g(n.TEXTURE_CUBE_MAP),le.__version=oe.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}function X(k,D,z,te,oe,le){const Se=s.convert(z.format,z.colorSpace),he=s.convert(z.type),ce=y(z.internalFormat,Se,he,z.colorSpace);if(!i.get(D).__hasExternalTextures){const ue=Math.max(1,D.width>>le),Ie=Math.max(1,D.height>>le);oe===n.TEXTURE_3D||oe===n.TEXTURE_2D_ARRAY?t.texImage3D(oe,le,ce,ue,Ie,D.depth,0,Se,he,null):t.texImage2D(oe,le,ce,ue,Ie,0,Se,he,null)}t.bindFramebuffer(n.FRAMEBUFFER,k),De(D)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,te,oe,i.get(z).__webglTexture,0,fe(D)):(oe===n.TEXTURE_2D||oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,te,oe,i.get(z).__webglTexture,le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function J(k,D,z){if(n.bindRenderbuffer(n.RENDERBUFFER,k),D.depthBuffer&&!D.stencilBuffer){let te=n.DEPTH_COMPONENT24;if(z||De(D)){const oe=D.depthTexture;oe&&oe.isDepthTexture&&(oe.type===fr?te=n.DEPTH_COMPONENT32F:oe.type===Ra&&(te=n.DEPTH_COMPONENT24));const le=fe(D);De(D)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,le,te,D.width,D.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,le,te,D.width,D.height)}else n.renderbufferStorage(n.RENDERBUFFER,te,D.width,D.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,k)}else if(D.depthBuffer&&D.stencilBuffer){const te=fe(D);z&&De(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,te,n.DEPTH24_STENCIL8,D.width,D.height):De(D)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,te,n.DEPTH24_STENCIL8,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,k)}else{const te=D.textures;for(let oe=0;oe<te.length;oe++){const le=te[oe],Se=s.convert(le.format,le.colorSpace),he=s.convert(le.type),ce=y(le.internalFormat,Se,he,le.colorSpace),He=fe(D);z&&De(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,He,ce,D.width,D.height):De(D)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,He,ce,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,ce,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ne(k,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,k),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),P(D.depthTexture,0);const te=i.get(D.depthTexture).__webglTexture,oe=fe(D);if(D.depthTexture.format===La)De(D)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,te,0,oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,te,0);else if(D.depthTexture.format===sl)De(D)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,te,0,oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,te,0);else throw new Error("Unknown depthTexture format")}function re(k){const D=i.get(k),z=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!D.__autoAllocateDepthBuffer){if(z)throw new Error("target.depthTexture not supported in Cube render targets");ne(D.__webglFramebuffer,k)}else if(z){D.__webglDepthbuffer=[];for(let te=0;te<6;te++)t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[te]),D.__webglDepthbuffer[te]=n.createRenderbuffer(),J(D.__webglDepthbuffer[te],k,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),J(D.__webglDepthbuffer,k,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function _e(k,D,z){const te=i.get(k);D!==void 0&&X(te.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),z!==void 0&&re(k)}function Oe(k){const D=k.texture,z=i.get(k),te=i.get(D);k.addEventListener("dispose",w);const oe=k.textures,le=k.isWebGLCubeRenderTarget===!0,Se=oe.length>1;if(Se||(te.__webglTexture===void 0&&(te.__webglTexture=n.createTexture()),te.__version=D.version,a.memory.textures++),le){z.__webglFramebuffer=[];for(let he=0;he<6;he++)if(D.mipmaps&&D.mipmaps.length>0){z.__webglFramebuffer[he]=[];for(let ce=0;ce<D.mipmaps.length;ce++)z.__webglFramebuffer[he][ce]=n.createFramebuffer()}else z.__webglFramebuffer[he]=n.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){z.__webglFramebuffer=[];for(let he=0;he<D.mipmaps.length;he++)z.__webglFramebuffer[he]=n.createFramebuffer()}else z.__webglFramebuffer=n.createFramebuffer();if(Se)for(let he=0,ce=oe.length;he<ce;he++){const He=i.get(oe[he]);He.__webglTexture===void 0&&(He.__webglTexture=n.createTexture(),a.memory.textures++)}if(k.samples>0&&De(k)===!1){z.__webglMultisampledFramebuffer=n.createFramebuffer(),z.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,z.__webglMultisampledFramebuffer);for(let he=0;he<oe.length;he++){const ce=oe[he];z.__webglColorRenderbuffer[he]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,z.__webglColorRenderbuffer[he]);const He=s.convert(ce.format,ce.colorSpace),ue=s.convert(ce.type),Ie=y(ce.internalFormat,He,ue,ce.colorSpace,k.isXRRenderTarget===!0),rt=fe(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,rt,Ie,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+he,n.RENDERBUFFER,z.__webglColorRenderbuffer[he])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(z.__webglDepthRenderbuffer=n.createRenderbuffer(),J(z.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(le){t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture),O(n.TEXTURE_CUBE_MAP,D);for(let he=0;he<6;he++)if(D.mipmaps&&D.mipmaps.length>0)for(let ce=0;ce<D.mipmaps.length;ce++)X(z.__webglFramebuffer[he][ce],k,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+he,ce);else X(z.__webglFramebuffer[he],k,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0);v(D)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Se){for(let he=0,ce=oe.length;he<ce;he++){const He=oe[he],ue=i.get(He);t.bindTexture(n.TEXTURE_2D,ue.__webglTexture),O(n.TEXTURE_2D,He),X(z.__webglFramebuffer,k,He,n.COLOR_ATTACHMENT0+he,n.TEXTURE_2D,0),v(He)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let he=n.TEXTURE_2D;if((k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(he=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(he,te.__webglTexture),O(he,D),D.mipmaps&&D.mipmaps.length>0)for(let ce=0;ce<D.mipmaps.length;ce++)X(z.__webglFramebuffer[ce],k,D,n.COLOR_ATTACHMENT0,he,ce);else X(z.__webglFramebuffer,k,D,n.COLOR_ATTACHMENT0,he,0);v(D)&&g(he),t.unbindTexture()}k.depthBuffer&&re(k)}function V(k){const D=k.textures;for(let z=0,te=D.length;z<te;z++){const oe=D[z];if(v(oe)){const le=k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Se=i.get(oe).__webglTexture;t.bindTexture(le,Se),g(le),t.unbindTexture()}}}const ze=[],Pe=[];function me(k){if(k.samples>0){if(De(k)===!1){const D=k.textures,z=k.width,te=k.height;let oe=n.COLOR_BUFFER_BIT;const le=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=i.get(k),he=D.length>1;if(he)for(let ce=0;ce<D.length;ce++)t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Se.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglFramebuffer);for(let ce=0;ce<D.length;ce++){if(k.resolveDepthBuffer&&(k.depthBuffer&&(oe|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&k.resolveStencilBuffer&&(oe|=n.STENCIL_BUFFER_BIT)),he){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Se.__webglColorRenderbuffer[ce]);const He=i.get(D[ce]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,He,0)}n.blitFramebuffer(0,0,z,te,0,0,z,te,oe,n.NEAREST),l===!0&&(ze.length=0,Pe.length=0,ze.push(n.COLOR_ATTACHMENT0+ce),k.depthBuffer&&k.resolveDepthBuffer===!1&&(ze.push(le),Pe.push(le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Pe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ze))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),he)for(let ce=0;ce<D.length;ce++){t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.RENDERBUFFER,Se.__webglColorRenderbuffer[ce]);const He=i.get(D[ce]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.TEXTURE_2D,He,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglMultisampledFramebuffer)}else if(k.depthBuffer&&k.resolveDepthBuffer===!1&&l){const D=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[D])}}}function fe(k){return Math.min(r.maxSamples,k.samples)}function De(k){const D=i.get(k);return k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function Ne(k){const D=a.render.frame;d.get(k)!==D&&(d.set(k,D),k.update())}function $(k,D){const z=k.colorSpace,te=k.format,oe=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||z!==Xr&&z!==Wr&&(bt.getTransfer(z)===Lt?(te!==gn||oe!==Gr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",z)),D}function Ye(k){return typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement?(c.width=k.naturalWidth||k.width,c.height=k.naturalHeight||k.height):typeof VideoFrame<"u"&&k instanceof VideoFrame?(c.width=k.displayWidth,c.height=k.displayHeight):(c.width=k.width,c.height=k.height),c}this.allocateTextureUnit=C,this.resetTextureUnits=x,this.setTexture2D=P,this.setTexture2DArray=R,this.setTexture3D=L,this.setTextureCube=U,this.rebindTextures=_e,this.setupRenderTarget=Oe,this.updateRenderTargetMipmap=V,this.updateMultisampleRenderTarget=me,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=X,this.useMultisampledRTT=De}function SA(n,e){function t(i,r=Wr){let s;const a=bt.getTransfer(r);if(i===Gr)return n.UNSIGNED_BYTE;if(i===Ov)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Nv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===FS)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===kS)return n.BYTE;if(i===US)return n.SHORT;if(i===Dv)return n.UNSIGNED_SHORT;if(i===Iv)return n.INT;if(i===Ra)return n.UNSIGNED_INT;if(i===fr)return n.FLOAT;if(i===Vc)return n.HALF_FLOAT;if(i===BS)return n.ALPHA;if(i===zS)return n.RGB;if(i===gn)return n.RGBA;if(i===VS)return n.LUMINANCE;if(i===HS)return n.LUMINANCE_ALPHA;if(i===La)return n.DEPTH_COMPONENT;if(i===sl)return n.DEPTH_STENCIL;if(i===GS)return n.RED;if(i===kv)return n.RED_INTEGER;if(i===WS)return n.RG;if(i===Uv)return n.RG_INTEGER;if(i===Fv)return n.RGBA_INTEGER;if(i===Bf||i===zf||i===Vf||i===Hf)if(a===Lt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Bf)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===zf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Vf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Hf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Bf)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===zf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Vf)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Hf)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Bv||i===zv||i===Vv||i===Hv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Bv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===zv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Vv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Hv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Gv||i===Wv||i===Xv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Gv||i===Wv)return a===Lt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Xv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===$v||i===qv||i===Yv||i===jv||i===Kv||i===Zv||i===Qv||i===Jv||i===e0||i===t0||i===i0||i===n0||i===r0||i===s0)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===$v)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===qv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Yv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===jv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Kv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Zv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Qv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Jv)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===e0)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===t0)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===i0)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===n0)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===r0)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===s0)return a===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Gf||i===a0||i===o0)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Gf)return a===Lt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===a0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===o0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===XS||i===l0||i===c0||i===u0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Gf)return s.COMPRESSED_RED_RGTC1_EXT;if(i===l0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===c0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===u0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===rl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class MA extends _n{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class vu extends sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const TA={type:"move"};class bh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new vu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new vu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new vu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const p of e.hand.values()){const v=t.getJointPose(p,i),g=this._getHandJoint(c,p);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const d=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=d.position.distanceTo(h.position),u=.02,m=.005;c.inputState.pinching&&f>u+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=u-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(TA)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new vu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const EA=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,AA=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class CA{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new xi,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,r=new xr({vertexShader:EA,fragmentShader:AA,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Yn(new gl(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class PA extends Ia{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,d=null,h=null,f=null,u=null,m=null;const p=new CA,v=t.getContextAttributes();let g=null,y=null;const _=[],b=[],w=new gt;let M=null;const T=new _n;T.layers.enable(1),T.viewport=new si;const E=new _n;E.layers.enable(2),E.viewport=new si;const S=[T,E],x=new MA;x.layers.enable(1),x.layers.enable(2);let C=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(X){let J=_[X];return J===void 0&&(J=new bh,_[X]=J),J.getTargetRaySpace()},this.getControllerGrip=function(X){let J=_[X];return J===void 0&&(J=new bh,_[X]=J),J.getGripSpace()},this.getHand=function(X){let J=_[X];return J===void 0&&(J=new bh,_[X]=J),J.getHandSpace()};function P(X){const J=b.indexOf(X.inputSource);if(J===-1)return;const ne=_[J];ne!==void 0&&(ne.update(X.inputSource,X.frame,c||a),ne.dispatchEvent({type:X.type,data:X.inputSource}))}function R(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",R),r.removeEventListener("inputsourceschange",L);for(let X=0;X<_.length;X++){const J=b[X];J!==null&&(b[X]=null,_[X].disconnect(J))}C=null,A=null,p.reset(),e.setRenderTarget(g),u=null,f=null,h=null,r=null,y=null,we.stop(),i.isPresenting=!1,e.setPixelRatio(M),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(X){s=X,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(X){o=X,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(X){c=X},this.getBaseLayer=function(){return f!==null?f:u},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(X){if(r=X,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",R),r.addEventListener("inputsourceschange",L),v.xrCompatible!==!0&&await t.makeXRCompatible(),M=e.getPixelRatio(),e.getSize(w),r.renderState.layers===void 0){const J={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};u=new XRWebGLLayer(r,t,J),r.updateRenderState({baseLayer:u}),e.setPixelRatio(1),e.setSize(u.framebufferWidth,u.framebufferHeight,!1),y=new Us(u.framebufferWidth,u.framebufferHeight,{format:gn,type:Gr,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let J=null,ne=null,re=null;v.depth&&(re=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,J=v.stencil?sl:La,ne=v.stencil?rl:Ra);const _e={colorFormat:t.RGBA8,depthFormat:re,scaleFactor:s};h=new XRWebGLBinding(r,t),f=h.createProjectionLayer(_e),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),y=new Us(f.textureWidth,f.textureHeight,{format:gn,type:Gr,depthTexture:new t_(f.textureWidth,f.textureHeight,ne,void 0,void 0,void 0,void 0,void 0,void 0,J),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),we.setContext(r),we.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function L(X){for(let J=0;J<X.removed.length;J++){const ne=X.removed[J],re=b.indexOf(ne);re>=0&&(b[re]=null,_[re].disconnect(ne))}for(let J=0;J<X.added.length;J++){const ne=X.added[J];let re=b.indexOf(ne);if(re===-1){for(let Oe=0;Oe<_.length;Oe++)if(Oe>=b.length){b.push(ne),re=Oe;break}else if(b[Oe]===null){b[Oe]=ne,re=Oe;break}if(re===-1)break}const _e=_[re];_e&&_e.connect(ne)}}const U=new Z,B=new Z;function F(X,J,ne){U.setFromMatrixPosition(J.matrixWorld),B.setFromMatrixPosition(ne.matrixWorld);const re=U.distanceTo(B),_e=J.projectionMatrix.elements,Oe=ne.projectionMatrix.elements,V=_e[14]/(_e[10]-1),ze=_e[14]/(_e[10]+1),Pe=(_e[9]+1)/_e[5],me=(_e[9]-1)/_e[5],fe=(_e[8]-1)/_e[0],De=(Oe[8]+1)/Oe[0],Ne=V*fe,$=V*De,Ye=re/(-fe+De),k=Ye*-fe;J.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(k),X.translateZ(Ye),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert();const D=V+Ye,z=ze+Ye,te=Ne-k,oe=$+(re-k),le=Pe*ze/z*D,Se=me*ze/z*D;X.projectionMatrix.makePerspective(te,oe,le,Se,D,z),X.projectionMatrixInverse.copy(X.projectionMatrix).invert()}function G(X,J){J===null?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices(J.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}this.updateCamera=function(X){if(r===null)return;p.texture!==null&&(X.near=p.depthNear,X.far=p.depthFar),x.near=E.near=T.near=X.near,x.far=E.far=T.far=X.far,(C!==x.near||A!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),C=x.near,A=x.far,T.near=C,T.far=A,E.near=C,E.far=A,T.updateProjectionMatrix(),E.updateProjectionMatrix(),X.updateProjectionMatrix());const J=X.parent,ne=x.cameras;G(x,J);for(let re=0;re<ne.length;re++)G(ne[re],J);ne.length===2?F(x,T,E):x.projectionMatrix.copy(T.projectionMatrix),O(X,x,J)};function O(X,J,ne){ne===null?X.matrix.copy(J.matrixWorld):(X.matrix.copy(ne.matrixWorld),X.matrix.invert(),X.matrix.multiply(J.matrixWorld)),X.matrix.decompose(X.position,X.quaternion,X.scale),X.updateMatrixWorld(!0),X.projectionMatrix.copy(J.projectionMatrix),X.projectionMatrixInverse.copy(J.projectionMatrixInverse),X.isPerspectiveCamera&&(X.fov=$f*2*Math.atan(1/X.projectionMatrix.elements[5]),X.zoom=1)}this.getCamera=function(){return x},this.getFoveation=function(){if(!(f===null&&u===null))return l},this.setFoveation=function(X){l=X,f!==null&&(f.fixedFoveation=X),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=X)},this.hasDepthSensing=function(){return p.texture!==null};let ee=null;function se(X,J){if(d=J.getViewerPose(c||a),m=J,d!==null){const ne=d.views;u!==null&&(e.setRenderTargetFramebuffer(y,u.framebuffer),e.setRenderTarget(y));let re=!1;ne.length!==x.cameras.length&&(x.cameras.length=0,re=!0);for(let Oe=0;Oe<ne.length;Oe++){const V=ne[Oe];let ze=null;if(u!==null)ze=u.getViewport(V);else{const me=h.getViewSubImage(f,V);ze=me.viewport,Oe===0&&(e.setRenderTargetTextures(y,me.colorTexture,f.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(y))}let Pe=S[Oe];Pe===void 0&&(Pe=new _n,Pe.layers.enable(Oe),Pe.viewport=new si,S[Oe]=Pe),Pe.matrix.fromArray(V.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(V.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(ze.x,ze.y,ze.width,ze.height),Oe===0&&(x.matrix.copy(Pe.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),re===!0&&x.cameras.push(Pe)}const _e=r.enabledFeatures;if(_e&&_e.includes("depth-sensing")){const Oe=h.getDepthInformation(ne[0]);Oe&&Oe.isValid&&Oe.texture&&p.init(e,Oe,r.renderState)}}for(let ne=0;ne<_.length;ne++){const re=b[ne],_e=_[ne];re!==null&&_e!==void 0&&_e.update(re,J,c||a)}p.render(e,x),ee&&ee(X,J),J.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:J}),m=null}const we=new $0;we.setAnimationLoop(se),this.setAnimationLoop=function(X){ee=X},this.dispose=function(){}}}const Ys=new gr,RA=new Kt;function LA(n,e){function t(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function i(v,g){g.color.getRGB(v.fogColor.value,z0(n)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function r(v,g,y,_,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(v,g):g.isMeshToonMaterial?(s(v,g),h(v,g)):g.isMeshPhongMaterial?(s(v,g),d(v,g)):g.isMeshStandardMaterial?(s(v,g),f(v,g),g.isMeshPhysicalMaterial&&u(v,g,b)):g.isMeshMatcapMaterial?(s(v,g),m(v,g)):g.isMeshDepthMaterial?s(v,g):g.isMeshDistanceMaterial?(s(v,g),p(v,g)):g.isMeshNormalMaterial?s(v,g):g.isLineBasicMaterial?(a(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?l(v,g,y,_):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,t(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===Wi&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,t(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===Wi&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,t(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,t(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const y=e.get(g),_=y.envMap,b=y.envMapRotation;if(_&&(v.envMap.value=_,Ys.copy(b),Ys.x*=-1,Ys.y*=-1,Ys.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Ys.y*=-1,Ys.z*=-1),v.envMapRotation.value.setFromMatrix4(RA.makeRotationFromEuler(Ys)),v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap){v.lightMap.value=g.lightMap;const w=n._useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=g.lightMapIntensity*w,t(g.lightMap,v.lightMapTransform)}g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,v.aoMapTransform))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform))}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,y,_){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*y,v.scale.value=_*.5,g.map&&(v.map.value=g.map,t(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function d(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function h(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function f(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function u(v,g,y){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Wi&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=y.texture,v.transmissionSamplerSize.value.set(y.width,y.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,v.specularIntensityMapTransform))}function m(v,g){g.matcap&&(v.matcap.value=g.matcap)}function p(v,g){const y=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(y.matrixWorld),v.nearDistance.value=y.shadow.camera.near,v.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function DA(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,_){const b=_.program;i.uniformBlockBinding(y,b)}function c(y,_){let b=r[y.id];b===void 0&&(m(y),b=d(y),r[y.id]=b,y.addEventListener("dispose",v));const w=_.program;i.updateUBOMapping(y,w);const M=e.render.frame;s[y.id]!==M&&(f(y),s[y.id]=M)}function d(y){const _=h();y.__bindingPointIndex=_;const b=n.createBuffer(),w=y.__size,M=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,w,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,b),b}function h(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const _=r[y.id],b=y.uniforms,w=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let M=0,T=b.length;M<T;M++){const E=Array.isArray(b[M])?b[M]:[b[M]];for(let S=0,x=E.length;S<x;S++){const C=E[S];if(u(C,M,S,w)===!0){const A=C.__offset,P=Array.isArray(C.value)?C.value:[C.value];let R=0;for(let L=0;L<P.length;L++){const U=P[L],B=p(U);typeof U=="number"||typeof U=="boolean"?(C.__data[0]=U,n.bufferSubData(n.UNIFORM_BUFFER,A+R,C.__data)):U.isMatrix3?(C.__data[0]=U.elements[0],C.__data[1]=U.elements[1],C.__data[2]=U.elements[2],C.__data[3]=0,C.__data[4]=U.elements[3],C.__data[5]=U.elements[4],C.__data[6]=U.elements[5],C.__data[7]=0,C.__data[8]=U.elements[6],C.__data[9]=U.elements[7],C.__data[10]=U.elements[8],C.__data[11]=0):(U.toArray(C.__data,R),R+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,A,C.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function u(y,_,b,w){const M=y.value,T=_+"_"+b;if(w[T]===void 0)return typeof M=="number"||typeof M=="boolean"?w[T]=M:w[T]=M.clone(),!0;{const E=w[T];if(typeof M=="number"||typeof M=="boolean"){if(E!==M)return w[T]=M,!0}else if(E.equals(M)===!1)return E.copy(M),!0}return!1}function m(y){const _=y.uniforms;let b=0;const w=16;for(let T=0,E=_.length;T<E;T++){const S=Array.isArray(_[T])?_[T]:[_[T]];for(let x=0,C=S.length;x<C;x++){const A=S[x],P=Array.isArray(A.value)?A.value:[A.value];for(let R=0,L=P.length;R<L;R++){const U=P[R],B=p(U),F=b%w;F!==0&&w-F<B.boundary&&(b+=w-F),A.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=b,b+=B.storage}}}const M=b%w;return M>0&&(b+=w-M),y.__size=b,y.__cache={},this}function p(y){const _={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function v(y){const _=y.target;_.removeEventListener("dispose",v);const b=a.indexOf(_.__bindingPointIndex);a.splice(b,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function g(){for(const y in r)n.deleteBuffer(r[y]);a=[],r={},s={}}return{bind:l,update:c,dispose:g}}class IA{constructor(e={}){const{canvas:t=rM(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=a;const u=new Uint32Array(4),m=new Int32Array(4);let p=null,v=null;const g=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Xn,this._useLegacyLights=!1,this.toneMapping=Hr,this.toneMappingExposure=1;const _=this;let b=!1,w=0,M=0,T=null,E=-1,S=null;const x=new si,C=new si;let A=null;const P=new yt(0);let R=0,L=t.width,U=t.height,B=1,F=null,G=null;const O=new si(0,0,L,U),ee=new si(0,0,L,U);let se=!1;const we=new X0;let X=!1,J=!1;const ne=new Kt,re=new Z,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Oe(){return T===null?B:1}let V=i;function ze(I,W){return t.getContext(I,W)}try{const I={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Lf}`),t.addEventListener("webglcontextlost",H,!1),t.addEventListener("webglcontextrestored",Q,!1),t.addEventListener("webglcontextcreationerror",ie,!1),V===null){const W="webgl2";if(V=ze(W,I),V===null)throw ze(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let Pe,me,fe,De,Ne,$,Ye,k,D,z,te,oe,le,Se,he,ce,He,ue,Ie,rt,Ee,Ae,Xe,Je;function St(){Pe=new VE(V),Pe.init(),Ae=new SA(V,Pe),me=new NE(V,Pe,e,Ae),fe=new bA(V),De=new WE(V),Ne=new oA,$=new wA(V,Pe,fe,Ne,me,Ae,De),Ye=new UE(_),k=new zE(_),D=new LM(V),Xe=new IE(V,D),z=new HE(V,D,De,Xe),te=new $E(V,z,D,De),Ie=new XE(V,me,$),ce=new kE(Ne),oe=new aA(_,Ye,k,Pe,me,Xe,ce),le=new LA(_,Ne),Se=new cA,he=new mA(Pe),ue=new DE(_,Ye,k,fe,te,f,l),He=new xA(_,te,me),Je=new DA(V,De,me,fe),rt=new OE(V,Pe,De),Ee=new GE(V,Pe,De),De.programs=oe.programs,_.capabilities=me,_.extensions=Pe,_.properties=Ne,_.renderLists=Se,_.shadowMap=He,_.state=fe,_.info=De}St();const $e=new PA(_,V);this.xr=$e,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const I=Pe.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=Pe.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(I){I!==void 0&&(B=I,this.setSize(L,U,!1))},this.getSize=function(I){return I.set(L,U)},this.setSize=function(I,W,q=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=I,U=W,t.width=Math.floor(I*B),t.height=Math.floor(W*B),q===!0&&(t.style.width=I+"px",t.style.height=W+"px"),this.setViewport(0,0,I,W)},this.getDrawingBufferSize=function(I){return I.set(L*B,U*B).floor()},this.setDrawingBufferSize=function(I,W,q){L=I,U=W,B=q,t.width=Math.floor(I*q),t.height=Math.floor(W*q),this.setViewport(0,0,I,W)},this.getCurrentViewport=function(I){return I.copy(x)},this.getViewport=function(I){return I.copy(O)},this.setViewport=function(I,W,q,Y){I.isVector4?O.set(I.x,I.y,I.z,I.w):O.set(I,W,q,Y),fe.viewport(x.copy(O).multiplyScalar(B).round())},this.getScissor=function(I){return I.copy(ee)},this.setScissor=function(I,W,q,Y){I.isVector4?ee.set(I.x,I.y,I.z,I.w):ee.set(I,W,q,Y),fe.scissor(C.copy(ee).multiplyScalar(B).round())},this.getScissorTest=function(){return se},this.setScissorTest=function(I){fe.setScissorTest(se=I)},this.setOpaqueSort=function(I){F=I},this.setTransparentSort=function(I){G=I},this.getClearColor=function(I){return I.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(I=!0,W=!0,q=!0){let Y=0;if(I){let j=!1;if(T!==null){const de=T.texture.format;j=de===Fv||de===Uv||de===kv}if(j){const de=T.texture.type,xe=de===Gr||de===Ra||de===Dv||de===rl||de===Ov||de===Nv,Te=ue.getClearColor(),Be=ue.getClearAlpha(),je=Te.r,Ue=Te.g,ke=Te.b;xe?(u[0]=je,u[1]=Ue,u[2]=ke,u[3]=Be,V.clearBufferuiv(V.COLOR,0,u)):(m[0]=je,m[1]=Ue,m[2]=ke,m[3]=Be,V.clearBufferiv(V.COLOR,0,m))}else Y|=V.COLOR_BUFFER_BIT}W&&(Y|=V.DEPTH_BUFFER_BIT),q&&(Y|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(Y)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",H,!1),t.removeEventListener("webglcontextrestored",Q,!1),t.removeEventListener("webglcontextcreationerror",ie,!1),Se.dispose(),he.dispose(),Ne.dispose(),Ye.dispose(),k.dispose(),te.dispose(),Xe.dispose(),Je.dispose(),oe.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",ut),$e.removeEventListener("sessionend",Ve),Le.stop()};function H(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const I=De.autoReset,W=He.enabled,q=He.autoUpdate,Y=He.needsUpdate,j=He.type;St(),De.autoReset=I,He.enabled=W,He.autoUpdate=q,He.needsUpdate=Y,He.type=j}function ie(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function pe(I){const W=I.target;W.removeEventListener("dispose",pe),ge(W)}function ge(I){Qe(I),Ne.remove(I)}function Qe(I){const W=Ne.get(I).programs;W!==void 0&&(W.forEach(function(q){oe.releaseProgram(q)}),I.isShaderMaterial&&oe.releaseShaderCache(I))}this.renderBufferDirect=function(I,W,q,Y,j,de){W===null&&(W=_e);const xe=j.isMesh&&j.matrixWorld.determinant()<0,Te=ui(I,W,q,Y,j);fe.setMaterial(Y,xe);let Be=q.index,je=1;if(Y.wireframe===!0){if(Be=z.getWireframeAttribute(q),Be===void 0)return;je=2}const Ue=q.drawRange,ke=q.attributes.position;let mt=Ue.start*je,qt=(Ue.start+Ue.count)*je;de!==null&&(mt=Math.max(mt,de.start*je),qt=Math.min(qt,(de.start+de.count)*je)),Be!==null?(mt=Math.max(mt,0),qt=Math.min(qt,Be.count)):ke!=null&&(mt=Math.max(mt,0),qt=Math.min(qt,ke.count));const Si=qt-mt;if(Si<0||Si===1/0)return;Xe.setup(j,Y,Te,q,Be);let Ui,tt=rt;if(Be!==null&&(Ui=D.get(Be),tt=Ee,tt.setIndex(Ui)),j.isMesh)Y.wireframe===!0?(fe.setLineWidth(Y.wireframeLinewidth*Oe()),tt.setMode(V.LINES)):tt.setMode(V.TRIANGLES);else if(j.isLine){let qe=Y.linewidth;qe===void 0&&(qe=1),fe.setLineWidth(qe*Oe()),j.isLineSegments?tt.setMode(V.LINES):j.isLineLoop?tt.setMode(V.LINE_LOOP):tt.setMode(V.LINE_STRIP)}else j.isPoints?tt.setMode(V.POINTS):j.isSprite&&tt.setMode(V.TRIANGLES);if(j.isBatchedMesh)j._multiDrawInstances!==null?tt.renderMultiDrawInstances(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount,j._multiDrawInstances):tt.renderMultiDraw(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount);else if(j.isInstancedMesh)tt.renderInstances(mt,Si,j.count);else if(q.isInstancedBufferGeometry){const qe=q._maxInstanceCount!==void 0?q._maxInstanceCount:1/0,Jn=Math.min(q.instanceCount,qe);tt.renderInstances(mt,Si,Jn)}else tt.render(mt,Si)};function ht(I,W,q){I.transparent===!0&&I.side===Wn&&I.forceSinglePass===!1?(I.side=Wi,I.needsUpdate=!0,Ft(I,W,q),I.side=zr,I.needsUpdate=!0,Ft(I,W,q),I.side=Wn):Ft(I,W,q)}this.compile=function(I,W,q=null){q===null&&(q=I),v=he.get(q),v.init(W),y.push(v),q.traverseVisible(function(j){j.isLight&&j.layers.test(W.layers)&&(v.pushLight(j),j.castShadow&&v.pushShadow(j))}),I!==q&&I.traverseVisible(function(j){j.isLight&&j.layers.test(W.layers)&&(v.pushLight(j),j.castShadow&&v.pushShadow(j))}),v.setupLights(_._useLegacyLights);const Y=new Set;return I.traverse(function(j){const de=j.material;if(de)if(Array.isArray(de))for(let xe=0;xe<de.length;xe++){const Te=de[xe];ht(Te,q,j),Y.add(Te)}else ht(de,q,j),Y.add(de)}),y.pop(),v=null,Y},this.compileAsync=function(I,W,q=null){const Y=this.compile(I,W,q);return new Promise(j=>{function de(){if(Y.forEach(function(xe){Ne.get(xe).currentProgram.isReady()&&Y.delete(xe)}),Y.size===0){j(I);return}setTimeout(de,10)}Pe.get("KHR_parallel_shader_compile")!==null?de():setTimeout(de,10)})};let xt=null;function At(I){xt&&xt(I)}function ut(){Le.stop()}function Ve(){Le.start()}const Le=new $0;Le.setAnimationLoop(At),typeof self<"u"&&Le.setContext(self),this.setAnimationLoop=function(I){xt=I,$e.setAnimationLoop(I),I===null?Le.stop():Le.start()},$e.addEventListener("sessionstart",ut),$e.addEventListener("sessionend",Ve),this.render=function(I,W){if(W!==void 0&&W.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),W.parent===null&&W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(W),W=$e.getCamera()),I.isScene===!0&&I.onBeforeRender(_,I,W,T),v=he.get(I,y.length),v.init(W),y.push(v),ne.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),we.setFromProjectionMatrix(ne),J=this.localClippingEnabled,X=ce.init(this.clippingPlanes,J),p=Se.get(I,g.length),p.init(),g.push(p),dt(I,W,0,_.sortObjects),p.finish(),_.sortObjects===!0&&p.sort(F,G);const q=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1;q&&ue.addToRenderList(p,I),this.info.render.frame++,X===!0&&ce.beginShadows();const Y=v.state.shadowsArray;He.render(Y,I,W),X===!0&&ce.endShadows(),this.info.autoReset===!0&&this.info.reset();const j=p.opaque,de=p.transmissive;if(v.setupLights(_._useLegacyLights),W.isArrayCamera){const xe=W.cameras;if(de.length>0)for(let Te=0,Be=xe.length;Te<Be;Te++){const je=xe[Te];Ze(j,de,I,je)}q&&ue.render(I);for(let Te=0,Be=xe.length;Te<Be;Te++){const je=xe[Te];ye(p,I,je,je.viewport)}}else de.length>0&&Ze(j,de,I,W),q&&ue.render(I),ye(p,I,W);T!==null&&($.updateMultisampleRenderTarget(T),$.updateRenderTargetMipmap(T)),I.isScene===!0&&I.onAfterRender(_,I,W),Xe.resetDefaultState(),E=-1,S=null,y.pop(),y.length>0?(v=y[y.length-1],X===!0&&ce.setGlobalState(_.clippingPlanes,v.state.camera)):v=null,g.pop(),g.length>0?p=g[g.length-1]:p=null};function dt(I,W,q,Y){if(I.visible===!1)return;if(I.layers.test(W.layers)){if(I.isGroup)q=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(W);else if(I.isLight)v.pushLight(I),I.castShadow&&v.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||we.intersectsSprite(I)){Y&&re.setFromMatrixPosition(I.matrixWorld).applyMatrix4(ne);const xe=te.update(I),Te=I.material;Te.visible&&p.push(I,xe,Te,q,re.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(!I.frustumCulled||we.intersectsObject(I))){const xe=te.update(I),Te=I.material;if(Y&&(I.boundingSphere!==void 0?(I.boundingSphere===null&&I.computeBoundingSphere(),re.copy(I.boundingSphere.center)):(xe.boundingSphere===null&&xe.computeBoundingSphere(),re.copy(xe.boundingSphere.center)),re.applyMatrix4(I.matrixWorld).applyMatrix4(ne)),Array.isArray(Te)){const Be=xe.groups;for(let je=0,Ue=Be.length;je<Ue;je++){const ke=Be[je],mt=Te[ke.materialIndex];mt&&mt.visible&&p.push(I,xe,mt,q,re.z,ke)}}else Te.visible&&p.push(I,xe,Te,q,re.z,null)}}const de=I.children;for(let xe=0,Te=de.length;xe<Te;xe++)dt(de[xe],W,q,Y)}function ye(I,W,q,Y){const j=I.opaque,de=I.transmissive,xe=I.transparent;v.setupLightsView(q),X===!0&&ce.setGlobalState(_.clippingPlanes,q),Y&&fe.viewport(x.copy(Y)),j.length>0&&Fe(j,W,q),de.length>0&&Fe(de,W,q),xe.length>0&&Fe(xe,W,q),fe.buffers.depth.setTest(!0),fe.buffers.depth.setMask(!0),fe.buffers.color.setMask(!0),fe.setPolygonOffset(!1)}function Ze(I,W,q,Y){if((q.isScene===!0?q.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[Y.id]===void 0&&(v.state.transmissionRenderTarget[Y.id]=new Us(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?Vc:Gr,minFilter:ks,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const de=v.state.transmissionRenderTarget[Y.id],xe=Y.viewport||x;de.setSize(xe.z,xe.w);const Te=_.getRenderTarget();_.setRenderTarget(de),_.getClearColor(P),R=_.getClearAlpha(),R<1&&_.setClearColor(16777215,.5),_.clear();const Be=_.toneMapping;_.toneMapping=Hr;const je=Y.viewport;if(Y.viewport!==void 0&&(Y.viewport=void 0),v.setupLightsView(Y),X===!0&&ce.setGlobalState(_.clippingPlanes,Y),Fe(I,q,Y),$.updateMultisampleRenderTarget(de),$.updateRenderTargetMipmap(de),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let Ue=!1;for(let ke=0,mt=W.length;ke<mt;ke++){const qt=W[ke],Si=qt.object,Ui=qt.geometry,tt=qt.material,qe=qt.group;if(tt.side===Wn&&Si.layers.test(Y.layers)){const Jn=tt.side;tt.side=Wi,tt.needsUpdate=!0,Ke(Si,q,Y,Ui,tt,qe),tt.side=Jn,tt.needsUpdate=!0,Ue=!0}}Ue===!0&&($.updateMultisampleRenderTarget(de),$.updateRenderTargetMipmap(de))}_.setRenderTarget(Te),_.setClearColor(P,R),je!==void 0&&(Y.viewport=je),_.toneMapping=Be}function Fe(I,W,q){const Y=W.isScene===!0?W.overrideMaterial:null;for(let j=0,de=I.length;j<de;j++){const xe=I[j],Te=xe.object,Be=xe.geometry,je=Y===null?xe.material:Y,Ue=xe.group;Te.layers.test(q.layers)&&Ke(Te,W,q,Be,je,Ue)}}function Ke(I,W,q,Y,j,de){I.onBeforeRender(_,W,q,Y,j,de),I.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),j.onBeforeRender(_,W,q,Y,I,de),j.transparent===!0&&j.side===Wn&&j.forceSinglePass===!1?(j.side=Wi,j.needsUpdate=!0,_.renderBufferDirect(q,W,Y,j,I,de),j.side=zr,j.needsUpdate=!0,_.renderBufferDirect(q,W,Y,j,I,de),j.side=Wn):_.renderBufferDirect(q,W,Y,j,I,de),I.onAfterRender(_,W,q,Y,j,de)}function Ft(I,W,q){W.isScene!==!0&&(W=_e);const Y=Ne.get(I),j=v.state.lights,de=v.state.shadowsArray,xe=j.state.version,Te=oe.getParameters(I,j.state,de,W,q),Be=oe.getProgramCacheKey(Te);let je=Y.programs;Y.environment=I.isMeshStandardMaterial?W.environment:null,Y.fog=W.fog,Y.envMap=(I.isMeshStandardMaterial?k:Ye).get(I.envMap||Y.environment),Y.envMapRotation=Y.environment!==null&&I.envMap===null?W.environmentRotation:I.envMapRotation,je===void 0&&(I.addEventListener("dispose",pe),je=new Map,Y.programs=je);let Ue=je.get(Be);if(Ue!==void 0){if(Y.currentProgram===Ue&&Y.lightsStateVersion===xe)return It(I,Te),Ue}else Te.uniforms=oe.getUniforms(I),I.onBuild(q,Te,_),I.onBeforeCompile(Te,_),Ue=oe.acquireProgram(Te,Be),je.set(Be,Ue),Y.uniforms=Te.uniforms;const ke=Y.uniforms;return(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(ke.clippingPlanes=ce.uniform),It(I,Te),Y.needsLights=Ct(I),Y.lightsStateVersion=xe,Y.needsLights&&(ke.ambientLightColor.value=j.state.ambient,ke.lightProbe.value=j.state.probe,ke.directionalLights.value=j.state.directional,ke.directionalLightShadows.value=j.state.directionalShadow,ke.spotLights.value=j.state.spot,ke.spotLightShadows.value=j.state.spotShadow,ke.rectAreaLights.value=j.state.rectArea,ke.ltc_1.value=j.state.rectAreaLTC1,ke.ltc_2.value=j.state.rectAreaLTC2,ke.pointLights.value=j.state.point,ke.pointLightShadows.value=j.state.pointShadow,ke.hemisphereLights.value=j.state.hemi,ke.directionalShadowMap.value=j.state.directionalShadowMap,ke.directionalShadowMatrix.value=j.state.directionalShadowMatrix,ke.spotShadowMap.value=j.state.spotShadowMap,ke.spotLightMatrix.value=j.state.spotLightMatrix,ke.spotLightMap.value=j.state.spotLightMap,ke.pointShadowMap.value=j.state.pointShadowMap,ke.pointShadowMatrix.value=j.state.pointShadowMatrix),Y.currentProgram=Ue,Y.uniformsList=null,Ue}function at(I){if(I.uniformsList===null){const W=I.currentProgram.getUniforms();I.uniformsList=gu.seqWithValue(W.seq,I.uniforms)}return I.uniformsList}function It(I,W){const q=Ne.get(I);q.outputColorSpace=W.outputColorSpace,q.batching=W.batching,q.instancing=W.instancing,q.instancingColor=W.instancingColor,q.instancingMorph=W.instancingMorph,q.skinning=W.skinning,q.morphTargets=W.morphTargets,q.morphNormals=W.morphNormals,q.morphColors=W.morphColors,q.morphTargetsCount=W.morphTargetsCount,q.numClippingPlanes=W.numClippingPlanes,q.numIntersection=W.numClipIntersection,q.vertexAlphas=W.vertexAlphas,q.vertexTangents=W.vertexTangents,q.toneMapping=W.toneMapping}function ui(I,W,q,Y,j){W.isScene!==!0&&(W=_e),$.resetTextureUnits();const de=W.fog,xe=Y.isMeshStandardMaterial?W.environment:null,Te=T===null?_.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:Xr,Be=(Y.isMeshStandardMaterial?k:Ye).get(Y.envMap||xe),je=Y.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,Ue=!!q.attributes.tangent&&(!!Y.normalMap||Y.anisotropy>0),ke=!!q.morphAttributes.position,mt=!!q.morphAttributes.normal,qt=!!q.morphAttributes.color;let Si=Hr;Y.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(Si=_.toneMapping);const Ui=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,tt=Ui!==void 0?Ui.length:0,qe=Ne.get(Y),Jn=v.state.lights;if(X===!0&&(J===!0||I!==S)){const bn=I===S&&Y.id===E;ce.setState(Y,I,bn)}let _t=!1;Y.version===qe.__version?(qe.needsLights&&qe.lightsStateVersion!==Jn.state.version||qe.outputColorSpace!==Te||j.isBatchedMesh&&qe.batching===!1||!j.isBatchedMesh&&qe.batching===!0||j.isInstancedMesh&&qe.instancing===!1||!j.isInstancedMesh&&qe.instancing===!0||j.isSkinnedMesh&&qe.skinning===!1||!j.isSkinnedMesh&&qe.skinning===!0||j.isInstancedMesh&&qe.instancingColor===!0&&j.instanceColor===null||j.isInstancedMesh&&qe.instancingColor===!1&&j.instanceColor!==null||j.isInstancedMesh&&qe.instancingMorph===!0&&j.morphTexture===null||j.isInstancedMesh&&qe.instancingMorph===!1&&j.morphTexture!==null||qe.envMap!==Be||Y.fog===!0&&qe.fog!==de||qe.numClippingPlanes!==void 0&&(qe.numClippingPlanes!==ce.numPlanes||qe.numIntersection!==ce.numIntersection)||qe.vertexAlphas!==je||qe.vertexTangents!==Ue||qe.morphTargets!==ke||qe.morphNormals!==mt||qe.morphColors!==qt||qe.toneMapping!==Si||qe.morphTargetsCount!==tt)&&(_t=!0):(_t=!0,qe.__version=Y.version);let Qs=qe.currentProgram;_t===!0&&(Qs=Ft(Y,W,j));let Gy=!1,Nl=!1,cp=!1;const Mi=Qs.getUniforms(),as=qe.uniforms;if(fe.useProgram(Qs.program)&&(Gy=!0,Nl=!0,cp=!0),Y.id!==E&&(E=Y.id,Nl=!0),Gy||S!==I){Mi.setValue(V,"projectionMatrix",I.projectionMatrix),Mi.setValue(V,"viewMatrix",I.matrixWorldInverse);const bn=Mi.map.cameraPosition;bn!==void 0&&bn.setValue(V,re.setFromMatrixPosition(I.matrixWorld)),me.logarithmicDepthBuffer&&Mi.setValue(V,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial)&&Mi.setValue(V,"isOrthographic",I.isOrthographicCamera===!0),S!==I&&(S=I,Nl=!0,cp=!0)}if(j.isSkinnedMesh){Mi.setOptional(V,j,"bindMatrix"),Mi.setOptional(V,j,"bindMatrixInverse");const bn=j.skeleton;bn&&(bn.boneTexture===null&&bn.computeBoneTexture(),Mi.setValue(V,"boneTexture",bn.boneTexture,$))}j.isBatchedMesh&&(Mi.setOptional(V,j,"batchingTexture"),Mi.setValue(V,"batchingTexture",j._matricesTexture,$));const up=q.morphAttributes;if((up.position!==void 0||up.normal!==void 0||up.color!==void 0)&&Ie.update(j,q,Qs),(Nl||qe.receiveShadow!==j.receiveShadow)&&(qe.receiveShadow=j.receiveShadow,Mi.setValue(V,"receiveShadow",j.receiveShadow)),Y.isMeshGouraudMaterial&&Y.envMap!==null&&(as.envMap.value=Be,as.flipEnvMap.value=Be.isCubeTexture&&Be.isRenderTargetTexture===!1?-1:1),Y.isMeshStandardMaterial&&Y.envMap===null&&W.environment!==null&&(as.envMapIntensity.value=W.environmentIntensity),Nl&&(Mi.setValue(V,"toneMappingExposure",_.toneMappingExposure),qe.needsLights&&Ot(as,cp),de&&Y.fog===!0&&le.refreshFogUniforms(as,de),le.refreshMaterialUniforms(as,Y,B,U,v.state.transmissionRenderTarget[I.id]),gu.upload(V,at(qe),as,$)),Y.isShaderMaterial&&Y.uniformsNeedUpdate===!0&&(gu.upload(V,at(qe),as,$),Y.uniformsNeedUpdate=!1),Y.isSpriteMaterial&&Mi.setValue(V,"center",j.center),Mi.setValue(V,"modelViewMatrix",j.modelViewMatrix),Mi.setValue(V,"normalMatrix",j.normalMatrix),Mi.setValue(V,"modelMatrix",j.matrixWorld),Y.isShaderMaterial||Y.isRawShaderMaterial){const bn=Y.uniformsGroups;for(let dp=0,sL=bn.length;dp<sL;dp++){const Wy=bn[dp];Je.update(Wy,Qs),Je.bind(Wy,Qs)}}return Qs}function Ot(I,W){I.ambientLightColor.needsUpdate=W,I.lightProbe.needsUpdate=W,I.directionalLights.needsUpdate=W,I.directionalLightShadows.needsUpdate=W,I.pointLights.needsUpdate=W,I.pointLightShadows.needsUpdate=W,I.spotLights.needsUpdate=W,I.spotLightShadows.needsUpdate=W,I.rectAreaLights.needsUpdate=W,I.hemisphereLights.needsUpdate=W}function Ct(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(I,W,q){Ne.get(I.texture).__webglTexture=W,Ne.get(I.depthTexture).__webglTexture=q;const Y=Ne.get(I);Y.__hasExternalTextures=!0,Y.__autoAllocateDepthBuffer=q===void 0,Y.__autoAllocateDepthBuffer||Pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Y.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(I,W){const q=Ne.get(I);q.__webglFramebuffer=W,q.__useDefaultFramebuffer=W===void 0},this.setRenderTarget=function(I,W=0,q=0){T=I,w=W,M=q;let Y=!0,j=null,de=!1,xe=!1;if(I){const Be=Ne.get(I);Be.__useDefaultFramebuffer!==void 0?(fe.bindFramebuffer(V.FRAMEBUFFER,null),Y=!1):Be.__webglFramebuffer===void 0?$.setupRenderTarget(I):Be.__hasExternalTextures&&$.rebindTextures(I,Ne.get(I.texture).__webglTexture,Ne.get(I.depthTexture).__webglTexture);const je=I.texture;(je.isData3DTexture||je.isDataArrayTexture||je.isCompressedArrayTexture)&&(xe=!0);const Ue=Ne.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(Array.isArray(Ue[W])?j=Ue[W][q]:j=Ue[W],de=!0):I.samples>0&&$.useMultisampledRTT(I)===!1?j=Ne.get(I).__webglMultisampledFramebuffer:Array.isArray(Ue)?j=Ue[q]:j=Ue,x.copy(I.viewport),C.copy(I.scissor),A=I.scissorTest}else x.copy(O).multiplyScalar(B).floor(),C.copy(ee).multiplyScalar(B).floor(),A=se;if(fe.bindFramebuffer(V.FRAMEBUFFER,j)&&Y&&fe.drawBuffers(I,j),fe.viewport(x),fe.scissor(C),fe.setScissorTest(A),de){const Be=Ne.get(I.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+W,Be.__webglTexture,q)}else if(xe){const Be=Ne.get(I.texture),je=W||0;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,Be.__webglTexture,q||0,je)}E=-1},this.readRenderTargetPixels=function(I,W,q,Y,j,de,xe){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Te=Ne.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&xe!==void 0&&(Te=Te[xe]),Te){fe.bindFramebuffer(V.FRAMEBUFFER,Te);try{const Be=I.texture,je=Be.format,Ue=Be.type;if(!me.textureFormatReadable(je)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!me.textureTypeReadable(Ue)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}W>=0&&W<=I.width-Y&&q>=0&&q<=I.height-j&&V.readPixels(W,q,Y,j,Ae.convert(je),Ae.convert(Ue),de)}finally{const Be=T!==null?Ne.get(T).__webglFramebuffer:null;fe.bindFramebuffer(V.FRAMEBUFFER,Be)}}},this.copyFramebufferToTexture=function(I,W,q=0){const Y=Math.pow(2,-q),j=Math.floor(W.image.width*Y),de=Math.floor(W.image.height*Y);$.setTexture2D(W,0),V.copyTexSubImage2D(V.TEXTURE_2D,q,0,0,I.x,I.y,j,de),fe.unbindTexture()},this.copyTextureToTexture=function(I,W,q,Y=0){const j=W.image.width,de=W.image.height,xe=Ae.convert(q.format),Te=Ae.convert(q.type);$.setTexture2D(q,0),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,q.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,q.unpackAlignment),W.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,Y,I.x,I.y,j,de,xe,Te,W.image.data):W.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,Y,I.x,I.y,W.mipmaps[0].width,W.mipmaps[0].height,xe,W.mipmaps[0].data):V.texSubImage2D(V.TEXTURE_2D,Y,I.x,I.y,xe,Te,W.image),Y===0&&q.generateMipmaps&&V.generateMipmap(V.TEXTURE_2D),fe.unbindTexture()},this.copyTextureToTexture3D=function(I,W,q,Y,j=0){const de=I.max.x-I.min.x,xe=I.max.y-I.min.y,Te=I.max.z-I.min.z,Be=Ae.convert(Y.format),je=Ae.convert(Y.type);let Ue;if(Y.isData3DTexture)$.setTexture3D(Y,0),Ue=V.TEXTURE_3D;else if(Y.isDataArrayTexture||Y.isCompressedArrayTexture)$.setTexture2DArray(Y,0),Ue=V.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,Y.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,Y.unpackAlignment);const ke=V.getParameter(V.UNPACK_ROW_LENGTH),mt=V.getParameter(V.UNPACK_IMAGE_HEIGHT),qt=V.getParameter(V.UNPACK_SKIP_PIXELS),Si=V.getParameter(V.UNPACK_SKIP_ROWS),Ui=V.getParameter(V.UNPACK_SKIP_IMAGES),tt=q.isCompressedTexture?q.mipmaps[j]:q.image;V.pixelStorei(V.UNPACK_ROW_LENGTH,tt.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,tt.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,I.min.x),V.pixelStorei(V.UNPACK_SKIP_ROWS,I.min.y),V.pixelStorei(V.UNPACK_SKIP_IMAGES,I.min.z),q.isDataTexture||q.isData3DTexture?V.texSubImage3D(Ue,j,W.x,W.y,W.z,de,xe,Te,Be,je,tt.data):Y.isCompressedArrayTexture?V.compressedTexSubImage3D(Ue,j,W.x,W.y,W.z,de,xe,Te,Be,tt.data):V.texSubImage3D(Ue,j,W.x,W.y,W.z,de,xe,Te,Be,je,tt),V.pixelStorei(V.UNPACK_ROW_LENGTH,ke),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,mt),V.pixelStorei(V.UNPACK_SKIP_PIXELS,qt),V.pixelStorei(V.UNPACK_SKIP_ROWS,Si),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Ui),j===0&&Y.generateMipmaps&&V.generateMipmap(Ue),fe.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?$.setTextureCube(I,0):I.isData3DTexture?$.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?$.setTexture2DArray(I,0):$.setTexture2D(I,0),fe.unbindTexture()},this.resetState=function(){w=0,M=0,T=null,fe.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return hr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Wf?"display-p3":"srgb",t.unpackColorSpace=bt.workingColorSpace===Hc?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class OA extends sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gr,this.environmentIntensity=1,this.environmentRotation=new gr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class NA extends xi{constructor(e=null,t=1,i=1,r,s,a,o,l,c=Oi,d=Oi,h,f){super(null,a,o,l,c,d,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const w_={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class kA{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){o++,s===!1&&r.onStart!==void 0&&r.onStart(d,a,o),s=!0},this.itemEnd=function(d){a++,r.onProgress!==void 0&&r.onProgress(d,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return h!==-1&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,f=c.length;h<f;h+=2){const u=c[h],m=c[h+1];if(u.global&&(u.lastIndex=0),u.test(d))return m}return null}}}const UA=new kA;class wh{constructor(e){this.manager=e!==void 0?e:UA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}wh.DEFAULT_MATERIAL_NAME="__DEFAULT";class FA extends wh{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=w_.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=ll("img");function l(){d(),w_.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class BA extends wh{constructor(e){super(e)}load(e,t,i,r){const s=new xi,a=new FA(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lf}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lf);function zA(n){if(n&&!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=n,document.head.appendChild(e),n}}function eo(n,e){var t=n.__state.conversionName.toString(),i=Math.round(n.r),r=Math.round(n.g),s=Math.round(n.b),a=n.a,o=Math.round(n.h),l=n.s.toFixed(1),c=n.v.toFixed(1);if(e||t==="THREE_CHAR_HEX"||t==="SIX_CHAR_HEX"){for(var d=n.hex.toString(16);d.length<6;)d="0"+d;return"#"+d}else{if(t==="CSS_RGB")return"rgb("+i+","+r+","+s+")";if(t==="CSS_RGBA")return"rgba("+i+","+r+","+s+","+a+")";if(t==="HEX")return"0x"+n.hex.toString(16);if(t==="RGB_ARRAY")return"["+i+","+r+","+s+"]";if(t==="RGBA_ARRAY")return"["+i+","+r+","+s+","+a+"]";if(t==="RGB_OBJ")return"{r:"+i+",g:"+r+",b:"+s+"}";if(t==="RGBA_OBJ")return"{r:"+i+",g:"+r+",b:"+s+",a:"+a+"}";if(t==="HSV_OBJ")return"{h:"+o+",s:"+l+",v:"+c+"}";if(t==="HSVA_OBJ")return"{h:"+o+",s:"+l+",v:"+c+",a:"+a+"}"}return"unknown format"}var S_=Array.prototype.forEach,_l=Array.prototype.slice,ae={BREAK:{},extend:function(e){return this.each(_l.call(arguments,1),function(t){var i=this.isObject(t)?Object.keys(t):[];i.forEach((function(r){this.isUndefined(t[r])||(e[r]=t[r])}).bind(this))},this),e},defaults:function(e){return this.each(_l.call(arguments,1),function(t){var i=this.isObject(t)?Object.keys(t):[];i.forEach((function(r){this.isUndefined(e[r])&&(e[r]=t[r])}).bind(this))},this),e},compose:function(){var e=_l.call(arguments);return function(){for(var t=_l.call(arguments),i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,i){if(e){if(S_&&e.forEach&&e.forEach===S_)e.forEach(t,i);else if(e.length===e.length+0){var r=void 0,s=void 0;for(r=0,s=e.length;r<s;r++)if(r in e&&t.call(i,e[r],r)===this.BREAK)return}else for(var a in e)if(t.call(i,e[a],a)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var r=void 0;return function(){var s=this,a=arguments;function o(){r=null,i||e.apply(s,a)}var l=i||!r;clearTimeout(r),r=setTimeout(o,t),l&&e.apply(s,a)}},toArray:function(e){return e.toArray?e.toArray():_l.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(n){function e(t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){return isNaN(n)}),isArray:Array.isArray||function(n){return n.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},VA=[{litmus:ae.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:eo},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:eo},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:eo},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:eo}}},{litmus:ae.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:ae.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:ae.isObject,conversions:{RGBA_OBJ:{read:function(e){return ae.isNumber(e.r)&&ae.isNumber(e.g)&&ae.isNumber(e.b)&&ae.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return ae.isNumber(e.r)&&ae.isNumber(e.g)&&ae.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return ae.isNumber(e.h)&&ae.isNumber(e.s)&&ae.isNumber(e.v)&&ae.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return ae.isNumber(e.h)&&ae.isNumber(e.s)&&ae.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],yl=void 0,_u=void 0,Sh=function(){_u=!1;var e=arguments.length>1?ae.toArray(arguments):arguments[0];return ae.each(VA,function(t){if(t.litmus(e))return ae.each(t.conversions,function(i,r){if(yl=i.read(e),_u===!1&&yl!==!1)return _u=yl,yl.conversionName=r,yl.conversion=i,ae.BREAK}),ae.BREAK}),_u},M_=void 0,yu={hsv_to_rgb:function(e,t,i){var r=Math.floor(e/60)%6,s=e/60-Math.floor(e/60),a=i*(1-t),o=i*(1-s*t),l=i*(1-(1-s)*t),c=[[i,l,a],[o,i,a],[a,i,l],[a,o,i],[l,a,i],[i,a,o]][r];return{r:c[0]*255,g:c[1]*255,b:c[2]*255}},rgb_to_hsv:function(e,t,i){var r=Math.min(e,t,i),s=Math.max(e,t,i),a=s-r,o=void 0,l=void 0;if(s!==0)l=a/s;else return{h:NaN,s:0,v:0};return e===s?o=(t-i)/a:t===s?o=2+(i-e)/a:o=4+(e-t)/a,o/=6,o<0&&(o+=1),{h:o*360,s:l,v:s/255}},rgb_to_hex:function(e,t,i){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,i),r},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(e,t,i){return i<<(M_=t*8)|e&~(255<<M_)}},HA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ln=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Dn=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),Qr=function n(e,t,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:n(s,t,i)}else{if("value"in r)return r.value;var a=r.get;return a===void 0?void 0:a.call(i)}},Jr=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},es=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},oi=function(){function n(){if(Ln(this,n),this.__state=Sh.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Dn(n,[{key:"toString",value:function(){return eo(this)}},{key:"toHexString",value:function(){return eo(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),n}();function Mh(n,e,t){Object.defineProperty(n,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(oi.recalculateRGB(this,e,t),this.__state[e])},set:function(r){this.__state.space!=="RGB"&&(oi.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=r}})}function Th(n,e){Object.defineProperty(n,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(oi.recalculateHSV(this),this.__state[e])},set:function(i){this.__state.space!=="HSV"&&(oi.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=i}})}oi.recalculateRGB=function(n,e,t){if(n.__state.space==="HEX")n.__state[e]=yu.component_from_hex(n.__state.hex,t);else if(n.__state.space==="HSV")ae.extend(n.__state,yu.hsv_to_rgb(n.__state.h,n.__state.s,n.__state.v));else throw new Error("Corrupted color state")},oi.recalculateHSV=function(n){var e=yu.rgb_to_hsv(n.r,n.g,n.b);ae.extend(n.__state,{s:e.s,v:e.v}),ae.isNaN(e.h)?ae.isUndefined(n.__state.h)&&(n.__state.h=0):n.__state.h=e.h},oi.COMPONENTS=["r","g","b","h","s","v","hex","a"],Mh(oi.prototype,"r",2),Mh(oi.prototype,"g",1),Mh(oi.prototype,"b",0),Th(oi.prototype,"h"),Th(oi.prototype,"s"),Th(oi.prototype,"v"),Object.defineProperty(oi.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(oi.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=yu.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var js=function(){function n(e,t){Ln(this,n),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return Dn(n,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),n}(),GA={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},T_={};ae.each(GA,function(n,e){ae.each(n,function(t){T_[t]=e})});var WA=/(\d+(\.\d+)?)px/;function Kn(n){if(n==="0"||ae.isUndefined(n))return 0;var e=n.match(WA);return ae.isNull(e)?0:parseFloat(e[1])}var K={makeSelectable:function(e,t){e===void 0||e.style===void 0||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,i){var r=i,s=t;ae.isUndefined(s)&&(s=!0),ae.isUndefined(r)&&(r=!0),e.style.position="absolute",s&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,i,r){var s=i||{},a=T_[t];if(!a)throw new Error("Event type "+t+" not supported.");var o=document.createEvent(a);switch(a){case"MouseEvents":{var l=s.x||s.clientX||0,c=s.y||s.clientY||0;o.initMouseEvent(t,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var d=o.initKeyboardEvent||o.initKeyEvent;ae.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:{o.initEvent(t,s.bubbles||!1,s.cancelable||!0);break}}ae.defaults(o,r),e.dispatchEvent(o)},bind:function(e,t,i,r){var s=r||!1;return e.addEventListener?e.addEventListener(t,i,s):e.attachEvent&&e.attachEvent("on"+t,i),K},unbind:function(e,t,i,r){var s=r||!1;return e.removeEventListener?e.removeEventListener(t,i,s):e.detachEvent&&e.detachEvent("on"+t,i),K},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);i.indexOf(t)===-1&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return K},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),r=i.indexOf(t);r!==-1&&(i.splice(r,1),e.className=i.join(" "))}else e.className=void 0;return K},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return Kn(t["border-left-width"])+Kn(t["border-right-width"])+Kn(t["padding-left"])+Kn(t["padding-right"])+Kn(t.width)},getHeight:function(e){var t=getComputedStyle(e);return Kn(t["border-top-width"])+Kn(t["border-bottom-width"])+Kn(t["padding-top"])+Kn(t["padding-bottom"])+Kn(t.height)},getOffset:function(e){var t=e,i={left:0,top:0};if(t.offsetParent)do i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent;while(t);return i},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},E_=function(n){Jr(e,n);function e(t,i){Ln(this,e);var r=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r;r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox");function a(){s.setValue(!s.__prev)}return K.bind(r.__checkbox,"change",a,!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return Dn(e,[{key:"setValue",value:function(i){var r=Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(js),XA=function(n){Jr(e,n);function e(t,i,r){Ln(this,e);var s=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),a=r,o=s;if(s.__select=document.createElement("select"),ae.isArray(a)){var l={};ae.each(a,function(c){l[c]=c}),a=l}return ae.each(a,function(c,d){var h=document.createElement("option");h.innerHTML=d,h.setAttribute("value",c),o.__select.appendChild(h)}),s.updateDisplay(),K.bind(s.__select,"change",function(){var c=this.options[this.selectedIndex].value;o.setValue(c)}),s.domElement.appendChild(s.__select),s}return Dn(e,[{key:"setValue",value:function(i){var r=Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return K.isActive(this.__select)?this:(this.__select.value=this.getValue(),Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(js),$A=function(n){Jr(e,n);function e(t,i){Ln(this,e);var r=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r;function a(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),K.bind(r.__input,"keyup",a),K.bind(r.__input,"change",a),K.bind(r.__input,"blur",o),K.bind(r.__input,"keydown",function(l){l.keyCode===13&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Dn(e,[{key:"updateDisplay",value:function(){return K.isActive(this.__input)||(this.__input.value=this.getValue()),Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(js);function A_(n){var e=n.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var C_=function(n){Jr(e,n);function e(t,i,r){Ln(this,e);var s=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),a=r||{};return s.__min=a.min,s.__max=a.max,s.__step=a.step,ae.isUndefined(s.__step)?s.initialValue===0?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=A_(s.__impliedStep),s}return Dn(e,[{key:"setValue",value:function(i){var r=i;return this.__min!==void 0&&r<this.__min?r=this.__min:this.__max!==void 0&&r>this.__max&&(r=this.__max),this.__step!==void 0&&r%this.__step!==0&&(r=Math.round(r/this.__step)*this.__step),Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(i){return this.__min=i,this}},{key:"max",value:function(i){return this.__max=i,this}},{key:"step",value:function(i){return this.__step=i,this.__impliedStep=i,this.__precision=A_(i),this}}]),e}(js);function qA(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}var xu=function(n){Jr(e,n);function e(t,i,r){Ln(this,e);var s=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,r));s.__truncationSuspended=!1;var a=s,o=void 0;function l(){var m=parseFloat(a.__input.value);ae.isNaN(m)||a.setValue(m)}function c(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function d(){c()}function h(m){var p=o-m.clientY;a.setValue(a.getValue()+p*a.__impliedStep),o=m.clientY}function f(){K.unbind(window,"mousemove",h),K.unbind(window,"mouseup",f),c()}function u(m){K.bind(window,"mousemove",h),K.bind(window,"mouseup",f),o=m.clientY}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),K.bind(s.__input,"change",l),K.bind(s.__input,"blur",d),K.bind(s.__input,"mousedown",u),K.bind(s.__input,"keydown",function(m){m.keyCode===13&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,c())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return Dn(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():qA(this.getValue(),this.__precision),Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(C_);function P_(n,e,t,i,r){return i+(r-i)*((n-e)/(t-e))}var Eh=function(n){Jr(e,n);function e(t,i,r,s,a){Ln(this,e);var o=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,{min:r,max:s,step:a})),l=o;o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),K.bind(o.__background,"mousedown",c),K.bind(o.__background,"touchstart",f),K.addClass(o.__background,"slider"),K.addClass(o.__foreground,"slider-fg");function c(p){document.activeElement.blur(),K.bind(window,"mousemove",d),K.bind(window,"mouseup",h),d(p)}function d(p){p.preventDefault();var v=l.__background.getBoundingClientRect();return l.setValue(P_(p.clientX,v.left,v.right,l.__min,l.__max)),!1}function h(){K.unbind(window,"mousemove",d),K.unbind(window,"mouseup",h),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function f(p){p.touches.length===1&&(K.bind(window,"touchmove",u),K.bind(window,"touchend",m),u(p))}function u(p){var v=p.touches[0].clientX,g=l.__background.getBoundingClientRect();l.setValue(P_(v,g.left,g.right,l.__min,l.__max))}function m(){K.unbind(window,"touchmove",u),K.unbind(window,"touchend",m),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}return o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return Dn(e,[{key:"updateDisplay",value:function(){var i=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=i*100+"%",Qr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(C_),R_=function(n){Jr(e,n);function e(t,i,r){Ln(this,e);var s=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),a=s;return s.__button=document.createElement("div"),s.__button.innerHTML=r===void 0?"Fire":r,K.bind(s.__button,"click",function(o){return o.preventDefault(),a.fire(),!1}),K.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return Dn(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(js),Ah=function(n){Jr(e,n);function e(t,i){Ln(this,e);var r=es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));r.__color=new oi(r.getValue()),r.__temp=new oi(0);var s=r;r.domElement=document.createElement("div"),K.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",K.bind(r.__input,"keydown",function(p){p.keyCode===13&&h.call(this)}),K.bind(r.__input,"blur",h),K.bind(r.__selector,"mousedown",function(){K.addClass(this,"drag").bind(window,"mouseup",function(){K.removeClass(s.__selector,"drag")})}),K.bind(r.__selector,"touchstart",function(){K.addClass(this,"drag").bind(window,"touchend",function(){K.removeClass(s.__selector,"drag")})});var a=document.createElement("div");ae.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),ae.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),ae.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),ae.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),ae.extend(a.style,{width:"100%",height:"100%",background:"none"}),L_(a,"top","rgba(0,0,0,0)","#000"),ae.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),jA(r.__hue_field),ae.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),K.bind(r.__saturation_field,"mousedown",o),K.bind(r.__saturation_field,"touchstart",o),K.bind(r.__field_knob,"mousedown",o),K.bind(r.__field_knob,"touchstart",o),K.bind(r.__hue_field,"mousedown",l),K.bind(r.__hue_field,"touchstart",l);function o(p){u(p),K.bind(window,"mousemove",u),K.bind(window,"touchmove",u),K.bind(window,"mouseup",c),K.bind(window,"touchend",c)}function l(p){m(p),K.bind(window,"mousemove",m),K.bind(window,"touchmove",m),K.bind(window,"mouseup",d),K.bind(window,"touchend",d)}function c(){K.unbind(window,"mousemove",u),K.unbind(window,"touchmove",u),K.unbind(window,"mouseup",c),K.unbind(window,"touchend",c),f()}function d(){K.unbind(window,"mousemove",m),K.unbind(window,"touchmove",m),K.unbind(window,"mouseup",d),K.unbind(window,"touchend",d),f()}function h(){var p=Sh(this.value);p!==!1?(s.__color.__state=p,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function f(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay();function u(p){p.type.indexOf("touch")===-1&&p.preventDefault();var v=s.__saturation_field.getBoundingClientRect(),g=p.touches&&p.touches[0]||p,y=g.clientX,_=g.clientY,b=(y-v.left)/(v.right-v.left),w=1-(_-v.top)/(v.bottom-v.top);return w>1?w=1:w<0&&(w=0),b>1?b=1:b<0&&(b=0),s.__color.v=w,s.__color.s=b,s.setValue(s.__color.toOriginal()),!1}function m(p){p.type.indexOf("touch")===-1&&p.preventDefault();var v=s.__hue_field.getBoundingClientRect(),g=p.touches&&p.touches[0]||p,y=g.clientY,_=1-(y-v.top)/(v.bottom-v.top);return _>1?_=1:_<0&&(_=0),s.__color.h=_*360,s.setValue(s.__color.toOriginal()),!1}return r}return Dn(e,[{key:"updateDisplay",value:function(){var i=Sh(this.getValue());if(i!==!1){var r=!1;ae.each(oi.COMPONENTS,function(o){if(!ae.isUndefined(i[o])&&!ae.isUndefined(this.__color.__state[o])&&i[o]!==this.__color.__state[o])return r=!0,{}},this),r&&ae.extend(this.__color.__state,i)}ae.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;ae.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,L_(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),ae.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}}]),e}(js),YA=["-moz-","-o-","-webkit-","-ms-",""];function L_(n,e,t,i){n.style.background="",ae.each(YA,function(r){n.style.cssText+="background: "+r+"linear-gradient("+e+", "+t+" 0%, "+i+" 100%); "})}function jA(n){n.style.background="",n.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",n.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var KA={load:function(e,t){var i=t||document,r=i.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,i.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){var i=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var s=i.getElementsByTagName("head")[0];try{s.appendChild(r)}catch{}}},ZA=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,QA=function(e,t){var i=e[t];return ae.isArray(arguments[2])||ae.isObject(arguments[2])?new XA(e,t,arguments[2]):ae.isNumber(i)?ae.isNumber(arguments[2])&&ae.isNumber(arguments[3])?ae.isNumber(arguments[4])?new Eh(e,t,arguments[2],arguments[3],arguments[4]):new Eh(e,t,arguments[2],arguments[3]):ae.isNumber(arguments[4])?new xu(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new xu(e,t,{min:arguments[2],max:arguments[3]}):ae.isString(i)?new $A(e,t):ae.isFunction(i)?new R_(e,t,""):ae.isBoolean(i)?new E_(e,t):null};function JA(n){setTimeout(n,1e3/60)}var eC=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||JA,tC=function(){function n(){Ln(this,n),this.backgroundElement=document.createElement("div"),ae.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),K.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),ae.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;K.bind(this.backgroundElement,"click",function(){e.hide()})}return Dn(n,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),ae.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,i=function r(){t.domElement.style.display="none",t.backgroundElement.style.display="none",K.unbind(t.domElement,"webkitTransitionEnd",r),K.unbind(t.domElement,"transitionend",r),K.unbind(t.domElement,"oTransitionEnd",r)};K.bind(this.domElement,"webkitTransitionEnd",i),K.bind(this.domElement,"transitionend",i),K.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-K.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-K.getHeight(this.domElement)/2+"px"}}]),n}(),iC=zA(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);KA.inject(iC);var D_="dg",I_=72,O_=20,xl="Default",bl=function(){try{return!!window.localStorage}catch{return!1}}(),wl=void 0,N_=!0,to=void 0,Ch=!1,k_=[],Et=function n(e){var t=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),K.addClass(this.domElement,D_),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=ae.defaults(i,{closeOnTop:!1,autoPlace:!0,width:n.DEFAULT_WIDTH}),i=ae.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),ae.isUndefined(i.load)?i.load={preset:xl}:i.preset&&(i.load.preset=i.preset),ae.isUndefined(i.parent)&&i.hideable&&k_.push(this),i.resizable=ae.isUndefined(i.parent)&&i.resizable,i.autoPlace&&ae.isUndefined(i.scrollable)&&(i.scrollable=!0);var r=bl&&localStorage.getItem(io(this,"isLocal"))==="true",s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:i.load.preset},set:function(f){t.parent?t.getRoot().preset=f:i.load.preset=f,aC(this),t.revert()}},width:{get:function(){return i.width},set:function(f){i.width=f,Dh(t,f)}},name:{get:function(){return i.name},set:function(f){i.name=f,a&&(a.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(f){i.closed=f,i.closed?K.addClass(t.__ul,n.CLASS_CLOSED):K.removeClass(t.__ul,n.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=f?n.TEXT_OPEN:n.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return r},set:function(f){bl&&(r=f,f?K.bind(window,"unload",s):K.unbind(window,"unload",s),localStorage.setItem(io(t,"isLocal"),f))}}}),ae.isUndefined(i.parent)){if(this.closed=i.closed||!1,K.addClass(this.domElement,n.CLASS_MAIN),K.makeSelectable(this.domElement,!1),bl&&r){t.useLocalStorage=!0;var o=localStorage.getItem(io(this,"gui"));o&&(i.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=n.TEXT_CLOSED,K.addClass(this.__closeButton,n.CLASS_CLOSE_BUTTON),i.closeOnTop?(K.addClass(this.__closeButton,n.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(K.addClass(this.__closeButton,n.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),K.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{i.closed===void 0&&(i.closed=!0);var l=document.createTextNode(i.name);K.addClass(l,"controller-name"),a=Ph(t,l);var c=function(f){return f.preventDefault(),t.closed=!t.closed,!1};K.addClass(this.__ul,n.CLASS_CLOSED),K.addClass(a,"title"),K.bind(a,"click",c),i.closed||(this.closed=!1)}i.autoPlace&&(ae.isUndefined(i.parent)&&(N_&&(to=document.createElement("div"),K.addClass(to,D_),K.addClass(to,n.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(to),N_=!1),to.appendChild(this.domElement),K.addClass(this.domElement,n.CLASS_AUTO_PLACE)),this.parent||Dh(t,i.width)),this.__resizeHandler=function(){t.onResizeDebounced()},K.bind(window,"resize",this.__resizeHandler),K.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),K.bind(this.__ul,"transitionend",this.__resizeHandler),K.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&sC(this),s=function(){bl&&localStorage.getItem(io(t,"isLocal"))==="true"&&localStorage.setItem(io(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=s;function d(){var h=t.getRoot();h.width+=1,ae.defer(function(){h.width-=1})}i.parent||d()};Et.toggleHide=function(){Ch=!Ch,ae.each(k_,function(n){n.domElement.style.display=Ch?"none":""})},Et.CLASS_AUTO_PLACE="a",Et.CLASS_AUTO_PLACE_CONTAINER="ac",Et.CLASS_MAIN="main",Et.CLASS_CONTROLLER_ROW="cr",Et.CLASS_TOO_TALL="taller-than-window",Et.CLASS_CLOSED="closed",Et.CLASS_CLOSE_BUTTON="close-button",Et.CLASS_CLOSE_TOP="close-top",Et.CLASS_CLOSE_BOTTOM="close-bottom",Et.CLASS_DRAG="drag",Et.DEFAULT_WIDTH=245,Et.TEXT_CLOSED="Close Controls",Et.TEXT_OPEN="Open Controls",Et._keydownHandler=function(n){document.activeElement.type!=="text"&&(n.which===I_||n.keyCode===I_)&&Et.toggleHide()},K.bind(window,"keydown",Et._keydownHandler,!1),ae.extend(Et.prototype,{add:function(e,t){return Sl(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return Sl(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;ae.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&to.removeChild(this.domElement);var e=this;ae.each(this.__folders,function(t){e.removeFolder(t)}),K.unbind(window,"keydown",Et._keydownHandler,!1),U_(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new Et(t);this.__folders[e]=i;var r=Ph(this,i.domElement);return K.addClass(r,"folder"),i},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],U_(e);var t=this;ae.each(e.__folders,function(i){e.removeFolder(i)}),ae.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=K.getOffset(e.__ul).top,i=0;ae.each(e.__ul.childNodes,function(r){e.autoPlace&&r===e.__save_row||(i+=K.getHeight(r))}),window.innerHeight-t-O_<i?(K.addClass(e.domElement,Et.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-O_+"px"):(K.removeClass(e.domElement,Et.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&ae.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:ae.debounce(function(){this.onResize()},50),remember:function(){if(ae.isUndefined(wl)&&(wl=new tC,wl.domElement.innerHTML=ZA),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;ae.each(Array.prototype.slice.call(arguments),function(t){e.__rememberedObjects.length===0&&rC(e),e.__rememberedObjects.indexOf(t)===-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&Dh(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=bu(this)),e.folders={},ae.each(this.__folders,function(t,i){e.folders[i]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=bu(this),Rh(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[xl]=bu(this,!0)),this.load.remembered[e]=bu(this),this.preset=e,Lh(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){ae.each(this.__controllers,function(t){this.getRoot().load.remembered?F_(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),ae.each(this.__folders,function(t){t.revert(t)}),e||Rh(this.getRoot(),!1)},listen:function(e){var t=this.__listening.length===0;this.__listening.push(e),t&&z_(this.__listening)},updateDisplay:function(){ae.each(this.__controllers,function(e){e.updateDisplay()}),ae.each(this.__folders,function(e){e.updateDisplay()})}});function Ph(n,e,t){var i=document.createElement("li");return e&&i.appendChild(e),t?n.__ul.insertBefore(i,t):n.__ul.appendChild(i),n.onResize(),i}function U_(n){K.unbind(window,"resize",n.__resizeHandler),n.saveToLocalStorageIfPossible&&K.unbind(window,"unload",n.saveToLocalStorageIfPossible)}function Rh(n,e){var t=n.__preset_select[n.__preset_select.selectedIndex];e?t.innerHTML=t.value+"*":t.innerHTML=t.value}function nC(n,e,t){if(t.__li=e,t.__gui=n,ae.extend(t,{options:function(a){if(arguments.length>1){var o=t.__li.nextElementSibling;return t.remove(),Sl(n,t.object,t.property,{before:o,factoryArgs:[ae.toArray(arguments)]})}if(ae.isArray(a)||ae.isObject(a)){var l=t.__li.nextElementSibling;return t.remove(),Sl(n,t.object,t.property,{before:l,factoryArgs:[a]})}},name:function(a){return t.__li.firstElementChild.firstElementChild.innerHTML=a,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof Eh){var i=new xu(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});ae.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var a=t[s],o=i[s];t[s]=i[s]=function(){var l=Array.prototype.slice.call(arguments);return o.apply(i,l),a.apply(t,l)}}),K.addClass(e,"has-slider"),t.domElement.insertBefore(i.domElement,t.domElement.firstElementChild)}else if(t instanceof xu){var r=function(a){if(ae.isNumber(t.__min)&&ae.isNumber(t.__max)){var o=t.__li.firstElementChild.firstElementChild.innerHTML,l=t.__gui.__listening.indexOf(t)>-1;t.remove();var c=Sl(n,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return c.name(o),l&&c.listen(),c}return a};t.min=ae.compose(r,t.min),t.max=ae.compose(r,t.max)}else t instanceof E_?(K.bind(e,"click",function(){K.fakeEvent(t.__checkbox,"click")}),K.bind(t.__checkbox,"click",function(s){s.stopPropagation()})):t instanceof R_?(K.bind(e,"click",function(){K.fakeEvent(t.__button,"click")}),K.bind(e,"mouseover",function(){K.addClass(t.__button,"hover")}),K.bind(e,"mouseout",function(){K.removeClass(t.__button,"hover")})):t instanceof Ah&&(K.addClass(e,"color"),t.updateDisplay=ae.compose(function(s){return e.style.borderLeftColor=t.__color.toString(),s},t.updateDisplay),t.updateDisplay());t.setValue=ae.compose(function(s){return n.getRoot().__preset_select&&t.isModified()&&Rh(n.getRoot(),!0),s},t.setValue)}function F_(n,e){var t=n.getRoot(),i=t.__rememberedObjects.indexOf(e.object);if(i!==-1){var r=t.__rememberedObjectIndecesToControllers[i];if(r===void 0&&(r={},t.__rememberedObjectIndecesToControllers[i]=r),r[e.property]=e,t.load&&t.load.remembered){var s=t.load.remembered,a=void 0;if(s[n.preset])a=s[n.preset];else if(s[xl])a=s[xl];else return;if(a[i]&&a[i][e.property]!==void 0){var o=a[i][e.property];e.initialValue=o,e.setValue(o)}}}}function Sl(n,e,t,i){if(e[t]===void 0)throw new Error('Object "'+e+'" has no property "'+t+'"');var r=void 0;if(i.color)r=new Ah(e,t);else{var s=[e,t].concat(i.factoryArgs);r=QA.apply(n,s)}i.before instanceof js&&(i.before=i.before.__li),F_(n,r),K.addClass(r.domElement,"c");var a=document.createElement("span");K.addClass(a,"property-name"),a.innerHTML=r.property;var o=document.createElement("div");o.appendChild(a),o.appendChild(r.domElement);var l=Ph(n,o,i.before);return K.addClass(l,Et.CLASS_CONTROLLER_ROW),r instanceof Ah?K.addClass(l,"color"):K.addClass(l,HA(r.getValue())),nC(n,l,r),n.__controllers.push(r),r}function io(n,e){return document.location.href+"."+e}function Lh(n,e,t){var i=document.createElement("option");i.innerHTML=e,i.value=e,n.__preset_select.appendChild(i),t&&(n.__preset_select.selectedIndex=n.__preset_select.length-1)}function B_(n,e){e.style.display=n.useLocalStorage?"block":"none"}function rC(n){var e=n.__save_row=document.createElement("li");K.addClass(n.domElement,"has-save"),n.__ul.insertBefore(e,n.__ul.firstChild),K.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",K.addClass(t,"button gears");var i=document.createElement("span");i.innerHTML="Save",K.addClass(i,"button"),K.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",K.addClass(r,"button"),K.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",K.addClass(s,"button"),K.addClass(s,"revert");var a=n.__preset_select=document.createElement("select");if(n.load&&n.load.remembered?ae.each(n.load.remembered,function(h,f){Lh(n,f,f===n.preset)}):Lh(n,xl,!1),K.bind(a,"change",function(){for(var h=0;h<n.__preset_select.length;h++)n.__preset_select[h].innerHTML=n.__preset_select[h].value;n.preset=this.value}),e.appendChild(a),e.appendChild(t),e.appendChild(i),e.appendChild(r),e.appendChild(s),bl){var o=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block",localStorage.getItem(io(n,"isLocal"))==="true"&&l.setAttribute("checked","checked"),B_(n,o),K.bind(l,"change",function(){n.useLocalStorage=!n.useLocalStorage,B_(n,o)})}var d=document.getElementById("dg-new-constructor");K.bind(d,"keydown",function(h){h.metaKey&&(h.which===67||h.keyCode===67)&&wl.hide()}),K.bind(t,"click",function(){d.innerHTML=JSON.stringify(n.getSaveObject(),void 0,2),wl.show(),d.focus(),d.select()}),K.bind(i,"click",function(){n.save()}),K.bind(r,"click",function(){var h=prompt("Enter a new preset name.");h&&n.saveAs(h)}),K.bind(s,"click",function(){n.revert()})}function sC(n){var e=void 0;n.__resize_handle=document.createElement("div"),ae.extend(n.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function t(s){return s.preventDefault(),n.width+=e-s.clientX,n.onResize(),e=s.clientX,!1}function i(){K.removeClass(n.__closeButton,Et.CLASS_DRAG),K.unbind(window,"mousemove",t),K.unbind(window,"mouseup",i)}function r(s){return s.preventDefault(),e=s.clientX,K.addClass(n.__closeButton,Et.CLASS_DRAG),K.bind(window,"mousemove",t),K.bind(window,"mouseup",i),!1}K.bind(n.__resize_handle,"mousedown",r),K.bind(n.__closeButton,"mousedown",r),n.domElement.insertBefore(n.__resize_handle,n.domElement.firstElementChild)}function Dh(n,e){n.domElement.style.width=e+"px",n.__save_row&&n.autoPlace&&(n.__save_row.style.width=e+"px"),n.__closeButton&&(n.__closeButton.style.width=e+"px")}function bu(n,e){var t={};return ae.each(n.__rememberedObjects,function(i,r){var s={},a=n.__rememberedObjectIndecesToControllers[r];ae.each(a,function(o,l){s[l]=e?o.initialValue:o.getValue()}),t[r]=s}),t}function aC(n){for(var e=0;e<n.__preset_select.length;e++)n.__preset_select[e].value===n.preset&&(n.__preset_select.selectedIndex=e)}function z_(n){n.length!==0&&eC.call(window,function(){z_(n)}),ae.each(n,function(e){e.updateDisplay()})}var oC=Et,lC=`uniform float time;
varying vec2 vUv;
varying vec3 vPosition;
uniform vec2 pixels;
float PI = 3.141592653589793238;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cC=`uniform float time;
uniform float progress;
uniform float rgbStrength;
uniform float rgbOpacity;
uniform sampler2D uDataTexture;
uniform sampler2D uTexture;

uniform vec4 resolution;
varying vec2 vUv;
varying vec3 vPosition;
float PI = 3.141592653589793238;
void main() {
    vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);
    vec4 color = texture2D(uTexture, newUV);
    vec4 offset = texture2D(uDataTexture, vUv);

    
    vec2 redUV = newUV + vec2(-rgbStrength, 0.0) * offset.rg;
    vec2 greenUV = newUV + vec2(0.0, rgbStrength) * offset.rg;
    vec2 blueUV = newUV + vec2(rgbStrength, -rgbStrength) * offset.rg;

    float red = texture2D(uTexture, redUV).r;
    float green = texture2D(uTexture, greenUV).g;
    float blue = texture2D(uTexture, blueUV).b;

    vec4 distortedColor = vec4(red, green, blue, 1.0);

    
    float mixFactor = clamp(length(offset.rg) * rgbOpacity, 0.0, 1.0);
    color = mix(color, distortedColor, mixFactor);

    gl_FragColor = color;
}`;function uC(n,e,t){return Math.max(e,Math.min(n,t))}class dC{constructor(e){this.showGUI=e.showGUI||!1,this.scene=new OA,this.container=e.dom,this.img=this.container.querySelector("img"),this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer=new IA,this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(15658734,1),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=void 0,this.container.appendChild(this.renderer.domElement),this.camera=new _n(70,window.innerWidth/window.innerHeight,.1,100);var t=1;this.camera=new q0(t/-2,t/2,t/2,t/-2,-1e3,1e3),this.camera.position.set(0,0,2),this.time=0,this.mouse={x:0,y:0,prevX:0,prevY:0,vX:0,vY:0},this.isPlaying=!0,this.settings(),this.addObjects(),this.resize(),this.render(),this.setupResize(),this.showGUI&&this.setupGUI(),this.mouseEvents()}getValue(e){return parseFloat(this.container.getAttribute("data-"+e))}mouseEvents(){this.container.addEventListener("mousemove",e=>{const t=this.container.getBoundingClientRect();this.mouse.x=(e.clientX-t.left)/this.width,this.mouse.y=(e.clientY-t.top)/this.height,this.mouse.vX=this.mouse.x-this.mouse.prevX,this.mouse.vY=this.mouse.y-this.mouse.prevY,this.mouse.prevX=this.mouse.x,this.mouse.prevY=this.mouse.y})}settings(){this.settings={grid:this.getValue("grid")||34,mouse:this.getValue("mouse")||.25,strength:this.getValue("strength")||1,relaxation:this.getValue("relaxation")||.9,aspectRatio:this.getValue("aspectratio")||1,rgbStrength:this.getValue("rgbstrength")||.01,rgbOpacity:this.getValue("rgbopacity")||.5}}setupResize(){window.addEventListener("resize",this.resize.bind(this))}resize(){this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.imageAspect=1/this.settings.aspectRatio;let e,t;this.height/this.width>this.imageAspect?(e=this.width/this.height*this.imageAspect,t=1):(e=1,t=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=e,this.material.uniforms.resolution.value.w=t,this.camera.updateProjectionMatrix(),this.regenerateGrid()}regenerateGrid(){this.size=this.settings.grid;const e=this.size,t=this.size,i=e*t,r=new Float32Array(4*i);new yt(16777215);for(let s=0;s<i;s++){let a=Math.random()*255-125,o=Math.random()*255-125;const l=s*4;r[l]=a,r[l+1]=o,r[l+2]=a,r[l+3]=255}this.texture=new NA(r,e,t,gn,fr),this.texture.magFilter=this.texture.minFilter=Oi,this.texture.needsUpdate=!0,this.material&&(this.material.uniforms.uDataTexture.value=this.texture)}addObjects(){this.regenerateGrid(),new BA().load(this.img.src,t=>{t.minFilter=nn,t.magFilter=nn,t.format=gn,t.needsUpdate=!0,this.material.uniforms.uTexture.value=t}),this.material=new xr({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:Wn,uniforms:{time:{value:0},resolution:{value:new si},uTexture:{value:null},uDataTexture:{value:this.texture},rgbStrength:{value:this.settings.rgbStrength},rgbOpacity:{value:this.settings.rgbOpacity}},vertexShader:lC,fragmentShader:cC}),this.geometry=new gl(1,1,1,1),this.plane=new Yn(this.geometry,this.material),this.scene.add(this.plane),this.resize()}updateDataTexture(){let e=this.texture.image.data;for(let a=0;a<e.length;a+=4)e[a]*=this.settings.relaxation,e[a+1]*=this.settings.relaxation;let t=this.size*this.mouse.x,i=this.size*(1-this.mouse.y),r=this.size*this.settings.mouse,s=this.height/this.width;for(let a=0;a<this.size;a++)for(let o=0;o<this.size;o++){let l=(t-a)**2/s+(i-o)**2,c=r**2;if(l<c){let d=4*(a+this.size*o),h=r/Math.sqrt(l);h=uC(h,0,10),e[d]+=this.settings.strength*100*this.mouse.vX*h,e[d+1]-=this.settings.strength*100*this.mouse.vY*h}}this.mouse.vX*=.9,this.mouse.vY*=.9,this.texture.needsUpdate=!0}setupGUI(){this.gui=new oC,this.gui.add(this.settings,"grid",10,100).onChange(()=>this.regenerateGrid()),this.gui.add(this.settings,"mouse",.01,1),this.gui.add(this.settings,"strength",.1,10),this.gui.add(this.settings,"relaxation",.1,1),this.gui.add(this.settings,"aspectRatio",.5,2).onChange(()=>this.resize()),this.gui.add(this.settings,"rgbStrength",.001,.1).onChange(e=>{this.material.uniforms.rgbStrength.value=e}),this.gui.add(this.settings,"rgbOpacity",.1,1).onChange(e=>{this.material.uniforms.rgbOpacity.value=e})}render(){this.isPlaying&&(this.time+=.05,this.updateDataTexture(),this.material.uniforms.time.value=this.time,requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera))}}function fC(){document.querySelectorAll('[data-webgl="grid-effect"]').forEach(n=>{new dC({dom:n,showGUI:!1})})}function V_(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function Ih(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:V_(e[t])&&V_(n[t])&&Object.keys(e[t]).length>0&&Ih(n[t],e[t])})}const H_={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ts(){const n=typeof document<"u"?document:{};return Ih(n,H_),n}const hC={document:H_,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function ki(){const n=typeof window<"u"?window:{};return Ih(n,hC),n}function is(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function pC(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function no(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function yn(){return Date.now()}function mC(n){const e=ki();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function gC(n,e){e===void 0&&(e="x");const t=ki();let i,r,s;const a=mC(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function wu(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function vC(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function on(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!vC(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,a=r.length;s<a;s+=1){const o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(wu(n[o])&&wu(i[o])?i[o].__swiper__?n[o]=i[o]:on(n[o],i[o]):!wu(n[o])&&wu(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:on(n[o],i[o])):n[o]=i[o])}}}return n}function Su(n,e,t){n.style.setProperty(e,t)}function G_(n){let{swiper:e,targetPosition:t,side:i}=n;const r=ki(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",d=(f,u)=>c==="next"&&f>=u||c==="prev"&&f<=u,h=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),u=.5-Math.cos(f*Math.PI)/2;let m=s+u*(t-s);if(d(m,t)&&(m=t),e.wrapperEl.scrollTo({[i]:m}),d(m,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:m})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(h)};h()}function W_(n){return n.querySelector(".swiper-slide-transform")||n.shadowRoot&&n.shadowRoot.querySelector(".swiper-slide-transform")||n}function xn(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function Mu(n){try{console.warn(n);return}catch{}}function Ml(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:is(e)),t}function _C(n){const e=ki(),t=ts(),i=n.getBoundingClientRect(),r=t.body,s=n.clientTop||r.clientTop||0,a=n.clientLeft||r.clientLeft||0,o=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:i.top+o-s,left:i.left+l-a}}function yC(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function xC(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function ns(n,e){return ki().getComputedStyle(n,null).getPropertyValue(e)}function Tu(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function X_(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function Eu(n,e){function t(i){i.target===n&&(e.call(n,i),n.removeEventListener("transitionend",t))}e&&n.addEventListener("transitionend",t)}function Oh(n,e,t){const i=ki();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}function Jt(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}let Nh;function bC(){const n=ki(),e=ts();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function $_(){return Nh||(Nh=bC()),Nh}let kh;function wC(n){let{userAgent:e}=n===void 0?{}:n;const t=$_(),i=ki(),r=i.navigator.platform,s=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),u=r==="Win32";let m=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&m&&t.touch&&p.indexOf(`${o}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),m=!1),c&&!u&&(a.os="android",a.android=!0),(d||f||h)&&(a.os="ios",a.ios=!0),a}function q_(n){return n===void 0&&(n={}),kh||(kh=wC(n)),kh}let Uh;function SC(){const n=ki(),e=q_();let t=!1;function i(){const o=n.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(i()){const o=String(n.navigator.userAgent);if(o.includes("Version/")){const[l,c]=o.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=l<16||l===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=i(),a=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:a,isWebView:r}}function MC(){return Uh||(Uh=SC()),Uh}function TC(n){let{swiper:e,on:t,emit:i}=n;const r=ki();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{a=r.requestAnimationFrame(()=>{const{width:f,height:u}=e;let m=f,p=u;h.forEach(v=>{let{contentBoxSize:g,contentRect:y,target:_}=v;_&&_!==e.el||(m=y?y.width:(g[0]||g).inlineSize,p=y?y.height:(g[0]||g).blockSize)}),(m!==f||p!==u)&&o()})}),s.observe(e.el))},c=()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",d)}),t("destroy",()=>{c(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",d)})}function EC(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],a=ki(),o=function(d,h){h===void 0&&(h={});const f=a.MutationObserver||a.WebkitMutationObserver,u=new f(m=>{if(e.__preventObserver__)return;if(m.length===1){r("observerUpdate",m[0]);return}const p=function(){r("observerUpdate",m[0])};a.requestAnimationFrame?a.requestAnimationFrame(p):a.setTimeout(p,0)});u.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:typeof h.childList>"u"?!0:h.childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(u)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=X_(e.hostEl);for(let h=0;h<d.length;h+=1)o(d[h])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var AC={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(i,a)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function CC(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(ns(i,"padding-left")||0,10)-parseInt(ns(i,"padding-right")||0,10),t=t-parseInt(ns(i,"padding-top")||0,10)-parseInt(ns(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function PC(){const n=this;function e(x,C){return parseFloat(x.getPropertyValue(n.getDirectionLabel(C))||0)}const t=n.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:a,wrongRTL:o}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,d=xn(r,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:d.length;let f=[];const u=[],m=[];let p=t.slidesOffsetBefore;typeof p=="function"&&(p=t.slidesOffsetBefore.call(n));let v=t.slidesOffsetAfter;typeof v=="function"&&(v=t.slidesOffsetAfter.call(n));const g=n.snapGrid.length,y=n.slidesGrid.length;let _=t.spaceBetween,b=-p,w=0,M=0;if(typeof s>"u")return;typeof _=="string"&&_.indexOf("%")>=0?_=parseFloat(_.replace("%",""))/100*s:typeof _=="string"&&(_=parseFloat(_)),n.virtualSize=-_,d.forEach(x=>{a?x.style.marginLeft="":x.style.marginRight="",x.style.marginBottom="",x.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(Su(i,"--swiper-centered-offset-before",""),Su(i,"--swiper-centered-offset-after",""));const T=t.grid&&t.grid.rows>1&&n.grid;T?n.grid.initSlides(d):n.grid&&n.grid.unsetSlides();let E;const S=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(x=>typeof t.breakpoints[x].slidesPerView<"u").length>0;for(let x=0;x<h;x+=1){E=0;let C;if(d[x]&&(C=d[x]),T&&n.grid.updateSlide(x,C,d),!(d[x]&&ns(C,"display")==="none")){if(t.slidesPerView==="auto"){S&&(d[x].style[n.getDirectionLabel("width")]="");const A=getComputedStyle(C),P=C.style.transform,R=C.style.webkitTransform;if(P&&(C.style.transform="none"),R&&(C.style.webkitTransform="none"),t.roundLengths)E=n.isHorizontal()?Oh(C,"width",!0):Oh(C,"height",!0);else{const L=e(A,"width"),U=e(A,"padding-left"),B=e(A,"padding-right"),F=e(A,"margin-left"),G=e(A,"margin-right"),O=A.getPropertyValue("box-sizing");if(O&&O==="border-box")E=L+F+G;else{const{clientWidth:ee,offsetWidth:se}=C;E=L+U+B+F+G+(se-ee)}}P&&(C.style.transform=P),R&&(C.style.webkitTransform=R),t.roundLengths&&(E=Math.floor(E))}else E=(s-(t.slidesPerView-1)*_)/t.slidesPerView,t.roundLengths&&(E=Math.floor(E)),d[x]&&(d[x].style[n.getDirectionLabel("width")]=`${E}px`);d[x]&&(d[x].swiperSlideSize=E),m.push(E),t.centeredSlides?(b=b+E/2+w/2+_,w===0&&x!==0&&(b=b-s/2-_),x===0&&(b=b-s/2-_),Math.abs(b)<1/1e3&&(b=0),t.roundLengths&&(b=Math.floor(b)),M%t.slidesPerGroup===0&&f.push(b),u.push(b)):(t.roundLengths&&(b=Math.floor(b)),(M-Math.min(n.params.slidesPerGroupSkip,M))%n.params.slidesPerGroup===0&&f.push(b),u.push(b),b=b+E+_),n.virtualSize+=E+_,w=E,M+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+v,a&&o&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+_}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+_}px`),T&&n.grid.updateWrapperSize(E,f),!t.centeredSlides){const x=[];for(let C=0;C<f.length;C+=1){let A=f[C];t.roundLengths&&(A=Math.floor(A)),f[C]<=n.virtualSize-s&&x.push(A)}f=x,Math.floor(n.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-s)}if(l&&t.loop){const x=m[0]+_;if(t.slidesPerGroup>1){const C=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),A=x*t.slidesPerGroup;for(let P=0;P<C;P+=1)f.push(f[f.length-1]+A)}for(let C=0;C<n.virtual.slidesBefore+n.virtual.slidesAfter;C+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+x),u.push(u[u.length-1]+x),n.virtualSize+=x}if(f.length===0&&(f=[0]),_!==0){const x=n.isHorizontal()&&a?"marginLeft":n.getDirectionLabel("marginRight");d.filter((C,A)=>!t.cssMode||t.loop?!0:A!==d.length-1).forEach(C=>{C.style[x]=`${_}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let x=0;m.forEach(A=>{x+=A+(_||0)}),x-=_;const C=x-s;f=f.map(A=>A<=0?-p:A>C?C+v:A)}if(t.centerInsufficientSlides){let x=0;m.forEach(A=>{x+=A+(_||0)}),x-=_;const C=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(x+C<s){const A=(s-x-C)/2;f.forEach((P,R)=>{f[R]=P-A}),u.forEach((P,R)=>{u[R]=P+A})}}if(Object.assign(n,{slides:d,snapGrid:f,slidesGrid:u,slidesSizesGrid:m}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){Su(i,"--swiper-centered-offset-before",`${-f[0]}px`),Su(i,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const x=-n.snapGrid[0],C=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(A=>A+x),n.slidesGrid=n.slidesGrid.map(A=>A+C)}if(h!==c&&n.emit("slidesLengthChange"),f.length!==g&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),u.length!==y&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const x=`${t.containerModifierClass}backface-hidden`,C=n.el.classList.contains(x);h<=t.maxBackfaceHiddenSlides?C||n.el.classList.add(x):C&&n.el.classList.remove(x)}}function RC(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;r=o>r?o:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function LC(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}const Y_=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function DC(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;r&&(a=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const c=i[l];let d=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(d-=i[0].swiperSlideOffset);const h=(a+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+o),f=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+o),u=-(a-d),m=u+e.slidesSizesGrid[l],p=u>=0&&u<=e.size-e.slidesSizesGrid[l],v=u>=0&&u<e.size-1||m>1&&m<=e.size||u<=0&&m>=e.size;v&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),Y_(c,v,t.slideVisibleClass),Y_(c,p,t.slideFullyVisibleClass),c.progress=r?-h:h,c.originalProgress=r?-f:f}}function IC(n){const e=this;if(typeof n>"u"){const d=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*d||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,c=a;if(i===0)r=0,s=!0,a=!0;else{r=(n-e.minTranslate())/i;const d=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;s=d||r<=0,a=h||r>=1,d&&(r=0),h&&(r=1)}if(t.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[d],u=e.slidesGrid[h],m=e.slidesGrid[e.slidesGrid.length-1],p=Math.abs(n);p>=f?o=(p-f)/m:o=(p+m-u)/m,o>1&&(o-=1)}Object.assign(e,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}const Fh=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function OC(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,a=n.grid&&t.grid&&t.grid.rows>1,o=h=>xn(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0];let l,c,d;if(s)if(t.loop){let h=r-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=o(`[data-swiper-slide-index="${h}"]`)}else l=o(`[data-swiper-slide-index="${r}"]`);else a?(l=e.filter(h=>h.column===r)[0],d=e.filter(h=>h.column===r+1)[0],c=e.filter(h=>h.column===r-1)[0]):l=e[r];l&&(a||(d=xC(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d&&(d=e[0]),c=yC(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{Fh(h,h===l,t.slideActiveClass),Fh(h,h===d,t.slideNextClass),Fh(h,h===c,t.slidePrevClass)}),n.emitSlidesClasses()}const Au=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Bh=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},zh=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=r,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+i+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&Bh(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let a=r-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<r||o>s)&&Bh(n,o)}else for(let a=Math.max(r-e,0);a<=Math.min(s+e,t-1);a+=1)a!==r&&(a>s||a<r)&&Bh(n,a)};function NC(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function kC(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,c;const d=u=>{let m=u-e.virtual.slidesBefore;return m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),m};if(typeof l>"u"&&(l=NC(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const u=Math.min(r.slidesPerGroupSkip,l);c=u+Math.floor((l-u)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const h=e.grid&&r.grid&&r.grid.rows>1;let f;if(e.virtual&&r.virtual.enabled&&r.loop)f=d(l);else if(h){const u=e.slides.filter(p=>p.column===l)[0];let m=parseInt(u.getAttribute("data-swiper-slide-index"),10);Number.isNaN(m)&&(m=Math.max(e.slides.indexOf(u),0)),f=Math.floor(m/r.grid.rows)}else if(e.slides[l]){const u=e.slides[l].getAttribute("data-swiper-slide-index");u?f=parseInt(u,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:f,previousIndex:s,activeIndex:l}),e.initialized&&zh(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function UC(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!r&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(r=o)});let s=!1,a;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){s=!0,a=o;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var FC={updateSize:CC,updateSlides:PC,updateAutoHeight:RC,updateSlidesOffset:LC,updateSlidesProgress:DC,updateProgress:IC,updateSlidesClasses:OC,updateActiveIndex:kC,updateClickedSlide:UC};function BC(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let a=gC(s,n);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function zC(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=i?-n:n:l=n,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:r.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let d;const h=t.maxTranslate()-t.minTranslate();h===0?d=0:d=(n-t.minTranslate())/h,d!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function VC(){return-this.snapGrid[0]}function HC(){return-this.snapGrid[this.snapGrid.length-1]}function GC(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let d;if(i&&n>l?d=l:i&&n<c?d=c:d=n,s.updateProgress(d),a.cssMode){const h=s.isHorizontal();if(e===0)o[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return G_({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;o.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var WC={getTranslate:BC,setTranslate:zC,minTranslate:VC,maxTranslate:HC,translateTo:GC};function XC(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function j_(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:a}=e;let o=i;if(o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit(`transition${r}`),t&&s!==a){if(o==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),o==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function $C(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),j_({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function qC(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),j_({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var YC={setTransition:XC,transitionStart:$C,transitionEnd:qC};function jC(n,e,t,i,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:f,wrapperEl:u,enabled:m}=s;if(!m&&!i&&!r||s.destroyed||s.animating&&o.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const p=Math.min(s.params.slidesPerGroupSkip,a);let v=p+Math.floor((a-p)/s.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const g=-l[v];if(o.normalizeSlideIndex)for(let _=0;_<c.length;_+=1){const b=-Math.floor(g*100),w=Math.floor(c[_]*100),M=Math.floor(c[_+1]*100);typeof c[_+1]<"u"?b>=w&&b<M-(M-w)/2?a=_:b>=w&&b<M&&(a=_+1):b>=w&&(a=_)}if(s.initialized&&a!==h&&(!s.allowSlideNext&&(f?g>s.translate&&g>s.minTranslate():g<s.translate&&g<s.minTranslate())||!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(h||0)!==a))return!1;a!==(d||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(g);let y;if(a>h?y="next":a<h?y="prev":y="reset",f&&-g===s.translate||!f&&g===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(g),y!=="reset"&&(s.transitionStart(t,y),s.transitionEnd(t,y)),!1;if(o.cssMode){const _=s.isHorizontal(),b=f?g:-g;if(e===0){const w=s.virtual&&s.params.virtual.enabled;w&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),w&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{u[_?"scrollLeft":"scrollTop"]=b})):u[_?"scrollLeft":"scrollTop"]=b,w&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return G_({swiper:s,targetPosition:b,side:_?"left":"top"}),!0;u.scrollTo({[_?"left":"top"]:b,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(g),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,y),e===0?s.transitionEnd(t,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(b){!s||s.destroyed||b.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function KC(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let a=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a=a+r.virtual.slidesBefore;else{let o;if(s){const f=a*r.params.grid.rows;o=r.slides.filter(u=>u.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=r.getSlideIndexByData(a);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let d=r.params.slidesPerView;d==="auto"?d=r.slidesPerViewDynamic():(d=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&d%2===0&&(d=d+1));let h=l-o<d;if(c&&(h=h||o<Math.ceil(d/2)),i&&c&&r.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=c?o<r.activeIndex?"prev":"next":o-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?o+1:o-l+1,slideRealIndex:f==="next"?r.realIndex:void 0})}if(s){const f=a*r.params.grid.rows;a=r.slides.filter(u=>u.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,e,t,i)}),r}function ZC(n,e,t){e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:a}=i;if(!r||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,c=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function QC(n,e,t){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const d=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const h=o?i.translate:-i.translate;function f(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const u=f(h),m=s.map(g=>f(g));let p=s[m.indexOf(u)-1];if(typeof p>"u"&&r.cssMode){let g;s.forEach((y,_)=>{u>=y&&(g=_)}),typeof g<"u"&&(p=s[g>0?g-1:g])}let v=0;if(typeof p<"u"&&(v=a.indexOf(p),v<0&&(v=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(v=v-i.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),r.rewind&&i.isBeginning){const g=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(g,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(v,n,e,t)}),!0;return i.slideTo(v,n,e,t)}function JC(n,e,t){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function eP(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const c=r.snapGrid[o],d=r.snapGrid[o+1];l-c>(d-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[o-1],d=r.snapGrid[o];l-c<=(d-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function tP(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const a=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(xn(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),no(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(xn(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),no(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var iP={slideTo:jC,slideToLoop:KC,slideNext:ZC,slidePrev:QC,slideReset:JC,slideToClosest:eP,slideToClickedSlide:tP};function nP(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{xn(i,`.${t.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},s=e.grid&&t.grid&&t.grid.rows>1,a=t.slidesPerGroup*(s?t.grid.rows:1),o=e.slides.length%a!==0,l=s&&e.slides.length%t.grid.rows!==0,c=d=>{for(let h=0;h<d;h+=1){const f=e.isElement?Ml("swiper-slide",[t.slideBlankClass]):Ml("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(f)}};if(o){if(t.loopAddBlankSlides){const d=a-e.slides.length%a;c(d),e.recalcSlides(),e.updateSlides()}else Mu("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(t.loopAddBlankSlides){const d=t.grid.rows-e.slides.length%t.grid.rows;c(d),e.recalcSlides(),e.updateSlides()}else Mu("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function rP(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:d,allowSlideNext:h,slidesEl:f,params:u}=l,{centeredSlides:m}=u;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&u.virtual.enabled){t&&(!u.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):u.centeredSlides&&l.snapIndex<u.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=h,l.emit("loopFix");return}let p=u.slidesPerView;p==="auto"?p=l.slidesPerViewDynamic():(p=Math.ceil(parseFloat(u.slidesPerView,10)),m&&p%2===0&&(p=p+1));const v=u.slidesPerGroupAuto?p:u.slidesPerGroup;let g=v;g%v!==0&&(g+=v-g%v),g+=u.loopAdditionalSlides,l.loopedSlides=g;const y=l.grid&&u.grid&&u.grid.rows>1;c.length<p+g?Mu("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&u.grid.fill==="row"&&Mu("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const _=[],b=[];let w=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(P=>P.classList.contains(u.slideActiveClass))[0]):w=s;const M=i==="next"||!i,T=i==="prev"||!i;let E=0,S=0;const x=y?Math.ceil(c.length/u.grid.rows):c.length,A=(y?c[s].column:s)+(m&&typeof r>"u"?-p/2+.5:0);if(A<g){E=Math.max(g-A,v);for(let P=0;P<g-A;P+=1){const R=P-Math.floor(P/x)*x;if(y){const L=x-R-1;for(let U=c.length-1;U>=0;U-=1)c[U].column===L&&_.push(U)}else _.push(x-R-1)}}else if(A+p>x-g){S=Math.max(A-(x-g*2),v);for(let P=0;P<S;P+=1){const R=P-Math.floor(P/x)*x;y?c.forEach((L,U)=>{L.column===R&&b.push(U)}):b.push(R)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),T&&_.forEach(P=>{c[P].swiperLoopMoveDOM=!0,f.prepend(c[P]),c[P].swiperLoopMoveDOM=!1}),M&&b.forEach(P=>{c[P].swiperLoopMoveDOM=!0,f.append(c[P]),c[P].swiperLoopMoveDOM=!1}),l.recalcSlides(),u.slidesPerView==="auto"?l.updateSlides():y&&(_.length>0&&T||b.length>0&&M)&&l.slides.forEach((P,R)=>{l.grid.updateSlide(R,P,l.slides)}),u.watchSlidesProgress&&l.updateSlidesOffset(),t){if(_.length>0&&T){if(typeof e>"u"){const P=l.slidesGrid[w],L=l.slidesGrid[w+E]-P;o?l.setTranslate(l.translate-L):(l.slideTo(w+Math.ceil(E),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-L,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-L))}else if(r){const P=y?_.length/u.grid.rows:_.length;l.slideTo(l.activeIndex+P,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(b.length>0&&M)if(typeof e>"u"){const P=l.slidesGrid[w],L=l.slidesGrid[w-S]-P;o?l.setTranslate(l.translate-L):(l.slideTo(w-S,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-L,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-L))}else{const P=y?b.length/u.grid.rows:b.length;l.slideTo(l.activeIndex-P,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=h,l.controller&&l.controller.control&&!a){const P={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(R=>{!R.destroyed&&R.params.loop&&R.loopFix({...P,slideTo:R.params.slidesPerView===u.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...P,slideTo:l.controller.control.params.slidesPerView===u.slidesPerView?t:!1})}l.emit("loopFix")}function sP(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var aP={loopCreate:nP,loopFix:rP,loopDestroy:sP};function oP(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function lP(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var cP={setGrabCursor:oP,unsetGrabCursor:lP};function uP(n,e){e===void 0&&(e=this);function t(i){if(!i||i===ts()||i===ki())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function K_(n,e,t){const i=ki(),{params:r}=n,s=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return s&&(t<=a||t>=i.innerWidth-a)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function dP(n){const e=this,t=ts();let i=n;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){K_(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",d=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&d&&(l=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(f?uP(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;a.currentX=i.pageX,a.currentY=i.pageY;const u=a.currentX,m=a.currentY;if(!K_(e,i,u))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=u,a.startY=m,r.touchStartTime=yn(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let p=!0;l.matches(r.focusableElements)&&(p=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();const v=p&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||v)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function fP(n){const e=ts(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(M=>M.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const d=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),i.touchStartTime=yn());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,u=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(f**2+u**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let M;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+u*u>=25&&(M=Math.atan2(Math.abs(u),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?M>r.touchAngle:90-M>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let m=t.isHorizontal()?f:u,p=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),p=Math.abs(p)*(a?1:-1)),s.diff=m,m*=r.touchRatio,a&&(m=-m,p=-p);const v=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=p>0?"prev":"next";const g=t.params.loop&&!r.cssMode,y=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(g&&y&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const M=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(M)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let _;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&v!==t.touchesDirection&&g&&y&&Math.abs(m)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;let b=!0,w=r.resistanceRatio;if(r.touchReleaseOnEdges&&(w=0),m>0?(g&&y&&!_&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(b=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+m)**w))):m<0&&(g&&y&&!_&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(b=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-m)**w))),b&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function hP(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(w=>w.identifier===t.touchId)[0],!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:c,enabled:d}=e;if(!d||!a.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&a.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}a.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=yn(),f=h-t.touchStartTime;if(e.allowClick){const w=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(w&&w[0]||i.target,w),e.emit("tap click",i),f<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=yn(),no(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||o.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let u;if(a.followFinger?u=l?e.translate:-e.translate:u=-t.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:u});return}const m=u>=-e.maxTranslate()&&!e.params.loop;let p=0,v=e.slidesSizesGrid[0];for(let w=0;w<c.length;w+=w<a.slidesPerGroupSkip?1:a.slidesPerGroup){const M=w<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof c[w+M]<"u"?(m||u>=c[w]&&u<c[w+M])&&(p=w,v=c[w+M]-c[w]):(m||u>=c[w])&&(p=w,v=c[c.length-1]-c[c.length-2])}let g=null,y=null;a.rewind&&(e.isBeginning?y=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const _=(u-c[p])/v,b=p<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(f>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(_>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?g:p+b):e.slideTo(p)),e.swipeDirection==="prev"&&(_>1-a.longSwipesRatio?e.slideTo(p+b):y!==null&&_<0&&Math.abs(_)>a.longSwipesRatio?e.slideTo(y):e.slideTo(p))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(p+b):e.slideTo(p):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:p+b),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:p))}}function Z_(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function pP(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function mP(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function gP(n){const e=this;Au(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function vP(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const Q_=(n,e)=>{const t=ts(),{params:i,el:r,wrapperEl:s,device:a}=n,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:o}),r[l]("touchstart",n.onTouchStart,{passive:!1}),r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Z_,!0):n[c]("observerUpdate",Z_,!0),r[l]("load",n.onLoad,{capture:!0})};function _P(){const n=this,{params:e}=n;n.onTouchStart=dP.bind(n),n.onTouchMove=fP.bind(n),n.onTouchEnd=hP.bind(n),n.onDocumentTouchStart=vP.bind(n),e.cssMode&&(n.onScroll=mP.bind(n)),n.onClick=pP.bind(n),n.onLoad=gP.bind(n),Q_(n,"on")}function yP(){Q_(this,"off")}var xP={attachEvents:_P,detachEvents:yP};const J_=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function bP(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||n.originalParams,c=J_(n,i),d=J_(n,l),h=n.params.grabCursor,f=l.grabCursor,u=i.enabled;c&&!d?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&d&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),h&&!f?n.unsetGrabCursor():!h&&f&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(_=>{if(typeof l[_]>"u")return;const b=i[_]&&i[_].enabled,w=l[_]&&l[_].enabled;b&&!w&&n[_].disable(),!b&&w&&n[_].enable()});const m=l.direction&&l.direction!==i.direction,p=i.loop&&(l.slidesPerView!==i.slidesPerView||m),v=i.loop;m&&t&&n.changeDirection(),on(n.params,l);const g=n.params.enabled,y=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),u&&!g?n.disable():!u&&g&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(p?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!v&&y?(n.loopCreate(e),n.updateSlides()):v&&!y&&n.loopDestroy()),n.emit("breakpoint",l)}function wP(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=ki(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var SP={setBreakpoint:bP,getBreakpoint:wP};function MP(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function TP(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,a=MP(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),n.emitContainerClasses()}function EP(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var AP={addClasses:TP,removeClasses:EP};function CP(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var PP={checkOverflow:CP},ey={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function RP(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){on(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){on(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),on(e,i)}}const Vh={eventsEmitter:AC,update:FC,translate:WC,transition:YC,slide:iP,loop:aP,grabCursor:cP,events:xP,breakpoints:SP,checkOverflow:PP,classes:AP},Hh={};class qi{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=on({},t),e&&!t.el&&(t.el=e);const a=ts();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const d=[];return a.querySelectorAll(t.el).forEach(h=>{const f=on({},t,{el:h});d.push(new qi(f))}),d}const o=this;o.__swiper__=!0,o.support=$_(),o.device=q_({userAgent:t.userAgent}),o.browser=MC(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(d=>{d({params:t,swiper:o,extendParams:RP(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=on({},ey,l);return o.params=on({},c,Hh,t),o.originalParams=on({},o.params),o.passedParams=on({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(d=>{o.on(d,o.params.on[d])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=xn(t,`.${i.slideClass}, swiper-slide`),s=Tu(r[0]);return Tu(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=xn(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let d=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,f;for(let u=c+1;u<s.length;u+=1)s[u]&&!f&&(h+=Math.ceil(s[u].swiperSlideSize),d+=1,h>l&&(f=!0));for(let u=c-1;u>=0;u-=1)s[u]&&!f&&(h+=s[u].swiperSlideSize,d+=1,h>l&&(f=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(t?a[h]+o[h]-a[c]<l:a[h]-a[c]<l)&&(d+=1);else for(let h=c-1;h>=0;h-=1)a[c]-a[h]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&Au(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):xn(i,r())[0];return!a&&t.params.createElements&&(a=Ml("div",t.params.wrapperClass),i.append(a),xn(i,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:i,wrapperEl:a,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||ns(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||ns(i,"direction")==="rtl"),wrongRTL:ns(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?Au(t,s):s.addEventListener("load",a=>{Au(t,a.target)})}),zh(t),t.initialized=!0,zh(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,pC(i)),i.destroyed=!0),null}static extendDefaults(e){on(Hh,e)}static get extendedDefaults(){return Hh}static get defaults(){return ey}static installModule(e){qi.prototype.__modules__||(qi.prototype.__modules__=[]);const t=qi.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>qi.installModule(t)),qi):(qi.installModule(e),qi)}}Object.keys(Vh).forEach(n=>{Object.keys(Vh[n]).forEach(e=>{qi.prototype[e]=Vh[n][e]})}),qi.use([TC,EC]);function ty(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=ki();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let a,o=yn(),l;const c=[];function d(_){let T=0,E=0,S=0,x=0;return"detail"in _&&(E=_.detail),"wheelDelta"in _&&(E=-_.wheelDelta/120),"wheelDeltaY"in _&&(E=-_.wheelDeltaY/120),"wheelDeltaX"in _&&(T=-_.wheelDeltaX/120),"axis"in _&&_.axis===_.HORIZONTAL_AXIS&&(T=E,E=0),S=T*10,x=E*10,"deltaY"in _&&(x=_.deltaY),"deltaX"in _&&(S=_.deltaX),_.shiftKey&&!S&&(S=x,x=0),(S||x)&&_.deltaMode&&(_.deltaMode===1?(S*=40,x*=40):(S*=800,x*=800)),S&&!T&&(T=S<1?-1:1),x&&!E&&(E=x<1?-1:1),{spinX:T,spinY:E,pixelX:S,pixelY:x}}function h(){e.enabled&&(e.mouseEntered=!0)}function f(){e.enabled&&(e.mouseEntered=!1)}function u(_){return e.params.mousewheel.thresholdDelta&&_.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&yn()-o<e.params.mousewheel.thresholdTime?!1:_.delta>=6&&yn()-o<60?!0:(_.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),r("scroll",_.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),r("scroll",_.raw)),o=new s.Date().getTime(),!1)}function m(_){const b=e.params.mousewheel;if(_.direction<0){if(e.isEnd&&!e.params.loop&&b.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&b.releaseOnEdges)return!0;return!1}function p(_){let b=_,w=!0;if(!e.enabled||_.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const M=e.params.mousewheel;e.params.cssMode&&b.preventDefault();let T=e.el;e.params.mousewheel.eventsTarget!=="container"&&(T=document.querySelector(e.params.mousewheel.eventsTarget));const E=T&&T.contains(b.target);if(!e.mouseEntered&&!E&&!M.releaseOnEdges)return!0;b.originalEvent&&(b=b.originalEvent);let S=0;const x=e.rtlTranslate?-1:1,C=d(b);if(M.forceToAxis)if(e.isHorizontal())if(Math.abs(C.pixelX)>Math.abs(C.pixelY))S=-C.pixelX*x;else return!0;else if(Math.abs(C.pixelY)>Math.abs(C.pixelX))S=-C.pixelY;else return!0;else S=Math.abs(C.pixelX)>Math.abs(C.pixelY)?-C.pixelX*x:-C.pixelY;if(S===0)return!0;M.invert&&(S=-S);let A=e.getTranslate()+S*M.sensitivity;if(A>=e.minTranslate()&&(A=e.minTranslate()),A<=e.maxTranslate()&&(A=e.maxTranslate()),w=e.params.loop?!0:!(A===e.minTranslate()||A===e.maxTranslate()),w&&e.params.nested&&b.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const P={time:yn(),delta:Math.abs(S),direction:Math.sign(S),raw:_};c.length>=2&&c.shift();const R=c.length?c[c.length-1]:void 0;if(c.push(P),R?(P.direction!==R.direction||P.delta>R.delta||P.time>R.time+150)&&u(P):u(P),m(P))return!0}else{const P={time:yn(),delta:Math.abs(S),direction:Math.sign(S)},R=l&&P.time<l.time+500&&P.delta<=l.delta&&P.direction===l.direction;if(!R){l=void 0;let L=e.getTranslate()+S*M.sensitivity;const U=e.isBeginning,B=e.isEnd;if(L>=e.minTranslate()&&(L=e.minTranslate()),L<=e.maxTranslate()&&(L=e.maxTranslate()),e.setTransition(0),e.setTranslate(L),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!U&&e.isBeginning||!B&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:P.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(a),a=void 0,c.length>=15&&c.shift();const F=c.length?c[c.length-1]:void 0,G=c[0];if(c.push(P),F&&(P.delta>F.delta||P.direction!==F.direction))c.splice(0);else if(c.length>=15&&P.time-G.time<500&&G.delta-P.delta>=1&&P.delta<=6){const O=S>0?.8:.2;l=P,c.splice(0),a=no(()=>{e.slideToClosest(e.params.speed,!0,void 0,O)},0)}a||(a=no(()=>{l=P,c.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)},500))}if(R||r("scroll",b),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),M.releaseOnEdges&&(L===e.minTranslate()||L===e.maxTranslate()))return!0}}return b.preventDefault?b.preventDefault():b.returnValue=!1,!1}function v(_){let b=e.el;e.params.mousewheel.eventsTarget!=="container"&&(b=document.querySelector(e.params.mousewheel.eventsTarget)),b[_]("mouseenter",h),b[_]("mouseleave",f),b[_]("wheel",p)}function g(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",p),!0):e.mousewheel.enabled?!1:(v("addEventListener"),e.mousewheel.enabled=!0,!0)}function y(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,p),!0):e.mousewheel.enabled?(v("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}i("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&y(),e.params.mousewheel.enabled&&g()}),i("destroy",()=>{e.params.cssMode&&g(),e.mousewheel.enabled&&y()}),Object.assign(e.mousewheel,{enable:g,disable:y})}function Gh(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let s=xn(n.el,`.${i[r]}`)[0];s||(s=Ml("div",i[r]),s.className=i[r],n.el.append(s)),t[r]=s,e[r]=s}}),t}function Wh(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(m){let p;return m&&typeof m=="string"&&e.isElement&&(p=e.el.querySelector(m),p)?p:(m&&(typeof m=="string"&&(p=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&p&&p.length>1&&e.el.querySelectorAll(m).length===1?p=e.el.querySelector(m):p&&p.length===1&&(p=p[0])),m&&!p?m:p)}function a(m,p){const v=e.params.navigation;m=Jt(m),m.forEach(g=>{g&&(g.classList[p?"add":"remove"](...v.disabledClass.split(" ")),g.tagName==="BUTTON"&&(g.disabled=p),e.params.watchOverflow&&e.enabled&&g.classList[e.isLocked?"add":"remove"](v.lockClass))})}function o(){const{nextEl:m,prevEl:p}=e.navigation;if(e.params.loop){a(p,!1),a(m,!1);return}a(p,e.isBeginning&&!e.params.rewind),a(m,e.isEnd&&!e.params.rewind)}function l(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){const m=e.params.navigation;if(e.params.navigation=Gh(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let p=s(m.nextEl),v=s(m.prevEl);Object.assign(e.navigation,{nextEl:p,prevEl:v}),p=Jt(p),v=Jt(v);const g=(y,_)=>{y&&y.addEventListener("click",_==="next"?c:l),!e.enabled&&y&&y.classList.add(...m.lockClass.split(" "))};p.forEach(y=>g(y,"next")),v.forEach(y=>g(y,"prev"))}function h(){let{nextEl:m,prevEl:p}=e.navigation;m=Jt(m),p=Jt(p);const v=(g,y)=>{g.removeEventListener("click",y==="next"?c:l),g.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(g=>v(g,"next")),p.forEach(g=>v(g,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?u():(d(),o())}),i("toEdge fromEdge lock unlock",()=>{o()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:m,prevEl:p}=e.navigation;if(m=Jt(m),p=Jt(p),e.enabled){o();return}[...m,...p].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),i("click",(m,p)=>{let{nextEl:v,prevEl:g}=e.navigation;v=Jt(v),g=Jt(g);const y=p.target;if(e.params.navigation.hideOnClick&&!g.includes(y)&&!v.includes(y)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let _;v.length?_=v[0].classList.contains(e.params.navigation.hiddenClass):g.length&&(_=g[0].classList.contains(e.params.navigation.hiddenClass)),r(_===!0?"navigationShow":"navigationHide"),[...v,...g].filter(b=>!!b).forEach(b=>b.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),o()},u=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:u,update:o,init:d,destroy:h})}function ro(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function iy(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:g=>g,formatFractionTotal:g=>g,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(g,y){const{bulletActiveClass:_}=e.params.pagination;g&&(g=g[`${y==="prev"?"previous":"next"}ElementSibling`],g&&(g.classList.add(`${_}-${y}`),g=g[`${y==="prev"?"previous":"next"}ElementSibling`],g&&g.classList.add(`${_}-${y}-${y}`)))}function d(g){const y=g.target.closest(ro(e.params.pagination.bulletClass));if(!y)return;g.preventDefault();const _=Tu(y)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===_)return;e.slideToLoop(_)}else e.slideTo(_)}function h(){const g=e.rtl,y=e.params.pagination;if(l())return;let _=e.pagination.el;_=Jt(_);let b,w;const M=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,T=e.params.loop?Math.ceil(M/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(w=e.previousRealIndex||0,b=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(b=e.snapIndex,w=e.previousSnapIndex):(w=e.previousIndex||0,b=e.activeIndex||0),y.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const E=e.pagination.bullets;let S,x,C;if(y.dynamicBullets&&(a=Oh(E[0],e.isHorizontal()?"width":"height",!0),_.forEach(A=>{A.style[e.isHorizontal()?"width":"height"]=`${a*(y.dynamicMainBullets+4)}px`}),y.dynamicMainBullets>1&&w!==void 0&&(o+=b-(w||0),o>y.dynamicMainBullets-1?o=y.dynamicMainBullets-1:o<0&&(o=0)),S=Math.max(b-o,0),x=S+(Math.min(E.length,y.dynamicMainBullets)-1),C=(x+S)/2),E.forEach(A=>{const P=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(R=>`${y.bulletActiveClass}${R}`)].map(R=>typeof R=="string"&&R.includes(" ")?R.split(" "):R).flat();A.classList.remove(...P)}),_.length>1)E.forEach(A=>{const P=Tu(A);P===b?A.classList.add(...y.bulletActiveClass.split(" ")):e.isElement&&A.setAttribute("part","bullet"),y.dynamicBullets&&(P>=S&&P<=x&&A.classList.add(...`${y.bulletActiveClass}-main`.split(" ")),P===S&&c(A,"prev"),P===x&&c(A,"next"))});else{const A=E[b];if(A&&A.classList.add(...y.bulletActiveClass.split(" ")),e.isElement&&E.forEach((P,R)=>{P.setAttribute("part",R===b?"bullet-active":"bullet")}),y.dynamicBullets){const P=E[S],R=E[x];for(let L=S;L<=x;L+=1)E[L]&&E[L].classList.add(...`${y.bulletActiveClass}-main`.split(" "));c(P,"prev"),c(R,"next")}}if(y.dynamicBullets){const A=Math.min(E.length,y.dynamicMainBullets+4),P=(a*A-a)/2-C*a,R=g?"right":"left";E.forEach(L=>{L.style[e.isHorizontal()?R:"top"]=`${P}px`})}}_.forEach((E,S)=>{if(y.type==="fraction"&&(E.querySelectorAll(ro(y.currentClass)).forEach(x=>{x.textContent=y.formatFractionCurrent(b+1)}),E.querySelectorAll(ro(y.totalClass)).forEach(x=>{x.textContent=y.formatFractionTotal(T)})),y.type==="progressbar"){let x;y.progressbarOpposite?x=e.isHorizontal()?"vertical":"horizontal":x=e.isHorizontal()?"horizontal":"vertical";const C=(b+1)/T;let A=1,P=1;x==="horizontal"?A=C:P=C,E.querySelectorAll(ro(y.progressbarFillClass)).forEach(R=>{R.style.transform=`translate3d(0,0,0) scaleX(${A}) scaleY(${P})`,R.style.transitionDuration=`${e.params.speed}ms`})}y.type==="custom"&&y.renderCustom?(E.innerHTML=y.renderCustom(e,b+1,T),S===0&&r("paginationRender",E)):(S===0&&r("paginationRender",E),r("paginationUpdate",E)),e.params.watchOverflow&&e.enabled&&E.classList[e.isLocked?"add":"remove"](y.lockClass)})}function f(){const g=e.params.pagination;if(l())return;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let _=e.pagination.el;_=Jt(_);let b="";if(g.type==="bullets"){let w=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&w>y&&(w=y);for(let M=0;M<w;M+=1)g.renderBullet?b+=g.renderBullet.call(e,M,g.bulletClass):b+=`<${g.bulletElement} ${e.isElement?'part="bullet"':""} class="${g.bulletClass}"></${g.bulletElement}>`}g.type==="fraction"&&(g.renderFraction?b=g.renderFraction.call(e,g.currentClass,g.totalClass):b=`<span class="${g.currentClass}"></span> / <span class="${g.totalClass}"></span>`),g.type==="progressbar"&&(g.renderProgressbar?b=g.renderProgressbar.call(e,g.progressbarFillClass):b=`<span class="${g.progressbarFillClass}"></span>`),e.pagination.bullets=[],_.forEach(w=>{g.type!=="custom"&&(w.innerHTML=b||""),g.type==="bullets"&&e.pagination.bullets.push(...w.querySelectorAll(ro(g.bulletClass)))}),g.type!=="custom"&&r("paginationRender",_[0])}function u(){e.params.pagination=Gh(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const g=e.params.pagination;if(!g.el)return;let y;typeof g.el=="string"&&e.isElement&&(y=e.el.querySelector(g.el)),!y&&typeof g.el=="string"&&(y=[...document.querySelectorAll(g.el)]),y||(y=g.el),!(!y||y.length===0)&&(e.params.uniqueNavElements&&typeof g.el=="string"&&Array.isArray(y)&&y.length>1&&(y=[...e.el.querySelectorAll(g.el)],y.length>1&&(y=y.filter(_=>X_(_,".swiper")[0]===e.el)[0])),Array.isArray(y)&&y.length===1&&(y=y[0]),Object.assign(e.pagination,{el:y}),y=Jt(y),y.forEach(_=>{g.type==="bullets"&&g.clickable&&_.classList.add(...(g.clickableClass||"").split(" ")),_.classList.add(g.modifierClass+g.type),_.classList.add(e.isHorizontal()?g.horizontalClass:g.verticalClass),g.type==="bullets"&&g.dynamicBullets&&(_.classList.add(`${g.modifierClass}${g.type}-dynamic`),o=0,g.dynamicMainBullets<1&&(g.dynamicMainBullets=1)),g.type==="progressbar"&&g.progressbarOpposite&&_.classList.add(g.progressbarOppositeClass),g.clickable&&_.addEventListener("click",d),e.enabled||_.classList.add(g.lockClass)}))}function m(){const g=e.params.pagination;if(l())return;let y=e.pagination.el;y&&(y=Jt(y),y.forEach(_=>{_.classList.remove(g.hiddenClass),_.classList.remove(g.modifierClass+g.type),_.classList.remove(e.isHorizontal()?g.horizontalClass:g.verticalClass),g.clickable&&(_.classList.remove(...(g.clickableClass||"").split(" ")),_.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(_=>_.classList.remove(...g.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const g=e.params.pagination;let{el:y}=e.pagination;y=Jt(y),y.forEach(_=>{_.classList.remove(g.horizontalClass,g.verticalClass),_.classList.add(e.isHorizontal()?g.horizontalClass:g.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?v():(u(),f(),h())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),i("snapIndexChange",()=>{h()}),i("snapGridLengthChange",()=>{f(),h()}),i("destroy",()=>{m()}),i("enable disable",()=>{let{el:g}=e.pagination;g&&(g=Jt(g),g.forEach(y=>y.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{h()}),i("click",(g,y)=>{const _=y.target,b=Jt(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&b&&b.length>0&&!_.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&_===e.navigation.nextEl||e.navigation.prevEl&&_===e.navigation.prevEl))return;const w=b[0].classList.contains(e.params.pagination.hiddenClass);r(w===!0?"paginationShow":"paginationHide"),b.forEach(M=>M.classList.toggle(e.params.pagination.hiddenClass))}});const p=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:g}=e.pagination;g&&(g=Jt(g),g.forEach(y=>y.classList.remove(e.params.pagination.paginationDisabledClass))),u(),f(),h()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:g}=e.pagination;g&&(g=Jt(g),g.forEach(y=>y.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:p,disable:v,render:f,update:h,init:u,destroy:m})}function ny(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=ts();let a=!1,o=null,l=null,c,d,h,f;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function u(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:A,rtlTranslate:P}=e,{dragEl:R,el:L}=A,U=e.params.scrollbar,B=e.params.loop?e.progressLoop:e.progress;let F=d,G=(h-d)*B;P?(G=-G,G>0?(F=d-G,G=0):-G+d>h&&(F=h+G)):G<0?(F=d+G,G=0):G+d>h&&(F=h-G),e.isHorizontal()?(R.style.transform=`translate3d(${G}px, 0, 0)`,R.style.width=`${F}px`):(R.style.transform=`translate3d(0px, ${G}px, 0)`,R.style.height=`${F}px`),U.hide&&(clearTimeout(o),L.style.opacity=1,o=setTimeout(()=>{L.style.opacity=0,L.style.transitionDuration="400ms"},1e3))}function m(A){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${A}ms`)}function p(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:A}=e,{dragEl:P,el:R}=A;P.style.width="",P.style.height="",h=e.isHorizontal()?R.offsetWidth:R.offsetHeight,f=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?d=h*f:d=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?P.style.width=`${d}px`:P.style.height=`${d}px`,f>=1?R.style.display="none":R.style.display="",e.params.scrollbar.hide&&(R.style.opacity=0),e.params.watchOverflow&&e.enabled&&A.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function v(A){return e.isHorizontal()?A.clientX:A.clientY}function g(A){const{scrollbar:P,rtlTranslate:R}=e,{el:L}=P;let U;U=(v(A)-_C(L)[e.isHorizontal()?"left":"top"]-(c!==null?c:d/2))/(h-d),U=Math.max(Math.min(U,1),0),R&&(U=1-U);const B=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*U;e.updateProgress(B),e.setTranslate(B),e.updateActiveIndex(),e.updateSlidesClasses()}function y(A){const P=e.params.scrollbar,{scrollbar:R,wrapperEl:L}=e,{el:U,dragEl:B}=R;a=!0,c=A.target===B?v(A)-A.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,A.preventDefault(),A.stopPropagation(),L.style.transitionDuration="100ms",B.style.transitionDuration="100ms",g(A),clearTimeout(l),U.style.transitionDuration="0ms",P.hide&&(U.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",A)}function _(A){const{scrollbar:P,wrapperEl:R}=e,{el:L,dragEl:U}=P;a&&(A.preventDefault&&A.cancelable?A.preventDefault():A.returnValue=!1,g(A),R.style.transitionDuration="0ms",L.style.transitionDuration="0ms",U.style.transitionDuration="0ms",r("scrollbarDragMove",A))}function b(A){const P=e.params.scrollbar,{scrollbar:R,wrapperEl:L}=e,{el:U}=R;a&&(a=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",L.style.transitionDuration=""),P.hide&&(clearTimeout(l),l=no(()=>{U.style.opacity=0,U.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",A),P.snapOnRelease&&e.slideToClosest())}function w(A){const{scrollbar:P,params:R}=e,L=P.el;if(!L)return;const U=L,B=R.passiveListeners?{passive:!1,capture:!1}:!1,F=R.passiveListeners?{passive:!0,capture:!1}:!1;if(!U)return;const G=A==="on"?"addEventListener":"removeEventListener";U[G]("pointerdown",y,B),s[G]("pointermove",_,B),s[G]("pointerup",b,F)}function M(){!e.params.scrollbar.el||!e.scrollbar.el||w("on")}function T(){!e.params.scrollbar.el||!e.scrollbar.el||w("off")}function E(){const{scrollbar:A,el:P}=e;e.params.scrollbar=Gh(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const R=e.params.scrollbar;if(!R.el)return;let L;if(typeof R.el=="string"&&e.isElement&&(L=e.el.querySelector(R.el)),!L&&typeof R.el=="string"){if(L=s.querySelectorAll(R.el),!L.length)return}else L||(L=R.el);e.params.uniqueNavElements&&typeof R.el=="string"&&L.length>1&&P.querySelectorAll(R.el).length===1&&(L=P.querySelector(R.el)),L.length>0&&(L=L[0]),L.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass);let U;L&&(U=L.querySelector(ro(e.params.scrollbar.dragClass)),U||(U=Ml("div",e.params.scrollbar.dragClass),L.append(U))),Object.assign(A,{el:L,dragEl:U}),R.draggable&&M(),L&&L.classList[e.enabled?"remove":"add"](...is(e.params.scrollbar.lockClass))}function S(){const A=e.params.scrollbar,P=e.scrollbar.el;P&&P.classList.remove(...is(e.isHorizontal()?A.horizontalClass:A.verticalClass)),T()}i("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const A=e.params.scrollbar;let{el:P}=e.scrollbar;P=Jt(P),P.forEach(R=>{R.classList.remove(A.horizontalClass,A.verticalClass),R.classList.add(e.isHorizontal()?A.horizontalClass:A.verticalClass)})}),i("init",()=>{e.params.scrollbar.enabled===!1?C():(E(),p(),u())}),i("update resize observerUpdate lock unlock changeDirection",()=>{p()}),i("setTranslate",()=>{u()}),i("setTransition",(A,P)=>{m(P)}),i("enable disable",()=>{const{el:A}=e.scrollbar;A&&A.classList[e.enabled?"remove":"add"](...is(e.params.scrollbar.lockClass))}),i("destroy",()=>{S()});const x=()=>{e.el.classList.remove(...is(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...is(e.params.scrollbar.scrollbarDisabledClass)),E(),p(),u()},C=()=>{e.el.classList.add(...is(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...is(e.params.scrollbar.scrollbarDisabledClass)),S()};Object.assign(e.scrollbar,{enable:x,disable:C,updateSize:p,setTranslate:u,init:E,destroy:S})}function Xh(n){let{swiper:e,extendParams:t,on:i}=n;t({parallax:{enabled:!1}});const r="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",s=(l,c)=>{const{rtl:d}=e,h=d?-1:1,f=l.getAttribute("data-swiper-parallax")||"0";let u=l.getAttribute("data-swiper-parallax-x"),m=l.getAttribute("data-swiper-parallax-y");const p=l.getAttribute("data-swiper-parallax-scale"),v=l.getAttribute("data-swiper-parallax-opacity"),g=l.getAttribute("data-swiper-parallax-rotate");if(u||m?(u=u||"0",m=m||"0"):e.isHorizontal()?(u=f,m="0"):(m=f,u="0"),u.indexOf("%")>=0?u=`${parseInt(u,10)*c*h}%`:u=`${u*c*h}px`,m.indexOf("%")>=0?m=`${parseInt(m,10)*c}%`:m=`${m*c}px`,typeof v<"u"&&v!==null){const _=v-(v-1)*(1-Math.abs(c));l.style.opacity=_}let y=`translate3d(${u}, ${m}, 0px)`;if(typeof p<"u"&&p!==null){const _=p-(p-1)*(1-Math.abs(c));y+=` scale(${_})`}if(g&&typeof g<"u"&&g!==null){const _=g*c*-1;y+=` rotate(${_}deg)`}l.style.transform=y},a=()=>{const{el:l,slides:c,progress:d,snapGrid:h,isElement:f}=e,u=xn(l,r);e.isElement&&u.push(...xn(e.hostEl,r)),u.forEach(m=>{s(m,d)}),c.forEach((m,p)=>{let v=m.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(v+=Math.ceil(p/2)-d*(h.length-1)),v=Math.min(Math.max(v,-1),1),m.querySelectorAll(`${r}, [data-swiper-parallax-rotate]`).forEach(g=>{s(g,v)})})},o=function(l){l===void 0&&(l=e.params.speed);const{el:c,hostEl:d}=e,h=[...c.querySelectorAll(r)];e.isElement&&h.push(...d.querySelectorAll(r)),h.forEach(f=>{let u=parseInt(f.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(u=0),f.style.transitionDuration=`${u}ms`})};i("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),i("init",()=>{e.params.parallax.enabled&&a()}),i("setTranslate",()=>{e.params.parallax.enabled&&a()}),i("setTransition",(l,c)=>{e.params.parallax.enabled&&o(c)})}function LP(n){let{swiper:e,extendParams:t,emit:i,once:r}=n;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function s(){if(e.params.cssMode)return;const l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function a(){if(e.params.cssMode)return;const{touchEventsData:l,touches:c}=e;l.velocities.length===0&&l.velocities.push({position:c[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[e.isHorizontal()?"currentX":"currentY"],time:yn()})}function o(l){let{currentPos:c}=l;if(e.params.cssMode)return;const{params:d,wrapperEl:h,rtlTranslate:f,snapGrid:u,touchEventsData:m}=e,v=yn()-m.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<u.length?e.slideTo(u.length-1):e.slideTo(e.slides.length-1);return}if(d.freeMode.momentum){if(m.velocities.length>1){const E=m.velocities.pop(),S=m.velocities.pop(),x=E.position-S.position,C=E.time-S.time;e.velocity=x/C,e.velocity/=2,Math.abs(e.velocity)<d.freeMode.minimumVelocity&&(e.velocity=0),(C>150||yn()-E.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=d.freeMode.momentumVelocityRatio,m.velocities.length=0;let g=1e3*d.freeMode.momentumRatio;const y=e.velocity*g;let _=e.translate+y;f&&(_=-_);let b=!1,w;const M=Math.abs(e.velocity)*20*d.freeMode.momentumBounceRatio;let T;if(_<e.maxTranslate())d.freeMode.momentumBounce?(_+e.maxTranslate()<-M&&(_=e.maxTranslate()-M),w=e.maxTranslate(),b=!0,m.allowMomentumBounce=!0):_=e.maxTranslate(),d.loop&&d.centeredSlides&&(T=!0);else if(_>e.minTranslate())d.freeMode.momentumBounce?(_-e.minTranslate()>M&&(_=e.minTranslate()+M),w=e.minTranslate(),b=!0,m.allowMomentumBounce=!0):_=e.minTranslate(),d.loop&&d.centeredSlides&&(T=!0);else if(d.freeMode.sticky){let E;for(let S=0;S<u.length;S+=1)if(u[S]>-_){E=S;break}Math.abs(u[E]-_)<Math.abs(u[E-1]-_)||e.swipeDirection==="next"?_=u[E]:_=u[E-1],_=-_}if(T&&r("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(f?g=Math.abs((-_-e.translate)/e.velocity):g=Math.abs((_-e.translate)/e.velocity),d.freeMode.sticky){const E=Math.abs((f?-_:_)-e.translate),S=e.slidesSizesGrid[e.activeIndex];E<S?g=d.speed:E<2*S?g=d.speed*1.5:g=d.speed*2.5}}else if(d.freeMode.sticky){e.slideToClosest();return}d.freeMode.momentumBounce&&b?(e.updateProgress(w),e.setTransition(g),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,Eu(h,()=>{!e||e.destroyed||!m.allowMomentumBounce||(i("momentumBounce"),e.setTransition(d.speed),setTimeout(()=>{e.setTranslate(w),Eu(h,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(i("_freeModeNoMomentumRelease"),e.updateProgress(_),e.setTransition(g),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,Eu(h,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(_),e.updateActiveIndex(),e.updateSlidesClasses()}else if(d.freeMode.sticky){e.slideToClosest();return}else d.freeMode&&i("_freeModeNoMomentumRelease");(!d.freeMode.momentum||v>=d.longSwipesMs)&&(i("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:s,onTouchMove:a,onTouchEnd:o}})}function DP(n){const{effect:e,swiper:t,on:i,setTranslate:r,setTransition:s,overwriteParams:a,perspective:o,recreateShadows:l,getEffectParams:c}=n;i("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),o&&o()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const h=a?a():{};Object.assign(t.params,h),Object.assign(t.originalParams,h)}),i("setTranslate",()=>{t.params.effect===e&&r()}),i("setTransition",(h,f)=>{t.params.effect===e&&s(f)}),i("transitionEnd",()=>{if(t.params.effect===e&&l){if(!c||!c().slideShadows)return;t.slides.forEach(h=>{h.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>f.remove())}),l()}});let d;i("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(d=!0),requestAnimationFrame(()=>{d&&t.slides&&t.slides.length&&(r(),d=!1)}))})}function IP(n,e){const t=W_(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function OP(n){let{swiper:e,duration:t,transformElements:i,allSlides:r}=n;const{activeIndex:s}=e,a=o=>o.parentElement?o.parentElement:e.slides.filter(c=>c.shadowRoot&&c.shadowRoot===o.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let o=!1,l;r?l=i:l=i.filter(c=>{const d=c.classList.contains("swiper-slide-transform")?a(c):c;return e.getSlideIndex(d)===s}),l.forEach(c=>{Eu(c,()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const d=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(d)})})}}function NP(n){let{swiper:e,extendParams:t,on:i}=n;t({fadeEffect:{crossFade:!1}}),DP({effect:"fade",swiper:e,on:i,setTranslate:()=>{const{slides:a}=e,o=e.params.fadeEffect;for(let l=0;l<a.length;l+=1){const c=e.slides[l];let h=-c.swiperSlideOffset;e.params.virtualTranslate||(h-=e.translate);let f=0;e.isHorizontal()||(f=h,h=0);const u=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(c.progress),0):1+Math.min(Math.max(c.progress,-1),0),m=IP(o,c);m.style.opacity=u,m.style.transform=`translate3d(${h}px, ${f}px, 0px)`}},setTransition:a=>{const o=e.slides.map(l=>W_(l));o.forEach(l=>{l.style.transitionDuration=`${a}ms`}),OP({swiper:e,duration:a,transformElements:o,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}Ce.registerPlugin(fn);const kP={outY:"80%",outOpacity:.2,inY:"0%",inOpacity:1,stagger:.004,duration:.8,ease:"power3.out"};function UP(){const{outY:n,outOpacity:e,inY:t,inOpacity:i,stagger:r,duration:s,ease:a}=kP,o=new qi(".swiper.is-info",{modules:[Wh,iy,ny,ty,Xh,NP],slidesPerView:1,centeredSlides:!0,speed:0,effect:"fade",fadeEffect:{crossFade:!0},loop:!1,allowTouchMove:!1}),l=new qi(".swiper.is-main",{modules:[Wh,iy,ny,ty,Xh],slidesPerView:"auto",centeredSlides:!0,direction:"vertical",spaceBetween:16,loop:!1,allowTouchMove:!0,grabCursor:!0,loopFillGroupWithBlank:!0,mousewheel:{invert:!1,forceToAxis:!0},slideActiveClass:"is-active",slideDuplicateActiveClass:"is-active",speed:800,observer:!0,observeParents:!0,observeSlideChildren:!0,parallax:!0,resistance:!0}),c=(E,S,x)=>{Ce.to(E,{y:S,opacity:x,stagger:r,duration:s,ease:a})},d=E=>{document.querySelectorAll(".thumb_cms_item").forEach((x,C)=>{C===E?x.classList.add("is--active"):x.classList.remove("is--active")})},h=E=>{const S=document.querySelector(".thumb_corners"),x=fn.getState(S);E.appendChild(S),fn.from(x,{duration:.5,ease:"power1.inOut"})};let f=!1;l.on("slideChange",function(){const E=l.realIndex;o.slideTo(E),d(E),o.slides.forEach(C=>{if(!C.classList.contains("swiper-slide-active")){const A=C.querySelectorAll(".char");c(A,n,e)}});const x=o.slides[o.activeIndex].querySelectorAll(".char");c(x,t,i)});const u=l.realIndex;o.slideTo(u),d(u),document.querySelectorAll('[data-split-type="char"]').forEach(E=>{const S=Jl(E,"chars");Ce.set(S,{y:n,opacity:e})});const v=o.slides[o.activeIndex].querySelectorAll(".char");c(v,t,i);const g=document.querySelectorAll(".thumb_cms_item [data-swiper-name]");(()=>{g.forEach((E,S)=>{E.addEventListener("click",()=>_(E)),E.parentElement.addEventListener("mouseenter",()=>h(E.parentElement)),E.parentElement.addEventListener("mouseleave",()=>b())})})();const _=E=>{const S=E.getAttribute("data-swiper-name"),x=[...l.slides].findIndex(C=>C.getAttribute("data-swiper-name")===S);x!==-1&&(f=!0,l.slideTo(x),h(E.parentElement),setTimeout(()=>{f=!1},500))},b=()=>{const E=document.querySelector(".thumb_cms_item.is--active");E&&h(E)},w=new MutationObserver(E=>{f||E.forEach(S=>{S.attributeName==="class"&&S.target.classList.contains("is--active")&&h(S.target)})});document.querySelectorAll(".thumb_cms_item").forEach(E=>{w.observe(E,{attributes:!0,attributeFilter:["class"]})});const T=document.querySelector(".thumb_cms_item.is--active");T&&h(T)}function FP(){new qi(".swiper.is-work-cms",{modules:[Wh,LP,Xh],direction:"horizontal",freeMode:!0,slidesPerView:"auto",loop:!1,loopFillGroupWithBlank:!0,speed:800,grabCursor:!0,parallax:!0,on:{touchStart:()=>{document.querySelectorAll(".swiper-slide.is-work-cms").forEach(n=>{n.classList.add("is--scaling")})},touchMove:()=>{document.querySelectorAll(".swiper-slide.is-work-cms").forEach(n=>{n.classList.add("is--scaling")})},touchEnd:()=>{document.querySelectorAll(".swiper-slide.is-work-cms").forEach(n=>{n.classList.remove("is--scaling")})}}})}function BP(){document.querySelectorAll('[data-element="project-nav"]').forEach(e=>{const t=e.querySelector('[data-element="project-nav-img"]'),i=e.querySelector('[data-element="project-nav-text"]'),r=i?i.getAttribute("data-element-class"):null;e.addEventListener("mouseenter",()=>{Ce.fromTo(t,{height:"0rem",y:"100%"},{height:"auto",y:"0%",duration:.7,ease:"expo.out"}),i&&r&&i.classList.add(r)}),e.addEventListener("mouseleave",()=>{Ce.to(t,{height:"0rem",y:"100%",duration:.5,ease:"expo.out"}),i&&r&&i.classList.remove(r)})})}function zP(){const n=document.querySelector(".cursor_dot");document.querySelectorAll('[data-element="show-cursor"]').forEach(t=>{t.addEventListener("mouseover",()=>{n.classList.add("is--active")}),t.addEventListener("mouseout",()=>{n.classList.remove("is--active")})})}var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ry={exports:{}};/*!
* matter-js 0.19.0 by @liabru
* http://brm.io/matter-js/
* License MIT
* 
* The MIT License (MIT)
* 
* Copyright (c) Liam Brummitt and contributors.
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/(function(n,e){(function(i,r){n.exports=r()})($h,function(){return function(t){var i={};function r(s){if(i[s])return i[s].exports;var a=i[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=i,r.d=function(s,a,o){r.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:o})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,a){if(a&1&&(s=r(s)),a&8||a&4&&typeof s=="object"&&s&&s.__esModule)return s;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:s}),a&2&&typeof s!="string")for(var l in s)r.d(o,l,(function(c){return s[c]}).bind(null,l));return o},r.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(a,"a",a),a},r.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},r.p="",r(r.s=20)}([function(t,i){var r={};t.exports=r,function(){r._baseDelta=1e3/60,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(a,o){var l,c;typeof o=="boolean"?(l=2,c=o):(l=1,c=!0);for(var d=l;d<arguments.length;d++){var h=arguments[d];if(h)for(var f in h)c&&h[f]&&h[f].constructor===Object&&(!a[f]||a[f].constructor===Object)?(a[f]=a[f]||{},r.extend(a[f],c,h[f])):a[f]=h[f]}return a},r.clone=function(a,o){return r.extend({},o,a)},r.keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var l in a)o.push(l);return o},r.values=function(a){var o=[];if(Object.keys){for(var l=Object.keys(a),c=0;c<l.length;c++)o.push(a[l[c]]);return o}for(var d in a)o.push(a[d]);return o},r.get=function(a,o,l,c){o=o.split(".").slice(l,c);for(var d=0;d<o.length;d+=1)a=a[o[d]];return a},r.set=function(a,o,l,c,d){var h=o.split(".").slice(c,d);return r.get(a,o,0,-1)[h[h.length-1]]=l,l},r.shuffle=function(a){for(var o=a.length-1;o>0;o--){var l=Math.floor(r.random()*(o+1)),c=a[o];a[o]=a[l],a[l]=c}return a},r.choose=function(a){return a[Math.floor(r.random()*a.length)]},r.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},r.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},r.isFunction=function(a){return typeof a=="function"},r.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},r.isString=function(a){return toString.call(a)==="[object String]"},r.clamp=function(a,o,l){return a<o?o:a>l?l:a},r.sign=function(a){return a<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(a,o){return a=typeof a<"u"?a:0,o=typeof o<"u"?o:1,a+s()*(o-a)};var s=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[a]||(r.warn(a),r._warnedOnce[a]=!0)},r.deprecated=function(a,o,l){a[o]=r.chain(function(){r.warnOnce("🔅 deprecated 🔅",l)},a[o])},r.nextId=function(){return r._nextId++},r.indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var l=0;l<a.length;l++)if(a[l]===o)return l;return-1},r.map=function(a,o){if(a.map)return a.map(o);for(var l=[],c=0;c<a.length;c+=1)l.push(o(a[c]));return l},r.topologicalSort=function(a){var o=[],l=[],c=[];for(var d in a)!l[d]&&!c[d]&&r._topologicalSort(d,l,c,a,o);return o},r._topologicalSort=function(a,o,l,c,d){var h=c[a]||[];l[a]=!0;for(var f=0;f<h.length;f+=1){var u=h[f];l[u]||o[u]||r._topologicalSort(u,o,l,c,d)}l[a]=!1,o[a]=!0,d.push(a)},r.chain=function(){for(var a=[],o=0;o<arguments.length;o+=1){var l=arguments[o];l._chained?a.push.apply(a,l._chained):a.push(l)}var c=function(){for(var d,h=new Array(arguments.length),f=0,u=arguments.length;f<u;f++)h[f]=arguments[f];for(f=0;f<a.length;f+=1){var m=a[f].apply(d,h);typeof m<"u"&&(d=m)}return d};return c._chained=a,c},r.chainPathBefore=function(a,o,l){return r.set(a,o,r.chain(l,r.get(a,o)))},r.chainPathAfter=function(a,o,l){return r.set(a,o,r.chain(r.get(a,o),l))},r.setDecomp=function(a){r._decomp=a},r.getDecomp=function(){var a=r._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof $h<"u"&&(a=$h.decomp)}catch{a=null}return a}}()},function(t,i){var r={};t.exports=r,function(){r.create=function(s){var a={min:{x:0,y:0},max:{x:0,y:0}};return s&&r.update(a,s),a},r.update=function(s,a,o){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var l=0;l<a.length;l++){var c=a[l];c.x>s.max.x&&(s.max.x=c.x),c.x<s.min.x&&(s.min.x=c.x),c.y>s.max.y&&(s.max.y=c.y),c.y<s.min.y&&(s.min.y=c.y)}o&&(o.x>0?s.max.x+=o.x:s.min.x+=o.x,o.y>0?s.max.y+=o.y:s.min.y+=o.y)},r.contains=function(s,a){return a.x>=s.min.x&&a.x<=s.max.x&&a.y>=s.min.y&&a.y<=s.max.y},r.overlaps=function(s,a){return s.min.x<=a.max.x&&s.max.x>=a.min.x&&s.max.y>=a.min.y&&s.min.y<=a.max.y},r.translate=function(s,a){s.min.x+=a.x,s.max.x+=a.x,s.min.y+=a.y,s.max.y+=a.y},r.shift=function(s,a){var o=s.max.x-s.min.x,l=s.max.y-s.min.y;s.min.x=a.x,s.max.x=a.x+o,s.min.y=a.y,s.max.y=a.y+l}}()},function(t,i){var r={};t.exports=r,function(){r.create=function(s,a){return{x:s||0,y:a||0}},r.clone=function(s){return{x:s.x,y:s.y}},r.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},r.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},r.rotate=function(s,a,o){var l=Math.cos(a),c=Math.sin(a);o||(o={});var d=s.x*l-s.y*c;return o.y=s.x*c+s.y*l,o.x=d,o},r.rotateAbout=function(s,a,o,l){var c=Math.cos(a),d=Math.sin(a);l||(l={});var h=o.x+((s.x-o.x)*c-(s.y-o.y)*d);return l.y=o.y+((s.x-o.x)*d+(s.y-o.y)*c),l.x=h,l},r.normalise=function(s){var a=r.magnitude(s);return a===0?{x:0,y:0}:{x:s.x/a,y:s.y/a}},r.dot=function(s,a){return s.x*a.x+s.y*a.y},r.cross=function(s,a){return s.x*a.y-s.y*a.x},r.cross3=function(s,a,o){return(a.x-s.x)*(o.y-s.y)-(a.y-s.y)*(o.x-s.x)},r.add=function(s,a,o){return o||(o={}),o.x=s.x+a.x,o.y=s.y+a.y,o},r.sub=function(s,a,o){return o||(o={}),o.x=s.x-a.x,o.y=s.y-a.y,o},r.mult=function(s,a){return{x:s.x*a,y:s.y*a}},r.div=function(s,a){return{x:s.x/a,y:s.y/a}},r.perp=function(s,a){return a=a===!0?-1:1,{x:a*-s.y,y:a*s.x}},r.neg=function(s){return{x:-s.x,y:-s.y}},r.angle=function(s,a){return Math.atan2(a.y-s.y,a.x-s.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(t,i,r){var s={};t.exports=s;var a=r(2),o=r(0);(function(){s.create=function(l,c){for(var d=[],h=0;h<l.length;h++){var f=l[h],u={x:f.x,y:f.y,index:h,body:c,isInternal:!1};d.push(u)}return d},s.fromPath=function(l,c){var d=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return l.replace(d,function(f,u,m){h.push({x:parseFloat(u),y:parseFloat(m)})}),s.create(h,c)},s.centre=function(l){for(var c=s.area(l,!0),d={x:0,y:0},h,f,u,m=0;m<l.length;m++)u=(m+1)%l.length,h=a.cross(l[m],l[u]),f=a.mult(a.add(l[m],l[u]),h),d=a.add(d,f);return a.div(d,6*c)},s.mean=function(l){for(var c={x:0,y:0},d=0;d<l.length;d++)c.x+=l[d].x,c.y+=l[d].y;return a.div(c,l.length)},s.area=function(l,c){for(var d=0,h=l.length-1,f=0;f<l.length;f++)d+=(l[h].x-l[f].x)*(l[h].y+l[f].y),h=f;return c?d/2:Math.abs(d)/2},s.inertia=function(l,c){for(var d=0,h=0,f=l,u,m,p=0;p<f.length;p++)m=(p+1)%f.length,u=Math.abs(a.cross(f[m],f[p])),d+=u*(a.dot(f[m],f[m])+a.dot(f[m],f[p])+a.dot(f[p],f[p])),h+=u;return c/6*(d/h)},s.translate=function(l,c,d){d=typeof d<"u"?d:1;var h=l.length,f=c.x*d,u=c.y*d,m;for(m=0;m<h;m++)l[m].x+=f,l[m].y+=u;return l},s.rotate=function(l,c,d){if(c!==0){var h=Math.cos(c),f=Math.sin(c),u=d.x,m=d.y,p=l.length,v,g,y,_;for(_=0;_<p;_++)v=l[_],g=v.x-u,y=v.y-m,v.x=u+(g*h-y*f),v.y=m+(g*f+y*h);return l}},s.contains=function(l,c){for(var d=c.x,h=c.y,f=l.length,u=l[f-1],m,p=0;p<f;p++){if(m=l[p],(d-u.x)*(m.y-u.y)+(h-u.y)*(u.x-m.x)>0)return!1;u=m}return!0},s.scale=function(l,c,d,h){if(c===1&&d===1)return l;h=h||s.centre(l);for(var f,u,m=0;m<l.length;m++)f=l[m],u=a.sub(f,h),l[m].x=h.x+u.x*c,l[m].y=h.y+u.y*d;return l},s.chamfer=function(l,c,d,h,f){typeof c=="number"?c=[c]:c=c||[8],d=typeof d<"u"?d:-1,h=h||2,f=f||14;for(var u=[],m=0;m<l.length;m++){var p=l[m-1>=0?m-1:l.length-1],v=l[m],g=l[(m+1)%l.length],y=c[m<c.length?m:c.length-1];if(y===0){u.push(v);continue}var _=a.normalise({x:v.y-p.y,y:p.x-v.x}),b=a.normalise({x:g.y-v.y,y:v.x-g.x}),w=Math.sqrt(2*Math.pow(y,2)),M=a.mult(o.clone(_),y),T=a.normalise(a.mult(a.add(_,b),.5)),E=a.sub(v,a.mult(T,w)),S=d;d===-1&&(S=Math.pow(y,.32)*1.75),S=o.clamp(S,h,f),S%2===1&&(S+=1);for(var x=Math.acos(a.dot(_,b)),C=x/S,A=0;A<S;A++)u.push(a.add(a.rotate(M,C*A),E))}return u},s.clockwiseSort=function(l){var c=s.mean(l);return l.sort(function(d,h){return a.angle(c,d)-a.angle(c,h)}),l},s.isConvex=function(l){var c=0,d=l.length,h,f,u,m;if(d<3)return null;for(h=0;h<d;h++)if(f=(h+1)%d,u=(h+2)%d,m=(l[f].x-l[h].x)*(l[u].y-l[f].y),m-=(l[f].y-l[h].y)*(l[u].x-l[f].x),m<0?c|=1:m>0&&(c|=2),c===3)return!1;return c!==0?!0:null},s.hull=function(l){var c=[],d=[],h,f;for(l=l.slice(0),l.sort(function(u,m){var p=u.x-m.x;return p!==0?p:u.y-m.y}),f=0;f<l.length;f+=1){for(h=l[f];d.length>=2&&a.cross3(d[d.length-2],d[d.length-1],h)<=0;)d.pop();d.push(h)}for(f=l.length-1;f>=0;f-=1){for(h=l[f];c.length>=2&&a.cross3(c[c.length-2],c[c.length-1],h)<=0;)c.pop();c.push(h)}return c.pop(),d.pop(),c.concat(d)}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(2),l=r(7),c=r(0),d=r(1),h=r(11);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=1e3/60,s.create=function(u){var m={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},p=c.extend(m,u);return f(p,u),p},s.nextGroup=function(u){return u?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var f=function(u,m){m=m||{},s.set(u,{bounds:u.bounds||d.create(u.vertices),positionPrev:u.positionPrev||o.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u}),a.rotate(u.vertices,u.angle,u.position),h.rotate(u.axes,u.angle),d.update(u.bounds,u.vertices,u.velocity),s.set(u,{axes:m.axes||u.axes,area:m.area||u.area,mass:m.mass||u.mass,inertia:m.inertia||u.inertia});var p=u.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=u.isStatic?"#555":"#ccc",g=u.isStatic&&u.render.fillStyle===null?1:0;u.render.fillStyle=u.render.fillStyle||p,u.render.strokeStyle=u.render.strokeStyle||v,u.render.lineWidth=u.render.lineWidth||g,u.render.sprite.xOffset+=-(u.bounds.min.x-u.position.x)/(u.bounds.max.x-u.bounds.min.x),u.render.sprite.yOffset+=-(u.bounds.min.y-u.position.y)/(u.bounds.max.y-u.bounds.min.y)};s.set=function(u,m,p){var v;typeof m=="string"&&(v=m,m={},m[v]=p);for(v in m)if(Object.prototype.hasOwnProperty.call(m,v))switch(p=m[v],v){case"isStatic":s.setStatic(u,p);break;case"isSleeping":l.set(u,p);break;case"mass":s.setMass(u,p);break;case"density":s.setDensity(u,p);break;case"inertia":s.setInertia(u,p);break;case"vertices":s.setVertices(u,p);break;case"position":s.setPosition(u,p);break;case"angle":s.setAngle(u,p);break;case"velocity":s.setVelocity(u,p);break;case"angularVelocity":s.setAngularVelocity(u,p);break;case"speed":s.setSpeed(u,p);break;case"angularSpeed":s.setAngularSpeed(u,p);break;case"parts":s.setParts(u,p);break;case"centre":s.setCentre(u,p);break;default:u[v]=p}},s.setStatic=function(u,m){for(var p=0;p<u.parts.length;p++){var v=u.parts[p];v.isStatic=m,m?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},s.setMass=function(u,m){var p=u.inertia/(u.mass/6);u.inertia=p*(m/6),u.inverseInertia=1/u.inertia,u.mass=m,u.inverseMass=1/u.mass,u.density=u.mass/u.area},s.setDensity=function(u,m){s.setMass(u,m*u.area),u.density=m},s.setInertia=function(u,m){u.inertia=m,u.inverseInertia=1/u.inertia},s.setVertices=function(u,m){m[0].body===u?u.vertices=m:u.vertices=a.create(m,u),u.axes=h.fromVertices(u.vertices),u.area=a.area(u.vertices),s.setMass(u,u.density*u.area);var p=a.centre(u.vertices);a.translate(u.vertices,p,-1),s.setInertia(u,s._inertiaScale*a.inertia(u.vertices,u.mass)),a.translate(u.vertices,u.position),d.update(u.bounds,u.vertices,u.velocity)},s.setParts=function(u,m,p){var v;for(m=m.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,v=0;v<m.length;v++){var g=m[v];g!==u&&(g.parent=u,u.parts.push(g))}if(u.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var y=[];for(v=0;v<m.length;v++)y=y.concat(m[v].vertices);a.clockwiseSort(y);var _=a.hull(y),b=a.centre(_);s.setVertices(u,_),a.translate(u.vertices,b)}var w=s._totalProperties(u);u.area=w.area,u.parent=u,u.position.x=w.centre.x,u.position.y=w.centre.y,u.positionPrev.x=w.centre.x,u.positionPrev.y=w.centre.y,s.setMass(u,w.mass),s.setInertia(u,w.inertia),s.setPosition(u,w.centre)}},s.setCentre=function(u,m,p){p?(u.positionPrev.x+=m.x,u.positionPrev.y+=m.y,u.position.x+=m.x,u.position.y+=m.y):(u.positionPrev.x=m.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=m.y-(u.position.y-u.positionPrev.y),u.position.x=m.x,u.position.y=m.y)},s.setPosition=function(u,m,p){var v=o.sub(m,u.position);p?(u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.velocity.x=v.x,u.velocity.y=v.y,u.speed=o.magnitude(v)):(u.positionPrev.x+=v.x,u.positionPrev.y+=v.y);for(var g=0;g<u.parts.length;g++){var y=u.parts[g];y.position.x+=v.x,y.position.y+=v.y,a.translate(y.vertices,v),d.update(y.bounds,y.vertices,u.velocity)}},s.setAngle=function(u,m,p){var v=m-u.angle;p?(u.anglePrev=u.angle,u.angularVelocity=v,u.angularSpeed=Math.abs(v)):u.anglePrev+=v;for(var g=0;g<u.parts.length;g++){var y=u.parts[g];y.angle+=v,a.rotate(y.vertices,v,u.position),h.rotate(y.axes,v),d.update(y.bounds,y.vertices,u.velocity),g>0&&o.rotateAbout(y.position,v,u.position,y.position)}},s.setVelocity=function(u,m){var p=u.deltaTime/s._baseDelta;u.positionPrev.x=u.position.x-m.x*p,u.positionPrev.y=u.position.y-m.y*p,u.velocity.x=(u.position.x-u.positionPrev.x)/p,u.velocity.y=(u.position.y-u.positionPrev.y)/p,u.speed=o.magnitude(u.velocity)},s.getVelocity=function(u){var m=s._baseDelta/u.deltaTime;return{x:(u.position.x-u.positionPrev.x)*m,y:(u.position.y-u.positionPrev.y)*m}},s.getSpeed=function(u){return o.magnitude(s.getVelocity(u))},s.setSpeed=function(u,m){s.setVelocity(u,o.mult(o.normalise(s.getVelocity(u)),m))},s.setAngularVelocity=function(u,m){var p=u.deltaTime/s._baseDelta;u.anglePrev=u.angle-m*p,u.angularVelocity=(u.angle-u.anglePrev)/p,u.angularSpeed=Math.abs(u.angularVelocity)},s.getAngularVelocity=function(u){return(u.angle-u.anglePrev)*s._baseDelta/u.deltaTime},s.getAngularSpeed=function(u){return Math.abs(s.getAngularVelocity(u))},s.setAngularSpeed=function(u,m){s.setAngularVelocity(u,c.sign(s.getAngularVelocity(u))*m)},s.translate=function(u,m,p){s.setPosition(u,o.add(u.position,m),p)},s.rotate=function(u,m,p,v){if(!p)s.setAngle(u,u.angle+m,v);else{var g=Math.cos(m),y=Math.sin(m),_=u.position.x-p.x,b=u.position.y-p.y;s.setPosition(u,{x:p.x+(_*g-b*y),y:p.y+(_*y+b*g)},v),s.setAngle(u,u.angle+m,v)}},s.scale=function(u,m,p,v){var g=0,y=0;v=v||u.position;for(var _=0;_<u.parts.length;_++){var b=u.parts[_];a.scale(b.vertices,m,p,v),b.axes=h.fromVertices(b.vertices),b.area=a.area(b.vertices),s.setMass(b,u.density*b.area),a.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),s.setInertia(b,s._inertiaScale*a.inertia(b.vertices,b.mass)),a.translate(b.vertices,{x:b.position.x,y:b.position.y}),_>0&&(g+=b.area,y+=b.inertia),b.position.x=v.x+(b.position.x-v.x)*m,b.position.y=v.y+(b.position.y-v.y)*p,d.update(b.bounds,b.vertices,u.velocity)}u.parts.length>1&&(u.area=g,u.isStatic||(s.setMass(u,u.density*g),s.setInertia(u,y))),u.circleRadius&&(m===p?u.circleRadius*=m:u.circleRadius=null)},s.update=function(u,m){m=(typeof m<"u"?m:1e3/60)*u.timeScale;var p=m*m,v=s._timeCorrection?m/(u.deltaTime||m):1,g=1-u.frictionAir*(m/c._baseDelta),y=(u.position.x-u.positionPrev.x)*v,_=(u.position.y-u.positionPrev.y)*v;u.velocity.x=y*g+u.force.x/u.mass*p,u.velocity.y=_*g+u.force.y/u.mass*p,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.deltaTime=m,u.angularVelocity=(u.angle-u.anglePrev)*g*v+u.torque/u.inertia*p,u.anglePrev=u.angle,u.angle+=u.angularVelocity;for(var b=0;b<u.parts.length;b++){var w=u.parts[b];a.translate(w.vertices,u.velocity),b>0&&(w.position.x+=u.velocity.x,w.position.y+=u.velocity.y),u.angularVelocity!==0&&(a.rotate(w.vertices,u.angularVelocity,u.position),h.rotate(w.axes,u.angularVelocity),b>0&&o.rotateAbout(w.position,u.angularVelocity,u.position,w.position)),d.update(w.bounds,w.vertices,u.velocity)}},s.updateVelocities=function(u){var m=s._baseDelta/u.deltaTime,p=u.velocity;p.x=(u.position.x-u.positionPrev.x)*m,p.y=(u.position.y-u.positionPrev.y)*m,u.speed=Math.sqrt(p.x*p.x+p.y*p.y),u.angularVelocity=(u.angle-u.anglePrev)*m,u.angularSpeed=Math.abs(u.angularVelocity)},s.applyForce=function(u,m,p){var v={x:m.x-u.position.x,y:m.y-u.position.y};u.force.x+=p.x,u.force.y+=p.y,u.torque+=v.x*p.y-v.y*p.x},s._totalProperties=function(u){for(var m={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=u.parts.length===1?0:1;p<u.parts.length;p++){var v=u.parts[p],g=v.mass!==1/0?v.mass:1;m.mass+=g,m.area+=v.area,m.inertia+=v.inertia,m.centre=o.add(m.centre,o.mult(v.position,g))}return m.centre=o.div(m.centre,m.mass),m}})()},function(t,i,r){var s={};t.exports=s;var a=r(0);(function(){s.on=function(o,l,c){for(var d=l.split(" "),h,f=0;f<d.length;f++)h=d[f],o.events=o.events||{},o.events[h]=o.events[h]||[],o.events[h].push(c);return c},s.off=function(o,l,c){if(!l){o.events={};return}typeof l=="function"&&(c=l,l=a.keys(o.events).join(" "));for(var d=l.split(" "),h=0;h<d.length;h++){var f=o.events[d[h]],u=[];if(c&&f)for(var m=0;m<f.length;m++)f[m]!==c&&u.push(f[m]);o.events[d[h]]=u}},s.trigger=function(o,l,c){var d,h,f,u,m=o.events;if(m&&a.keys(m).length>0){c||(c={}),d=l.split(" ");for(var p=0;p<d.length;p++)if(h=d[p],f=m[h],f){u=a.clone(c,!1),u.name=h,u.source=o;for(var v=0;v<f.length;v++)f[v].apply(o,[u])}}}})()},function(t,i,r){var s={};t.exports=s;var a=r(5),o=r(0),l=r(1),c=r(4);(function(){s.create=function(d){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},d)},s.setModified=function(d,h,f,u){if(d.isModified=h,h&&d.cache&&(d.cache.allBodies=null,d.cache.allConstraints=null,d.cache.allComposites=null),f&&d.parent&&s.setModified(d.parent,h,f,u),u)for(var m=0;m<d.composites.length;m++){var p=d.composites[m];s.setModified(p,h,f,u)}},s.add=function(d,h){var f=[].concat(h);a.trigger(d,"beforeAdd",{object:h});for(var u=0;u<f.length;u++){var m=f[u];switch(m.type){case"body":if(m.parent!==m){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(d,m);break;case"constraint":s.addConstraint(d,m);break;case"composite":s.addComposite(d,m);break;case"mouseConstraint":s.addConstraint(d,m.constraint);break}}return a.trigger(d,"afterAdd",{object:h}),d},s.remove=function(d,h,f){var u=[].concat(h);a.trigger(d,"beforeRemove",{object:h});for(var m=0;m<u.length;m++){var p=u[m];switch(p.type){case"body":s.removeBody(d,p,f);break;case"constraint":s.removeConstraint(d,p,f);break;case"composite":s.removeComposite(d,p,f);break;case"mouseConstraint":s.removeConstraint(d,p.constraint);break}}return a.trigger(d,"afterRemove",{object:h}),d},s.addComposite=function(d,h){return d.composites.push(h),h.parent=d,s.setModified(d,!0,!0,!1),d},s.removeComposite=function(d,h,f){var u=o.indexOf(d.composites,h);if(u!==-1&&s.removeCompositeAt(d,u),f)for(var m=0;m<d.composites.length;m++)s.removeComposite(d.composites[m],h,!0);return d},s.removeCompositeAt=function(d,h){return d.composites.splice(h,1),s.setModified(d,!0,!0,!1),d},s.addBody=function(d,h){return d.bodies.push(h),s.setModified(d,!0,!0,!1),d},s.removeBody=function(d,h,f){var u=o.indexOf(d.bodies,h);if(u!==-1&&s.removeBodyAt(d,u),f)for(var m=0;m<d.composites.length;m++)s.removeBody(d.composites[m],h,!0);return d},s.removeBodyAt=function(d,h){return d.bodies.splice(h,1),s.setModified(d,!0,!0,!1),d},s.addConstraint=function(d,h){return d.constraints.push(h),s.setModified(d,!0,!0,!1),d},s.removeConstraint=function(d,h,f){var u=o.indexOf(d.constraints,h);if(u!==-1&&s.removeConstraintAt(d,u),f)for(var m=0;m<d.composites.length;m++)s.removeConstraint(d.composites[m],h,!0);return d},s.removeConstraintAt=function(d,h){return d.constraints.splice(h,1),s.setModified(d,!0,!0,!1),d},s.clear=function(d,h,f){if(f)for(var u=0;u<d.composites.length;u++)s.clear(d.composites[u],h,!0);return h?d.bodies=d.bodies.filter(function(m){return m.isStatic}):d.bodies.length=0,d.constraints.length=0,d.composites.length=0,s.setModified(d,!0,!0,!1),d},s.allBodies=function(d){if(d.cache&&d.cache.allBodies)return d.cache.allBodies;for(var h=[].concat(d.bodies),f=0;f<d.composites.length;f++)h=h.concat(s.allBodies(d.composites[f]));return d.cache&&(d.cache.allBodies=h),h},s.allConstraints=function(d){if(d.cache&&d.cache.allConstraints)return d.cache.allConstraints;for(var h=[].concat(d.constraints),f=0;f<d.composites.length;f++)h=h.concat(s.allConstraints(d.composites[f]));return d.cache&&(d.cache.allConstraints=h),h},s.allComposites=function(d){if(d.cache&&d.cache.allComposites)return d.cache.allComposites;for(var h=[].concat(d.composites),f=0;f<d.composites.length;f++)h=h.concat(s.allComposites(d.composites[f]));return d.cache&&(d.cache.allComposites=h),h},s.get=function(d,h,f){var u,m;switch(f){case"body":u=s.allBodies(d);break;case"constraint":u=s.allConstraints(d);break;case"composite":u=s.allComposites(d).concat(d);break}return u?(m=u.filter(function(p){return p.id.toString()===h.toString()}),m.length===0?null:m[0]):null},s.move=function(d,h,f){return s.remove(d,h),s.add(f,h),d},s.rebase=function(d){for(var h=s.allBodies(d).concat(s.allConstraints(d)).concat(s.allComposites(d)),f=0;f<h.length;f++)h[f].id=o.nextId();return d},s.translate=function(d,h,f){for(var u=f?s.allBodies(d):d.bodies,m=0;m<u.length;m++)c.translate(u[m],h);return d},s.rotate=function(d,h,f,u){for(var m=Math.cos(h),p=Math.sin(h),v=u?s.allBodies(d):d.bodies,g=0;g<v.length;g++){var y=v[g],_=y.position.x-f.x,b=y.position.y-f.y;c.setPosition(y,{x:f.x+(_*m-b*p),y:f.y+(_*p+b*m)}),c.rotate(y,h)}return d},s.scale=function(d,h,f,u,m){for(var p=m?s.allBodies(d):d.bodies,v=0;v<p.length;v++){var g=p[v],y=g.position.x-u.x,_=g.position.y-u.y;c.setPosition(g,{x:u.x+y*h,y:u.y+_*f}),c.scale(g,h,f)}return d},s.bounds=function(d){for(var h=s.allBodies(d),f=[],u=0;u<h.length;u+=1){var m=h[u];f.push(m.bounds.min,m.bounds.max)}return l.create(f)}})()},function(t,i,r){var s={};t.exports=s;var a=r(4),o=r(5),l=r(0);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(c,d){for(var h=d/l._baseDelta,f=s._motionSleepThreshold,u=0;u<c.length;u++){var m=c[u],p=a.getSpeed(m),v=a.getAngularSpeed(m),g=p*p+v*v;if(m.force.x!==0||m.force.y!==0){s.set(m,!1);continue}var y=Math.min(m.motion,g),_=Math.max(m.motion,g);m.motion=s._minBias*y+(1-s._minBias)*_,m.sleepThreshold>0&&m.motion<f?(m.sleepCounter+=1,m.sleepCounter>=m.sleepThreshold/h&&s.set(m,!0)):m.sleepCounter>0&&(m.sleepCounter-=1)}},s.afterCollisions=function(c){for(var d=s._motionSleepThreshold,h=0;h<c.length;h++){var f=c[h];if(f.isActive){var u=f.collision,m=u.bodyA.parent,p=u.bodyB.parent;if(!(m.isSleeping&&p.isSleeping||m.isStatic||p.isStatic)&&(m.isSleeping||p.isSleeping)){var v=m.isSleeping&&!m.isStatic?m:p,g=v===m?p:m;!v.isStatic&&g.motion>d&&s.set(v,!1)}}}},s.set=function(c,d){var h=c.isSleeping;d?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,h||o.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,h&&o.trigger(c,"sleepEnd"))}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(9);(function(){var l=[],c={overlap:0,axis:null},d={overlap:0,axis:null};s.create=function(h,f){return{pair:null,collided:!1,bodyA:h,bodyB:f,parentA:h.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},s.collides=function(h,f,u){if(s._overlapAxes(c,h.vertices,f.vertices,h.axes),c.overlap<=0||(s._overlapAxes(d,f.vertices,h.vertices,f.axes),d.overlap<=0))return null;var m=u&&u.table[o.id(h,f)],p;m?p=m.collision:(p=s.create(h,f),p.collided=!0,p.bodyA=h.id<f.id?h:f,p.bodyB=h.id<f.id?f:h,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),h=p.bodyA,f=p.bodyB;var v;c.overlap<d.overlap?v=c:v=d;var g=p.normal,y=p.supports,_=v.axis,b=_.x,w=_.y;b*(f.position.x-h.position.x)+w*(f.position.y-h.position.y)<0?(g.x=b,g.y=w):(g.x=-b,g.y=-w),p.tangent.x=-g.y,p.tangent.y=g.x,p.depth=v.overlap,p.penetration.x=g.x*p.depth,p.penetration.y=g.y*p.depth;var M=s._findSupports(h,f,g,1),T=0;if(a.contains(h.vertices,M[0])&&(y[T++]=M[0]),a.contains(h.vertices,M[1])&&(y[T++]=M[1]),T<2){var E=s._findSupports(f,h,g,-1);a.contains(f.vertices,E[0])&&(y[T++]=E[0]),T<2&&a.contains(f.vertices,E[1])&&(y[T++]=E[1])}return T===0&&(y[T++]=M[0]),y.length=T,p},s._overlapAxes=function(h,f,u,m){var p=f.length,v=u.length,g=f[0].x,y=f[0].y,_=u[0].x,b=u[0].y,w=m.length,M=Number.MAX_VALUE,T=0,E,S,x,C,A,P;for(A=0;A<w;A++){var R=m[A],L=R.x,U=R.y,B=g*L+y*U,F=_*L+b*U,G=B,O=F;for(P=1;P<p;P+=1)C=f[P].x*L+f[P].y*U,C>G?G=C:C<B&&(B=C);for(P=1;P<v;P+=1)C=u[P].x*L+u[P].y*U,C>O?O=C:C<F&&(F=C);if(S=G-F,x=O-B,E=S<x?S:x,E<M&&(M=E,T=A,E<=0))break}h.axis=m[T],h.overlap=M},s._projectToAxis=function(h,f,u){for(var m=f[0].x*u.x+f[0].y*u.y,p=m,v=1;v<f.length;v+=1){var g=f[v].x*u.x+f[v].y*u.y;g>p?p=g:g<m&&(m=g)}h.min=m,h.max=p},s._findSupports=function(h,f,u,m){var p=f.vertices,v=p.length,g=h.position.x,y=h.position.y,_=u.x*m,b=u.y*m,w=Number.MAX_VALUE,M,T,E,S,x;for(x=0;x<v;x+=1)T=p[x],S=_*(g-T.x)+b*(y-T.y),S<w&&(w=S,M=T);return E=p[(v+M.index-1)%v],w=_*(g-E.x)+b*(y-E.y),T=p[(M.index+1)%v],_*(g-T.x)+b*(y-T.y)<w?(l[0]=M,l[1]=T,l):(l[0]=M,l[1]=E,l)}})()},function(t,i,r){var s={};t.exports=s;var a=r(16);(function(){s.create=function(o,l){var c=o.bodyA,d=o.bodyB,h={id:s.id(c,d),bodyA:c,bodyB:d,collision:o,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||d.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(h,o,l),h},s.update=function(o,l,c){var d=o.contacts,h=l.supports,f=o.activeContacts,u=l.parentA,m=l.parentB,p=u.vertices.length;o.isActive=!0,o.timeUpdated=c,o.collision=l,o.separation=l.depth,o.inverseMass=u.inverseMass+m.inverseMass,o.friction=u.friction<m.friction?u.friction:m.friction,o.frictionStatic=u.frictionStatic>m.frictionStatic?u.frictionStatic:m.frictionStatic,o.restitution=u.restitution>m.restitution?u.restitution:m.restitution,o.slop=u.slop>m.slop?u.slop:m.slop,l.pair=o,f.length=0;for(var v=0;v<h.length;v++){var g=h[v],y=g.body===u?g.index:p+g.index,_=d[y];_?f.push(_):f.push(d[y]=a.create(g))}},s.setActive=function(o,l,c){l?(o.isActive=!0,o.timeUpdated=c):(o.isActive=!1,o.activeContacts.length=0)},s.id=function(o,l){return o.id<l.id?"A"+o.id+"B"+l.id:"A"+l.id+"B"+o.id}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(2),l=r(7),c=r(1),d=r(11),h=r(0);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(f){var u=f;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var m=u.bodyA?o.add(u.bodyA.position,u.pointA):u.pointA,p=u.bodyB?o.add(u.bodyB.position,u.pointB):u.pointB,v=o.magnitude(o.sub(m,p));u.length=typeof u.length<"u"?u.length:v,u.id=u.id||h.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return u.length===0&&u.stiffness>.1?(g.type="pin",g.anchors=!1):u.stiffness<.9&&(g.type="spring"),u.render=h.extend(g,u.render),u},s.preSolveAll=function(f){for(var u=0;u<f.length;u+=1){var m=f[u],p=m.constraintImpulse;m.isStatic||p.x===0&&p.y===0&&p.angle===0||(m.position.x+=p.x,m.position.y+=p.y,m.angle+=p.angle)}},s.solveAll=function(f,u){for(var m=h.clamp(u/h._baseDelta,0,1),p=0;p<f.length;p+=1){var v=f[p],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,y=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(g||y)&&s.solve(f[p],m)}for(p=0;p<f.length;p+=1)v=f[p],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,y=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!g&&!y&&s.solve(f[p],m)},s.solve=function(f,u){var m=f.bodyA,p=f.bodyB,v=f.pointA,g=f.pointB;if(!(!m&&!p)){m&&!m.isStatic&&(o.rotate(v,m.angle-f.angleA,v),f.angleA=m.angle),p&&!p.isStatic&&(o.rotate(g,p.angle-f.angleB,g),f.angleB=p.angle);var y=v,_=g;if(m&&(y=o.add(m.position,v)),p&&(_=o.add(p.position,g)),!(!y||!_)){var b=o.sub(y,_),w=o.magnitude(b);w<s._minLength&&(w=s._minLength);var M=(w-f.length)/w,T=f.stiffness>=1||f.length===0,E=T?f.stiffness*u:f.stiffness*u*u,S=f.damping*u,x=o.mult(b,M*E),C=(m?m.inverseMass:0)+(p?p.inverseMass:0),A=(m?m.inverseInertia:0)+(p?p.inverseInertia:0),P=C+A,R,L,U,B,F;if(S>0){var G=o.create();U=o.div(b,w),F=o.sub(p&&o.sub(p.position,p.positionPrev)||G,m&&o.sub(m.position,m.positionPrev)||G),B=o.dot(U,F)}m&&!m.isStatic&&(L=m.inverseMass/C,m.constraintImpulse.x-=x.x*L,m.constraintImpulse.y-=x.y*L,m.position.x-=x.x*L,m.position.y-=x.y*L,S>0&&(m.positionPrev.x-=S*U.x*B*L,m.positionPrev.y-=S*U.y*B*L),R=o.cross(v,x)/P*s._torqueDampen*m.inverseInertia*(1-f.angularStiffness),m.constraintImpulse.angle-=R,m.angle-=R),p&&!p.isStatic&&(L=p.inverseMass/C,p.constraintImpulse.x+=x.x*L,p.constraintImpulse.y+=x.y*L,p.position.x+=x.x*L,p.position.y+=x.y*L,S>0&&(p.positionPrev.x+=S*U.x*B*L,p.positionPrev.y+=S*U.y*B*L),R=o.cross(g,x)/P*s._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle+=R,p.angle+=R)}}},s.postSolveAll=function(f){for(var u=0;u<f.length;u++){var m=f[u],p=m.constraintImpulse;if(!(m.isStatic||p.x===0&&p.y===0&&p.angle===0)){l.set(m,!1);for(var v=0;v<m.parts.length;v++){var g=m.parts[v];a.translate(g.vertices,p),v>0&&(g.position.x+=p.x,g.position.y+=p.y),p.angle!==0&&(a.rotate(g.vertices,p.angle,m.position),d.rotate(g.axes,p.angle),v>0&&o.rotateAbout(g.position,p.angle,m.position,g.position)),c.update(g.bounds,g.vertices,m.velocity)}p.angle*=s._warming,p.x*=s._warming,p.y*=s._warming}}},s.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},s.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}}})()},function(t,i,r){var s={};t.exports=s;var a=r(2),o=r(0);(function(){s.fromVertices=function(l){for(var c={},d=0;d<l.length;d++){var h=(d+1)%l.length,f=a.normalise({x:l[h].y-l[d].y,y:l[d].x-l[h].x}),u=f.y===0?1/0:f.x/f.y;u=u.toFixed(3).toString(),c[u]=f}return o.values(c)},s.rotate=function(l,c){if(c!==0)for(var d=Math.cos(c),h=Math.sin(c),f=0;f<l.length;f++){var u=l[f],m;m=u.x*d-u.y*h,u.y=u.x*h+u.y*d,u.x=m}}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(0),l=r(4),c=r(1),d=r(2);(function(){s.rectangle=function(h,f,u,m,p){p=p||{};var v={label:"Rectangle Body",position:{x:h,y:f},vertices:a.fromPath("L 0 0 L "+u+" 0 L "+u+" "+m+" L 0 "+m)};if(p.chamfer){var g=p.chamfer;v.vertices=a.chamfer(v.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete p.chamfer}return l.create(o.extend({},v,p))},s.trapezoid=function(h,f,u,m,p,v){v=v||{},p*=.5;var g=(1-p*2)*u,y=u*p,_=y+g,b=_+y,w;p<.5?w="L 0 0 L "+y+" "+-m+" L "+_+" "+-m+" L "+b+" 0":w="L 0 0 L "+_+" "+-m+" L "+b+" 0";var M={label:"Trapezoid Body",position:{x:h,y:f},vertices:a.fromPath(w)};if(v.chamfer){var T=v.chamfer;M.vertices=a.chamfer(M.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete v.chamfer}return l.create(o.extend({},M,v))},s.circle=function(h,f,u,m,p){m=m||{};var v={label:"Circle Body",circleRadius:u};p=p||25;var g=Math.ceil(Math.max(10,Math.min(p,u)));return g%2===1&&(g+=1),s.polygon(h,f,g,u,o.extend({},v,m))},s.polygon=function(h,f,u,m,p){if(p=p||{},u<3)return s.circle(h,f,m,p);for(var v=2*Math.PI/u,g="",y=v*.5,_=0;_<u;_+=1){var b=y+_*v,w=Math.cos(b)*m,M=Math.sin(b)*m;g+="L "+w.toFixed(3)+" "+M.toFixed(3)+" "}var T={label:"Polygon Body",position:{x:h,y:f},vertices:a.fromPath(g)};if(p.chamfer){var E=p.chamfer;T.vertices=a.chamfer(T.vertices,E.radius,E.quality,E.qualityMin,E.qualityMax),delete p.chamfer}return l.create(o.extend({},T,p))},s.fromVertices=function(h,f,u,m,p,v,g,y){var _=o.getDecomp(),b,w,M,T,E,S,x,C,A,P,R;for(b=!!(_&&_.quickDecomp),m=m||{},M=[],p=typeof p<"u"?p:!1,v=typeof v<"u"?v:.01,g=typeof g<"u"?g:10,y=typeof y<"u"?y:.01,o.isArray(u[0])||(u=[u]),P=0;P<u.length;P+=1)if(S=u[P],T=a.isConvex(S),E=!T,E&&!b&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),T||!b)T?S=a.clockwiseSort(S):S=a.hull(S),M.push({position:{x:h,y:f},vertices:S});else{var L=S.map(function(ne){return[ne.x,ne.y]});_.makeCCW(L),v!==!1&&_.removeCollinearPoints(L,v),y!==!1&&_.removeDuplicatePoints&&_.removeDuplicatePoints(L,y);var U=_.quickDecomp(L);for(x=0;x<U.length;x++){var B=U[x],F=B.map(function(ne){return{x:ne[0],y:ne[1]}});g>0&&a.area(F)<g||M.push({position:a.centre(F),vertices:F})}}for(x=0;x<M.length;x++)M[x]=l.create(o.extend(M[x],m));if(p){var G=5;for(x=0;x<M.length;x++){var O=M[x];for(C=x+1;C<M.length;C++){var ee=M[C];if(c.overlaps(O.bounds,ee.bounds)){var se=O.vertices,we=ee.vertices;for(A=0;A<O.vertices.length;A++)for(R=0;R<ee.vertices.length;R++){var X=d.magnitudeSquared(d.sub(se[(A+1)%se.length],we[R])),J=d.magnitudeSquared(d.sub(se[A],we[(R+1)%we.length]));X<G&&J<G&&(se[A].isInternal=!0,we[R].isInternal=!0)}}}}}return M.length>1?(w=l.create(o.extend({parts:M.slice(0)},m)),l.setPosition(w,{x:h,y:f}),w):M[0]}})()},function(t,i,r){var s={};t.exports=s;var a=r(0),o=r(8);(function(){s.create=function(l){var c={bodies:[],pairs:null};return a.extend(c,l)},s.setBodies=function(l,c){l.bodies=c.slice(0)},s.clear=function(l){l.bodies=[]},s.collisions=function(l){var c=[],d=l.pairs,h=l.bodies,f=h.length,u=s.canCollide,m=o.collides,p,v;for(h.sort(s._compareBoundsX),p=0;p<f;p++){var g=h[p],y=g.bounds,_=g.bounds.max.x,b=g.bounds.max.y,w=g.bounds.min.y,M=g.isStatic||g.isSleeping,T=g.parts.length,E=T===1;for(v=p+1;v<f;v++){var S=h[v],x=S.bounds;if(x.min.x>_)break;if(!(b<x.min.y||w>x.max.y)&&!(M&&(S.isStatic||S.isSleeping))&&u(g.collisionFilter,S.collisionFilter)){var C=S.parts.length;if(E&&C===1){var A=m(g,S,d);A&&c.push(A)}else for(var P=T>1?1:0,R=C>1?1:0,L=P;L<T;L++)for(var U=g.parts[L],y=U.bounds,B=R;B<C;B++){var F=S.parts[B],x=F.bounds;if(!(y.min.x>x.max.x||y.max.x<x.min.x||y.max.y<x.min.y||y.min.y>x.max.y)){var A=m(U,F,d);A&&c.push(A)}}}}}return c},s.canCollide=function(l,c){return l.group===c.group&&l.group!==0?l.group>0:(l.mask&c.category)!==0&&(c.mask&l.category)!==0},s._compareBoundsX=function(l,c){return l.bounds.min.x-c.bounds.min.x}})()},function(t,i,r){var s={};t.exports=s;var a=r(0);(function(){s.create=function(o){var l={};return o||a.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=o||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(c){var d=s._getRelativeMousePosition(c,l.element,l.pixelRatio),h=c.changedTouches;h&&(l.button=0,c.preventDefault()),l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=c},l.mousedown=function(c){var d=s._getRelativeMousePosition(c,l.element,l.pixelRatio),h=c.changedTouches;h?(l.button=0,c.preventDefault()):l.button=c.button,l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=c},l.mouseup=function(c){var d=s._getRelativeMousePosition(c,l.element,l.pixelRatio),h=c.changedTouches;h&&c.preventDefault(),l.button=-1,l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=c},l.mousewheel=function(c){l.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},s.setElement(l,l.element),l},s.setElement=function(o,l){o.element=l,l.addEventListener("mousemove",o.mousemove),l.addEventListener("mousedown",o.mousedown),l.addEventListener("mouseup",o.mouseup),l.addEventListener("mousewheel",o.mousewheel),l.addEventListener("DOMMouseScroll",o.mousewheel),l.addEventListener("touchmove",o.mousemove),l.addEventListener("touchstart",o.mousedown),l.addEventListener("touchend",o.mouseup)},s.clearSourceEvents=function(o){o.sourceEvents.mousemove=null,o.sourceEvents.mousedown=null,o.sourceEvents.mouseup=null,o.sourceEvents.mousewheel=null,o.wheelDelta=0},s.setOffset=function(o,l){o.offset.x=l.x,o.offset.y=l.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},s.setScale=function(o,l){o.scale.x=l.x,o.scale.y=l.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},s._getRelativeMousePosition=function(o,l,c){var d=l.getBoundingClientRect(),h=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:h.scrollLeft,u=window.pageYOffset!==void 0?window.pageYOffset:h.scrollTop,m=o.changedTouches,p,v;return m?(p=m[0].pageX-d.left-f,v=m[0].pageY-d.top-u):(p=o.pageX-d.left-f,v=o.pageY-d.top-u),{x:p/(l.clientWidth/(l.width||l.clientWidth)*c),y:v/(l.clientHeight/(l.height||l.clientHeight)*c)}}})()},function(t,i,r){var s={};t.exports=s;var a=r(0);(function(){s._registry={},s.register=function(o){if(s.isPlugin(o)||a.warn("Plugin.register:",s.toString(o),"does not implement all required fields."),o.name in s._registry){var l=s._registry[o.name],c=s.versionParse(o.version).number,d=s.versionParse(l.version).number;c>d?(a.warn("Plugin.register:",s.toString(l),"was upgraded to",s.toString(o)),s._registry[o.name]=o):c<d?a.warn("Plugin.register:",s.toString(l),"can not be downgraded to",s.toString(o)):o!==l&&a.warn("Plugin.register:",s.toString(o),"is already registered to different plugin object")}else s._registry[o.name]=o;return o},s.resolve=function(o){return s._registry[s.dependencyParse(o).name]},s.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},s.isPlugin=function(o){return o&&o.name&&o.version&&o.install},s.isUsed=function(o,l){return o.used.indexOf(l)>-1},s.isFor=function(o,l){var c=o.for&&s.dependencyParse(o.for);return!o.for||l.name===c.name&&s.versionSatisfies(l.version,c.range)},s.use=function(o,l){if(o.uses=(o.uses||[]).concat(l||[]),o.uses.length===0){a.warn("Plugin.use:",s.toString(o),"does not specify any dependencies to install.");return}for(var c=s.dependencies(o),d=a.topologicalSort(c),h=[],f=0;f<d.length;f+=1)if(d[f]!==o.name){var u=s.resolve(d[f]);if(!u){h.push("❌ "+d[f]);continue}s.isUsed(o,u.name)||(s.isFor(u,o)||(a.warn("Plugin.use:",s.toString(u),"is for",u.for,"but installed on",s.toString(o)+"."),u._warned=!0),u.install?u.install(o):(a.warn("Plugin.use:",s.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(h.push("🔶 "+s.toString(u)),delete u._warned):h.push("✅ "+s.toString(u)),o.used.push(u.name))}h.length>0&&a.info(h.join("  "))},s.dependencies=function(o,l){var c=s.dependencyParse(o),d=c.name;if(l=l||{},!(d in l)){o=s.resolve(o)||o,l[d]=a.map(o.uses||[],function(f){s.isPlugin(f)&&s.register(f);var u=s.dependencyParse(f),m=s.resolve(f);return m&&!s.versionSatisfies(m.version,u.range)?(a.warn("Plugin.dependencies:",s.toString(m),"does not satisfy",s.toString(u),"used by",s.toString(c)+"."),m._warned=!0,o._warned=!0):m||(a.warn("Plugin.dependencies:",s.toString(f),"used by",s.toString(c),"could not be resolved."),o._warned=!0),u.name});for(var h=0;h<l[d].length;h+=1)s.dependencies(l[d][h],l);return l}},s.dependencyParse=function(o){if(a.isString(o)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(o)||a.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},s.versionParse=function(o){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(o)||a.warn("Plugin.versionParse:",o,"is not a valid version or range.");var c=l.exec(o),d=Number(c[4]),h=Number(c[5]),f=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:o,operator:c[1]||c[2]||"",major:d,minor:h,patch:f,parts:[d,h,f],prerelease:c[7],number:d*1e8+h*1e4+f}},s.versionSatisfies=function(o,l){l=l||"*";var c=s.versionParse(l),d=s.versionParse(o);if(c.isRange){if(c.operator==="*"||o==="*")return!0;if(c.operator===">")return d.number>c.number;if(c.operator===">=")return d.number>=c.number;if(c.operator==="~")return d.major===c.major&&d.minor===c.minor&&d.patch>=c.patch;if(c.operator==="^")return c.major>0?d.major===c.major&&d.number>=c.number:c.minor>0?d.minor===c.minor&&d.patch>=c.patch:d.patch===c.patch}return o===l||o==="*"}})()},function(t,i){var r={};t.exports=r,function(){r.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},function(t,i,r){var s={};t.exports=s;var a=r(7),o=r(18),l=r(13),c=r(19),d=r(5),h=r(6),f=r(10),u=r(0),m=r(4);(function(){s.create=function(p){p=p||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=u.extend(v,p);return g.world=p.world||h.create({label:"World"}),g.pairs=p.pairs||c.create(),g.detector=p.detector||l.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},s.update=function(p,v){var g=u.now(),y=p.world,_=p.detector,b=p.pairs,w=p.timing,M=w.timestamp,T;v=typeof v<"u"?v:u._baseDelta,v*=w.timeScale,w.timestamp+=v,w.lastDelta=v;var E={timestamp:w.timestamp,delta:v};d.trigger(p,"beforeUpdate",E);var S=h.allBodies(y),x=h.allConstraints(y);for(y.isModified&&(l.setBodies(_,S),h.setModified(y,!1,!1,!0)),p.enableSleeping&&a.update(S,v),s._bodiesApplyGravity(S,p.gravity),v>0&&s._bodiesUpdate(S,v),f.preSolveAll(S),T=0;T<p.constraintIterations;T++)f.solveAll(x,v);f.postSolveAll(S),_.pairs=p.pairs;var C=l.collisions(_);c.update(b,C,M),p.enableSleeping&&a.afterCollisions(b.list),b.collisionStart.length>0&&d.trigger(p,"collisionStart",{pairs:b.collisionStart});var A=u.clamp(20/p.positionIterations,0,1);for(o.preSolvePosition(b.list),T=0;T<p.positionIterations;T++)o.solvePosition(b.list,v,A);for(o.postSolvePosition(S),f.preSolveAll(S),T=0;T<p.constraintIterations;T++)f.solveAll(x,v);for(f.postSolveAll(S),o.preSolveVelocity(b.list),T=0;T<p.velocityIterations;T++)o.solveVelocity(b.list,v);return s._bodiesUpdateVelocities(S),b.collisionActive.length>0&&d.trigger(p,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&d.trigger(p,"collisionEnd",{pairs:b.collisionEnd}),s._bodiesClearForces(S),d.trigger(p,"afterUpdate",E),p.timing.lastElapsed=u.now()-g,p},s.merge=function(p,v){if(u.extend(p,v),v.world){p.world=v.world,s.clear(p);for(var g=h.allBodies(p.world),y=0;y<g.length;y++){var _=g[y];a.set(_,!1),_.id=u.nextId()}}},s.clear=function(p){c.clear(p.pairs),l.clear(p.detector)},s._bodiesClearForces=function(p){for(var v=p.length,g=0;g<v;g++){var y=p[g];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(p,v){var g=typeof v.scale<"u"?v.scale:.001,y=p.length;if(!(v.x===0&&v.y===0||g===0))for(var _=0;_<y;_++){var b=p[_];b.isStatic||b.isSleeping||(b.force.y+=b.mass*v.y*g,b.force.x+=b.mass*v.x*g)}},s._bodiesUpdate=function(p,v){for(var g=p.length,y=0;y<g;y++){var _=p[y];_.isStatic||_.isSleeping||m.update(_,v)}},s._bodiesUpdateVelocities=function(p){for(var v=p.length,g=0;g<v;g++)m.updateVelocities(p[g])}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(0),l=r(1);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(c){var d,h,f,u=c.length;for(d=0;d<u;d++)h=c[d],h.isActive&&(f=h.activeContacts.length,h.collision.parentA.totalContacts+=f,h.collision.parentB.totalContacts+=f)},s.solvePosition=function(c,d,h){var f,u,m,p,v,g,y,_,b=s._positionDampen*(h||1),w=o.clamp(d/o._baseDelta,0,1),M=c.length;for(f=0;f<M;f++)u=c[f],!(!u.isActive||u.isSensor)&&(m=u.collision,p=m.parentA,v=m.parentB,g=m.normal,u.separation=g.x*(v.positionImpulse.x+m.penetration.x-p.positionImpulse.x)+g.y*(v.positionImpulse.y+m.penetration.y-p.positionImpulse.y));for(f=0;f<M;f++)u=c[f],!(!u.isActive||u.isSensor)&&(m=u.collision,p=m.parentA,v=m.parentB,g=m.normal,_=u.separation-u.slop*w,(p.isStatic||v.isStatic)&&(_*=2),p.isStatic||p.isSleeping||(y=b/p.totalContacts,p.positionImpulse.x+=g.x*_*y,p.positionImpulse.y+=g.y*_*y),v.isStatic||v.isSleeping||(y=b/v.totalContacts,v.positionImpulse.x-=g.x*_*y,v.positionImpulse.y-=g.y*_*y))},s.postSolvePosition=function(c){for(var d=s._positionWarming,h=c.length,f=a.translate,u=l.update,m=0;m<h;m++){var p=c[m],v=p.positionImpulse,g=v.x,y=v.y,_=p.velocity;if(p.totalContacts=0,g!==0||y!==0){for(var b=0;b<p.parts.length;b++){var w=p.parts[b];f(w.vertices,v),u(w.bounds,w.vertices,_),w.position.x+=g,w.position.y+=y}p.positionPrev.x+=g,p.positionPrev.y+=y,g*_.x+y*_.y<0?(v.x=0,v.y=0):(v.x*=d,v.y*=d)}}},s.preSolveVelocity=function(c){var d=c.length,h,f;for(h=0;h<d;h++){var u=c[h];if(!(!u.isActive||u.isSensor)){var m=u.activeContacts,p=m.length,v=u.collision,g=v.parentA,y=v.parentB,_=v.normal,b=v.tangent;for(f=0;f<p;f++){var w=m[f],M=w.vertex,T=w.normalImpulse,E=w.tangentImpulse;if(T!==0||E!==0){var S=_.x*T+b.x*E,x=_.y*T+b.y*E;g.isStatic||g.isSleeping||(g.positionPrev.x+=S*g.inverseMass,g.positionPrev.y+=x*g.inverseMass,g.anglePrev+=g.inverseInertia*((M.x-g.position.x)*x-(M.y-g.position.y)*S)),y.isStatic||y.isSleeping||(y.positionPrev.x-=S*y.inverseMass,y.positionPrev.y-=x*y.inverseMass,y.anglePrev-=y.inverseInertia*((M.x-y.position.x)*x-(M.y-y.position.y)*S))}}}}},s.solveVelocity=function(c,d){var h=d/o._baseDelta,f=h*h,u=f*h,m=-s._restingThresh*h,p=s._restingThreshTangent,v=s._frictionNormalMultiplier*h,g=s._frictionMaxStatic,y=c.length,_,b,w,M;for(w=0;w<y;w++){var T=c[w];if(!(!T.isActive||T.isSensor)){var E=T.collision,S=E.parentA,x=E.parentB,C=S.velocity,A=x.velocity,P=E.normal.x,R=E.normal.y,L=E.tangent.x,U=E.tangent.y,B=T.activeContacts,F=B.length,G=1/F,O=S.inverseMass+x.inverseMass,ee=T.friction*T.frictionStatic*v;for(C.x=S.position.x-S.positionPrev.x,C.y=S.position.y-S.positionPrev.y,A.x=x.position.x-x.positionPrev.x,A.y=x.position.y-x.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,x.angularVelocity=x.angle-x.anglePrev,M=0;M<F;M++){var se=B[M],we=se.vertex,X=we.x-S.position.x,J=we.y-S.position.y,ne=we.x-x.position.x,re=we.y-x.position.y,_e=C.x-J*S.angularVelocity,Oe=C.y+X*S.angularVelocity,V=A.x-re*x.angularVelocity,ze=A.y+ne*x.angularVelocity,Pe=_e-V,me=Oe-ze,fe=P*Pe+R*me,De=L*Pe+U*me,Ne=T.separation+fe,$=Math.min(Ne,1);$=Ne<0?0:$;var Ye=$*ee;De<-Ye||De>Ye?(b=De>0?De:-De,_=T.friction*(De>0?1:-1)*u,_<-b?_=-b:_>b&&(_=b)):(_=De,b=g);var k=X*R-J*P,D=ne*R-re*P,z=G/(O+S.inverseInertia*k*k+x.inverseInertia*D*D),te=(1+T.restitution)*fe*z;if(_*=z,fe<m)se.normalImpulse=0;else{var oe=se.normalImpulse;se.normalImpulse+=te,se.normalImpulse>0&&(se.normalImpulse=0),te=se.normalImpulse-oe}if(De<-p||De>p)se.tangentImpulse=0;else{var le=se.tangentImpulse;se.tangentImpulse+=_,se.tangentImpulse<-b&&(se.tangentImpulse=-b),se.tangentImpulse>b&&(se.tangentImpulse=b),_=se.tangentImpulse-le}var Se=P*te+L*_,he=R*te+U*_;S.isStatic||S.isSleeping||(S.positionPrev.x+=Se*S.inverseMass,S.positionPrev.y+=he*S.inverseMass,S.anglePrev+=(X*he-J*Se)*S.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=Se*x.inverseMass,x.positionPrev.y-=he*x.inverseMass,x.anglePrev-=(ne*he-re*Se)*x.inverseInertia)}}}}})()},function(t,i,r){var s={};t.exports=s;var a=r(9),o=r(0);(function(){s.create=function(l){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},s.update=function(l,c,d){var h=l.list,f=h.length,u=l.table,m=c.length,p=l.collisionStart,v=l.collisionEnd,g=l.collisionActive,y,_,b,w;for(p.length=0,v.length=0,g.length=0,w=0;w<f;w++)h[w].confirmedActive=!1;for(w=0;w<m;w++)y=c[w],b=y.pair,b?(b.isActive?g.push(b):p.push(b),a.update(b,y,d),b.confirmedActive=!0):(b=a.create(y,d),u[b.id]=b,p.push(b),h.push(b));var M=[];for(f=h.length,w=0;w<f;w++)b=h[w],b.confirmedActive||(a.setActive(b,!1,d),v.push(b),!b.collision.bodyA.isSleeping&&!b.collision.bodyB.isSleeping&&M.push(w));for(w=0;w<M.length;w++)_=M[w]-w,b=h[_],h.splice(_,1),delete u[b.id]},s.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(t,i,r){var s=t.exports=r(21);s.Axes=r(11),s.Bodies=r(12),s.Body=r(4),s.Bounds=r(1),s.Collision=r(8),s.Common=r(0),s.Composite=r(6),s.Composites=r(22),s.Constraint=r(10),s.Contact=r(16),s.Detector=r(13),s.Engine=r(17),s.Events=r(5),s.Grid=r(23),s.Mouse=r(14),s.MouseConstraint=r(24),s.Pair=r(9),s.Pairs=r(19),s.Plugin=r(15),s.Query=r(25),s.Render=r(26),s.Resolver=r(18),s.Runner=r(27),s.SAT=r(28),s.Sleeping=r(7),s.Svg=r(29),s.Vector=r(2),s.Vertices=r(3),s.World=r(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(t,i,r){var s={};t.exports=s;var a=r(15),o=r(0);(function(){s.name="matter-js",s.version="0.19.0",s.uses=[],s.used=[],s.use=function(){a.use(s,Array.prototype.slice.call(arguments))},s.before=function(l,c){return l=l.replace(/^Matter./,""),o.chainPathBefore(s,l,c)},s.after=function(l,c){return l=l.replace(/^Matter./,""),o.chainPathAfter(s,l,c)}})()},function(t,i,r){var s={};t.exports=s;var a=r(6),o=r(10),l=r(0),c=r(4),d=r(12),h=l.deprecated;(function(){s.stack=function(f,u,m,p,v,g,y){for(var _=a.create({label:"Stack"}),b=f,w=u,M,T=0,E=0;E<p;E++){for(var S=0,x=0;x<m;x++){var C=y(b,w,x,E,M,T);if(C){var A=C.bounds.max.y-C.bounds.min.y,P=C.bounds.max.x-C.bounds.min.x;A>S&&(S=A),c.translate(C,{x:P*.5,y:A*.5}),b=C.bounds.max.x+v,a.addBody(_,C),M=C,T+=1}else b+=v}w+=S+g,b=f}return _},s.chain=function(f,u,m,p,v,g){for(var y=f.bodies,_=1;_<y.length;_++){var b=y[_-1],w=y[_],M=b.bounds.max.y-b.bounds.min.y,T=b.bounds.max.x-b.bounds.min.x,E=w.bounds.max.y-w.bounds.min.y,S=w.bounds.max.x-w.bounds.min.x,x={bodyA:b,pointA:{x:T*u,y:M*m},bodyB:w,pointB:{x:S*p,y:E*v}},C=l.extend(x,g);a.addConstraint(f,o.create(C))}return f.label+=" Chain",f},s.mesh=function(f,u,m,p,v){var g=f.bodies,y,_,b,w,M;for(y=0;y<m;y++){for(_=1;_<u;_++)b=g[_-1+y*u],w=g[_+y*u],a.addConstraint(f,o.create(l.extend({bodyA:b,bodyB:w},v)));if(y>0)for(_=0;_<u;_++)b=g[_+(y-1)*u],w=g[_+y*u],a.addConstraint(f,o.create(l.extend({bodyA:b,bodyB:w},v))),p&&_>0&&(M=g[_-1+(y-1)*u],a.addConstraint(f,o.create(l.extend({bodyA:M,bodyB:w},v)))),p&&_<u-1&&(M=g[_+1+(y-1)*u],a.addConstraint(f,o.create(l.extend({bodyA:M,bodyB:w},v))))}return f.label+=" Mesh",f},s.pyramid=function(f,u,m,p,v,g,y){return s.stack(f,u,m,p,v,g,function(_,b,w,M,T,E){var S=Math.min(p,Math.ceil(m/2)),x=T?T.bounds.max.x-T.bounds.min.x:0;if(!(M>S)){M=S-M;var C=M,A=m-1-M;if(!(w<C||w>A)){E===1&&c.translate(T,{x:(w+(m%2===1?1:-1))*x,y:0});var P=T?w*x:0;return y(f+P+w*v,b,w,M,T,E)}}})},s.newtonsCradle=function(f,u,m,p,v){for(var g=a.create({label:"Newtons Cradle"}),y=0;y<m;y++){var _=1.9,b=d.circle(f+y*(p*_),u+v,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),w=o.create({pointA:{x:f+y*(p*_),y:u},bodyB:b});a.addBody(g,b),a.addConstraint(g,w)}return g},h(s,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),s.car=function(f,u,m,p,v){var g=c.nextGroup(!0),y=20,_=-m*.5+y,b=m*.5-y,w=0,M=a.create({label:"Car"}),T=d.rectangle(f,u,m,p,{collisionFilter:{group:g},chamfer:{radius:p*.5},density:2e-4}),E=d.circle(f+_,u+w,v,{collisionFilter:{group:g},friction:.8}),S=d.circle(f+b,u+w,v,{collisionFilter:{group:g},friction:.8}),x=o.create({bodyB:T,pointB:{x:_,y:w},bodyA:E,stiffness:1,length:0}),C=o.create({bodyB:T,pointB:{x:b,y:w},bodyA:S,stiffness:1,length:0});return a.addBody(M,T),a.addBody(M,E),a.addBody(M,S),a.addConstraint(M,x),a.addConstraint(M,C),M},h(s,"car","Composites.car ➤ moved to car example"),s.softBody=function(f,u,m,p,v,g,y,_,b,w){b=l.extend({inertia:1/0},b),w=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},w);var M=s.stack(f,u,m,p,v,g,function(T,E){return d.circle(T,E,_,b)});return s.mesh(M,m,p,y,w),M.label="Soft Body",M},h(s,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(t,i,r){var s={};t.exports=s;var a=r(9),o=r(0),l=o.deprecated;(function(){s.create=function(c){var d={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(d,c)},s.update=function(c,d,h,f){var u,m,p,v=h.world,g=c.buckets,y,_,b=!1;for(u=0;u<d.length;u++){var w=d[u];if(!(w.isSleeping&&!f)&&!(v.bounds&&(w.bounds.max.x<v.bounds.min.x||w.bounds.min.x>v.bounds.max.x||w.bounds.max.y<v.bounds.min.y||w.bounds.min.y>v.bounds.max.y))){var M=s._getRegion(c,w);if(!w.region||M.id!==w.region.id||f){(!w.region||f)&&(w.region=M);var T=s._regionUnion(M,w.region);for(m=T.startCol;m<=T.endCol;m++)for(p=T.startRow;p<=T.endRow;p++){_=s._getBucketId(m,p),y=g[_];var E=m>=M.startCol&&m<=M.endCol&&p>=M.startRow&&p<=M.endRow,S=m>=w.region.startCol&&m<=w.region.endCol&&p>=w.region.startRow&&p<=w.region.endRow;!E&&S&&S&&y&&s._bucketRemoveBody(c,y,w),(w.region===M||E&&!S||f)&&(y||(y=s._createBucket(g,_)),s._bucketAddBody(c,y,w))}w.region=M,b=!0}}}b&&(c.pairsList=s._createActivePairsList(c))},l(s,"update","Grid.update ➤ replaced by Matter.Detector"),s.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},l(s,"clear","Grid.clear ➤ replaced by Matter.Detector"),s._regionUnion=function(c,d){var h=Math.min(c.startCol,d.startCol),f=Math.max(c.endCol,d.endCol),u=Math.min(c.startRow,d.startRow),m=Math.max(c.endRow,d.endRow);return s._createRegion(h,f,u,m)},s._getRegion=function(c,d){var h=d.bounds,f=Math.floor(h.min.x/c.bucketWidth),u=Math.floor(h.max.x/c.bucketWidth),m=Math.floor(h.min.y/c.bucketHeight),p=Math.floor(h.max.y/c.bucketHeight);return s._createRegion(f,u,m,p)},s._createRegion=function(c,d,h,f){return{id:c+","+d+","+h+","+f,startCol:c,endCol:d,startRow:h,endRow:f}},s._getBucketId=function(c,d){return"C"+c+"R"+d},s._createBucket=function(c,d){var h=c[d]=[];return h},s._bucketAddBody=function(c,d,h){var f=c.pairs,u=a.id,m=d.length,p;for(p=0;p<m;p++){var v=d[p];if(!(h.id===v.id||h.isStatic&&v.isStatic)){var g=u(h,v),y=f[g];y?y[2]+=1:f[g]=[h,v,1]}}d.push(h)},s._bucketRemoveBody=function(c,d,h){var f=c.pairs,u=a.id,m;d.splice(o.indexOf(d,h),1);var p=d.length;for(m=0;m<p;m++){var v=f[u(h,d[m])];v&&(v[2]-=1)}},s._createActivePairsList=function(c){var d,h=c.pairs,f=o.keys(h),u=f.length,m=[],p;for(p=0;p<u;p++)d=h[f[p]],d[2]>0?m.push(d):delete h[f[p]];return m}})()},function(t,i,r){var s={};t.exports=s;var a=r(3),o=r(7),l=r(14),c=r(5),d=r(13),h=r(10),f=r(6),u=r(0),m=r(1);(function(){s.create=function(p,v){var g=(p?p.mouse:null)||(v?v.mouse:null);g||(p&&p.render&&p.render.canvas?g=l.create(p.render.canvas):v&&v.element?g=l.create(v.element):(g=l.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=h.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),_={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},b=u.extend(_,v);return c.on(p,"beforeUpdate",function(){var w=f.allBodies(p.world);s.update(b,w),s._triggerEvents(b)}),b},s.update=function(p,v){var g=p.mouse,y=p.constraint,_=p.body;if(g.button===0){if(y.bodyB)o.set(y.bodyB,!1),y.pointA=g.position;else for(var b=0;b<v.length;b++)if(_=v[b],m.contains(_.bounds,g.position)&&d.canCollide(_.collisionFilter,p.collisionFilter))for(var w=_.parts.length>1?1:0;w<_.parts.length;w++){var M=_.parts[w];if(a.contains(M.vertices,g.position)){y.pointA=g.position,y.bodyB=p.body=_,y.pointB={x:g.position.x-_.position.x,y:g.position.y-_.position.y},y.angleB=_.angle,o.set(_,!1),c.trigger(p,"startdrag",{mouse:g,body:_});break}}}else y.bodyB=p.body=null,y.pointB=null,_&&c.trigger(p,"enddrag",{mouse:g,body:_})},s._triggerEvents=function(p){var v=p.mouse,g=v.sourceEvents;g.mousemove&&c.trigger(p,"mousemove",{mouse:v}),g.mousedown&&c.trigger(p,"mousedown",{mouse:v}),g.mouseup&&c.trigger(p,"mouseup",{mouse:v}),l.clearSourceEvents(v)}})()},function(t,i,r){var s={};t.exports=s;var a=r(2),o=r(8),l=r(1),c=r(12),d=r(3);(function(){s.collides=function(h,f){for(var u=[],m=f.length,p=h.bounds,v=o.collides,g=l.overlaps,y=0;y<m;y++){var _=f[y],b=_.parts.length,w=b===1?0:1;if(g(_.bounds,p))for(var M=w;M<b;M++){var T=_.parts[M];if(g(T.bounds,p)){var E=v(T,h);if(E){u.push(E);break}}}}return u},s.ray=function(h,f,u,m){m=m||1e-100;for(var p=a.angle(f,u),v=a.magnitude(a.sub(f,u)),g=(u.x+f.x)*.5,y=(u.y+f.y)*.5,_=c.rectangle(g,y,v,m,{angle:p}),b=s.collides(_,h),w=0;w<b.length;w+=1){var M=b[w];M.body=M.bodyB=M.bodyA}return b},s.region=function(h,f,u){for(var m=[],p=0;p<h.length;p++){var v=h[p],g=l.overlaps(v.bounds,f);(g&&!u||!g&&u)&&m.push(v)}return m},s.point=function(h,f){for(var u=[],m=0;m<h.length;m++){var p=h[m];if(l.contains(p.bounds,f))for(var v=p.parts.length===1?0:1;v<p.parts.length;v++){var g=p.parts[v];if(l.contains(g.bounds,f)&&d.contains(g.vertices,f)){u.push(p);break}}}return u}})()},function(t,i,r){var s={};t.exports=s;var a=r(4),o=r(0),l=r(6),c=r(1),d=r(5),h=r(2),f=r(14);(function(){var u,m;typeof window<"u"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(w){window.setTimeout(function(){w(o.now())},1e3/60)},m=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(w){var M={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!w.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},T=o.extend(M,w);return T.canvas&&(T.canvas.width=T.options.width||T.canvas.width,T.canvas.height=T.options.height||T.canvas.height),T.mouse=w.mouse,T.engine=w.engine,T.canvas=T.canvas||g(T.options.width,T.options.height),T.context=T.canvas.getContext("2d"),T.textures={},T.bounds=T.bounds||{min:{x:0,y:0},max:{x:T.canvas.width,y:T.canvas.height}},T.controller=s,T.options.showBroadphase=!1,T.options.pixelRatio!==1&&s.setPixelRatio(T,T.options.pixelRatio),o.isElement(T.element)&&T.element.appendChild(T.canvas),T},s.run=function(w){(function M(T){w.frameRequestId=u(M),p(w,T),s.world(w,T),(w.options.showStats||w.options.showDebug)&&s.stats(w,w.context,T),(w.options.showPerformance||w.options.showDebug)&&s.performance(w,w.context,T)})()},s.stop=function(w){m(w.frameRequestId)},s.setPixelRatio=function(w,M){var T=w.options,E=w.canvas;M==="auto"&&(M=y(E)),T.pixelRatio=M,E.setAttribute("data-pixel-ratio",M),E.width=T.width*M,E.height=T.height*M,E.style.width=T.width+"px",E.style.height=T.height+"px"},s.lookAt=function(w,M,T,E){E=typeof E<"u"?E:!0,M=o.isArray(M)?M:[M],T=T||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},x=0;x<M.length;x+=1){var C=M[x],A=C.bounds?C.bounds.min:C.min||C.position||C,P=C.bounds?C.bounds.max:C.max||C.position||C;A&&P&&(A.x<S.min.x&&(S.min.x=A.x),P.x>S.max.x&&(S.max.x=P.x),A.y<S.min.y&&(S.min.y=A.y),P.y>S.max.y&&(S.max.y=P.y))}var R=S.max.x-S.min.x+2*T.x,L=S.max.y-S.min.y+2*T.y,U=w.canvas.height,B=w.canvas.width,F=B/U,G=R/L,O=1,ee=1;G>F?ee=G/F:O=F/G,w.options.hasBounds=!0,w.bounds.min.x=S.min.x,w.bounds.max.x=S.min.x+R*O,w.bounds.min.y=S.min.y,w.bounds.max.y=S.min.y+L*ee,E&&(w.bounds.min.x+=R*.5-R*O*.5,w.bounds.max.x+=R*.5-R*O*.5,w.bounds.min.y+=L*.5-L*ee*.5,w.bounds.max.y+=L*.5-L*ee*.5),w.bounds.min.x-=T.x,w.bounds.max.x-=T.x,w.bounds.min.y-=T.y,w.bounds.max.y-=T.y,w.mouse&&(f.setScale(w.mouse,{x:(w.bounds.max.x-w.bounds.min.x)/w.canvas.width,y:(w.bounds.max.y-w.bounds.min.y)/w.canvas.height}),f.setOffset(w.mouse,w.bounds.min))},s.startViewTransform=function(w){var M=w.bounds.max.x-w.bounds.min.x,T=w.bounds.max.y-w.bounds.min.y,E=M/w.options.width,S=T/w.options.height;w.context.setTransform(w.options.pixelRatio/E,0,0,w.options.pixelRatio/S,0,0),w.context.translate(-w.bounds.min.x,-w.bounds.min.y)},s.endViewTransform=function(w){w.context.setTransform(w.options.pixelRatio,0,0,w.options.pixelRatio,0,0)},s.world=function(w,M){var T=o.now(),E=w.engine,S=E.world,x=w.canvas,C=w.context,A=w.options,P=w.timing,R=l.allBodies(S),L=l.allConstraints(S),U=A.wireframes?A.wireframeBackground:A.background,B=[],F=[],G,O={timestamp:E.timing.timestamp};if(d.trigger(w,"beforeRender",O),w.currentBackground!==U&&b(w,U),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,x.width,x.height),C.globalCompositeOperation="source-over",A.hasBounds){for(G=0;G<R.length;G++){var ee=R[G];c.overlaps(ee.bounds,w.bounds)&&B.push(ee)}for(G=0;G<L.length;G++){var se=L[G],we=se.bodyA,X=se.bodyB,J=se.pointA,ne=se.pointB;we&&(J=h.add(we.position,se.pointA)),X&&(ne=h.add(X.position,se.pointB)),!(!J||!ne)&&(c.contains(w.bounds,J)||c.contains(w.bounds,ne))&&F.push(se)}s.startViewTransform(w),w.mouse&&(f.setScale(w.mouse,{x:(w.bounds.max.x-w.bounds.min.x)/w.options.width,y:(w.bounds.max.y-w.bounds.min.y)/w.options.height}),f.setOffset(w.mouse,w.bounds.min))}else F=L,B=R,w.options.pixelRatio!==1&&w.context.setTransform(w.options.pixelRatio,0,0,w.options.pixelRatio,0,0);!A.wireframes||E.enableSleeping&&A.showSleeping?s.bodies(w,B,C):(A.showConvexHulls&&s.bodyConvexHulls(w,B,C),s.bodyWireframes(w,B,C)),A.showBounds&&s.bodyBounds(w,B,C),(A.showAxes||A.showAngleIndicator)&&s.bodyAxes(w,B,C),A.showPositions&&s.bodyPositions(w,B,C),A.showVelocity&&s.bodyVelocity(w,B,C),A.showIds&&s.bodyIds(w,B,C),A.showSeparations&&s.separations(w,E.pairs.list,C),A.showCollisions&&s.collisions(w,E.pairs.list,C),A.showVertexNumbers&&s.vertexNumbers(w,B,C),A.showMousePosition&&s.mousePosition(w,w.mouse,C),s.constraints(F,C),A.hasBounds&&s.endViewTransform(w),d.trigger(w,"afterRender",O),P.lastElapsed=o.now()-T},s.stats=function(w,M,T){for(var E=w.engine,S=E.world,x=l.allBodies(S),C=0,A=55,P=44,R=0,L=0,U=0;U<x.length;U+=1)C+=x[U].parts.length;var B={Part:C,Body:x.length,Cons:l.allConstraints(S).length,Comp:l.allComposites(S).length,Pair:E.pairs.list.length};M.fillStyle="#0e0f19",M.fillRect(R,L,A*5.5,P),M.font="12px Arial",M.textBaseline="top",M.textAlign="right";for(var F in B){var G=B[F];M.fillStyle="#aaa",M.fillText(F,R+A,L+8),M.fillStyle="#eee",M.fillText(G,R+A,L+26),R+=A}},s.performance=function(w,M){var T=w.engine,E=w.timing,S=E.deltaHistory,x=E.elapsedHistory,C=E.timestampElapsedHistory,A=E.engineDeltaHistory,P=E.engineElapsedHistory,R=T.timing.lastDelta,L=v(S),U=v(x),B=v(A),F=v(P),G=v(C),O=G/L||0,ee=1e3/L||0,se=4,we=12,X=60,J=34,ne=10,re=69;M.fillStyle="#0e0f19",M.fillRect(0,50,we*4+X*5+22,J),s.status(M,ne,re,X,se,S.length,Math.round(ee)+" fps",ee/s._goodFps,function(_e){return S[_e]/L-1}),s.status(M,ne+we+X,re,X,se,A.length,R.toFixed(2)+" dt",s._goodDelta/R,function(_e){return A[_e]/B-1}),s.status(M,ne+(we+X)*2,re,X,se,P.length,F.toFixed(2)+" ut",1-F/s._goodFps,function(_e){return P[_e]/F-1}),s.status(M,ne+(we+X)*3,re,X,se,x.length,U.toFixed(2)+" rt",1-U/s._goodFps,function(_e){return x[_e]/U-1}),s.status(M,ne+(we+X)*4,re,X,se,C.length,O.toFixed(2)+" x",O*O*O,function(_e){return(C[_e]/S[_e]/O||0)-1})},s.status=function(w,M,T,E,S,x,C,A,P){w.strokeStyle="#888",w.fillStyle="#444",w.lineWidth=1,w.fillRect(M,T+7,E,1),w.beginPath(),w.moveTo(M,T+7-S*o.clamp(.4*P(0),-2,2));for(var R=0;R<E;R+=1)w.lineTo(M+R,T+7-(R<x?S*o.clamp(.4*P(R),-2,2):0));w.stroke(),w.fillStyle="hsl("+o.clamp(25+95*A,0,120)+",100%,60%)",w.fillRect(M,T-7,4,4),w.font="12px Arial",w.textBaseline="middle",w.textAlign="right",w.fillStyle="#eee",w.fillText(C,M+E,T-5)},s.constraints=function(w,M){for(var T=M,E=0;E<w.length;E++){var S=w[E];if(!(!S.render.visible||!S.pointA||!S.pointB)){var x=S.bodyA,C=S.bodyB,A,P;if(x?A=h.add(x.position,S.pointA):A=S.pointA,S.render.type==="pin")T.beginPath(),T.arc(A.x,A.y,3,0,2*Math.PI),T.closePath();else{if(C?P=h.add(C.position,S.pointB):P=S.pointB,T.beginPath(),T.moveTo(A.x,A.y),S.render.type==="spring")for(var R=h.sub(P,A),L=h.perp(h.normalise(R)),U=Math.ceil(o.clamp(S.length/5,12,20)),B,F=1;F<U;F+=1)B=F%2===0?1:-1,T.lineTo(A.x+R.x*(F/U)+L.x*B*4,A.y+R.y*(F/U)+L.y*B*4);T.lineTo(P.x,P.y)}S.render.lineWidth&&(T.lineWidth=S.render.lineWidth,T.strokeStyle=S.render.strokeStyle,T.stroke()),S.render.anchors&&(T.fillStyle=S.render.strokeStyle,T.beginPath(),T.arc(A.x,A.y,3,0,2*Math.PI),T.arc(P.x,P.y,3,0,2*Math.PI),T.closePath(),T.fill())}}},s.bodies=function(w,M,T){var E=T;w.engine;var S=w.options,x=S.showInternalEdges||!S.wireframes,C,A,P,R;for(P=0;P<M.length;P++)if(C=M[P],!!C.render.visible){for(R=C.parts.length>1?1:0;R<C.parts.length;R++)if(A=C.parts[R],!!A.render.visible){if(S.showSleeping&&C.isSleeping?E.globalAlpha=.5*A.render.opacity:A.render.opacity!==1&&(E.globalAlpha=A.render.opacity),A.render.sprite&&A.render.sprite.texture&&!S.wireframes){var L=A.render.sprite,U=_(w,L.texture);E.translate(A.position.x,A.position.y),E.rotate(A.angle),E.drawImage(U,U.width*-L.xOffset*L.xScale,U.height*-L.yOffset*L.yScale,U.width*L.xScale,U.height*L.yScale),E.rotate(-A.angle),E.translate(-A.position.x,-A.position.y)}else{if(A.circleRadius)E.beginPath(),E.arc(A.position.x,A.position.y,A.circleRadius,0,2*Math.PI);else{E.beginPath(),E.moveTo(A.vertices[0].x,A.vertices[0].y);for(var B=1;B<A.vertices.length;B++)!A.vertices[B-1].isInternal||x?E.lineTo(A.vertices[B].x,A.vertices[B].y):E.moveTo(A.vertices[B].x,A.vertices[B].y),A.vertices[B].isInternal&&!x&&E.moveTo(A.vertices[(B+1)%A.vertices.length].x,A.vertices[(B+1)%A.vertices.length].y);E.lineTo(A.vertices[0].x,A.vertices[0].y),E.closePath()}S.wireframes?(E.lineWidth=1,E.strokeStyle="#bbb",E.stroke()):(E.fillStyle=A.render.fillStyle,A.render.lineWidth&&(E.lineWidth=A.render.lineWidth,E.strokeStyle=A.render.strokeStyle,E.stroke()),E.fill())}E.globalAlpha=1}}},s.bodyWireframes=function(w,M,T){var E=T,S=w.options.showInternalEdges,x,C,A,P,R;for(E.beginPath(),A=0;A<M.length;A++)if(x=M[A],!!x.render.visible)for(R=x.parts.length>1?1:0;R<x.parts.length;R++){for(C=x.parts[R],E.moveTo(C.vertices[0].x,C.vertices[0].y),P=1;P<C.vertices.length;P++)!C.vertices[P-1].isInternal||S?E.lineTo(C.vertices[P].x,C.vertices[P].y):E.moveTo(C.vertices[P].x,C.vertices[P].y),C.vertices[P].isInternal&&!S&&E.moveTo(C.vertices[(P+1)%C.vertices.length].x,C.vertices[(P+1)%C.vertices.length].y);E.lineTo(C.vertices[0].x,C.vertices[0].y)}E.lineWidth=1,E.strokeStyle="#bbb",E.stroke()},s.bodyConvexHulls=function(w,M,T){var E=T,S,x,C;for(E.beginPath(),x=0;x<M.length;x++)if(S=M[x],!(!S.render.visible||S.parts.length===1)){for(E.moveTo(S.vertices[0].x,S.vertices[0].y),C=1;C<S.vertices.length;C++)E.lineTo(S.vertices[C].x,S.vertices[C].y);E.lineTo(S.vertices[0].x,S.vertices[0].y)}E.lineWidth=1,E.strokeStyle="rgba(255,255,255,0.2)",E.stroke()},s.vertexNumbers=function(w,M,T){var E=T,S,x,C;for(S=0;S<M.length;S++){var A=M[S].parts;for(C=A.length>1?1:0;C<A.length;C++){var P=A[C];for(x=0;x<P.vertices.length;x++)E.fillStyle="rgba(255,255,255,0.2)",E.fillText(S+"_"+x,P.position.x+(P.vertices[x].x-P.position.x)*.8,P.position.y+(P.vertices[x].y-P.position.y)*.8)}}},s.mousePosition=function(w,M,T){var E=T;E.fillStyle="rgba(255,255,255,0.8)",E.fillText(M.position.x+"  "+M.position.y,M.position.x+5,M.position.y-5)},s.bodyBounds=function(w,M,T){var E=T;w.engine;var S=w.options;E.beginPath();for(var x=0;x<M.length;x++){var C=M[x];if(C.render.visible)for(var A=M[x].parts,P=A.length>1?1:0;P<A.length;P++){var R=A[P];E.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}S.wireframes?E.strokeStyle="rgba(255,255,255,0.08)":E.strokeStyle="rgba(0,0,0,0.1)",E.lineWidth=1,E.stroke()},s.bodyAxes=function(w,M,T){var E=T;w.engine;var S=w.options,x,C,A,P;for(E.beginPath(),C=0;C<M.length;C++){var R=M[C],L=R.parts;if(R.render.visible)if(S.showAxes)for(A=L.length>1?1:0;A<L.length;A++)for(x=L[A],P=0;P<x.axes.length;P++){var U=x.axes[P];E.moveTo(x.position.x,x.position.y),E.lineTo(x.position.x+U.x*20,x.position.y+U.y*20)}else for(A=L.length>1?1:0;A<L.length;A++)for(x=L[A],P=0;P<x.axes.length;P++)E.moveTo(x.position.x,x.position.y),E.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}S.wireframes?(E.strokeStyle="indianred",E.lineWidth=1):(E.strokeStyle="rgba(255, 255, 255, 0.4)",E.globalCompositeOperation="overlay",E.lineWidth=2),E.stroke(),E.globalCompositeOperation="source-over"},s.bodyPositions=function(w,M,T){var E=T;w.engine;var S=w.options,x,C,A,P;for(E.beginPath(),A=0;A<M.length;A++)if(x=M[A],!!x.render.visible)for(P=0;P<x.parts.length;P++)C=x.parts[P],E.arc(C.position.x,C.position.y,3,0,2*Math.PI,!1),E.closePath();for(S.wireframes?E.fillStyle="indianred":E.fillStyle="rgba(0,0,0,0.5)",E.fill(),E.beginPath(),A=0;A<M.length;A++)x=M[A],x.render.visible&&(E.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),E.closePath());E.fillStyle="rgba(255,165,0,0.8)",E.fill()},s.bodyVelocity=function(w,M,T){var E=T;E.beginPath();for(var S=0;S<M.length;S++){var x=M[S];if(x.render.visible){var C=a.getVelocity(x);E.moveTo(x.position.x,x.position.y),E.lineTo(x.position.x+C.x,x.position.y+C.y)}}E.lineWidth=3,E.strokeStyle="cornflowerblue",E.stroke()},s.bodyIds=function(w,M,T){var E=T,S,x;for(S=0;S<M.length;S++)if(M[S].render.visible){var C=M[S].parts;for(x=C.length>1?1:0;x<C.length;x++){var A=C[x];E.font="12px Arial",E.fillStyle="rgba(255,255,255,0.5)",E.fillText(A.id,A.position.x+10,A.position.y-10)}}},s.collisions=function(w,M,T){var E=T,S=w.options,x,C,A,P;for(E.beginPath(),A=0;A<M.length;A++)if(x=M[A],!!x.isActive)for(C=x.collision,P=0;P<x.activeContacts.length;P++){var R=x.activeContacts[P],L=R.vertex;E.rect(L.x-1.5,L.y-1.5,3.5,3.5)}for(S.wireframes?E.fillStyle="rgba(255,255,255,0.7)":E.fillStyle="orange",E.fill(),E.beginPath(),A=0;A<M.length;A++)if(x=M[A],!!x.isActive&&(C=x.collision,x.activeContacts.length>0)){var U=x.activeContacts[0].vertex.x,B=x.activeContacts[0].vertex.y;x.activeContacts.length===2&&(U=(x.activeContacts[0].vertex.x+x.activeContacts[1].vertex.x)/2,B=(x.activeContacts[0].vertex.y+x.activeContacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?E.moveTo(U-C.normal.x*8,B-C.normal.y*8):E.moveTo(U+C.normal.x*8,B+C.normal.y*8),E.lineTo(U,B)}S.wireframes?E.strokeStyle="rgba(255,165,0,0.7)":E.strokeStyle="orange",E.lineWidth=1,E.stroke()},s.separations=function(w,M,T){var E=T,S=w.options,x,C,A,P,R;for(E.beginPath(),R=0;R<M.length;R++)if(x=M[R],!!x.isActive){C=x.collision,A=C.bodyA,P=C.bodyB;var L=1;!P.isStatic&&!A.isStatic&&(L=.5),P.isStatic&&(L=0),E.moveTo(P.position.x,P.position.y),E.lineTo(P.position.x-C.penetration.x*L,P.position.y-C.penetration.y*L),L=1,!P.isStatic&&!A.isStatic&&(L=.5),A.isStatic&&(L=0),E.moveTo(A.position.x,A.position.y),E.lineTo(A.position.x+C.penetration.x*L,A.position.y+C.penetration.y*L)}S.wireframes?E.strokeStyle="rgba(255,165,0,0.5)":E.strokeStyle="orange",E.stroke()},s.inspector=function(w,M){w.engine;var T=w.selected,E=w.render,S=E.options,x;if(S.hasBounds){var C=E.bounds.max.x-E.bounds.min.x,A=E.bounds.max.y-E.bounds.min.y,P=C/E.options.width,R=A/E.options.height;M.scale(1/P,1/R),M.translate(-E.bounds.min.x,-E.bounds.min.y)}for(var L=0;L<T.length;L++){var U=T[L].data;switch(M.translate(.5,.5),M.lineWidth=1,M.strokeStyle="rgba(255,165,0,0.9)",M.setLineDash([1,2]),U.type){case"body":x=U.bounds,M.beginPath(),M.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),M.closePath(),M.stroke();break;case"constraint":var B=U.pointA;U.bodyA&&(B=U.pointB),M.beginPath(),M.arc(B.x,B.y,10,0,2*Math.PI),M.closePath(),M.stroke();break}M.setLineDash([]),M.translate(-.5,-.5)}w.selectStart!==null&&(M.translate(.5,.5),M.lineWidth=1,M.strokeStyle="rgba(255,165,0,0.6)",M.fillStyle="rgba(255,165,0,0.1)",x=w.selectBounds,M.beginPath(),M.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),M.closePath(),M.stroke(),M.fill(),M.translate(-.5,-.5)),S.hasBounds&&M.setTransform(1,0,0,1,0,0)};var p=function(w,M){var T=w.engine,E=w.timing,S=E.historySize,x=T.timing.timestamp;E.delta=M-E.lastTime||s._goodDelta,E.lastTime=M,E.timestampElapsed=x-E.lastTimestamp||0,E.lastTimestamp=x,E.deltaHistory.unshift(E.delta),E.deltaHistory.length=Math.min(E.deltaHistory.length,S),E.engineDeltaHistory.unshift(T.timing.lastDelta),E.engineDeltaHistory.length=Math.min(E.engineDeltaHistory.length,S),E.timestampElapsedHistory.unshift(E.timestampElapsed),E.timestampElapsedHistory.length=Math.min(E.timestampElapsedHistory.length,S),E.engineElapsedHistory.unshift(T.timing.lastElapsed),E.engineElapsedHistory.length=Math.min(E.engineElapsedHistory.length,S),E.elapsedHistory.unshift(E.lastElapsed),E.elapsedHistory.length=Math.min(E.elapsedHistory.length,S)},v=function(w){for(var M=0,T=0;T<w.length;T+=1)M+=w[T];return M/w.length||0},g=function(w,M){var T=document.createElement("canvas");return T.width=w,T.height=M,T.oncontextmenu=function(){return!1},T.onselectstart=function(){return!1},T},y=function(w){var M=w.getContext("2d"),T=window.devicePixelRatio||1,E=M.webkitBackingStorePixelRatio||M.mozBackingStorePixelRatio||M.msBackingStorePixelRatio||M.oBackingStorePixelRatio||M.backingStorePixelRatio||1;return T/E},_=function(w,M){var T=w.textures[M];return T||(T=w.textures[M]=new Image,T.src=M,T)},b=function(w,M){var T=M;/(jpg|gif|png)$/.test(M)&&(T="url("+M+")"),w.canvas.style.background=T,w.canvas.style.backgroundSize="contain",w.currentBackground=M}})()},function(t,i,r){var s={};t.exports=s;var a=r(5),o=r(17),l=r(0);(function(){var c,d;if(typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var h;c=function(f){h=setTimeout(function(){f(l.now())},1e3/60)},d=function(){clearTimeout(h)}}s.create=function(f){var u={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},m=l.extend(u,f);return m.delta=m.delta||1e3/m.fps,m.deltaMin=m.deltaMin||1e3/m.fps,m.deltaMax=m.deltaMax||1e3/(m.fps*.5),m.fps=1e3/m.delta,m},s.run=function(f,u){return typeof f.positionIterations<"u"&&(u=f,f=s.create()),function m(p){f.frameRequestId=c(m),p&&f.enabled&&s.tick(f,u,p)}(),f},s.tick=function(f,u,m){var p=u.timing,v;f.isFixed?v=f.delta:(v=m-f.timePrev||f.delta,f.timePrev=m,f.deltaHistory.push(v),f.deltaHistory=f.deltaHistory.slice(-f.deltaSampleSize),v=Math.min.apply(null,f.deltaHistory),v=v<f.deltaMin?f.deltaMin:v,v=v>f.deltaMax?f.deltaMax:v,f.delta=v);var g={timestamp:p.timestamp};a.trigger(f,"beforeTick",g),f.frameCounter+=1,m-f.counterTimestamp>=1e3&&(f.fps=f.frameCounter*((m-f.counterTimestamp)/1e3),f.counterTimestamp=m,f.frameCounter=0),a.trigger(f,"tick",g),a.trigger(f,"beforeUpdate",g),o.update(u,v),a.trigger(f,"afterUpdate",g),a.trigger(f,"afterTick",g)},s.stop=function(f){d(f.frameRequestId)},s.start=function(f,u){s.run(f,u)}})()},function(t,i,r){var s={};t.exports=s;var a=r(8),o=r(0),l=o.deprecated;(function(){s.collides=function(c,d){return a.collides(c,d)},l(s,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(t,i,r){var s={};t.exports=s,r(1);var a=r(0);(function(){s.pathToVertices=function(o,l){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,d,h,f,u,m,p,v,g,y,_=[],b,w,M=0,T=0,E=0;l=l||15;var S=function(C,A,P){var R=P%2===1&&P>1;if(!g||C!=g.x||A!=g.y){g&&R?(b=g.x,w=g.y):(b=0,w=0);var L={x:b+C,y:w+A};(R||!g)&&(g=L),_.push(L),T=b+C,E=w+A}},x=function(C){var A=C.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":T=C.x,E=C.y;break;case"H":T=C.x;break;case"V":E=C.y;break}S(T,E,C.pathSegType)}};for(s._svgPathToAbsolute(o),h=o.getTotalLength(),m=[],c=0;c<o.pathSegList.numberOfItems;c+=1)m.push(o.pathSegList.getItem(c));for(p=m.concat();M<h;){if(y=o.getPathSegAtLength(M),u=m[y],u!=v){for(;p.length&&p[0]!=u;)x(p.shift());v=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=o.getPointAtLength(M),S(f.x,f.y,0);break}M+=l}for(c=0,d=p.length;c<d;++c)x(p[c]);return _},s._svgPathToAbsolute=function(o){for(var l,c,d,h,f,u,m=o.pathSegList,p=0,v=0,g=m.numberOfItems,y=0;y<g;++y){var _=m.getItem(y),b=_.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in _&&(p=_.x),"y"in _&&(v=_.y);else switch("x1"in _&&(d=p+_.x1),"x2"in _&&(f=p+_.x2),"y1"in _&&(h=v+_.y1),"y2"in _&&(u=v+_.y2),"x"in _&&(p+=_.x),"y"in _&&(v+=_.y),b){case"m":m.replaceItem(o.createSVGPathSegMovetoAbs(p,v),y);break;case"l":m.replaceItem(o.createSVGPathSegLinetoAbs(p,v),y);break;case"h":m.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(p),y);break;case"v":m.replaceItem(o.createSVGPathSegLinetoVerticalAbs(v),y);break;case"c":m.replaceItem(o.createSVGPathSegCurvetoCubicAbs(p,v,d,h,f,u),y);break;case"s":m.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(p,v,f,u),y);break;case"q":m.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(p,v,d,h),y);break;case"t":m.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(p,v),y);break;case"a":m.replaceItem(o.createSVGPathSegArcAbs(p,v,_.r1,_.r2,_.angle,_.largeArcFlag,_.sweepFlag),y);break;case"z":case"Z":p=l,v=c;break}(b=="M"||b=="m")&&(l=p,c=v)}}})()},function(t,i,r){var s={};t.exports=s;var a=r(6);r(0),function(){s.create=a.create,s.add=a.add,s.remove=a.remove,s.clear=a.clear,s.addComposite=a.addComposite,s.addBody=a.addBody,s.addConstraint=a.addConstraint}()}])})})(ry);var HP=ry.exports;const sy=VP(HP);function GP(){const{Engine:n,Render:e,Events:t,MouseConstraint:i,Mouse:r,World:s,Bodies:a}=sy,o=-.4,l=.1,c=n.create(),d=c.world;c.world.gravity.y=l,c.world.gravity.x=o;const h=document.querySelector(".tag-canvas");if(!h){console.error("Container element not found");return}let f=h.clientWidth+2,u=h.clientHeight+2;const m=e.create({element:h,engine:c,options:{width:f,height:u,pixelRatio:2,background:"transparent",wireframes:!1}}),p=(G,O,ee,se,we)=>a.rectangle(G,O,ee,se,{isStatic:!0,...we}),v=p(f/2+160,u+80,f+320,160,{render:{fillStyle:"#1A1A1A"}}),g=p(-80,u/2,160,u,{}),y=p(f+80,u/2,160,u,{}),_=p(f/2+160,-80,f+320,160,{}),b=(G,O,ee,se)=>({text:G,width:O,height:ee,url:se}),w=[b("B",214.4,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/b-balky.svg"),b("A",267.2,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/a-balky.svg"),b("L",175.6,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/l-balky.svg"),b("K",234,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/k-balky.svg"),b("Y",243.2,284,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/y-balky.svg"),b(".",56.8,55.6,"https://cdn.jsdelivr.net/gh/CarterOgunsola/balky-20240v2@master/src/assets/balky/dot-balky.svg")],M=[],T=1.5;for(let G=0;G<T;G++)w.forEach(O=>M.push({...O}));const E=(G,O)=>({x:Math.random()*G,y:Math.random()*O}),S=()=>({x:(Math.random()-.5)*10,y:(Math.random()-.5)*10}),x=M.map(G=>{const O=E(f,u/2),ee=S();return a.rectangle(O.x,O.y,G.width,G.height,{chamfer:{radius:20},render:{sprite:{texture:G.url,xScale:1,yScale:1}},velocity:{x:ee.x,y:ee.y}})});s.add(c.world,[v,g,y,_,...x]);const C=r.create(m.canvas),A=i.create(c,{mouse:C,constraint:{stiffness:.2,render:{visible:!1}}});s.add(d,A),m.mouse=C;const P=()=>{C.element.removeEventListener("mousewheel",C.mousewheel),C.element.removeEventListener("DOMMouseScroll",C.mousewheel)};P();let R=!1;const L=()=>R=!0,U=()=>R=!1,B=()=>console.log(R?"click":"drag");document.addEventListener("mousedown",L),document.addEventListener("mousemove",U),document.addEventListener("mouseup",B),t.on(A,"mouseup",G=>{const O=G.source,ee=c.world.bodies;if(!O.bodyB){for(let se of ee)if(R&&sy.Bounds.contains(se.bounds,O.mouse.position)){const we=se.render.sprite.texture;we&&window.open(we,"_blank");break}}}),n.run(c),e.run(m);const F=()=>{f=h.clientWidth+2,u=h.clientHeight+2,m.canvas.width=f*m.options.pixelRatio,m.canvas.height=u*m.options.pixelRatio,m.canvas.style.width=`${f}px`,m.canvas.style.height=`${u}px`,m.options.width=f,m.options.height=u};return window.addEventListener("resize",()=>{F()}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",B),P(),window.removeEventListener("resize",F)}}function ay(){function n(){document.querySelectorAll('[data-element="headline"]').forEach(s=>{new So(s,{types:"chars"})})}n();const e=document.querySelectorAll('[data-element="headline"]');document.querySelector('[data-element="headline-wrapper"]');let t=0;function i(){e.forEach((s,a)=>{a!==t?Ce.set(s,{y:100,autoAlpha:0}):Ce.set(s,{y:0,autoAlpha:1})})}i();function r(){const s=e[t],a=(t+1)%e.length,o=e[a];n(),Ce.timeline({onComplete:()=>{t=a,r()}}).to(s,{y:-100,autoAlpha:0,duration:1.25,ease:"power3.inOut",delay:.5,onComplete:()=>{Ce.set(s,{y:100})}}).fromTo(o,{y:100,autoAlpha:0},{y:0,autoAlpha:1,duration:1.25,ease:"power3.inOut",delay:.5},0)}r()}Ce.registerPlugin(et);function WP(){const n=document.querySelectorAll(".scale_img_item");if(n.length===0)return;Ce.set(n,{scale:0});const e=()=>{Ce.to(n,{scale:1,duration:1.6,ease:"expo.out",stagger:{each:.02,from:"random"}})},t=()=>{Ce.set(n,{scale:0})};et.create({trigger:".img_scale_main",delay:.2,start:"top 100%",onEnter:e,onEnterBack:e,onLeave:t,onLeaveBack:t,markers:!1})}Ce.registerPlugin(et);const oy={"move-up":n=>({y:0,opacity:1}),"move-up-fade":n=>({y:0,opacity:1}),"move-up-scale":n=>({y:0,scale:1,opacity:1}),"move-up-scale-fade":n=>({y:0,scale:1,opacity:1})},ly={"move-up":{y:50,opacity:0},"move-up-fade":{y:50,opacity:0},"move-up-scale":{y:50,scale:.9,opacity:0},"move-up-scale-fade":{y:50,scale:.9,opacity:0}};function XP(){document.querySelectorAll("[data-gen-animation]").forEach(e=>{const t=e.getAttribute("data-gen-animation"),i=e.getAttribute("data-reset")==="true";if(t&&oy[t]){Ce.set(e,ly[t]);const r=oy[t](e),s=()=>{Ce.to(e,{...r,duration:1.4,ease:"expo.out"})},a=()=>{Ce.set(e,ly[t])};et.create({trigger:e,start:"top bottom",onEnter:s,onEnterBack:s,onLeave:i?a:null,onLeaveBack:i?a:null,markers:!1})}})}function $P(){const n=document.querySelectorAll('[data-time="utah"]'),e=()=>{const t=new Date,i={timeZone:"America/Denver",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return new Intl.DateTimeFormat([],i).format(t)};n.forEach(t=>{const i=()=>{const r=e(),[s,a,o]=r.split(":");t.innerHTML=`${s}<span class="colon" id="colon1">:</span>${a}<span class="colon" id="colon2">:</span>${o}`};setInterval(i,1e3),i()}),setInterval(()=>{document.querySelectorAll("#colon1").forEach(i=>{i.classList.toggle("hidden")})},500),setTimeout(()=>{setInterval(()=>{document.querySelectorAll("#colon2").forEach(i=>{i.classList.toggle("hidden")})},500)},250)}function qP(){const n=!sessionStorage.getItem("firstVisit");sessionStorage.setItem("firstVisit","false");const e=document.querySelector(".page_loader"),t=document.querySelector('[data-page-load="brand-logo"]'),i=document.querySelectorAll(".page_loader_img_wrap"),r=document.querySelector(".page_loader_wrap"),s=document.querySelector(".page_load_trigger"),a=()=>{Ce.set(e,{display:"block"}),Ce.set(r,{position:"absolute",top:0,bottom:"auto"}),Ce.timeline({onComplete:()=>{sessionStorage.setItem("firstVisit","false"),e.style.display="none"}}).to(t,{yPercent:0,duration:.5},0).to(i,{scale:1,duration:1.6,stagger:.1,ease:"expo.out"},"-=0.2").to(t,{yPercent:-100,duration:1,ease:"expo.inOut"},"-=0.8").to(i,{scale:0,duration:1,stagger:.1,ease:"expo.out"},"-=0.3").to(r,{height:"0%",duration:1,ease:"expo.out"},"-=0.5").add(()=>{console.log("Page load trigger clicked (first visit)"),s.click()},"-=0.751")},o=l=>{Ce.set(e,{display:"block"}),Ce.set(t,{yPercent:100}),Ce.set(i,{scale:0}),Ce.set(r,{position:"absolute",bottom:0,top:"auto",height:"0%"}),Ce.timeline({onComplete:()=>{window.location.href=l}}).to(r,{height:"100%",duration:.8,ease:"expo.out"},0).to(t,{yPercent:0,duration:1,ease:"expo.inOut"},"-=1").add(()=>{console.log("Page load trigger clicked (page-to-page transition)"),s.click()},"-=0.751")};document.querySelectorAll("a:not(.excluded-class)").forEach(l=>{l.addEventListener("click",c=>{const d=l.getAttribute("href");l.hostname===window.location.hostname&&!d.includes("#")&&l.getAttribute("target")!=="_blank"&&(c.preventDefault(),o(d))})}),n?a():(Ce.set(e,{display:"block"}),Ce.set(r,{position:"absolute",top:0,bottom:"auto"}),Ce.set(t,{yPercent:0}),Ce.timeline().to(t,{yPercent:-100,duration:1,ease:"expo.inOut"},0).to(r,{height:"0%",duration:1,ease:"expo.out"},"-=0.5").set(e,{display:"none"}).add(()=>{console.log("Page load trigger clicked (back button navigation)"),s.click()},"-=0.751")),window.onpageshow=function(l){l.persisted&&location.reload()}}function Me(n,e,t){return(e=jP(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YP(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jP(n){var e=YP(n,"string");return typeof e=="symbol"?e:String(e)}function KP(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cy(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ZP(n,e,t){return e&&cy(n.prototype,e),t&&cy(n,t),n}function QP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function dy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uy(Object(t),!0).forEach(function(i){QP(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uy(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}var fy={addCSS:!0,thumbWidth:15,watch:!0};function JP(n,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(n,e)}function eR(n,e){if(n&&e){var t=new Event(e,{bubbles:!0});n.dispatchEvent(t)}}var Tl=function(n){return n!=null?n.constructor:null},qh=function(n,e){return!!(n&&e&&n instanceof e)},hy=function(n){return n==null},py=function(n){return Tl(n)===Object},tR=function(n){return Tl(n)===Number&&!Number.isNaN(n)},my=function(n){return Tl(n)===String},iR=function(n){return Tl(n)===Boolean},nR=function(n){return Tl(n)===Function},gy=function(n){return Array.isArray(n)},vy=function(n){return qh(n,NodeList)},rR=function(n){return qh(n,Element)},sR=function(n){return qh(n,Event)},aR=function(n){return hy(n)||(my(n)||gy(n)||vy(n))&&!n.length||py(n)&&!Object.keys(n).length},wi={nullOrUndefined:hy,object:py,number:tR,string:my,boolean:iR,function:nR,array:gy,nodeList:vy,element:rR,event:sR,empty:aR};function oR(n){var e="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function lR(n,e){if(1>e){var t=oR(e);return parseFloat(n.toFixed(t))}return Math.round(n/e)*e}var cR=function(){function n(e,t){KP(this,n),wi.element(e)?this.element=e:wi.string(e)&&(this.element=document.querySelector(e)),wi.element(this.element)&&wi.empty(this.element.rangeTouch)&&(this.config=dy({},fy,{},t),this.init())}return ZP(n,[{key:"init",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(r){t.element[i](r,function(s){return t.set(s)},!1)})}},{key:"get",value:function(e){if(!n.enabled||!wi.event(e))return null;var t,i=e.target,r=e.changedTouches[0],s=parseFloat(i.getAttribute("min"))||0,a=parseFloat(i.getAttribute("max"))||100,o=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(t=100/l.width*(r.clientX-l.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*c:50<t&&(t+=2*(t-50)*c),s+lR(t/100*(a-s),o)}},{key:"set",value:function(e){n.enabled&&wi.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),eR(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;if(wi.empty(e)||wi.string(e)?i=Array.from(document.querySelectorAll(wi.string(e)?e:'input[type="range"]')):wi.element(e)?i=[e]:wi.nodeList(e)?i=Array.from(e):wi.array(e)&&(i=e.filter(wi.element)),wi.empty(i))return null;var r=dy({},fy,{},t);if(wi.string(e)&&r.watch){var s=new MutationObserver(function(a){Array.from(a).forEach(function(o){Array.from(o.addedNodes).forEach(function(l){wi.element(l)&&JP(l,e)&&new n(l,r)})})});s.observe(document.body,{childList:!0,subtree:!0})}return i.map(function(a){return new n(a,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),n}();const El=n=>n!=null?n.constructor:null,br=(n,e)=>!!(n&&e&&n instanceof e),Yh=n=>n==null,_y=n=>El(n)===Object,uR=n=>El(n)===Number&&!Number.isNaN(n),Cu=n=>El(n)===String,dR=n=>El(n)===Boolean,yy=n=>typeof n=="function",xy=n=>Array.isArray(n),fR=n=>br(n,WeakMap),by=n=>br(n,NodeList),hR=n=>El(n)===Text,pR=n=>br(n,Event),mR=n=>br(n,KeyboardEvent),gR=n=>br(n,window.TextTrackCue)||br(n,window.VTTCue),vR=n=>br(n,TextTrack)||!Yh(n)&&Cu(n.kind),_R=n=>br(n,Promise)&&yy(n.then),yR=n=>n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object",wy=n=>Yh(n)||(Cu(n)||xy(n)||by(n))&&!n.length||_y(n)&&!Object.keys(n).length;var N={nullOrUndefined:Yh,object:_y,number:uR,string:Cu,boolean:dR,function:yy,array:xy,weakMap:fR,nodeList:by,element:yR,textNode:hR,event:pR,keyboardEvent:mR,cue:gR,track:vR,promise:_R,url:n=>{if(br(n,window.URL))return!0;if(!Cu(n))return!1;let e=n;n.startsWith("http://")&&n.startsWith("https://")||(e=`http://${n}`);try{return!wy(new URL(e).hostname)}catch{return!1}},empty:wy};const jh=(()=>{const n=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(e).find(i=>n.style[i]!==void 0);return!!N.string(t)&&e[t]})();function Sy(n,e){setTimeout(()=>{try{n.hidden=!0,n.offsetHeight,n.hidden=!1}catch{}},e)}const xR=!!window.document.documentMode,bR=/Edge/g.test(navigator.userAgent),wR="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),SR=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,MR=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,TR=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var li={isIE:xR,isEdge:bR,isWebKit:wR,isIPhone:SR,isIPadOS:MR,isIos:TR};function ER(n){return JSON.parse(JSON.stringify(n))}function My(n,e){return e.split(".").reduce((t,i)=>t&&t[i],n)}function Ht(n={},...e){if(!e.length)return n;const t=e.shift();return N.object(t)?(Object.keys(t).forEach(i=>{N.object(t[i])?(Object.keys(n).includes(i)||Object.assign(n,{[i]:{}}),Ht(n[i],t[i])):Object.assign(n,{[i]:t[i]})}),Ht(n,...e)):n}function Ty(n,e){const t=n.length?n:[n];Array.from(t).reverse().forEach((i,r)=>{const s=r>0?e.cloneNode(!0):e,a=i.parentNode,o=i.nextSibling;s.appendChild(i),o?a.insertBefore(s,o):a.appendChild(s)})}function Kh(n,e){N.element(n)&&!N.empty(e)&&Object.entries(e).filter(([,t])=>!N.nullOrUndefined(t)).forEach(([t,i])=>n.setAttribute(t,i))}function Ge(n,e,t){const i=document.createElement(n);return N.object(e)&&Kh(i,e),N.string(t)&&(i.innerText=t),i}function AR(n,e){N.element(n)&&N.element(e)&&e.parentNode.insertBefore(n,e.nextSibling)}function Ey(n,e,t,i){N.element(e)&&e.appendChild(Ge(n,t,i))}function wr(n){N.nodeList(n)||N.array(n)?Array.from(n).forEach(wr):N.element(n)&&N.element(n.parentNode)&&n.parentNode.removeChild(n)}function Pu(n){if(!N.element(n))return;let{length:e}=n.childNodes;for(;e>0;)n.removeChild(n.lastChild),e-=1}function Ru(n,e){return N.element(e)&&N.element(e.parentNode)&&N.element(n)?(e.parentNode.replaceChild(n,e),n):null}function Zn(n,e){if(!N.string(n)||N.empty(n))return{};const t={},i=Ht({},e);return n.split(",").forEach(r=>{const s=r.trim(),a=s.replace(".",""),o=s.replace(/[[\]]/g,"").split("="),[l]=o,c=o.length>1?o[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":N.string(i.class)?t.class=`${i.class} ${a}`:t.class=a;break;case"#":t.id=s.replace("#","");break;case"[":t[l]=c}}),Ht(i,t)}function Ks(n,e){if(!N.element(n))return;let t=e;N.boolean(t)||(t=!n.hidden),n.hidden=t}function vt(n,e,t){if(N.nodeList(n))return Array.from(n).map(i=>vt(i,e,t));if(N.element(n)){let i="toggle";return t!==void 0&&(i=t?"add":"remove"),n.classList[i](e),n.classList.contains(e)}return!1}function Lu(n,e){return N.element(n)&&n.classList.contains(e)}function Zs(n,e){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(n,e)}function CR(n,e){const{prototype:t}=Element;return(t.closest||function(){let i=this;do{if(Zs.matches(i,e))return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}).call(n,e)}function Al(n){return this.elements.container.querySelectorAll(n)}function ei(n){return this.elements.container.querySelector(n)}function Zh(n=null,e=!1){N.element(n)&&n.focus({preventScroll:!0,focusVisible:e})}const Ay={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Gt={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(n,e){const t=Gt[n]||e!=="html5";return{api:t,ui:t&&Gt.rangeInput}},pip:!(li.isIPhone||!N.function(Ge("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Ge("video").disablePictureInPicture)),airplay:N.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(n){if(N.empty(n))return!1;const[e]=n.split("/");let t=n;if(!this.isHTML5||e!==this.type)return!1;Object.keys(Ay).includes(t)&&(t+=`; codecs="${Ay[n]}"`);try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const n=document.createElement("input");return n.type="range",n.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:jh!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},PR=(()=>{let n=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(n=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n})();function Cl(n,e,t,i=!1,r=!0,s=!1){if(!n||!("addEventListener"in n)||N.empty(e)||!N.function(t))return;const a=e.split(" ");let o=s;PR&&(o={passive:r,capture:s}),a.forEach(l=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:n,type:l,callback:t,options:o}),n[i?"addEventListener":"removeEventListener"](l,t,o)})}function ft(n,e="",t,i=!0,r=!1){Cl.call(this,n,e,t,!0,i,r)}function Du(n,e="",t,i=!0,r=!1){Cl.call(this,n,e,t,!1,i,r)}function Qh(n,e="",t,i=!0,r=!1){const s=(...a)=>{Du(n,e,s,i,r),t.apply(this,a)};Cl.call(this,n,e,s,!0,i,r)}function We(n,e="",t=!1,i={}){if(!N.element(n)||N.empty(e))return;const r=new CustomEvent(e,{bubbles:t,detail:{...i,plyr:this}});n.dispatchEvent(r)}function RR(){this&&this.eventListeners&&(this.eventListeners.forEach(n=>{const{element:e,type:t,callback:i,options:r}=n;e.removeEventListener(t,i,r)}),this.eventListeners=[])}function LR(){return new Promise(n=>this.ready?setTimeout(n,0):ft.call(this,this.elements.container,"ready",n)).then(()=>{})}function Qn(n){N.promise(n)&&n.then(null,()=>{})}function Jh(n){return N.array(n)?n.filter((e,t)=>n.indexOf(e)===t):n}function Cy(n,e){return N.array(n)&&n.length?n.reduce((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t):null}function Py(n){return!(!window||!window.CSS)&&window.CSS.supports(n)}const Ry=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((n,[e,t])=>({...n,[e/t]:[e,t]}),{});function Ly(n){return N.array(n)||N.string(n)&&n.includes(":")?(N.array(n)?n:n.split(":")).map(Number).every(N.number):!1}function Iu(n){if(!N.array(n)||!n.every(N.number))return null;const[e,t]=n,i=(s,a)=>a===0?s:i(a,s%a),r=i(e,t);return[e/r,t/r]}function ep(n){const e=i=>Ly(i)?i.split(":").map(Number):null;let t=e(n);if(t===null&&(t=e(this.config.ratio)),t===null&&!N.empty(this.embed)&&N.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:i,videoHeight:r}=this.media;t=[i,r]}return Iu(t)}function so(n){if(!this.isVideo)return{};const{wrapper:e}=this.elements,t=ep.call(this,n);if(!N.array(t))return{};const[i,r]=Iu(t),s=100/i*r;if(Py(`aspect-ratio: ${i}/${r}`)?e.style.aspectRatio=`${i}/${r}`:e.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),o=(a-s)/(a/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${o}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:t}}function Dy(n,e,t=.05){const i=n/e,r=Cy(Object.keys(Ry),i);return Math.abs(r-i)<=t?Ry[r]:[n,e]}function DR(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const rs={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(n=>{const e=n.getAttribute("type");return!!N.empty(e)||Gt.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:rs.getSources.call(this).map(n=>Number(n.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const n=this;n.options.speed=n.config.speed.options,N.empty(this.config.ratio)||so.call(n),Object.defineProperty(n.media,"quality",{get(){const e=rs.getSources.call(n).find(t=>t.getAttribute("src")===n.source);return e&&Number(e.getAttribute("size"))},set(e){if(n.quality!==e){if(n.config.quality.forced&&N.function(n.config.quality.onChange))n.config.quality.onChange(e);else{const t=rs.getSources.call(n).find(l=>Number(l.getAttribute("size"))===e);if(!t)return;const{currentTime:i,paused:r,preload:s,readyState:a,playbackRate:o}=n.media;n.media.src=t.getAttribute("src"),(s!=="none"||a)&&(n.once("loadedmetadata",()=>{n.speed=o,n.currentTime=i,r||Qn(n.play())}),n.media.load())}We.call(n,n.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(wr(rs.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function IR(n){return`${n}-${Math.floor(1e4*Math.random())}`}function tp(n,...e){return N.empty(n)?n:n.toString().replace(/{(\d+)}/g,(t,i)=>e[i].toString())}function OR(n,e){return n===0||e===0||Number.isNaN(n)||Number.isNaN(e)?0:(n/e*100).toFixed(2)}const Pl=(n="",e="",t="")=>n.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),Iy=(n="")=>n.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function NR(n=""){let e=n.toString();return e=Pl(e,"-"," "),e=Pl(e,"_"," "),e=Iy(e),Pl(e," ","")}function kR(n=""){let e=n.toString();return e=NR(e),e.charAt(0).toLowerCase()+e.slice(1)}function UR(n){const e=document.createDocumentFragment(),t=document.createElement("div");return e.appendChild(t),t.innerHTML=n,e.firstChild.innerText}function FR(n){const e=document.createElement("div");return e.appendChild(n),e.innerHTML}const Oy={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},ci={get(n="",e={}){if(N.empty(n)||N.empty(e))return"";let t=My(e.i18n,n);if(N.empty(t))return Object.keys(Oy).includes(n)?Oy[n]:"";const i={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(i).forEach(([r,s])=>{t=Pl(t,r,s)}),t}};class Rl{constructor(e){Me(this,"get",t=>{if(!Rl.supported||!this.enabled)return null;const i=window.localStorage.getItem(this.key);if(N.empty(i))return null;const r=JSON.parse(i);return N.string(t)&&t.length?r[t]:r}),Me(this,"set",t=>{if(!Rl.supported||!this.enabled||!N.object(t))return;let i=this.get();N.empty(i)&&(i={}),Ht(i,t);try{window.localStorage.setItem(this.key,JSON.stringify(i))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function Ll(n,e="text"){return new Promise((t,i)=>{try{const r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",()=>{if(e==="text")try{t(JSON.parse(r.responseText))}catch{t(r.responseText)}else t(r.response)}),r.addEventListener("error",()=>{throw new Error(r.status)}),r.open("GET",n,!0),r.responseType=e,r.send()}catch(r){i(r)}})}function Ny(n,e){if(!N.string(n))return;const t="cache",i=N.string(e);let r=!1;const s=()=>document.getElementById(e)!==null,a=(o,l)=>{o.innerHTML=l,i&&s()||document.body.insertAdjacentElement("afterbegin",o)};if(!i||!s()){const o=Rl.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),i&&l.setAttribute("id",e),o){const c=window.localStorage.getItem(`${t}-${e}`);if(r=c!==null,r){const d=JSON.parse(c);a(l,d.content)}}Ll(n).then(c=>{if(!N.empty(c)){if(o)try{window.localStorage.setItem(`${t}-${e}`,JSON.stringify({content:c}))}catch{}a(l,c)}}).catch(()=>{})}}const ky=n=>Math.trunc(n/60/60%60,10),BR=n=>Math.trunc(n/60%60,10),zR=n=>Math.trunc(n%60,10);function Ou(n=0,e=!1,t=!1){if(!N.number(n))return Ou(void 0,e,t);const i=o=>`0${o}`.slice(-2);let r=ky(n);const s=BR(n),a=zR(n);return r=e||r>0?`${r}:`:"",`${t&&n>0?"-":""}${r}${i(s)}:${i(a)}`}const ve={getIconUrl(){const n=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,t=n.host!==e||li.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=ei.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Al.call(this,this.config.selectors.buttons.play),pause:ei.call(this,this.config.selectors.buttons.pause),restart:ei.call(this,this.config.selectors.buttons.restart),rewind:ei.call(this,this.config.selectors.buttons.rewind),fastForward:ei.call(this,this.config.selectors.buttons.fastForward),mute:ei.call(this,this.config.selectors.buttons.mute),pip:ei.call(this,this.config.selectors.buttons.pip),airplay:ei.call(this,this.config.selectors.buttons.airplay),settings:ei.call(this,this.config.selectors.buttons.settings),captions:ei.call(this,this.config.selectors.buttons.captions),fullscreen:ei.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ei.call(this,this.config.selectors.progress),this.elements.inputs={seek:ei.call(this,this.config.selectors.inputs.seek),volume:ei.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ei.call(this,this.config.selectors.display.buffer),currentTime:ei.call(this,this.config.selectors.display.currentTime),duration:ei.call(this,this.config.selectors.display.duration)},N.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(n){return this.debug.warn("It looks like there is a problem with your custom controls HTML",n),this.toggleNativeControls(!0),!1}},createIcon(n,e){const t="http://www.w3.org/2000/svg",i=ve.getIconUrl.call(this),r=`${i.cors?"":i.url}#${this.config.iconPrefix}`,s=document.createElementNS(t,"svg");Kh(s,Ht(e,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(t,"use"),o=`${r}-${n}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),s.appendChild(a),s},createLabel(n,e={}){const t=ci.get(n,this.config);return Ge("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},t)},createBadge(n){if(N.empty(n))return null;const e=Ge("span",{class:this.config.classNames.menu.value});return e.appendChild(Ge("span",{class:this.config.classNames.menu.badge},n)),e},createButton(n,e){const t=Ht({},e);let i=kR(n);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(a=>{Object.keys(t).includes(a)&&(r[a]=t[a],delete t[a])}),r.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(a=>a===this.config.classNames.control)||Ht(t,{class:`${t.class} ${this.config.classNames.control}`}):t.class=this.config.classNames.control,n){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":t.class+=` ${this.config.classNames.control}--overlaid`,i="play",r.label="play",r.icon="play";break;default:N.empty(r.label)&&(r.label=i),N.empty(r.icon)&&(r.icon=n)}const s=Ge(r.element);return r.toggle?(s.appendChild(ve.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild(ve.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild(ve.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild(ve.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild(ve.createIcon.call(this,r.icon)),s.appendChild(ve.createLabel.call(this,r.label))),Ht(t,Zn(this.config.selectors.buttons[i],t)),Kh(s,t),i==="play"?(N.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(s)):this.elements.buttons[i]=s,s},createRange(n,e){const t=Ge("input",Ht(Zn(this.config.selectors.inputs[n]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":ci.get(n,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[n]=t,ve.updateRangeFill.call(this,t),cR.setup(t),t},createProgress(n,e){const t=Ge("progress",Ht(Zn(this.config.selectors.display[n]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(n!=="volume"){t.appendChild(Ge("span",null,"0"));const i={played:"played",buffer:"buffered"}[n],r=i?ci.get(i,this.config):"";t.innerText=`% ${r.toLowerCase()}`}return this.elements.display[n]=t,t},createTime(n,e){const t=Zn(this.config.selectors.display[n],e),i=Ge("div",Ht(t,{class:`${t.class?t.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":ci.get(n,this.config),role:"timer"}),"00:00");return this.elements.display[n]=i,i},bindMenuItemShortcuts(n,e){ft.call(this,n,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const i=Zs(n,'[role="menuitemradio"]');if(!i&&[" ","ArrowRight"].includes(t.key))ve.showMenuPanel.call(this,e,!0);else{let r;t.key!==" "&&(t.key==="ArrowDown"||i&&t.key==="ArrowRight"?(r=n.nextElementSibling,N.element(r)||(r=n.parentNode.firstElementChild)):(r=n.previousElementSibling,N.element(r)||(r=n.parentNode.lastElementChild)),Zh.call(this,r,!0))}},!1),ft.call(this,n,"keyup",t=>{t.key==="Return"&&ve.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:n,list:e,type:t,title:i,badge:r=null,checked:s=!1}){const a=Zn(this.config.selectors.inputs[t]),o=Ge("button",Ht(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":s,value:n})),l=Ge("span");l.innerHTML=i,N.element(r)&&l.appendChild(r),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>o.getAttribute("aria-checked")==="true",set(c){c&&Array.from(o.parentNode.children).filter(d=>Zs(d,'[role="menuitemradio"]')).forEach(d=>d.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",c?"true":"false")}}),this.listeners.bind(o,"click keyup",c=>{if(!N.keyboardEvent(c)||c.key===" "){switch(c.preventDefault(),c.stopPropagation(),o.checked=!0,t){case"language":this.currentTrack=Number(n);break;case"quality":this.quality=n;break;case"speed":this.speed=parseFloat(n)}ve.showMenuPanel.call(this,"home",N.keyboardEvent(c))}},t,!1),ve.bindMenuItemShortcuts.call(this,o,t),e.appendChild(o)},formatTime(n=0,e=!1){return N.number(n)?Ou(n,ky(this.duration)>0,e):n},updateTimeDisplay(n=null,e=0,t=!1){N.element(n)&&N.number(e)&&(n.innerText=ve.formatTime(e,t))},updateVolume(){this.supported.ui&&(N.element(this.elements.inputs.volume)&&ve.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),N.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(n,e=0){N.element(n)&&(n.value=e,ve.updateRangeFill.call(this,n))},updateProgress(n){if(!this.supported.ui||!N.event(n))return;let e=0;const t=(i,r)=>{const s=N.number(r)?r:0,a=N.element(i)?i:this.elements.display.buffer;if(N.element(a)){a.value=s;const o=a.getElementsByTagName("span")[0];N.element(o)&&(o.childNodes[0].nodeValue=s)}};if(n)switch(n.type){case"timeupdate":case"seeking":case"seeked":e=OR(this.currentTime,this.duration),n.type==="timeupdate"&&ve.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(n){const e=N.event(n)?n.target:n;if(N.element(e)&&e.getAttribute("type")==="range"){if(Zs(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const t=ve.formatTime(this.currentTime),i=ve.formatTime(this.duration),r=ci.get("seekLabel",this.config);e.setAttribute("aria-valuetext",r.replace("{currentTime}",t).replace("{duration}",i))}else if(Zs(e,this.config.selectors.inputs.volume)){const t=100*e.value;e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(li.isWebKit||li.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(n){var e,t;if(!this.config.tooltips.seek||!N.element(this.elements.inputs.seek)||!N.element(this.elements.display.seekTooltip)||this.duration===0)return;const i=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,s=d=>vt(i,r,d);if(this.touch)return void s(!1);let a=0;const o=this.elements.progress.getBoundingClientRect();if(N.event(n))a=100/o.width*(n.pageX-o.left);else{if(!Lu(i,r))return;a=parseFloat(i.style.left,10)}a<0?a=0:a>100&&(a=100);const l=this.duration/100*a;i.innerText=ve.formatTime(l);const c=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.find(({time:d})=>d===Math.round(l));c&&i.insertAdjacentHTML("afterbegin",`${c.label}<br>`),i.style.left=`${a}%`,N.event(n)&&["mouseenter","mouseleave"].includes(n.type)&&s(n.type==="mouseenter")},timeUpdate(n){const e=!N.element(this.elements.display.duration)&&this.config.invertTime;ve.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),n&&n.type==="timeupdate"&&this.media.seeking||ve.updateProgress.call(this,n)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Ks(this.elements.display.currentTime,!0),void Ks(this.elements.progress,!0);N.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const n=N.element(this.elements.display.duration);!n&&this.config.displayDuration&&this.paused&&ve.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),n&&ve.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&ve.setMarkers.call(this),ve.updateSeekTooltip.call(this)},toggleMenuButton(n,e){Ks(this.elements.settings.buttons[n],!e)},updateSetting(n,e,t){const i=this.elements.settings.panels[n];let r=null,s=e;if(n==="captions")r=this.currentTrack;else{if(r=N.empty(t)?this[n]:t,N.empty(r)&&(r=this.config[n].default),!N.empty(this.options[n])&&!this.options[n].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${n}`);if(!this.config[n].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${n}`)}if(N.element(s)||(s=i&&i.querySelector('[role="menu"]')),!N.element(s))return;this.elements.settings.buttons[n].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=ve.getLabel.call(this,n,r);const a=s&&s.querySelector(`[value="${r}"]`);N.element(a)&&(a.checked=!0)},getLabel(n,e){switch(n){case"speed":return e===1?ci.get("normal",this.config):`${e}&times;`;case"quality":if(N.number(e)){const t=ci.get(`qualityLabel.${e}`,this.config);return t.length?t:`${e}p`}return Iy(e);case"captions":return pt.getLabel.call(this);default:return null}},setQualityMenu(n){if(!N.element(this.elements.settings.panels.quality))return;const e="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');N.array(n)&&(this.options.quality=Jh(n).filter(s=>this.config.quality.options.includes(s)));const i=!N.empty(this.options.quality)&&this.options.quality.length>1;if(ve.toggleMenuButton.call(this,e,i),Pu(t),ve.checkMenu.call(this),!i)return;const r=s=>{const a=ci.get(`qualityBadge.${s}`,this.config);return a.length?ve.createBadge.call(this,a):null};this.options.quality.sort((s,a)=>{const o=this.config.quality.options;return o.indexOf(s)>o.indexOf(a)?1:-1}).forEach(s=>{ve.createMenuItem.call(this,{value:s,list:t,type:e,title:ve.getLabel.call(this,"quality",s),badge:r(s)})}),ve.updateSetting.call(this,e,t)},setCaptionsMenu(){if(!N.element(this.elements.settings.panels.captions))return;const n="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=pt.getTracks.call(this),i=!!t.length;if(ve.toggleMenuButton.call(this,n,i),Pu(e),ve.checkMenu.call(this),!i)return;const r=t.map((s,a)=>({value:a,checked:this.captions.toggled&&this.currentTrack===a,title:pt.getLabel.call(this,s),badge:s.language&&ve.createBadge.call(this,s.language.toUpperCase()),list:e,type:"language"}));r.unshift({value:-1,checked:!this.captions.toggled,title:ci.get("disabled",this.config),list:e,type:"language"}),r.forEach(ve.createMenuItem.bind(this)),ve.updateSetting.call(this,n,e)},setSpeedMenu(){if(!N.element(this.elements.settings.panels.speed))return;const n="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(i=>i>=this.minimumSpeed&&i<=this.maximumSpeed);const t=!N.empty(this.options.speed)&&this.options.speed.length>1;ve.toggleMenuButton.call(this,n,t),Pu(e),ve.checkMenu.call(this),t&&(this.options.speed.forEach(i=>{ve.createMenuItem.call(this,{value:i,list:e,type:n,title:ve.getLabel.call(this,"speed",i)})}),ve.updateSetting.call(this,n,e))},checkMenu(){const{buttons:n}=this.elements.settings,e=!N.empty(n)&&Object.values(n).some(t=>!t.hidden);Ks(this.elements.settings.menu,!e)},focusFirstMenuItem(n,e=!1){if(this.elements.settings.popup.hidden)return;let t=n;N.element(t)||(t=Object.values(this.elements.settings.panels).find(r=>!r.hidden));const i=t.querySelector('[role^="menuitem"]');Zh.call(this,i,e)},toggleMenu(n){const{popup:e}=this.elements.settings,t=this.elements.buttons.settings;if(!N.element(e)||!N.element(t))return;const{hidden:i}=e;let r=i;if(N.boolean(n))r=n;else if(N.keyboardEvent(n)&&n.key==="Escape")r=!1;else if(N.event(n)){const s=N.function(n.composedPath)?n.composedPath()[0]:n.target,a=e.contains(s);if(a||!a&&n.target!==t&&r)return}t.setAttribute("aria-expanded",r),Ks(e,!r),vt(this.elements.container,this.config.classNames.menu.open,r),r&&N.keyboardEvent(n)?ve.focusFirstMenuItem.call(this,null,!0):r||i||Zh.call(this,t,N.keyboardEvent(n))},getMenuSize(n){const e=n.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),n.parentNode.appendChild(e);const t=e.scrollWidth,i=e.scrollHeight;return wr(e),{width:t,height:i}},showMenuPanel(n="",e=!1){const t=this.elements.container.querySelector(`#plyr-settings-${this.id}-${n}`);if(!N.element(t))return;const i=t.parentNode,r=Array.from(i.children).find(s=>!s.hidden);if(Gt.transitions&&!Gt.reducedMotion){i.style.width=`${r.scrollWidth}px`,i.style.height=`${r.scrollHeight}px`;const s=ve.getMenuSize.call(this,t),a=o=>{o.target===i&&["width","height"].includes(o.propertyName)&&(i.style.width="",i.style.height="",Du.call(this,i,jh,a))};ft.call(this,i,jh,a),i.style.width=`${s.width}px`,i.style.height=`${s.height}px`}Ks(r,!0),Ks(t,!1),ve.focusFirstMenuItem.call(this,t,e)},setDownloadUrl(){const n=this.elements.buttons.download;N.element(n)&&n.setAttribute("href",this.download)},create(n){const{bindMenuItemShortcuts:e,createButton:t,createProgress:i,createRange:r,createTime:s,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=ve;this.elements.controls=null,N.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const c=Ge("div",Zn(this.config.selectors.controls.wrapper));this.elements.controls=c;const d={class:"plyr__controls__item"};return Jh(N.array(this.config.controls)?this.config.controls:[]).forEach(h=>{if(h==="restart"&&c.appendChild(t.call(this,"restart",d)),h==="rewind"&&c.appendChild(t.call(this,"rewind",d)),h==="play"&&c.appendChild(t.call(this,"play",d)),h==="fast-forward"&&c.appendChild(t.call(this,"fast-forward",d)),h==="progress"){const f=Ge("div",{class:`${d.class} plyr__progress__container`}),u=Ge("div",Zn(this.config.selectors.progress));if(u.appendChild(r.call(this,"seek",{id:`plyr-seek-${n.id}`})),u.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const m=Ge("span",{class:this.config.classNames.tooltip},"00:00");u.appendChild(m),this.elements.display.seekTooltip=m}this.elements.progress=u,f.appendChild(this.elements.progress),c.appendChild(f)}if(h==="current-time"&&c.appendChild(s.call(this,"currentTime",d)),h==="duration"&&c.appendChild(s.call(this,"duration",d)),h==="mute"||h==="volume"){let{volume:f}=this.elements;if(N.element(f)&&c.contains(f)||(f=Ge("div",Ht({},d,{class:`${d.class} plyr__volume`.trim()})),this.elements.volume=f,c.appendChild(f)),h==="mute"&&f.appendChild(t.call(this,"mute")),h==="volume"&&!li.isIos&&!li.isIPadOS){const u={max:1,step:.05,value:this.config.volume};f.appendChild(r.call(this,"volume",Ht(u,{id:`plyr-volume-${n.id}`})))}}if(h==="captions"&&c.appendChild(t.call(this,"captions",d)),h==="settings"&&!N.empty(this.config.settings)){const f=Ge("div",Ht({},d,{class:`${d.class} plyr__menu`.trim(),hidden:""}));f.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${n.id}`,"aria-expanded":!1}));const u=Ge("div",{class:"plyr__menu__container",id:`plyr-settings-${n.id}`,hidden:""}),m=Ge("div"),p=Ge("div",{id:`plyr-settings-${n.id}-home`}),v=Ge("div",{role:"menu"});p.appendChild(v),m.appendChild(p),this.elements.settings.panels.home=p,this.config.settings.forEach(g=>{const y=Ge("button",Ht(Zn(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,y,g),ft.call(this,y,"click",()=>{l.call(this,g,!1)});const _=Ge("span",null,ci.get(g,this.config)),b=Ge("span",{class:this.config.classNames.menu.value});b.innerHTML=n[g],_.appendChild(b),y.appendChild(_),v.appendChild(y);const w=Ge("div",{id:`plyr-settings-${n.id}-${g}`,hidden:""}),M=Ge("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});M.appendChild(Ge("span",{"aria-hidden":!0},ci.get(g,this.config))),M.appendChild(Ge("span",{class:this.config.classNames.hidden},ci.get("menuBack",this.config))),ft.call(this,w,"keydown",T=>{T.key==="ArrowLeft"&&(T.preventDefault(),T.stopPropagation(),l.call(this,"home",!0))},!1),ft.call(this,M,"click",()=>{l.call(this,"home",!1)}),w.appendChild(M),w.appendChild(Ge("div",{role:"menu"})),m.appendChild(w),this.elements.settings.buttons[g]=y,this.elements.settings.panels[g]=w}),u.appendChild(m),f.appendChild(u),c.appendChild(f),this.elements.settings.popup=u,this.elements.settings.menu=f}if(h==="pip"&&Gt.pip&&c.appendChild(t.call(this,"pip",d)),h==="airplay"&&Gt.airplay&&c.appendChild(t.call(this,"airplay",d)),h==="download"){const f=Ht({},d,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:u}=this.config.urls;!N.url(u)&&this.isEmbed&&Ht(f,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(t.call(this,"download",f))}h==="fullscreen"&&c.appendChild(t.call(this,"fullscreen",d))}),this.isHTML5&&a.call(this,rs.getQualityOptions.call(this)),o.call(this),c},inject(){if(this.config.loadSprite){const r=ve.getIconUrl.call(this);r.cors&&Ny(r.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let n=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;N.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),N.element(this.config.controls)||N.string(this.config.controls)?n=this.config.controls:(n=ve.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:pt.getLabel.call(this)}),t=!1);let i;if(t&&N.string(this.config.controls)&&(n=(r=>{let s=r;return Object.entries(e).forEach(([a,o])=>{s=Pl(s,`{${a}}`,o)}),s})(n)),N.string(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),N.element(i)||(i=this.elements.container),i[N.element(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),N.element(this.elements.controls)||ve.findElements.call(this),!N.empty(this.elements.buttons)){const r=s=>{const a=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>Lu(s,a),set(o=!1){vt(s,a,o),s.setAttribute("aria-pressed",o?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{N.array(s)||N.nodeList(s)?Array.from(s).filter(Boolean).forEach(r):r(s)})}if(li.isEdge&&Sy(i),this.config.tooltips.controls){const{classNames:r,selectors:s}=this.config,a=`${s.controls.wrapper} ${s.labels} .${r.hidden}`,o=Al.call(this,a);Array.from(o).forEach(l=>{vt(l,this.config.classNames.hidden,!1),vt(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var n,e;if(!this.duration||this.elements.markers)return;const t=(n=this.config.markers)===null||n===void 0||(e=n.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(t==null||!t.length)return;const i=document.createDocumentFragment(),r=document.createDocumentFragment();let s=null;const a=`${this.config.classNames.tooltip}--visible`,o=l=>vt(s,a,l);t.forEach(l=>{const c=Ge("span",{class:this.config.classNames.marker},""),d=l.time/this.duration*100+"%";s&&(c.addEventListener("mouseenter",()=>{l.label||(s.style.left=d,s.innerHTML=l.label,o(!0))}),c.addEventListener("mouseleave",()=>{o(!1)})),c.addEventListener("click",()=>{this.currentTime=l.time}),c.style.left=d,r.appendChild(c)}),i.appendChild(r),this.config.tooltips.seek||(s=Ge("span",{class:this.config.classNames.tooltip},""),i.appendChild(s)),this.elements.markers={points:r,tip:s},this.elements.progress.appendChild(i)}};function Uy(n,e=!0){let t=n;if(e){const i=document.createElement("a");i.href=t,t=i.href}try{return new URL(t)}catch{return null}}function Fy(n){const e=new URLSearchParams;return N.object(n)&&Object.entries(n).forEach(([t,i])=>{e.set(t,i)}),e}const pt={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!Gt.textTracks)return void(N.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ve.setCaptionsMenu.call(this));if(N.element(this.elements.captions)||(this.elements.captions=Ge("div",Zn(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),AR(this.elements.captions,this.elements.wrapper)),li.isIE&&window.URL){const i=this.media.querySelectorAll("track");Array.from(i).forEach(r=>{const s=r.getAttribute("src"),a=Uy(s);a!==null&&a.hostname!==window.location.href.hostname&&["http:","https:"].includes(a.protocol)&&Ll(s,"blob").then(o=>{r.setAttribute("src",window.URL.createObjectURL(o))}).catch(()=>{wr(r)})})}const n=Jh((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(i=>i.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=n);let t=this.storage.get("captions");if(N.boolean(t)||({active:t}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:t,language:e,languages:n}),this.isHTML5){const i=this.config.captions.update?"addtrack removetrack":"removetrack";ft.call(this,this.media.textTracks,i,pt.update.bind(this))}setTimeout(pt.update.bind(this),0)},update(){const n=pt.getTracks.call(this,!0),{active:e,language:t,meta:i,currentTrackNode:r}=this.captions,s=!!n.find(a=>a.language===t);this.isHTML5&&this.isVideo&&n.filter(a=>!i.get(a)).forEach(a=>{this.debug.log("Track added",a),i.set(a,{default:a.mode==="showing"}),a.mode==="showing"&&(a.mode="hidden"),ft.call(this,a,"cuechange",()=>pt.updateCues.call(this))}),(s&&this.language!==t||!n.includes(r))&&(pt.setLanguage.call(this,t),pt.toggle.call(this,e&&s)),this.elements&&vt(this.elements.container,this.config.classNames.captions.enabled,!N.empty(n)),N.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ve.setCaptionsMenu.call(this)},toggle(n,e=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,i=this.config.classNames.captions.active,r=N.nullOrUndefined(n)?!t:n;if(r!==t){if(e||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!e){const s=pt.getTracks.call(this),a=pt.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=a.language,void pt.set.call(this,s.indexOf(a))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),vt(this.elements.container,i,r),this.captions.toggled=r,ve.updateSetting.call(this,"captions"),We.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout(()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(n,e=!0){const t=pt.getTracks.call(this);if(n!==-1)if(N.number(n))if(n in t){if(this.captions.currentTrack!==n){this.captions.currentTrack=n;const i=t[n],{language:r}=i||{};this.captions.currentTrackNode=i,ve.updateSetting.call(this,"captions"),e||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),We.call(this,this.media,"languagechange")}pt.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&pt.updateCues.call(this)}else this.debug.warn("Track not found",n);else this.debug.warn("Invalid caption argument",n);else pt.toggle.call(this,!1,e)},setLanguage(n,e=!0){if(!N.string(n))return void this.debug.warn("Invalid language argument",n);const t=n.toLowerCase();this.captions.language=t;const i=pt.getTracks.call(this),r=pt.findTrack.call(this,[t]);pt.set.call(this,i.indexOf(r),e)},getTracks(n=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||n||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(n,e=!1){const t=pt.getTracks.call(this),i=a=>Number((this.captions.meta.get(a)||{}).default),r=Array.from(t).sort((a,o)=>i(o)-i(a));let s;return n.every(a=>(s=r.find(o=>o.language===a),!s)),s||(e?r[0]:void 0)},getCurrentTrack(){return pt.getTracks.call(this)[this.currentTrack]},getLabel(n){let e=n;return!N.track(e)&&Gt.textTracks&&this.captions.toggled&&(e=pt.getCurrentTrack.call(this)),N.track(e)?N.empty(e.label)?N.empty(e.language)?ci.get("enabled",this.config):n.language.toUpperCase():e.label:ci.get("disabled",this.config)},updateCues(n){if(!this.supported.ui)return;if(!N.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!N.nullOrUndefined(n)&&!Array.isArray(n))return void this.debug.warn("updateCues: Invalid input",n);let e=n;if(!e){const i=pt.getCurrentTrack.call(this);e=Array.from((i||{}).activeCues||[]).map(r=>r.getCueAsHTML()).map(FR)}const t=e.map(i=>i.trim()).join(`
`);if(t!==this.elements.captions.innerHTML){Pu(this.elements.captions);const i=Ge("span",Zn(this.config.selectors.caption));i.innerHTML=t,this.elements.captions.appendChild(i),We.call(this,this.media,"cuechange")}}},By={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},ip={active:"picture-in-picture",inactive:"inline"},ss={html5:"html5",youtube:"youtube",vimeo:"vimeo"},np={audio:"audio",video:"video"};function VR(n){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(n)?ss.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(n)?ss.vimeo:null}const rp=()=>{};class HR{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):rp}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):rp}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):rp}}class In{constructor(e){Me(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;N.element(t)&&(t.pressed=this.active);const i=this.target===this.player.media?this.target:this.player.elements.container;We.call(this.player,i,this.active?"enterfullscreen":"exitfullscreen",!0)}),Me(this,"toggleFallback",(t=!1)=>{if(t?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",vt(this.target,this.player.config.classNames.fullscreen.fallback,t),li.isIos){let i=document.head.querySelector('meta[name="viewport"]');const r="viewport-fit=cover";i||(i=document.createElement("meta"),i.setAttribute("name","viewport"));const s=N.string(i.content)&&i.content.includes(r);t?(this.cleanupViewport=!s,s||(i.content+=`,${r}`)):this.cleanupViewport&&(i.content=i.content.split(",").filter(a=>a.trim()!==r).join(","))}this.onChange()}),Me(this,"trapFocus",t=>{if(li.isIos||li.isIPadOS||!this.active||t.key!=="Tab")return;const i=document.activeElement,r=Al.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=r,a=r[r.length-1];i!==a||t.shiftKey?i===s&&t.shiftKey&&(a.focus(),t.preventDefault()):(s.focus(),t.preventDefault())}),Me(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":In.nativeSupported?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");vt(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Me(this,"enter",()=>{this.supported&&(li.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!In.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?N.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),Me(this,"exit",()=>{if(this.supported)if(li.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),Qn(this.player.play());else if(!In.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!N.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Me(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=In.prefix,this.property=In.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&CR(this.player.elements.container,e.config.fullscreen.container),ft.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),ft.call(this.player,this.player.elements.container,"dblclick",t=>{N.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),ft.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return In.nativeSupported&&!this.forceFallback}static get prefix(){if(N.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!N.function(document[`${t}ExitFullscreen`])&&!N.function(document[`${t}CancelFullScreen`]))&&(e=t,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,In.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||In.nativeSupported||!li.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!In.nativeSupported||this.forceFallback)return Lu(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return li.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Nu(n,e=1){return new Promise((t,i)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=e?t:i)(r)};Object.assign(r,{onload:s,onerror:s,src:n})})}const wt={addStyleHook(){vt(this.elements.container,this.config.selectors.container.replace(".",""),!0),vt(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(n=!1){n&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void wt.toggleNativeControls.call(this,!0);N.element(this.elements.controls)||(ve.inject.call(this),this.listeners.controls()),wt.toggleNativeControls.call(this),this.isHTML5&&pt.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,ve.updateVolume.call(this),ve.timeUpdate.call(this),ve.durationUpdate.call(this),wt.checkPlaying.call(this),vt(this.elements.container,this.config.classNames.pip.supported,Gt.pip&&this.isHTML5&&this.isVideo),vt(this.elements.container,this.config.classNames.airplay.supported,Gt.airplay&&this.isHTML5),vt(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{We.call(this,this.media,"ready")},0),wt.setTitle.call(this),this.poster&&wt.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&ve.durationUpdate.call(this),this.config.mediaMetadata&&ve.setMediaMetadata.call(this)},setTitle(){let n=ci.get("play",this.config);if(N.string(this.config.title)&&!N.empty(this.config.title)&&(n+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",n)}),this.isEmbed){const e=ei.call(this,"iframe");if(!N.element(e))return;const t=N.empty(this.config.title)?"video":this.config.title,i=ci.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",t))}},togglePoster(n){vt(this.elements.container,this.config.classNames.posterEnabled,n)},setPoster(n,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",n),this.elements.poster.removeAttribute("hidden"),LR.call(this).then(()=>Nu(n)).catch(t=>{throw n===this.poster&&wt.togglePoster.call(this,!1),t}).then(()=>{if(n!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${n}')`,backgroundSize:""}),wt.togglePoster.call(this,!0),n)))},checkPlaying(n){vt(this.elements.container,this.config.classNames.playing,this.playing),vt(this.elements.container,this.config.classNames.paused,this.paused),vt(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",ci.get(this.playing?"pause":"play",this.config))}),N.event(n)&&n.type==="timeupdate"||wt.toggleControls.call(this)},checkLoading(n){this.loading=["stalled","waiting"].includes(n.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{vt(this.elements.container,this.config.classNames.loading,this.loading),wt.toggleControls.call(this)},this.loading?250:0)},toggleControls(n){const{controls:e}=this.elements;if(e&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(n||this.loading||this.paused||e.pressed||e.hover||t))}},migrateStyles(){Object.values({...this.media.style}).filter(n=>!N.empty(n)&&N.string(n)&&n.startsWith("--plyr")).forEach(n=>{this.elements.container.style.setProperty(n,this.media.style.getPropertyValue(n)),this.media.style.removeProperty(n)}),N.empty(this.media.style)&&this.media.removeAttribute("style")}};class GR{constructor(e){Me(this,"firstTouch",()=>{const{player:t}=this,{elements:i}=t;t.touch=!0,vt(i.container,t.config.classNames.isTouch,!0)}),Me(this,"global",(t=!0)=>{const{player:i}=this;i.config.keyboard.global&&Cl.call(i,window,"keydown keyup",this.handleKey,t,!1),Cl.call(i,document.body,"click",this.toggleMenu,t),Qh.call(i,document.body,"touchstart",this.firstTouch)}),Me(this,"container",()=>{const{player:t}=this,{config:i,elements:r,timers:s}=t;!i.keyboard.global&&i.keyboard.focused&&ft.call(t,r.container,"keydown keyup",this.handleKey,!1),ft.call(t,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:c}=r;c&&l.type==="enterfullscreen"&&(c.pressed=!1,c.hover=!1);let d=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(wt.toggleControls.call(t,!0),d=t.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>wt.toggleControls.call(t,!1),d)});const a=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const l=r.wrapper,{active:c}=t.fullscreen,[d,h]=ep.call(t),f=Py(`aspect-ratio: ${d} / ${h}`);if(!c)return void(f?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[u,m]=DR(),p=u/m>d/h;f?(l.style.width=p?"auto":"100%",l.style.height=p?"100%":"auto"):(l.style.maxWidth=p?m/h*d+"px":null,l.style.margin=p?"0 auto":null)},o=()=>{clearTimeout(s.resized),s.resized=setTimeout(a,50)};ft.call(t,r.container,"enterfullscreen exitfullscreen",l=>{const{target:c}=t.fullscreen;c===r.container&&(!t.isEmbed&&N.empty(t.config.ratio)||(a(),(l.type==="enterfullscreen"?ft:Du).call(t,window,"resize",o)))})}),Me(this,"media",()=>{const{player:t}=this,{elements:i}=t;if(ft.call(t,t.media,"timeupdate seeking seeked",s=>ve.timeUpdate.call(t,s)),ft.call(t,t.media,"durationchange loadeddata loadedmetadata",s=>ve.durationUpdate.call(t,s)),ft.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),ft.call(t,t.media,"progress playing seeking seeked",s=>ve.updateProgress.call(t,s)),ft.call(t,t.media,"volumechange",s=>ve.updateVolume.call(t,s)),ft.call(t,t.media,"playing play pause ended emptied timeupdate",s=>wt.checkPlaying.call(t,s)),ft.call(t,t.media,"waiting canplay seeked playing",s=>wt.checkLoading.call(t,s)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const s=ei.call(t,`.${t.config.classNames.video}`);if(!N.element(s))return;ft.call(t,i.container,"click",a=>{([i.container,s].includes(a.target)||s.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(a,t.restart,"restart"),this.proxy(a,()=>{Qn(t.play())},"play")):this.proxy(a,()=>{Qn(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&ft.call(t,i.wrapper,"contextmenu",s=>{s.preventDefault()},!1),ft.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),ft.call(t,t.media,"ratechange",()=>{ve.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),ft.call(t,t.media,"qualitychange",s=>{ve.updateSetting.call(t,"quality",null,s.detail.quality)}),ft.call(t,t.media,"ready qualitychange",()=>{ve.setDownloadUrl.call(t)});const r=t.config.events.concat(["keyup","keydown"]).join(" ");ft.call(t,t.media,r,s=>{let{detail:a={}}=s;s.type==="error"&&(a=t.media.error),We.call(t,i.container,s.type,!0,a)})}),Me(this,"proxy",(t,i,r)=>{const{player:s}=this,a=s.config.listeners[r];let o=!0;N.function(a)&&(o=a.call(s,t)),o!==!1&&N.function(i)&&i.call(s,t)}),Me(this,"bind",(t,i,r,s,a=!0)=>{const{player:o}=this,l=o.config.listeners[s],c=N.function(l);ft.call(o,t,i,d=>this.proxy(d,r,s),a&&!c)}),Me(this,"controls",()=>{const{player:t}=this,{elements:i}=t,r=li.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach(s=>{this.bind(s,"click",()=>{Qn(t.togglePlay())},"play")}),this.bind(i.buttons.restart,"click",t.restart,"restart"),this.bind(i.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(i.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(i.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(i.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(i.buttons.download,"click",()=>{We.call(t,t.media,"download")},"download"),this.bind(i.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(i.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(i.buttons.airplay,"click",t.airplay,"airplay"),this.bind(i.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),ve.toggleMenu.call(t,s)},null,!1),this.bind(i.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),ve.toggleMenu.call(t,s)):ve.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(i.settings.menu,"keydown",s=>{s.key==="Escape"&&ve.toggleMenu.call(t,s)}),this.bind(i.inputs.seek,"mousedown mousemove",s=>{const a=i.progress.getBoundingClientRect(),o=100/a.width*(s.pageX-a.left);s.currentTarget.setAttribute("seek-value",o)}),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const a=s.currentTarget,o="play-on-seeked";if(N.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;t.lastSeekTime=Date.now();const l=a.hasAttribute(o),c=["mouseup","touchend","keyup"].includes(s.type);l&&c?(a.removeAttribute(o),Qn(t.play())):!c&&t.playing&&(a.setAttribute(o,""),t.pause())}),li.isIos){const s=Al.call(t,'input[type="range"]');Array.from(s).forEach(a=>this.bind(a,r,o=>Sy(o.target)))}this.bind(i.inputs.seek,r,s=>{const a=s.currentTarget;let o=a.getAttribute("seek-value");N.empty(o)&&(o=a.value),a.removeAttribute("seek-value"),t.currentTime=o/a.max*t.duration},"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",s=>ve.updateSeekTooltip.call(t,s)),this.bind(i.progress,"mousemove touchmove",s=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.startMove(s)}),this.bind(i.progress,"mouseleave touchend click",()=>{const{previewThumbnails:s}=t;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(i.progress,"mousedown touchstart",s=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.startScrubbing(s)}),this.bind(i.progress,"mouseup touchend",s=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.endScrubbing(s)}),li.isWebKit&&Array.from(Al.call(t,'input[type="range"]')).forEach(s=>{this.bind(s,"input",a=>ve.updateRangeFill.call(t,a.target))}),t.config.toggleInvert&&!N.element(i.display.duration)&&this.bind(i.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,ve.timeUpdate.call(t))}),this.bind(i.inputs.volume,r,s=>{t.volume=s.target.value},"volume"),this.bind(i.controls,"mouseenter mouseleave",s=>{i.controls.hover=!t.touch&&s.type==="mouseenter"}),i.fullscreen&&Array.from(i.fullscreen.children).filter(s=>!s.contains(i.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",a=>{i.controls&&(i.controls.hover=!t.touch&&a.type==="mouseenter")})}),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{i.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(i.controls,"focusin",()=>{const{config:s,timers:a}=t;vt(i.controls,s.classNames.noTransition,!0),wt.toggleControls.call(t,!0),setTimeout(()=>{vt(i.controls,s.classNames.noTransition,!1)},0);const o=this.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout(()=>wt.toggleControls.call(t,!1),o)}),this.bind(i.inputs.volume,"wheel",s=>{const a=s.webkitDirectionInvertedFromDevice,[o,l]=[s.deltaX,-s.deltaY].map(h=>a?-h:h),c=Math.sign(Math.abs(o)>Math.abs(l)?o:l);t.increaseVolume(c/50);const{volume:d}=t.media;(c===1&&d<1||c===-1&&d>0)&&s.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:i}=t,{key:r,type:s,altKey:a,ctrlKey:o,metaKey:l,shiftKey:c}=e,d=s==="keydown",h=d&&r===this.lastKey;if(!(a||o||l||c)&&r){if(d){const u=document.activeElement;if(N.element(u)){const{editable:m}=t.config.selectors,{seek:p}=i.inputs;if(u!==p&&Zs(u,m)||e.key===" "&&Zs(u,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(r)&&(e.preventDefault(),e.stopPropagation()),r){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":h||(f=parseInt(r,10),t.currentTime=t.duration/10*f);break;case" ":case"k":h||Qn(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":h||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":h||t.toggleCaptions();break;case"l":t.loop=!t.loop}r==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=r}else this.lastKey=null;var f}}toggleMenu(e){ve.toggleMenu.call(this.player,e)}}function WR(n,e){return n(e={exports:{}},e.exports),e.exports}var XR=WR(function(n,e){n.exports=function(){var t=function(){},i={},r={},s={};function a(f,u){f=f.push?f:[f];var m,p,v,g=[],y=f.length,_=y;for(m=function(b,w){w.length&&g.push(b),--_||u(g)};y--;)p=f[y],(v=r[p])?m(p,v):(s[p]=s[p]||[]).push(m)}function o(f,u){if(f){var m=s[f];if(r[f]=u,m)for(;m.length;)m[0](f,u),m.splice(0,1)}}function l(f,u){f.call&&(f={success:f}),u.length?(f.error||t)(u):(f.success||t)(f)}function c(f,u,m,p){var v,g,y=document,_=m.async,b=(m.numRetries||0)+1,w=m.before||t,M=f.replace(/[\?|#].*$/,""),T=f.replace(/^(css|img)!/,"");p=p||0,/(^css!|\.css$)/.test(M)?((g=y.createElement("link")).rel="stylesheet",g.href=T,(v="hideFocus"in g)&&g.relList&&(v=0,g.rel="preload",g.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(M)?(g=y.createElement("img")).src=T:((g=y.createElement("script")).src=f,g.async=_===void 0||_),g.onload=g.onerror=g.onbeforeload=function(E){var S=E.type[0];if(v)try{g.sheet.cssText.length||(S="e")}catch(x){x.code!=18&&(S="e")}if(S=="e"){if((p+=1)<b)return c(f,u,m,p)}else if(g.rel=="preload"&&g.as=="style")return g.rel="stylesheet";u(f,S,E.defaultPrevented)},w(f,g)!==!1&&y.head.appendChild(g)}function d(f,u,m){var p,v,g=(f=f.push?f:[f]).length,y=g,_=[];for(p=function(b,w,M){if(w=="e"&&_.push(b),w=="b"){if(!M)return;_.push(b)}--g||u(_)},v=0;v<y;v++)c(f[v],p,m)}function h(f,u,m){var p,v;if(u&&u.trim&&(p=u),v=(p?m:u)||{},p){if(p in i)throw"LoadJS";i[p]=!0}function g(y,_){d(f,function(b){l(v,b),y&&l({success:y,error:_},b),o(p,b)},v)}if(v.returnPromise)return new Promise(g);g()}return h.ready=function(f,u){return a(f,function(m){l(u,m)}),h},h.done=function(f){o(f,[])},h.reset=function(){i={},r={},s={}},h.isDefined=function(f){return f in i},h}()});function sp(n){return new Promise((e,t)=>{XR(n,{success:e,error:t})})}function $R(n){return N.empty(n)?null:N.number(Number(n))?n:n.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:n}function qR(n){const e=n.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function Dl(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,We.call(this,this.media,n?"play":"pause"))}const ap={setup(){const n=this;vt(n.elements.wrapper,n.config.classNames.embed,!0),n.options.speed=n.config.speed.options,so.call(n),N.object(window.Vimeo)?ap.ready.call(n):sp(n.config.urls.vimeo.sdk).then(()=>{ap.ready.call(n)}).catch(e=>{n.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const n=this,e=n.config.vimeo,{premium:t,referrerPolicy:i,...r}=e;let s=n.media.getAttribute("src"),a="";N.empty(s)?(s=n.media.getAttribute(n.config.attributes.embed.id),a=n.media.getAttribute(n.config.attributes.embed.hash)):a=qR(s);const o=a?{h:a}:{};t&&Object.assign(r,{controls:!1,sidedock:!1});const l=Fy({loop:n.config.loop.active,autoplay:n.autoplay,muted:n.muted,gesture:"media",playsinline:n.config.playsinline,...o,...r}),c=$R(s),d=Ge("iframe"),h=tp(n.config.urls.vimeo.iframe,c,l);if(d.setAttribute("src",h),d.setAttribute("allowfullscreen",""),d.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),N.empty(i)||d.setAttribute("referrerPolicy",i),t||!e.customControls)d.setAttribute("data-poster",n.poster),n.media=Ru(d,n.media);else{const y=Ge("div",{class:n.config.classNames.embedContainer,"data-poster":n.poster});y.appendChild(d),n.media=Ru(y,n.media)}e.customControls||Ll(tp(n.config.urls.vimeo.api,h)).then(y=>{!N.empty(y)&&y.thumbnail_url&&wt.setPoster.call(n,y.thumbnail_url).catch(()=>{})}),n.embed=new window.Vimeo.Player(d,{autopause:n.config.autopause,muted:n.muted}),n.media.paused=!0,n.media.currentTime=0,n.supported.ui&&n.embed.disableTextTrack(),n.media.play=()=>(Dl.call(n,!0),n.embed.play()),n.media.pause=()=>(Dl.call(n,!1),n.embed.pause()),n.media.stop=()=>{n.pause(),n.currentTime=0};let{currentTime:f}=n.media;Object.defineProperty(n.media,"currentTime",{get:()=>f,set(y){const{embed:_,media:b,paused:w,volume:M}=n,T=w&&!_.hasPlayed;b.seeking=!0,We.call(n,b,"seeking"),Promise.resolve(T&&_.setVolume(0)).then(()=>_.setCurrentTime(y)).then(()=>T&&_.pause()).then(()=>T&&_.setVolume(M)).catch(()=>{})}});let u=n.config.speed.selected;Object.defineProperty(n.media,"playbackRate",{get:()=>u,set(y){n.embed.setPlaybackRate(y).then(()=>{u=y,We.call(n,n.media,"ratechange")}).catch(()=>{n.options.speed=[1]})}});let{volume:m}=n.config;Object.defineProperty(n.media,"volume",{get:()=>m,set(y){n.embed.setVolume(y).then(()=>{m=y,We.call(n,n.media,"volumechange")})}});let{muted:p}=n.config;Object.defineProperty(n.media,"muted",{get:()=>p,set(y){const _=!!N.boolean(y)&&y;n.embed.setMuted(!!_||n.config.muted).then(()=>{p=_,We.call(n,n.media,"volumechange")})}});let v,{loop:g}=n.config;Object.defineProperty(n.media,"loop",{get:()=>g,set(y){const _=N.boolean(y)?y:n.config.loop.active;n.embed.setLoop(_).then(()=>{g=_})}}),n.embed.getVideoUrl().then(y=>{v=y,ve.setDownloadUrl.call(n)}).catch(y=>{this.debug.warn(y)}),Object.defineProperty(n.media,"currentSrc",{get:()=>v}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration}),Promise.all([n.embed.getVideoWidth(),n.embed.getVideoHeight()]).then(y=>{const[_,b]=y;n.embed.ratio=Dy(_,b),so.call(this)}),n.embed.setAutopause(n.config.autopause).then(y=>{n.config.autopause=y}),n.embed.getVideoTitle().then(y=>{n.config.title=y,wt.setTitle.call(this)}),n.embed.getCurrentTime().then(y=>{f=y,We.call(n,n.media,"timeupdate")}),n.embed.getDuration().then(y=>{n.media.duration=y,We.call(n,n.media,"durationchange")}),n.embed.getTextTracks().then(y=>{n.media.textTracks=y,pt.setup.call(n)}),n.embed.on("cuechange",({cues:y=[]})=>{const _=y.map(b=>UR(b.text));pt.updateCues.call(n,_)}),n.embed.on("loaded",()=>{n.embed.getPaused().then(y=>{Dl.call(n,!y),y||We.call(n,n.media,"playing")}),N.element(n.embed.element)&&n.supported.ui&&n.embed.element.setAttribute("tabindex",-1)}),n.embed.on("bufferstart",()=>{We.call(n,n.media,"waiting")}),n.embed.on("bufferend",()=>{We.call(n,n.media,"playing")}),n.embed.on("play",()=>{Dl.call(n,!0),We.call(n,n.media,"playing")}),n.embed.on("pause",()=>{Dl.call(n,!1)}),n.embed.on("timeupdate",y=>{n.media.seeking=!1,f=y.seconds,We.call(n,n.media,"timeupdate")}),n.embed.on("progress",y=>{n.media.buffered=y.percent,We.call(n,n.media,"progress"),parseInt(y.percent,10)===1&&We.call(n,n.media,"canplaythrough"),n.embed.getDuration().then(_=>{_!==n.media.duration&&(n.media.duration=_,We.call(n,n.media,"durationchange"))})}),n.embed.on("seeked",()=>{n.media.seeking=!1,We.call(n,n.media,"seeked")}),n.embed.on("ended",()=>{n.media.paused=!0,We.call(n,n.media,"ended")}),n.embed.on("error",y=>{n.media.error=y,We.call(n,n.media,"error")}),e.customControls&&setTimeout(()=>wt.build.call(n),0)}};function YR(n){return N.empty(n)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n}function Il(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,We.call(this,this.media,n?"play":"pause"))}function jR(n){return n.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const ku={setup(){if(vt(this.elements.wrapper,this.config.classNames.embed,!0),N.object(window.YT)&&N.function(window.YT.Player))ku.ready.call(this);else{const n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{N.function(n)&&n(),ku.ready.call(this)},sp(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(n){Ll(tp(this.config.urls.youtube.api,n)).then(e=>{if(N.object(e)){const{title:t,height:i,width:r}=e;this.config.title=t,wt.setTitle.call(this),this.embed.ratio=Dy(r,i)}so.call(this)}).catch(()=>{so.call(this)})},ready(){const n=this,e=n.config.youtube,t=n.media&&n.media.getAttribute("id");if(!N.empty(t)&&t.startsWith("youtube-"))return;let i=n.media.getAttribute("src");N.empty(i)&&(i=n.media.getAttribute(this.config.attributes.embed.id));const r=YR(i),s=Ge("div",{id:IR(n.provider),"data-poster":e.customControls?n.poster:void 0});if(n.media=Ru(s,n.media),e.customControls){const a=o=>`https://i.ytimg.com/vi/${r}/${o}default.jpg`;Nu(a("maxres"),121).catch(()=>Nu(a("sd"),121)).catch(()=>Nu(a("hq"))).then(o=>wt.setPoster.call(n,o.src)).then(o=>{o.includes("maxres")||(n.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}n.embed=new window.YT.Player(n.media,{videoId:r,host:jR(e),playerVars:Ht({},{autoplay:n.config.autoplay?1:0,hl:n.config.hl,controls:n.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:n.config.playsinline&&!n.config.fullscreen.iosNative?1:0,cc_load_policy:n.captions.active?1:0,cc_lang_pref:n.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(a){if(!n.media.error){const o=a.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[o]||"An unknown error occurred";n.media.error={code:o,message:l},We.call(n,n.media,"error")}},onPlaybackRateChange(a){const o=a.target;n.media.playbackRate=o.getPlaybackRate(),We.call(n,n.media,"ratechange")},onReady(a){if(N.function(n.media.play))return;const o=a.target;ku.getTitle.call(n,r),n.media.play=()=>{Il.call(n,!0),o.playVideo()},n.media.pause=()=>{Il.call(n,!1),o.pauseVideo()},n.media.stop=()=>{o.stopVideo()},n.media.duration=o.getDuration(),n.media.paused=!0,n.media.currentTime=0,Object.defineProperty(n.media,"currentTime",{get:()=>Number(o.getCurrentTime()),set(h){n.paused&&!n.embed.hasPlayed&&n.embed.mute(),n.media.seeking=!0,We.call(n,n.media,"seeking"),o.seekTo(h)}}),Object.defineProperty(n.media,"playbackRate",{get:()=>o.getPlaybackRate(),set(h){o.setPlaybackRate(h)}});let{volume:l}=n.config;Object.defineProperty(n.media,"volume",{get:()=>l,set(h){l=h,o.setVolume(100*l),We.call(n,n.media,"volumechange")}});let{muted:c}=n.config;Object.defineProperty(n.media,"muted",{get:()=>c,set(h){const f=N.boolean(h)?h:c;c=f,o[f?"mute":"unMute"](),o.setVolume(100*l),We.call(n,n.media,"volumechange")}}),Object.defineProperty(n.media,"currentSrc",{get:()=>o.getVideoUrl()}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration});const d=o.getAvailablePlaybackRates();n.options.speed=d.filter(h=>n.config.speed.options.includes(h)),n.supported.ui&&e.customControls&&n.media.setAttribute("tabindex",-1),We.call(n,n.media,"timeupdate"),We.call(n,n.media,"durationchange"),clearInterval(n.timers.buffering),n.timers.buffering=setInterval(()=>{n.media.buffered=o.getVideoLoadedFraction(),(n.media.lastBuffered===null||n.media.lastBuffered<n.media.buffered)&&We.call(n,n.media,"progress"),n.media.lastBuffered=n.media.buffered,n.media.buffered===1&&(clearInterval(n.timers.buffering),We.call(n,n.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>wt.build.call(n),50)},onStateChange(a){const o=a.target;switch(clearInterval(n.timers.playing),n.media.seeking&&[1,2].includes(a.data)&&(n.media.seeking=!1,We.call(n,n.media,"seeked")),a.data){case-1:We.call(n,n.media,"timeupdate"),n.media.buffered=o.getVideoLoadedFraction(),We.call(n,n.media,"progress");break;case 0:Il.call(n,!1),n.media.loop?(o.stopVideo(),o.playVideo()):We.call(n,n.media,"ended");break;case 1:e.customControls&&!n.config.autoplay&&n.media.paused&&!n.embed.hasPlayed?n.media.pause():(Il.call(n,!0),We.call(n,n.media,"playing"),n.timers.playing=setInterval(()=>{We.call(n,n.media,"timeupdate")},50),n.media.duration!==o.getDuration()&&(n.media.duration=o.getDuration(),We.call(n,n.media,"durationchange")));break;case 2:n.muted||n.embed.unMute(),Il.call(n,!1);break;case 3:We.call(n,n.media,"waiting")}We.call(n,n.elements.container,"statechange",!1,{code:a.data})}}})}},zy={setup(){this.media?(vt(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),vt(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&vt(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Ge("div",{class:this.config.classNames.video}),Ty(this.media,this.elements.wrapper),this.elements.poster=Ge("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?rs.setup.call(this):this.isYouTube?ku.setup.call(this):this.isVimeo&&ap.setup.call(this)):this.debug.warn("No media element found!")}};class KR{constructor(e){Me(this,"load",()=>{this.enabled&&(N.object(window.google)&&N.object(window.google.ima)?this.ready():sp(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Me(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Me(this,"setupIMA",()=>{this.elements.container=Ge("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),Me(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=t.offsetWidth,i.linearAdSlotHeight=t.offsetHeight,i.nonLinearAdSlotWidth=t.offsetWidth,i.nonLinearAdSlotHeight=t.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(i){this.onAdError(i)}}),Me(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const i=Ou(Math.max(this.manager.getRemainingTime(),0)),r=`${ci.get("advertisement",this.player.config)} - ${i}`;this.elements.container.setAttribute("data-badge-text",r)},100)}),Me(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=t.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r=>this.onAdError(r)),Object.keys(google.ima.AdEvent.Type).forEach(r=>{this.manager.addEventListener(google.ima.AdEvent.Type[r],s=>this.onAdEvent(s))}),this.trigger("loaded")}),Me(this,"addCuePoints",()=>{N.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const i=this.player.elements.progress;if(N.element(i)){const r=100/this.player.duration*t,s=Ge("span",{class:this.player.config.classNames.cues});s.style.left=`${r.toString()}%`,i.appendChild(s)}}})}),Me(this,"onAdEvent",t=>{const{container:i}=this.player.elements,r=t.getAd(),s=t.getAdData();switch((a=>{We.call(this.player,this.player.media,`ads${a.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=i.offsetWidth,r.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),Me(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),Me(this,"listeners",()=>{const{container:t}=this.player.elements;let i;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{i=this.player.currentTime}),this.player.on("seeked",()=>{const r=this.player.currentTime;N.empty(this.cuePoints)||this.cuePoints.forEach((s,a)=>{i<s&&s<r&&(this.manager.discardAdBreak(),this.cuePoints.splice(a,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),Me(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(i){this.onAdError(i)}}).catch(()=>{})}),Me(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,Qn(this.player.media.play())}),Me(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Me(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Me(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Me(this,"trigger",(t,...i)=>{const r=this.events[t];N.array(r)&&r.forEach(s=>{N.function(s)&&s.apply(this,i)})}),Me(this,"on",(t,i)=>(N.array(this.events[t])||(this.events[t]=[]),this.events[t].push(i),this)),Me(this,"startSafetyTimer",(t,i)=>{this.player.debug.log(`Safety timer invoked from: ${i}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),Me(this,"clearSafetyTimer",t=>{N.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,i)=>{this.on("loaded",t),this.on("error",i)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!N.empty(e.publisherId)||N.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return N.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${Fy({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function Vy(n=0,e=0,t=255){return Math.min(Math.max(n,e),t)}const ZR=n=>{const e=[];return n.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const i={};t.split(/\r\n|\n|\r/).forEach(r=>{if(N.number(i.startTime)){if(!N.empty(r.trim())&&N.empty(i.text)){const s=r.trim().split("#xywh=");[i.text]=s,s[1]&&([i.x,i.y,i.w,i.h]=s[1].split(","))}}else{const s=r.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(i.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,i.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),i.text&&e.push(i)}),e},Hy=(n,e)=>{const t={};return n>e.width/e.height?(t.width=e.width,t.height=1/n*e.width):(t.height=e.height,t.width=n*e.height),t};class op{constructor(e){Me(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Me(this,"getThumbnails",()=>new Promise(t=>{const{src:i}=this.player.config.previewThumbnails;if(N.empty(i))throw new Error("Missing previewThumbnails.src config attribute");const r=()=>{this.thumbnails.sort((s,a)=>s.height-a.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(N.function(i))i(s=>{this.thumbnails=s,r()});else{const s=(N.string(i)?[i]:i).map(a=>this.getThumbnail(a));Promise.all(s).then(r)}})),Me(this,"getThumbnail",t=>new Promise(i=>{Ll(t).then(r=>{const s={frames:ZR(r),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const a=new Image;a.onload=()=>{s.height=a.naturalHeight,s.width=a.naturalWidth,this.thumbnails.push(s),i()},a.src=s.urlPrefix+s.frames[0].text})})),Me(this,"startMove",t=>{if(this.loaded&&N.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var i,r;const s=this.player.elements.progress.getBoundingClientRect(),a=100/s.width*(t.pageX-s.left);this.seekTime=this.player.media.duration*(a/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=Ou(this.seekTime);const o=(i=this.player.config.markers)===null||i===void 0||(r=i.points)===null||r===void 0?void 0:r.find(({time:l})=>l===Math.round(this.seekTime));o&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${o.label}<br>`)}this.showImageAtCurrentTime()}}),Me(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Me(this,"startScrubbing",t=>{(N.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Me(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Qh.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Me(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Me(this,"render",()=>{this.elements.thumb.container=Ge("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=Ge("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=Ge("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=Ge("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),N.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=Ge("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Me(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Me(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),i=t>=0;let r=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((s,a)=>{this.loadedImages.includes(s.frames[t].text)&&(r=a)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(r)))}),Me(this,"loadImage",(t=0)=>{const i=this.showingThumb,r=this.thumbnails[t],{urlPrefix:s}=r,a=r.frames[i],o=r.frames[i].text,l=s+o;if(this.currentImageElement&&this.currentImageElement.dataset.filename===o)this.showImage(this.currentImageElement,a,t,i,o,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const c=new Image;c.src=l,c.dataset.index=i,c.dataset.filename=o,this.showingThumbFilename=o,this.player.debug.log(`Loading image: ${l}`),c.onload=()=>this.showImage(c,a,t,i,o,!0),this.loadingImage=c,this.removeOldImages(c)}}),Me(this,"showImage",(t,i,r,s,a,o=!0)=>{this.player.debug.log(`Showing thumb: ${a}. num: ${s}. qual: ${r}. newimg: ${o}`),this.setImageSizeAndOffset(t,i),o&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(r,t,i,a))}),Me(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(i=>{if(i.tagName.toLowerCase()!=="img")return;const r=this.usingSprites?500:1e3;if(i.dataset.index!==t.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(i),this.player.debug.log(`Removing thumb: ${i.dataset.filename}`)},r)}})}),Me(this,"preloadNearby",(t,i=!0)=>new Promise(r=>{setTimeout(()=>{const s=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===s){let a;a=i?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let o=!1;a.forEach(l=>{const c=l.text;if(c!==s&&!this.loadedImages.includes(c)){o=!0,this.player.debug.log(`Preloading thumb filename: ${c}`);const{urlPrefix:d}=this.thumbnails[0],h=d+c,f=new Image;f.src=h,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${c}`),this.loadedImages.includes(c)||this.loadedImages.push(c),r()}}}),o||r()}},300)})),Me(this,"getHigherQuality",(t,i,r,s)=>{if(t<this.thumbnails.length-1){let a=i.naturalHeight;this.usingSprites&&(a=r.h),a<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(t+1))},300)}}),Me(this,"toggleThumbContainer",(t=!1,i=!1)=>{const r=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(r,t),!t&&i&&(this.showingThumb=null,this.showingThumbFilename=null)}),Me(this,"toggleScrubbingContainer",(t=!1)=>{const i=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(i,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),Me(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Me(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const i=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${i}px`}else if(t.clientHeight<20&&t.clientWidth>20){const i=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${i}px`}}else{const i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${i}px`}this.setThumbContainerPos()}),Me(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),i=this.player.elements.container.getBoundingClientRect(),{container:r}=this.elements.thumb,s=i.left-t.left+10,a=i.right-t.left-r.clientWidth-10,o=this.mousePosX-t.left-r.clientWidth/2,l=Vy(o,s,a);r.style.left=`${l}px`,r.style.setProperty("--preview-arrow-offset",o-l+"px")}),Me(this,"setScrubbingContainerSize",()=>{const{width:t,height:i}=Hy(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${i}px`}),Me(this,"setImageSizeAndOffset",(t,i)=>{if(!this.usingSprites)return;const r=this.thumbContainerHeight/i.h;t.style.height=t.naturalHeight*r+"px",t.style.width=t.naturalWidth*r+"px",t.style.left=`-${i.x*r}px`,t.style.top=`-${i.y*r}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=Hy(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const lp={insertElements(n,e){N.string(e)?Ey(n,this.media,{src:e}):N.array(e)&&e.forEach(t=>{Ey(n,this.media,t)})},change(n){My(n,"sources.length")?(rs.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],wr(this.media),this.media=null,N.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:t}=n,[{provider:i=ss.html5,src:r}]=e,s=i==="html5"?t:"div",a=i==="html5"?{}:{src:r};Object.assign(this,{provider:i,type:t,supported:Gt.check(t,i,this.config.playsinline),media:Ge(s,a)}),this.elements.container.appendChild(this.media),N.boolean(n.autoplay)&&(this.config.autoplay=n.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),N.empty(n.poster)||(this.poster=n.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),wt.addStyleHook.call(this),this.isHTML5&&lp.insertElements.call(this,"source",e),this.config.title=n.title,zy.setup.call(this),this.isHTML5&&Object.keys(n).includes("tracks")&&lp.insertElements.call(this,"track",n.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&wt.build.call(this),this.isHTML5&&this.media.load(),N.empty(n.previewThumbnails)||(Object.assign(this.config.previewThumbnails,n.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new op(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Ol{constructor(e,t){if(Me(this,"play",()=>N.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>Qn(this.media.play())),this.media.play()):null),Me(this,"pause",()=>this.playing&&N.function(this.media.pause)?this.media.pause():null),Me(this,"togglePlay",o=>(N.boolean(o)?o:!this.playing)?this.play():this.pause()),Me(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):N.function(this.media.stop)&&this.media.stop()}),Me(this,"restart",()=>{this.currentTime=0}),Me(this,"rewind",o=>{this.currentTime-=N.number(o)?o:this.config.seekTime}),Me(this,"forward",o=>{this.currentTime+=N.number(o)?o:this.config.seekTime}),Me(this,"increaseVolume",o=>{const l=this.media.muted?0:this.volume;this.volume=l+(N.number(o)?o:0)}),Me(this,"decreaseVolume",o=>{this.increaseVolume(-o)}),Me(this,"airplay",()=>{Gt.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Me(this,"toggleControls",o=>{if(this.supported.ui&&!this.isAudio){const l=Lu(this.elements.container,this.config.classNames.hideControls),c=o===void 0?void 0:!o,d=vt(this.elements.container,this.config.classNames.hideControls,c);if(d&&N.array(this.config.controls)&&this.config.controls.includes("settings")&&!N.empty(this.config.settings)&&ve.toggleMenu.call(this,!1),d!==l){const h=d?"controlshidden":"controlsshown";We.call(this,this.media,h)}return!d}return!1}),Me(this,"on",(o,l)=>{ft.call(this,this.elements.container,o,l)}),Me(this,"once",(o,l)=>{Qh.call(this,this.elements.container,o,l)}),Me(this,"off",(o,l)=>{Du(this.elements.container,o,l)}),Me(this,"destroy",(o,l=!1)=>{if(!this.ready)return;const c=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(wr(this.elements.buttons.play),wr(this.elements.captions),wr(this.elements.controls),wr(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),N.function(o)&&o()):(RR.call(this),rs.cancelRequests.call(this),Ru(this.elements.original,this.elements.container),We.call(this,this.elements.original,"destroyed",!0),N.function(o)&&o.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(wt.toggleNativeControls.call(this,!0),c()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&N.function(this.embed.destroy)&&this.embed.destroy(),c()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(c),setTimeout(c,200))}),Me(this,"supports",o=>Gt.mime.call(this,o)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Gt.touch,this.media=e,N.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||N.nodeList(this.media)||N.array(this.media))&&(this.media=this.media[0]),this.config=Ht({},By,Ol.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new HR(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Gt),N.nullOrUndefined(this.media)||!N.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!Gt.check().api)return void this.debug.error("Setup failed: no support");const i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;const r=this.media.tagName.toLowerCase();let s=null,a=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),N.element(s)){if(a=Uy(s.getAttribute("src")),this.provider=VR(a.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",a.search.length){const o=["1","true"];o.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),o.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=o.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(N.empty(this.provider)||!Object.values(ss).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=np.video;break;case"video":case"audio":this.type=r,this.provider=ss.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Gt.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new GR(this),this.storage=new Rl(this),this.media.plyr=this,N.element(this.elements.container)||(this.elements.container=Ge("div"),Ty(this.media,this.elements.container)),wt.migrateStyles.call(this),wt.addStyleHook.call(this),zy.setup.call(this),this.config.debug&&ft.call(this,this.elements.container,this.config.events.join(" "),o=>{this.debug.log(`event: ${o.type}`)}),this.fullscreen=new In(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&wt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new KR(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>Qn(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new op(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===ss.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===ss.youtube}get isVimeo(){return this.provider===ss.vimeo}get isVideo(){return this.type===np.video}get isAudio(){return this.type===np.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const t=N.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return N.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=N.number(t)&&t!==1/0?t:0;return e||i}set volume(e){let t=e;N.string(t)&&(t=Number(t)),N.number(t)||(t=this.storage.get("volume")),N.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!N.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;N.boolean(t)||(t=this.storage.get("muted")),N.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;N.number(e)&&(t=e),N.number(t)||(t=this.storage.get("speed")),N.number(t)||(t=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:r}=this;t=Vy(t,i,r),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,i=this.options.quality;if(!i.length)return;let r=[!N.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(N.number),s=!0;if(!i.includes(r)){const a=Cy(i,r);this.debug.warn(`Unsupported quality option: ${r}, using ${a} instead`),r=a,s=!1}t.selected=r,this.media.quality=r,s&&this.storage.set({quality:r})}get quality(){return this.media.quality}set loop(e){const t=N.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(e){lp.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return N.url(e)?e:this.source}set download(e){N.url(e)&&(this.config.urls.download=e,ve.setDownloadUrl.call(this))}set poster(e){this.isVideo?wt.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Iu(ep.call(this));return N.array(e)?e.join(":"):e}set ratio(e){this.isVideo?N.string(e)&&Ly(e)?(this.config.ratio=Iu(e),so.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=N.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){pt.toggle.call(this,e,!1)}set currentTrack(e){pt.set.call(this,e,!1),pt.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){pt.setLanguage.call(this,e,!1)}get language(){return(pt.getCurrentTrack.call(this)||{}).language}set pip(e){if(!Gt.pip)return;const t=N.boolean(e)?e:!this.pip;N.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?ip.active:ip.inactive),N.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return Gt.pip?N.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===ip.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new op(this))}static supported(e,t){return Gt.check(e,t)}static loadSprite(e,t){return Ny(e,t)}static setup(e,t={}){let i=null;return N.string(e)?i=Array.from(document.querySelectorAll(e)):N.nodeList(e)?i=Array.from(e):N.array(e)&&(i=e.filter(N.element)),N.empty(i)?null:i.map(r=>new Ol(r,t))}}Ol.defaults=ER(By);function QR(){document.querySelectorAll(".plyr_component").forEach(e=>{const t=e.querySelector(".plyr_video"),i=new Ol(t,{controls:["play","progress","current-time","mute","fullscreen"],resetOnEnd:!0});e.querySelector(".plyr_cover").addEventListener("click",()=>{i.play()}),i.on("ended",()=>{e.classList.remove("hide-cover")}),i.on("play",()=>{document.querySelectorAll(".plyr_component").forEach(o=>{o.classList.remove("hide-cover")}),e.classList.add("hide-cover");const a=document.querySelector(".plyr--playing:not(.plyr_component) .plyr_pause-trigger");a&&a.click()}),e.querySelector(".plyr_pause-trigger").addEventListener("click",()=>{i.pause()}),i.on("ended",()=>{i.fullscreen.active&&i.fullscreen.exit()}),i.on("enterfullscreen",()=>{e.classList.add("contain-video")}),i.on("exitfullscreen",()=>{e.classList.remove("contain-video")})})}const JR=()=>{const n=document.querySelector(".page_load_trigger"),e=()=>{document.querySelectorAll("[data-home-split]").forEach(r=>{Jl(r,"lines")})},t=()=>{Ce.set("[data-home-split='hero-text'] .line",{y:105}),Ce.set("[data-home-split='hero-pg'] .line",{y:100}),Ce.set("[data-home-load='hero-scroll']",{opacity:0,y:50}),Ce.set("[data-home-load='hero-vid']",{opacity:.8,y:"14%",scale:.9})},i=()=>{Ce.timeline().to("[data-home-split='hero-text'] .line",{y:0,duration:1.4,stagger:.1,ease:"expo.out"}).to("[data-home-split='hero-pg'] .line",{y:0,duration:1.4,stagger:.01,ease:"expo.out"},"-=1.4").to("[data-home-load='hero-scroll']",{opacity:1,y:0,duration:1,ease:"expo.out"},"-=0.9").to("[data-home-load='hero-vid']",{opacity:1,y:0,duration:1.2,scale:1,ease:"expo.out"},"-=1"),console.log("Home page load animation triggered")};e(),t(),n.addEventListener("click",()=>{i()})},eL=()=>{const n=document.querySelector(".page_load_trigger"),e=()=>{document.querySelectorAll("[data-about-split]").forEach(r=>{Jl(r,"lines")})},t=()=>{Ce.set("[data-about-split='hero-pg'] .line",{y:100}),Ce.set("[data-about-load='hero-toggle']",{y:"100%"}),Ce.set("[data-about-load='hero-canvas']",{opacity:0})},i=()=>{Ce.timeline().to("[data-about-split='hero-pg'] .line",{y:0,duration:1.6,stagger:.06,ease:"expo.out"},"-=0.2").to("[data-about-load='hero-toggle']",{y:"0%",duration:1.4,ease:"expo.out"},"-=1").to("[data-about-load='hero-canvas']",{opacity:1,duration:4,ease:"expo.out"},"-=1.2"),console.log("About page load animation triggered")};e(),t(),n.addEventListener("click",()=>{i()})},tL=()=>window.location.pathname==="/",iL=()=>window.location.pathname==="/work",nL=()=>window.location.pathname==="/about",rL=()=>window.location.pathname==="/contact";window.addEventListener("DOMContentLoaded",()=>{new Vb("data-a-split"),qP(),qb(),cw(),Ow(),Mv(),fC(),FP(),BP(),zP(),WP(),XP(),$P(),QR(),tL()&&JR(),iL()&&UP(),nL()&&(eL(),GP(),ay()),rL()&&ay()}),console.log("Hello Balky!")});
